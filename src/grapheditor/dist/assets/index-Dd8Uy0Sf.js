(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var kt=Object.defineProperty,Bt=(r,e,t)=>e in r?kt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,u=(r,e,t)=>Bt(r,typeof e!="symbol"?e+"":e,t);class mxPoint{constructor(e,t){this.x=e??0,this.y=t??0}equals(e){return e!=null&&e.x==this.x&&e.y==this.y}clone(){return cloneObj(this)}}function cloneObj(r,e,t){t=t??!1;var i=null;if(r!=null&&typeof r.constructor=="function"){i=new r.constructor;for(var n in r)n!="mxObjectId"&&e==null&&(!t&&typeof r[n]=="object"?i[n]=cloneObj(r[n]):i[n]=r[n])}return i}class mxRectangle extends mxPoint{constructor(e,t,i,n){super(e,t),this.width=i??0,this.height=n??0}setRect(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}add(e){if(e!=null){var t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.y=i,this.width=n-t,this.height=s-i}}intersect(e){if(e!=null){var t=this.x+this.width,i=e.x+e.width,n=this.y+this.height,s=e.y+e.height;this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.width=Math.min(t,i)-this.x,this.height=Math.min(n,s)-this.y}}grow(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this}getPoint(){return new mxPoint(this.x,this.y)}rotate90(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e;var t=this.width;this.width=this.height,this.height=t}equals(e){return e!=null&&e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height}static fromRectangle(e){return new mxRectangle(e.x,e.y,e.width,e.height)}}let mxConstants$1=class{};u(mxConstants$1,"DEFAULT_HOTSPOT",.3),u(mxConstants$1,"MIN_HOTSPOT_SIZE",8),u(mxConstants$1,"MAX_HOTSPOT_SIZE",0),u(mxConstants$1,"RENDERING_HINT_EXACT","exact"),u(mxConstants$1,"RENDERING_HINT_FASTER","faster"),u(mxConstants$1,"RENDERING_HINT_FASTEST","fastest"),u(mxConstants$1,"DIALECT_SVG","svg"),u(mxConstants$1,"DIALECT_VML","vml"),u(mxConstants$1,"DIALECT_MIXEDHTML","mixedHtml"),u(mxConstants$1,"DIALECT_PREFERHTML","preferHtml"),u(mxConstants$1,"DIALECT_STRICTHTML","strictHtml"),u(mxConstants$1,"NS_SVG","http://www.w3.org/2000/svg"),u(mxConstants$1,"NS_XHTML","http://www.w3.org/1999/xhtml"),u(mxConstants$1,"NS_XLINK","http://www.w3.org/1999/xlink"),u(mxConstants$1,"SHADOWCOLOR","gray"),u(mxConstants$1,"VML_SHADOWCOLOR","gray"),u(mxConstants$1,"SHADOW_OFFSET_X",2),u(mxConstants$1,"SHADOW_OFFSET_Y",3),u(mxConstants$1,"SHADOW_OPACITY",1),u(mxConstants$1,"NODETYPE_ELEMENT",1),u(mxConstants$1,"NODETYPE_ATTRIBUTE",2),u(mxConstants$1,"NODETYPE_TEXT",3),u(mxConstants$1,"NODETYPE_CDATA",4),u(mxConstants$1,"NODETYPE_ENTITY_REFERENCE",5),u(mxConstants$1,"NODETYPE_ENTITY",6),u(mxConstants$1,"NODETYPE_PROCESSING_INSTRUCTION",7),u(mxConstants$1,"NODETYPE_COMMENT",8),u(mxConstants$1,"NODETYPE_DOCUMENT",9),u(mxConstants$1,"NODETYPE_DOCUMENTTYPE",10),u(mxConstants$1,"NODETYPE_DOCUMENT_FRAGMENT",11),u(mxConstants$1,"NODETYPE_NOTATION",12),u(mxConstants$1,"TOOLTIP_VERTICAL_OFFSET",16),u(mxConstants$1,"DEFAULT_VALID_COLOR","#00FF00"),u(mxConstants$1,"DEFAULT_INVALID_COLOR","#FF0000"),u(mxConstants$1,"OUTLINE_HIGHLIGHT_COLOR","#00FF00"),u(mxConstants$1,"OUTLINE_HIGHLIGHT_STROKEWIDTH",5),u(mxConstants$1,"HIGHLIGHT_STROKEWIDTH",3),u(mxConstants$1,"HIGHLIGHT_SIZE",2),u(mxConstants$1,"HIGHLIGHT_OPACITY",100),u(mxConstants$1,"CURSOR_MOVABLE_VERTEX","move"),u(mxConstants$1,"CURSOR_MOVABLE_EDGE","move"),u(mxConstants$1,"CURSOR_LABEL_HANDLE","default"),u(mxConstants$1,"CURSOR_TERMINAL_HANDLE","pointer"),u(mxConstants$1,"CURSOR_BEND_HANDLE","crosshair"),u(mxConstants$1,"CURSOR_VIRTUAL_BEND_HANDLE","crosshair"),u(mxConstants$1,"CURSOR_CONNECT","pointer"),u(mxConstants$1,"HIGHLIGHT_COLOR","#00FF00"),u(mxConstants$1,"CONNECT_TARGET_COLOR","#0000FF"),u(mxConstants$1,"INVALID_CONNECT_TARGET_COLOR","#FF0000"),u(mxConstants$1,"DROP_TARGET_COLOR","#0000FF"),u(mxConstants$1,"VALID_COLOR","#00FF00"),u(mxConstants$1,"INVALID_COLOR","#FF0000"),u(mxConstants$1,"EDGE_SELECTION_COLOR","#00FF00"),u(mxConstants$1,"VERTEX_SELECTION_COLOR","#00FF00"),u(mxConstants$1,"VERTEX_SELECTION_STROKEWIDTH",1),u(mxConstants$1,"EDGE_SELECTION_STROKEWIDTH",1),u(mxConstants$1,"VERTEX_SELECTION_DASHED",!0),u(mxConstants$1,"EDGE_SELECTION_DASHED",!0),u(mxConstants$1,"GUIDE_COLOR","#FF0000"),u(mxConstants$1,"GUIDE_STROKEWIDTH",1),u(mxConstants$1,"OUTLINE_COLOR","#0099FF"),u(mxConstants$1,"OUTLINE_STROKEWIDTH",3),u(mxConstants$1,"HANDLE_SIZE",6),u(mxConstants$1,"LABEL_HANDLE_SIZE",4),u(mxConstants$1,"HANDLE_FILLCOLOR","#00FF00"),u(mxConstants$1,"HANDLE_STROKECOLOR","black"),u(mxConstants$1,"LABEL_HANDLE_FILLCOLOR","yellow"),u(mxConstants$1,"CONNECT_HANDLE_FILLCOLOR","#0000FF"),u(mxConstants$1,"LOCKED_HANDLE_FILLCOLOR","#FF0000"),u(mxConstants$1,"OUTLINE_HANDLE_FILLCOLOR","#00FFFF"),u(mxConstants$1,"OUTLINE_HANDLE_STROKECOLOR","#0033FF"),u(mxConstants$1,"DEFAULT_FONTFAMILY","Arial,Helvetica"),u(mxConstants$1,"DEFAULT_FONTSIZE",11),u(mxConstants$1,"DEFAULT_TEXT_DIRECTION",""),u(mxConstants$1,"LINE_HEIGHT",1.2),u(mxConstants$1,"WORD_WRAP","normal"),u(mxConstants$1,"ABSOLUTE_LINE_HEIGHT",!1),u(mxConstants$1,"DEFAULT_FONTSTYLE",0),u(mxConstants$1,"DEFAULT_STARTSIZE",40),u(mxConstants$1,"DEFAULT_MARKERSIZE",6),u(mxConstants$1,"DEFAULT_IMAGESIZE",24),u(mxConstants$1,"ENTITY_SEGMENT",30),u(mxConstants$1,"RECTANGLE_ROUNDING_FACTOR",.15),u(mxConstants$1,"LINE_ARCSIZE",20),u(mxConstants$1,"ARROW_SPACING",0),u(mxConstants$1,"ARROW_WIDTH",30),u(mxConstants$1,"ARROW_SIZE",30),u(mxConstants$1,"PAGE_FORMAT_A4_PORTRAIT",new mxRectangle(0,0,827,1169)),u(mxConstants$1,"PAGE_FORMAT_A4_LANDSCAPE",new mxRectangle(0,0,1169,827)),u(mxConstants$1,"PAGE_FORMAT_LETTER_PORTRAIT",new mxRectangle(0,0,850,1100)),u(mxConstants$1,"PAGE_FORMAT_LETTER_LANDSCAPE",new mxRectangle(0,0,1100,850)),u(mxConstants$1,"NONE","none"),u(mxConstants$1,"STYLE_PERIMETER","perimeter"),u(mxConstants$1,"STYLE_SOURCE_PORT","sourcePort"),u(mxConstants$1,"STYLE_TARGET_PORT","targetPort"),u(mxConstants$1,"STYLE_PORT_CONSTRAINT","portConstraint"),u(mxConstants$1,"STYLE_PORT_CONSTRAINT_ROTATION","portConstraintRotation"),u(mxConstants$1,"STYLE_SOURCE_PORT_CONSTRAINT","sourcePortConstraint"),u(mxConstants$1,"STYLE_TARGET_PORT_CONSTRAINT","targetPortConstraint"),u(mxConstants$1,"STYLE_OPACITY","opacity"),u(mxConstants$1,"STYLE_FILL_OPACITY","fillOpacity"),u(mxConstants$1,"STYLE_STROKE_OPACITY","strokeOpacity"),u(mxConstants$1,"STYLE_TEXT_OPACITY","textOpacity"),u(mxConstants$1,"STYLE_TEXT_DIRECTION","textDirection"),u(mxConstants$1,"STYLE_OVERFLOW","overflow"),u(mxConstants$1,"STYLE_ORTHOGONAL","orthogonal"),u(mxConstants$1,"STYLE_EXIT_X","exitX"),u(mxConstants$1,"STYLE_EXIT_Y","exitY"),u(mxConstants$1,"STYLE_EXIT_DX","exitDx"),u(mxConstants$1,"STYLE_EXIT_DY","exitDy"),u(mxConstants$1,"STYLE_EXIT_PERIMETER","exitPerimeter"),u(mxConstants$1,"STYLE_ENTRY_X","entryX"),u(mxConstants$1,"STYLE_ENTRY_Y","entryY"),u(mxConstants$1,"STYLE_ENTRY_DX","entryDx"),u(mxConstants$1,"STYLE_ENTRY_DY","entryDy"),u(mxConstants$1,"STYLE_ENTRY_PERIMETER","entryPerimeter"),u(mxConstants$1,"STYLE_WHITE_SPACE","whiteSpace"),u(mxConstants$1,"STYLE_ROTATION","rotation"),u(mxConstants$1,"STYLE_FILLCOLOR","fillColor"),u(mxConstants$1,"STYLE_POINTER_EVENTS","pointerEvents"),u(mxConstants$1,"STYLE_SWIMLANE_FILLCOLOR","swimlaneFillColor"),u(mxConstants$1,"STYLE_MARGIN","margin"),u(mxConstants$1,"STYLE_GRADIENTCOLOR","gradientColor"),u(mxConstants$1,"STYLE_GRADIENT_DIRECTION","gradientDirection"),u(mxConstants$1,"STYLE_STROKECOLOR","strokeColor"),u(mxConstants$1,"STYLE_SEPARATORCOLOR","separatorColor"),u(mxConstants$1,"STYLE_STROKEWIDTH","strokeWidth"),u(mxConstants$1,"STYLE_ALIGN","align"),u(mxConstants$1,"STYLE_VERTICAL_ALIGN","verticalAlign"),u(mxConstants$1,"STYLE_LABEL_WIDTH","labelWidth"),u(mxConstants$1,"STYLE_LABEL_POSITION","labelPosition"),u(mxConstants$1,"STYLE_VERTICAL_LABEL_POSITION","verticalLabelPosition"),u(mxConstants$1,"STYLE_IMAGE_ASPECT","imageAspect"),u(mxConstants$1,"STYLE_IMAGE_ALIGN","imageAlign"),u(mxConstants$1,"STYLE_IMAGE_VERTICAL_ALIGN","imageVerticalAlign"),u(mxConstants$1,"STYLE_GLASS","glass"),u(mxConstants$1,"STYLE_IMAGE","image"),u(mxConstants$1,"STYLE_IMAGE_WIDTH","imageWidth"),u(mxConstants$1,"STYLE_IMAGE_HEIGHT","imageHeight"),u(mxConstants$1,"STYLE_IMAGE_BACKGROUND","imageBackground"),u(mxConstants$1,"STYLE_IMAGE_BORDER","imageBorder"),u(mxConstants$1,"STYLE_FLIPH","flipH"),u(mxConstants$1,"STYLE_FLIPV","flipV"),u(mxConstants$1,"STYLE_NOLABEL","noLabel"),u(mxConstants$1,"STYLE_NOEDGESTYLE","noEdgeStyle"),u(mxConstants$1,"STYLE_LABEL_BACKGROUNDCOLOR","labelBackgroundColor"),u(mxConstants$1,"STYLE_LABEL_BORDERCOLOR","labelBorderColor"),u(mxConstants$1,"STYLE_LABEL_PADDING","labelPadding"),u(mxConstants$1,"STYLE_INDICATOR_SHAPE","indicatorShape"),u(mxConstants$1,"STYLE_INDICATOR_IMAGE","indicatorImage"),u(mxConstants$1,"STYLE_INDICATOR_COLOR","indicatorColor"),u(mxConstants$1,"STYLE_INDICATOR_STROKECOLOR","indicatorStrokeColor"),u(mxConstants$1,"STYLE_INDICATOR_GRADIENTCOLOR","indicatorGradientColor"),u(mxConstants$1,"STYLE_INDICATOR_SPACING","indicatorSpacing"),u(mxConstants$1,"STYLE_INDICATOR_WIDTH","indicatorWidth"),u(mxConstants$1,"STYLE_INDICATOR_HEIGHT","indicatorHeight"),u(mxConstants$1,"STYLE_INDICATOR_DIRECTION","indicatorDirection"),u(mxConstants$1,"STYLE_SHADOW","shadow"),u(mxConstants$1,"STYLE_SEGMENT","segment"),u(mxConstants$1,"STYLE_ENDARROW","endArrow"),u(mxConstants$1,"STYLE_STARTARROW","startArrow"),u(mxConstants$1,"STYLE_ENDSIZE","endSize"),u(mxConstants$1,"STYLE_STARTSIZE","startSize"),u(mxConstants$1,"STYLE_SWIMLANE_LINE","swimlaneLine"),u(mxConstants$1,"STYLE_ENDFILL","endFill"),u(mxConstants$1,"STYLE_STARTFILL","startFill"),u(mxConstants$1,"STYLE_DASHED","dashed"),u(mxConstants$1,"STYLE_DASH_PATTERN","dashPattern"),u(mxConstants$1,"STYLE_FIX_DASH","fixDash"),u(mxConstants$1,"STYLE_ROUNDED","rounded"),u(mxConstants$1,"STYLE_CURVED","curved"),u(mxConstants$1,"STYLE_ARCSIZE","arcSize"),u(mxConstants$1,"STYLE_ABSOLUTE_ARCSIZE","absoluteArcSize"),u(mxConstants$1,"STYLE_SOURCE_PERIMETER_SPACING","sourcePerimeterSpacing"),u(mxConstants$1,"STYLE_TARGET_PERIMETER_SPACING","targetPerimeterSpacing"),u(mxConstants$1,"STYLE_PERIMETER_SPACING","perimeterSpacing"),u(mxConstants$1,"STYLE_SPACING","spacing"),u(mxConstants$1,"STYLE_SPACING_TOP","spacingTop"),u(mxConstants$1,"STYLE_SPACING_LEFT","spacingLeft"),u(mxConstants$1,"STYLE_SPACING_BOTTOM","spacingBottom"),u(mxConstants$1,"STYLE_SPACING_RIGHT","spacingRight"),u(mxConstants$1,"STYLE_HORIZONTAL","horizontal"),u(mxConstants$1,"STYLE_DIRECTION","direction"),u(mxConstants$1,"STYLE_ANCHOR_POINT_DIRECTION","anchorPointDirection"),u(mxConstants$1,"STYLE_ELBOW","elbow"),u(mxConstants$1,"STYLE_FONTCOLOR","fontColor"),u(mxConstants$1,"STYLE_FONTFAMILY","fontFamily"),u(mxConstants$1,"STYLE_FONTSIZE","fontSize"),u(mxConstants$1,"STYLE_FONTSTYLE","fontStyle"),u(mxConstants$1,"STYLE_ASPECT","aspect"),u(mxConstants$1,"STYLE_AUTOSIZE","autosize"),u(mxConstants$1,"STYLE_FOLDABLE","foldable"),u(mxConstants$1,"STYLE_EDITABLE","editable"),u(mxConstants$1,"STYLE_BACKGROUND_OUTLINE","backgroundOutline"),u(mxConstants$1,"STYLE_BENDABLE","bendable"),u(mxConstants$1,"STYLE_MOVABLE","movable"),u(mxConstants$1,"STYLE_RESIZABLE","resizable"),u(mxConstants$1,"STYLE_RESIZE_WIDTH","resizeWidth"),u(mxConstants$1,"STYLE_RESIZE_HEIGHT","resizeHeight"),u(mxConstants$1,"STYLE_ROTATABLE","rotatable"),u(mxConstants$1,"STYLE_CLONEABLE","cloneable"),u(mxConstants$1,"STYLE_DELETABLE","deletable"),u(mxConstants$1,"STYLE_SHAPE","shape"),u(mxConstants$1,"STYLE_EDGE","edgeStyle"),u(mxConstants$1,"STYLE_JETTY_SIZE","jettySize"),u(mxConstants$1,"STYLE_SOURCE_JETTY_SIZE","sourceJettySize"),u(mxConstants$1,"STYLE_TARGET_JETTY_SIZE","targetJettySize"),u(mxConstants$1,"STYLE_LOOP","loopStyle"),u(mxConstants$1,"STYLE_ORTHOGONAL_LOOP","orthogonalLoop"),u(mxConstants$1,"STYLE_ROUTING_CENTER_X","routingCenterX"),u(mxConstants$1,"STYLE_ROUTING_CENTER_Y","routingCenterY"),u(mxConstants$1,"FONT_BOLD",1),u(mxConstants$1,"FONT_ITALIC",2),u(mxConstants$1,"FONT_UNDERLINE",4),u(mxConstants$1,"FONT_STRIKETHROUGH",8),u(mxConstants$1,"SHAPE_RECTANGLE","rectangle"),u(mxConstants$1,"SHAPE_ELLIPSE","ellipse"),u(mxConstants$1,"SHAPE_DOUBLE_ELLIPSE","doubleEllipse"),u(mxConstants$1,"SHAPE_RHOMBUS","rhombus"),u(mxConstants$1,"SHAPE_LINE","line"),u(mxConstants$1,"SHAPE_IMAGE","image"),u(mxConstants$1,"SHAPE_ARROW","arrow"),u(mxConstants$1,"SHAPE_ARROW_CONNECTOR","arrowConnector"),u(mxConstants$1,"SHAPE_LABEL","label"),u(mxConstants$1,"SHAPE_CYLINDER","cylinder"),u(mxConstants$1,"SHAPE_SWIMLANE","swimlane"),u(mxConstants$1,"SHAPE_CONNECTOR","connector"),u(mxConstants$1,"SHAPE_ACTOR","actor"),u(mxConstants$1,"SHAPE_CLOUD","cloud"),u(mxConstants$1,"SHAPE_TRIANGLE","triangle"),u(mxConstants$1,"SHAPE_HEXAGON","hexagon"),u(mxConstants$1,"ARROW_CLASSIC","classic"),u(mxConstants$1,"ARROW_CLASSIC_THIN","classicThin"),u(mxConstants$1,"ARROW_BLOCK","block"),u(mxConstants$1,"ARROW_BLOCK_THIN","blockThin"),u(mxConstants$1,"ARROW_OPEN","open"),u(mxConstants$1,"ARROW_OPEN_THIN","openThin"),u(mxConstants$1,"ARROW_OVAL","oval"),u(mxConstants$1,"ARROW_DIAMOND","diamond"),u(mxConstants$1,"ARROW_DIAMOND_THIN","diamondThin"),u(mxConstants$1,"ALIGN_LEFT","left"),u(mxConstants$1,"ALIGN_CENTER","center"),u(mxConstants$1,"ALIGN_RIGHT","right"),u(mxConstants$1,"ALIGN_TOP","top"),u(mxConstants$1,"ALIGN_MIDDLE","middle"),u(mxConstants$1,"ALIGN_BOTTOM","bottom"),u(mxConstants$1,"DIRECTION_NORTH","north"),u(mxConstants$1,"DIRECTION_SOUTH","south"),u(mxConstants$1,"DIRECTION_EAST","east"),u(mxConstants$1,"DIRECTION_WEST","west"),u(mxConstants$1,"TEXT_DIRECTION_DEFAULT",""),u(mxConstants$1,"TEXT_DIRECTION_AUTO","auto"),u(mxConstants$1,"TEXT_DIRECTION_LTR","ltr"),u(mxConstants$1,"TEXT_DIRECTION_RTL","rtl"),u(mxConstants$1,"DIRECTION_MASK_NONE",0),u(mxConstants$1,"DIRECTION_MASK_WEST",1),u(mxConstants$1,"DIRECTION_MASK_NORTH",2),u(mxConstants$1,"DIRECTION_MASK_SOUTH",4),u(mxConstants$1,"DIRECTION_MASK_EAST",8),u(mxConstants$1,"DIRECTION_MASK_ALL",15),u(mxConstants$1,"ELBOW_VERTICAL","vertical"),u(mxConstants$1,"ELBOW_HORIZONTAL","horizontal"),u(mxConstants$1,"EDGESTYLE_ELBOW","elbowEdgeStyle"),u(mxConstants$1,"EDGESTYLE_ENTITY_RELATION","entityRelationEdgeStyle"),u(mxConstants$1,"EDGESTYLE_LOOP","loopEdgeStyle"),u(mxConstants$1,"EDGESTYLE_SIDETOSIDE","sideToSideEdgeStyle"),u(mxConstants$1,"EDGESTYLE_TOPTOBOTTOM","topToBottomEdgeStyle"),u(mxConstants$1,"EDGESTYLE_ORTHOGONAL","orthogonalEdgeStyle"),u(mxConstants$1,"EDGESTYLE_SEGMENT","segmentEdgeStyle"),u(mxConstants$1,"PERIMETER_ELLIPSE","ellipsePerimeter"),u(mxConstants$1,"PERIMETER_RECTANGLE","rectanglePerimeter"),u(mxConstants$1,"PERIMETER_RHOMBUS","rhombusPerimeter"),u(mxConstants$1,"PERIMETER_HEXAGON","hexagonPerimeter"),u(mxConstants$1,"PERIMETER_TRIANGLE","trianglePerimeter");class mxXmlRequest{constructor(e,t,i,n,s,l){u(this,"binary",!1),u(this,"withCredentials",!1),u(this,"request",null),u(this,"decodeSimulateValues",!1),this.url=e,this.params=t,this.method=i||"POST",this.async=n??!0,this.username=s,this.password=l}static get(e,t,i,n,s,l,a){var o=new mxXmlRequest(e,null,"GET"),h=o.setRequestHeaders;return a&&(o.setRequestHeaders=function(d,m){h.apply(this,arguments);for(var g in a)d.setRequestHeader(g,a[g])}),n!=null&&o.setBinary(n),o.send(t,i,s,l),o}static load(e){var t=new mxXmlRequest(e,null,"GET",!1);return t.send(),t}create(){var e=new XMLHttpRequest;return this.isBinary()&&e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e}isBinary(){return this.binary}setBinary(e){this.binary=e}getText(){return this.request.responseText}isReady(){return this.request.readyState==4}getDocumentElement(){var e=this.getXml();return e!=null?e.documentElement:null}getXml(){var e=this.request.responseXML;if(document.documentMode>=9||e==null||e.documentElement==null){var t=new DOMParser;e=t.parseFromString(this.request.responseText,"text/xml")}return e}getStatus(){return this.request!=null?this.request.status:null}send(e,t,i,n){this.request=this.create(),this.request!=null&&(e!=null&&(this.request.onreadystatechange=()=>{this.isReady()&&(e(this),this.request.onreadystatechange=null)}),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),!mxClient.IS_QUIRKS&&(document.documentMode==null||document.documentMode>9)&&window.XMLHttpRequest&&i!=null&&n!=null&&(this.request.timeout=i,this.request.ontimeout=n),this.request.send(this.params))}setRequestHeaders(e,t){t!=null&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}simulate(e,t){e=e||document;var i=null;e==document&&(i=window.onbeforeunload,window.onbeforeunload=null);var n=e.createElement("form");n.setAttribute("method",this.method),n.setAttribute("action",this.url),t!=null&&n.setAttribute("target",t),n.style.display="none",n.style.visibility="hidden";for(var s=this.params.indexOf("&")>0?this.params.split("&"):this.params.split(),l=0;l<s.length;l++){var a=s[l].indexOf("=");if(a>0){var o=s[l].substring(0,a),h=s[l].substring(a+1);this.decodeSimulateValues&&(h=decodeURIComponent(h));var d=e.createElement("textarea");d.setAttribute("wrap","off"),d.setAttribute("name",o);var e=d.ownerDocument,m=e.createTextNode(h);d?.appendChild(m),n.appendChild(d)}}e.body.appendChild(n),n.submit(),n.parentNode!=null&&n.parentNode.removeChild(n),i!=null&&(window.onbeforeunload=i)}}const W=class Et{static isLanguageSupported(e){return mxClient.languages!=null?mxClient.languages.indexOf(e)>=0:!0}static getDefaultBundle(e,t){return Et.loadDefaultBundle||!Et.isLanguageSupported(t)?e+Et.extension:null}static getSpecialBundle(e,t){if(mxClient.languages==null||!this.isLanguageSupported(t)){var i=t.indexOf("-");i>0&&(t=t.substring(0,i))}return Et.loadSpecialBundle&&Et.isLanguageSupported(t)&&t!=mxClient.defaultLanguage?e+"_"+t+Et.extension:null}static add(e,t,i){if(t=t??(mxClient.language!=null?mxClient.language.toLowerCase():mxConstants$1.NONE),t!=mxConstants$1.NONE){var n=Et.getDefaultBundle(e,t),s=Et.getSpecialBundle(e,t),l=function(){if(s!=null)if(i)mxXmlRequest.get(s,function(h){Et.parse(h.getText()),i()},function(){i()});else try{var o=mxXmlRequest.load(s);o.isReady()&&Et.parse(o.getText())}catch{}else i?.()};if(n!=null)if(i)mxXmlRequest.get(n,function(o){Et.parse(o.getText()),l()},function(){l()});else try{var a=mxXmlRequest.load(n);a.isReady()&&Et.parse(a.getText()),l()}catch{}else l()}}static parse(e){if(e!=null){for(var t=e.split(`
`),i=0;i<t.length;i++)if(t[i].charAt(0)!="#"){var n=t[i].indexOf("=");if(n>0){var s=t[i].substring(0,n),l=t[i].length;t[i].charCodeAt(l-1)==13&&l--;var a=t[i].substring(n+1,l);this.resourcesEncoded?(a=a.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),Et.resources[s]=unescape(a)):Et.resources[s]=a}}}}static get(e,t,i){var n=Et.resources[e];return n==null&&(n=i),n!=null&&t!=null&&(n=Et.replacePlaceholders(n,t)),n}static replacePlaceholders(e,t){for(var i=[],n=null,s=0;s<e.length;s++){var l=e.charAt(s);l=="{"?n="":n!=null&&l=="}"?(n=parseInt(n)-1,n>=0&&n<t.length&&i.push(t[n]),n=null):n!=null?n+=l:i.push(l)}return i.join("")}static loadResources(e){Et.add(mxClient.basePath+"/resources/editor",null,function(){Et.add(mxClient.basePath+"/resources/graph",null,e)})}};u(W,"resources",{}),u(W,"extension",".txt"),u(W,"resourcesEncoded",!1),u(W,"loadDefaultBundle",!0),u(W,"loadSpecialBundle",!0);let mxResources$1=W;const V=class zt{static isBrowserSupported(){return zt.IS_SVG}static link(e,t,i,n){i=i||document;var s=i.createElement("link");s.setAttribute("rel",e),s.setAttribute("href",t),s.setAttribute("charset","UTF-8"),s.setAttribute("type","text/css"),n&&s.setAttribute("id",n);var l=i.getElementsByTagName("head")[0];l.appendChild(s)}static loadResources(e,t){var i=zt.defaultBundles.length;function n(){--i==0&&e()}for(var s=0;s<zt.defaultBundles.length;s++)mxResources$1.add(zt.defaultBundles[s],t,n)}static include(e){document.write('<script src="'+e+'"><\/script>')}};u(V,"VERSION","@MXGRAPH-VERSION@"),u(V,"IS_IE",navigator.userAgent!=null&&navigator.userAgent.indexOf("MSIE")>=0),u(V,"IS_IE6",navigator.userAgent!=null&&navigator.userAgent.indexOf("MSIE 6")>=0),u(V,"IS_IE11",navigator.userAgent!=null&&!!navigator.userAgent.match(/Trident\/7\./)),u(V,"IS_EDGE",navigator.userAgent!=null&&!!navigator.userAgent.match(/Edge\//)),u(V,"IS_QUIRKS",navigator.userAgent!=null&&navigator.userAgent.indexOf("MSIE")>=0&&(document.documentMode==null||document.documentMode==5)),u(V,"IS_EM","spellcheck"in document.createElement("textarea")&&document.documentMode==8),u(V,"VML_PREFIX","v"),u(V,"OFFICE_PREFIX","o"),u(V,"IS_NS",navigator.userAgent!=null&&navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0),u(V,"IS_OP",navigator.userAgent!=null&&(navigator.userAgent.indexOf("Opera/")>=0||navigator.userAgent.indexOf("OPR/")>=0)),u(V,"IS_OT",navigator.userAgent!=null&&navigator.userAgent.indexOf("Presto/")>=0&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0),u(V,"IS_SF",/Apple Computer, Inc/.test(navigator.vendor)),u(V,"IS_ANDROID",navigator.appVersion.indexOf("Android")>=0),u(V,"IS_IOS",/iP(hone|od|ad)/.test(navigator.platform)),u(V,"IS_GC",/Google Inc/.test(navigator.vendor)),u(V,"IS_CHROMEAPP",window.chrome!=null&&chrome.app!=null&&chrome.app.runtime!=null),u(V,"IS_FF",typeof InstallTrigger<"u"),u(V,"IS_MT",navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0),u(V,"IS_VML",navigator.appName.toUpperCase()=="MICROSOFT INTERNET EXPLORER"),u(V,"IS_SVG",navigator.appName.toUpperCase()!="MICROSOFT INTERNET EXPLORER"),u(V,"NO_FO",!document.createElementNS||document.createElementNS("http://www.w3.org/2000/svg","foreignObject")!="[object SVGForeignObjectElement]"||navigator.userAgent.indexOf("Opera/")>=0),u(V,"IS_WIN",navigator.appVersion.indexOf("Win")>0),u(V,"IS_MAC",navigator.appVersion.indexOf("Mac")>0),u(V,"IS_CHROMEOS",/\bCrOS\b/.test(navigator.appVersion)),u(V,"IS_TOUCH","ontouchstart"in document.documentElement),u(V,"IS_POINTER",window.PointerEvent!=null&&!(navigator.appVersion.indexOf("Mac")>0)),u(V,"IS_LOCAL",document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0),u(V,"defaultBundles",[]);let mxClient=V,mxEventObject$1=class{constructor(e){u(this,"consumed",!1),this.name=e,this.properties=[];for(var t=1;t<arguments.length;t+=2)arguments[t+1]!=null&&(this.properties[arguments[t]]=arguments[t+1])}getName(){return this.name}getProperties(){return this.properties}getProperty(e){return this.properties[e]}isConsumed(){return this.consumed}consume(){this.consumed=!0}};const rt=class Vt{static get(e){if(e!=null){if(e[Vt.FIELD_NAME]==null)if(typeof e=="object"){var t=getFunctionName(e.constructor);e[Vt.FIELD_NAME]=t+"#"+Vt.counter++}else typeof e=="function"&&(e[Vt.FIELD_NAME]="Function#"+Vt.counter++);return e[Vt.FIELD_NAME]}return null}static clear(e){(typeof e=="object"||typeof e=="function")&&delete e[Vt.FIELD_NAME]}};u(rt,"FIELD_NAME","mxObjectId"),u(rt,"counter",0);let mxObjectIdentity=rt;function getFunctionName(r){var e=null;if(r!=null){if(r.name!=null)e=r.name;else if(e=r.toString().trim(),/^function\s/.test(e)){e=ltrim(e.substring(9));var t=e.indexOf("(");t>0&&(e=e.substring(0,t))}}return e}function ltrim(r,e){return e=e||"\\s",r!=null?r.replace(new RegExp("^["+e+"]+","g"),""):null}class mxDictionary{constructor(){u(this,"map",null),this.clear()}clear(){this.map={}}get(e){var t=mxObjectIdentity.get(e);return this.map[t]}put(e,t){var i=mxObjectIdentity.get(e),n=this.map[i];return this.map[i]=t,n}remove(e){var t=mxObjectIdentity.get(e),i=this.map[t];return delete this.map[t],i}getKeys(){var e=[];for(var t in this.map)e.push(t);return e}getValues(){var e=[];for(var t in this.map)e.push(this.map[t]);return e}visit(e){for(var t in this.map)e(t,this.map[t])}}const A=class it{static removeAllListeners(e){var t=e.mxListenerList;if(t!=null)for(;t.length>0;){var i=t[0];it.removeListener(e,i.name,i.f)}}static addGestureListeners(e,t,i,n){t!=null&&it.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),i!=null&&it.addListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",i),n!=null&&it.addListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",n),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(t!=null&&it.addListener(e,"touchstart",t),i!=null&&it.addListener(e,"touchmove",i),n!=null&&it.addListener(e,"touchend",n))}static removeGestureListeners(e,t,i,n){t!=null&&it.removeListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),i!=null&&it.removeListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",i),n!=null&&it.removeListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",n),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(t!=null&&it.removeListener(e,"touchstart",t),i!=null&&it.removeListener(e,"touchmove",i),n!=null&&it.removeListener(e,"touchend",n))}static redirectMouseEvents(e,t,i,n,s,l,a){var o=function(h){return typeof i=="function"?i(h):i};it.addGestureListeners(e,function(h){n!=null?n(h):it.isConsumed(h)||t.fireMouseEvent(it.MOUSE_DOWN,new mxMouseEvent(h,o(h)))},function(h){s!=null?s(h):it.isConsumed(h)||t.fireMouseEvent(it.MOUSE_MOVE,new mxMouseEvent(h,o(h)))},function(h){l!=null?l(h):it.isConsumed(h)||t.fireMouseEvent(it.MOUSE_UP,new mxMouseEvent(h,o(h)))}),it.addListener(e,"dblclick",function(h){if(a!=null)a(h);else if(!it.isConsumed(h)){var d=o(h);t.dblClick(h,d!=null?d.cell:null)}})}static release(e){try{if(e!=null){it.removeAllListeners(e);var t=e.childNodes;if(t!=null)for(var i=t.length,n=0;n<i;n+=1)it.release(t[n])}}catch{}}static addMouseWheelListener(e,t){if(e!=null){var i=function(s){s==null&&(s=window.event),s.ctrlKey&&s.preventDefault(),-s.deltaY,(Math.abs(s.deltaX)>.5||Math.abs(s.deltaY)>.5)&&e(s,s.deltaY==0?-s.deltaX>0:-s.deltaY>0)};if(t=t??window,mxClient.IS_SF&&!mxClient.IS_TOUCH){var n=1;it.addListener(t,"gesturestart",function(s){it.consume(s),n=1}),it.addListener(t,"gesturechange",function(s){it.consume(s);var l=n-s.scale;Math.abs(l)>.2&&(e(s,l<0,!0),n=s.scale)}),it.addListener(t,"gestureend",function(s){it.consume(s)})}it.addListener(t,"wheel",i)}}static disableContextMenu(e){it.addListener(e,"contextmenu",function(t){return t.preventDefault&&t.preventDefault(),!1})}static getSource(e){return e.srcElement!=null?e.srcElement:e.target}static isConsumed(e){return e.isConsumed!=null&&e.isConsumed}static isTouchEvent(e){return e.pointerType!=null?e.pointerType=="touch"||e.pointerType===e.MSPOINTER_TYPE_TOUCH:e.mozInputSource!=null?e.mozInputSource==5:e.type.indexOf("touch")==0}static isPenEvent(e){return e.pointerType!=null?e.pointerType=="pen"||e.pointerType===e.MSPOINTER_TYPE_PEN:e.mozInputSource!=null?e.mozInputSource==2:e.type.indexOf("pen")==0}static isMultiTouchEvent(e){return e.type!=null&&e.type.indexOf("touch")==0&&e.touches!=null&&e.touches.length>1}static isMouseEvent(e){return e.pointerType!=null?e.pointerType=="mouse"||e.pointerType===e.MSPOINTER_TYPE_MOUSE:e.mozInputSource!=null?e.mozInputSource==1:e.type.indexOf("mouse")==0}static isLeftMouseButton(e){return"buttons"in e&&(e.type=="mousedown"||e.type=="mousemove")?e.buttons==1:"which"in e?e.which===1:e.button===1}static isMiddleMouseButton(e){return"which"in e?e.which===2:e.button===4}static isRightMouseButton(e){return"which"in e?e.which===3:e.button===2}static isPopupTrigger(e){return it.isRightMouseButton(e)||mxClient.IS_MAC&&it.isControlDown(e)&&!it.isShiftDown(e)&&!it.isMetaDown(e)&&!it.isAltDown(e)}static isShiftDown(e){return e!=null?e.shiftKey:!1}static isAltDown(e){return e!=null?e.altKey:!1}static isControlDown(e){return e!=null?e.ctrlKey:!1}static isMetaDown(e){return e!=null?e.metaKey:!1}static getMainEvent(e){return(e.type=="touchstart"||e.type=="touchmove")&&e.touches!=null&&e.touches[0]!=null?e=e.touches[0]:e.type=="touchend"&&e.changedTouches!=null&&e.changedTouches[0]!=null&&(e=e.changedTouches[0]),e}static getClientX(e){return it.getMainEvent(e).clientX}static getClientY(e){return it.getMainEvent(e).clientY}static org_consume(e,t,i){t=t??!0,i=i??!0,t&&(e.preventDefault?(i&&e.stopPropagation(),e.preventDefault()):i&&(e.cancelBubble=!0)),e.isConsumed=!0,e.preventDefault||(e.returnValue=!1)}static consume(e,t,i){t=t??!0,i=i??!0,t&&(e.preventDefault?(i&&e.stopPropagation(),e.type!="wheel"&&e.preventDefault()):i&&(e.cancelBubble=!0)),e.isConsumed=!0,e.preventDefault||(e.returnValue=!1)}};u(A,"addListener",function(){var r=function(e,t,i){e.mxListenerList==null&&(e.mxListenerList=[]);var n={name:t,f:i};e.mxListenerList.push(n)};return window.addEventListener?function(e,t,i){e.addEventListener(t,i,!1),r(e,t,i)}:function(e,t,i){e.attachEvent("on"+t,i),r(e,t,i)}}()),u(A,"removeListener",function(){var r=function(e,t,i){if(e.mxListenerList!=null){for(var n=e.mxListenerList.length,s=0;s<n;s++){var l=e.mxListenerList[s];if(l.f==i){e.mxListenerList.splice(s,1);break}}e.mxListenerList.length==0&&(e.mxListenerList=null)}};return window.removeEventListener?function(e,t,i){e.removeEventListener(t,i,!1),r(e,t,i)}:function(e,t,i){e.detachEvent("on"+t,i),r(e,t,i)}}()),u(A,"LABEL_HANDLE",-1),u(A,"ROTATION_HANDLE",-2),u(A,"CUSTOM_HANDLE",-100),u(A,"VIRTUAL_HANDLE",-1e5),u(A,"MOUSE_DOWN","mouseDown"),u(A,"MOUSE_MOVE","mouseMove"),u(A,"MOUSE_UP","mouseUp"),u(A,"ACTIVATE","activate"),u(A,"RESIZE_START","resizeStart"),u(A,"RESIZE","resize"),u(A,"RESIZE_END","resizeEnd"),u(A,"MOVE_START","moveStart"),u(A,"MOVE","move"),u(A,"MOVE_END","moveEnd"),u(A,"PAN_START","panStart"),u(A,"PAN","pan"),u(A,"PAN_END","panEnd"),u(A,"MINIMIZE","minimize"),u(A,"NORMALIZE","normalize"),u(A,"MAXIMIZE","maximize"),u(A,"HIDE","hide"),u(A,"SHOW","show"),u(A,"CLOSE","close"),u(A,"DESTROY","destroy"),u(A,"REFRESH","refresh"),u(A,"SIZE","size"),u(A,"SELECT","select"),u(A,"FIRED","fired"),u(A,"FIRE_MOUSE_EVENT","fireMouseEvent"),u(A,"GESTURE","gesture"),u(A,"TAP_AND_HOLD","tapAndHold"),u(A,"GET","get"),u(A,"RECEIVE","receive"),u(A,"CONNECT","connect"),u(A,"DISCONNECT","disconnect"),u(A,"SUSPEND","suspend"),u(A,"RESUME","resume"),u(A,"MARK","mark"),u(A,"ROOT","root"),u(A,"POST","post"),u(A,"OPEN","open"),u(A,"SAVE","save"),u(A,"BEFORE_ADD_VERTEX","beforeAddVertex"),u(A,"ADD_VERTEX","addVertex"),u(A,"AFTER_ADD_VERTEX","afterAddVertex"),u(A,"DONE","done"),u(A,"EXECUTE","execute"),u(A,"EXECUTED","executed"),u(A,"BEGIN_UPDATE","beginUpdate"),u(A,"START_EDIT","startEdit"),u(A,"END_UPDATE","endUpdate"),u(A,"END_EDIT","endEdit"),u(A,"BEFORE_UNDO","beforeUndo"),u(A,"UNDO","undo"),u(A,"REDO","redo"),u(A,"CHANGE","change"),u(A,"NOTIFY","notify"),u(A,"LAYOUT_CELLS","layoutCells"),u(A,"CLICK","click"),u(A,"SCALE","scale"),u(A,"TRANSLATE","translate"),u(A,"SCALE_AND_TRANSLATE","scaleAndTranslate"),u(A,"UP","up"),u(A,"DOWN","down"),u(A,"ADD","add"),u(A,"REMOVE","remove"),u(A,"CLEAR","clear"),u(A,"ADD_CELLS","addCells"),u(A,"CELLS_ADDED","cellsAdded"),u(A,"MOVE_CELLS","moveCells"),u(A,"CELLS_MOVED","cellsMoved"),u(A,"RESIZE_CELLS","resizeCells"),u(A,"CELLS_RESIZED","cellsResized"),u(A,"TOGGLE_CELLS","toggleCells"),u(A,"CELLS_TOGGLED","cellsToggled"),u(A,"ORDER_CELLS","orderCells"),u(A,"CELLS_ORDERED","cellsOrdered"),u(A,"REMOVE_CELLS","removeCells"),u(A,"CELLS_REMOVED","cellsRemoved"),u(A,"GROUP_CELLS","groupCells"),u(A,"UNGROUP_CELLS","ungroupCells"),u(A,"REMOVE_CELLS_FROM_PARENT","removeCellsFromParent"),u(A,"FOLD_CELLS","foldCells"),u(A,"CELLS_FOLDED","cellsFolded"),u(A,"ALIGN_CELLS","alignCells"),u(A,"LABEL_CHANGED","labelChanged"),u(A,"CONNECT_CELL","connectCell"),u(A,"CELL_CONNECTED","cellConnected"),u(A,"SPLIT_EDGE","splitEdge"),u(A,"FLIP_EDGE","flipEdge"),u(A,"START_EDITING","startEditing"),u(A,"EDITING_STARTED","editingStarted"),u(A,"EDITING_STOPPED","editingStopped"),u(A,"ADD_OVERLAY","addOverlay"),u(A,"REMOVE_OVERLAY","removeOverlay"),u(A,"UPDATE_CELL_SIZE","updateCellSize"),u(A,"ESCAPE","escape"),u(A,"DOUBLE_CLICK","doubleClick"),u(A,"START","start"),u(A,"RESET","reset");let mxEvent$1=A;class mxCellHighlight{constructor(e,t,i,n){u(this,"keepOnTop",!1),u(this,"graph",null),u(this,"state",null),u(this,"spacing",2),u(this,"resetHandler",null),e!=null&&(this.graph=e,this.highlightColor=t??mxConstants$1.DEFAULT_VALID_COLOR,this.strokeWidth=i??mxConstants$1.HIGHLIGHT_STROKEWIDTH,this.dashed=n??!1,this.opacity=mxConstants$1.HIGHLIGHT_OPACITY,this.repaintHandler=()=>{if(this.state!=null){var s=this.graph.view.getState(this.state.cell);s==null?this.hide():(this.state=s,this.repaint())}},this.graph.getView().addListener(mxEvent$1.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.repaintHandler),this.resetHandler=()=>{this.hide()},this.graph.getView().addListener(mxEvent$1.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent$1.UP,this.resetHandler))}setHighlightColor(e){this.highlightColor=e,this.shape!=null&&(this.shape.stroke=e)}drawHighlight(){this.shape=this.createShape(),this.repaint(),!this.keepOnTop&&this.shape.node.parentNode.firstChild!=this.shape.node&&this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)}createShape(){var e=this.graph.cellRenderer.createShape(this.state);return e.svgStrokeTolerance=this.graph.tolerance,e.points=this.state.absolutePoints,e.apply(this.state),e.stroke=this.highlightColor,e.opacity=this.opacity,e.isDashed=this.dashed,e.isShadow=!1,e.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(e.node,this.graph,this.state),this.graph.dialect!=mxConstants$1.DIALECT_SVG?e.pointerEvents=!1:e.svgPointerEvents="stroke",e}getStrokeWidth(e){return this.strokeWidth}repaint(){this.state!=null&&this.shape!=null&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),this.state.shape!=null&&this.shape.setCursor(this.state.shape.getCursor()),(mxClient.IS_QUIRKS||document.documentMode==8)&&(this.shape.stroke=="transparent"?(this.shape.stroke="white",this.shape.opacity=1):this.shape.opacity=this.opacity),this.shape.redraw())}hide(){this.highlight(null)}highlight(e){this.state!=e&&(this.shape!=null&&(this.shape.destroy(),this.shape=null),this.state=e,this.state!=null&&this.drawHighlight())}isHighlightAt(e,t){var i=!1;if(this.shape!=null&&document.elementFromPoint!=null&&!mxClient.IS_QUIRKS)for(var n=document.elementFromPoint(e,t);n!=null;){if(n==this.shape.node){i=!0;break}n=n.parentNode}return i}destroy(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),this.shape!=null&&(this.shape.destroy(),this.shape=null)}}class mxUrlConverter{constructor(){u(this,"enabled",!0),u(this,"baseUrl",null),u(this,"baseDomain",null)}updateBaseUrl(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var e=this.baseUrl.lastIndexOf("/");e>0&&(this.baseUrl=this.baseUrl.substring(0,e+1))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}getBaseUrl(){return this.baseUrl}setBaseUrl(e){this.baseUrl=e}getBaseDomain(){return this.baseDomain}setBaseDomain(e){this.baseDomain=e}isRelativeUrl(e){return e!=null&&e.substring(0,2)!="//"&&e.substring(0,7)!="http://"&&e.substring(0,8)!="https://"&&e.substring(0,10)!="data:image"&&e.substring(0,7)!="file://"}convert(e){return this.isEnabled()&&this.isRelativeUrl(e)&&(this.getBaseUrl()==null&&this.updateBaseUrl(),e.charAt(0)=="/"?e=this.getBaseDomain()+e:e=this.getBaseUrl()+e),e}}class mxAbstractCanvas2D{constructor(){u(this,"state",null),u(this,"states",null),u(this,"path",null),u(this,"rotateHtml",!0),u(this,"lastX",0),u(this,"lastY",0),u(this,"moveOp","M"),u(this,"lineOp","L"),u(this,"quadOp","Q"),u(this,"curveOp","C"),u(this,"closeOp","Z"),u(this,"pointerEvents",!1),this.converter=this.createUrlConverter(),this.reset()}createUrlConverter(){return new mxUrlConverter}reset(){this.state=this.createState(),this.states=[]}createState(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants$1.DEFAULT_FONTSIZE,fontFamily:mxConstants$1.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants$1.SHADOWCOLOR,shadowAlpha:mxConstants$1.SHADOW_OPACITY,shadowDx:mxConstants$1.SHADOW_OFFSET_X,shadowDy:mxConstants$1.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}}format(e){return Math.round(parseFloat(e))}addOp(){if(this.path!=null&&(this.path.push(arguments[0]),arguments.length>2))for(var e=this.state,t=2;t<arguments.length;t+=2)this.lastX=arguments[t-1],this.lastY=arguments[t],this.path.push(this.format((this.lastX+e.dx)*e.scale)),this.path.push(this.format((this.lastY+e.dy)*e.scale))}rotatePoint(e,t,i,n,s){var l=i*(Math.PI/180);return mxUtils$1.getRotatedPoint(new mxPoint(e,t),Math.cos(l),Math.sin(l),new mxPoint(n,s))}save(){this.states.push(this.state),this.state=mxUtils$1.clone(this.state)}restore(){this.states.length>0&&(this.state=this.states.pop())}setLink(e){}scale(e){this.state.scale*=e,this.state.strokeWidth*=e}translate(e,t){this.state.dx+=e,this.state.dy+=t}rotate(e,t,i,n,s){}setAlpha(e){this.state.alpha=e}setFillAlpha(e){this.state.fillAlpha=e}setStrokeAlpha(e){this.state.strokeAlpha=e}setFillColor(e){e==mxConstants$1.NONE&&(e=null),this.state.fillColor=e,this.state.gradientColor=null}setGradient(e,t,i,n,s,l,a,o,h){var d=this.state;d.fillColor=e,d.gradientFillAlpha=o??1,d.gradientColor=t,d.gradientAlpha=h??1,d.gradientDirection=a}setStrokeColor(e){e==mxConstants$1.NONE&&(e=null),this.state.strokeColor=e}setStrokeWidth(e){this.state.strokeWidth=e}setDashed(e,t){this.state.dashed=e,this.state.fixDash=t}setDashPattern(e){this.state.dashPattern=e}setLineCap(e){this.state.lineCap=e}setLineJoin(e){this.state.lineJoin=e}setMiterLimit(e){this.state.miterLimit=e}setFontColor(e){e==mxConstants$1.NONE&&(e=null),this.state.fontColor=e}setFontBackgroundColor(e){e==mxConstants$1.NONE&&(e=null),this.state.fontBackgroundColor=e}setFontBorderColor(e){e==mxConstants$1.NONE&&(e=null),this.state.fontBorderColor=e}setFontSize(e){this.state.fontSize=parseFloat(e)}setFontFamily(e){this.state.fontFamily=e}setFontStyle(e){e==null&&(e=0),this.state.fontStyle=e}setShadow(e){this.state.shadow=e}setShadowColor(e){e==mxConstants$1.NONE&&(e=null),this.state.shadowColor=e}setShadowAlpha(e){this.state.shadowAlpha=e}setShadowOffset(e,t){this.state.shadowDx=e,this.state.shadowDy=t}begin(){this.lastX=0,this.lastY=0,this.path=[]}moveTo(e,t){this.addOp(this.moveOp,e,t)}lineTo(e,t){this.addOp(this.lineOp,e,t)}quadTo(e,t,i,n){this.addOp(this.quadOp,e,t,i,n)}curveTo(e,t,i,n,s,l){this.addOp(this.curveOp,e,t,i,n,s,l)}arcTo(e,t,i,n,s,l,a){var o=mxUtils$1.arcToCurves(this.lastX,this.lastY,e,t,i,n,s,l,a);if(o!=null)for(var h=0;h<o.length;h+=6)this.curveTo(o[h],o[h+1],o[h+2],o[h+3],o[h+4],o[h+5])}close(e,t,i,n,s,l){this.addOp(this.closeOp)}end(){}}class mxVmlCanvas2D extends mxAbstractCanvas2D{constructor(e){super(),u(this,"node",null),u(this,"textEnabled",!0),u(this,"moveOp","m"),u(this,"lineOp","l"),u(this,"curveOp","c"),u(this,"closeOp","x"),u(this,"rotatedHtmlBackground",""),u(this,"vmlScale",1),this.root=e}createElement(e){return document.createElement(e)}createVmlElement(e){return this.createElement(mxClient.VML_PREFIX+":"+e)}addNode(e,t){var i=this.node,n=this.state;if(i!=null){if(i.nodeName=="shape")if(this.path!=null&&this.path.length>0)i.path=this.path.join(" ")+" e",i.style.width=this.root.style.width,i.style.height=this.root.style.height,i.coordsize=parseInt(i.style.width)+" "+parseInt(i.style.height);else return;i.strokeweight=this.format(Math.max(1,n.strokeWidth*n.scale/this.vmlScale))+"px",n.shadow&&this.root.appendChild(this.createShadow(i,e&&n.fillColor!=null,t&&n.strokeColor!=null)),t&&n.strokeColor!=null?(i.stroked="true",i.strokecolor=n.strokeColor):i.stroked="false",i.appendChild(this.createStroke()),e&&n.fillColor!=null?i.appendChild(this.createFill()):this.pointerEvents&&(i.nodeName!="shape"||this.path[this.path.length-1]==this.closeOp)?i.appendChild(this.createTransparentFill()):i.filled="false",this.root.appendChild(i)}}createTransparentFill(){var e=this.createVmlElement("fill");return e.src=mxClient.imageBasePath+"/transparent.gif",e.type="tile",e}createFill(){var e=this.state,t=this.createVmlElement("fill");if(t.color=e.fillColor,e.gradientColor!=null){t.type="gradient",t.method="none",t.color2=e.gradientColor;var i=180-e.rotation;e.gradientDirection==mxConstants$1.DIRECTION_WEST?i-=90+(this.root.style.flip=="x"?180:0):e.gradientDirection==mxConstants$1.DIRECTION_EAST?i+=90+(this.root.style.flip=="x"?180:0):e.gradientDirection==mxConstants$1.DIRECTION_NORTH?i-=180+(this.root.style.flip=="y"?-180:0):i+=this.root.style.flip=="y"?-180:0,(this.root.style.flip=="x"||this.root.style.flip=="y")&&(i*=-1),t.angle=mxUtils$1.mod(i,360),t.opacity=e.alpha*e.gradientFillAlpha*100+"%",t.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",e.alpha*e.gradientAlpha*100+"%")}else(e.alpha<1||e.fillAlpha<1)&&(t.opacity=e.alpha*e.fillAlpha*100+"%");return t}createStroke(){var e=this.state,t=this.createVmlElement("stroke");return t.endcap=e.lineCap||"flat",t.joinstyle=e.lineJoin||"miter",t.miterlimit=e.miterLimit||"10",(e.alpha<1||e.strokeAlpha<1)&&(t.opacity=e.alpha*e.strokeAlpha*100+"%"),e.dashed&&(t.dashstyle=this.getVmlDashStyle()),t}getVmlDashStyle(){var e="dash";if(typeof this.state.dashPattern=="string"){var t=this.state.dashPattern.split(" ");t.length>0&&t[0]==1&&(e="0 2")}return e}createShadow(e,t,i){var n=this.state,s=-n.rotation*(Math.PI/180),l=Math.cos(s),a=Math.sin(s),o=n.shadowDx*n.scale,h=n.shadowDy*n.scale;this.root.style.flip=="x"?o*=-1:this.root.style.flip=="y"&&(h*=-1);var d=e.cloneNode(!0);return d.style.marginLeft=Math.round(o*l-h*a)+"px",d.style.marginTop=Math.round(o*a+h*l)+"px",document.documentMode==8&&(d.strokeweight=e.strokeweight,e.nodeName=="shape"&&(d.path=this.path.join(" ")+" e",d.style.width=this.root.style.width,d.style.height=this.root.style.height,d.coordsize=parseInt(e.style.width)+" "+parseInt(e.style.height))),i?(d.strokecolor=n.shadowColor,d.appendChild(this.createShadowStroke())):d.stroked="false",t?d.appendChild(this.createShadowFill()):d.filled="false",d}createShadowFill(){var e=this.createVmlElement("fill");return e.color=this.state.shadowColor,e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e}createShadowStroke(){var e=this.createStroke();return e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e}rotate(e,t,i,n,s){t&&i?e+=180:t?this.root.style.flip="x":i&&(this.root.style.flip="y"),(t?!i:i)&&(e*=-1),this.root.style.rotation=e,this.state.rotation=this.state.rotation+e,this.state.rotationCx=n,this.state.rotationCy=s}begin(){super.begin(),this.node=this.createVmlElement("shape"),this.node.style.position="absolute"}quadTo(e,t,i,n){var s=this.state,l=(this.lastX+s.dx)*s.scale,a=(this.lastY+s.dy)*s.scale,o=(e+s.dx)*s.scale,h=(t+s.dy)*s.scale,d=(i+s.dx)*s.scale,m=(n+s.dy)*s.scale,g=l+2/3*(o-l),c=a+2/3*(h-a),f=d+2/3*(o-d),C=m+2/3*(h-m);this.path.push("c "+this.format(g)+" "+this.format(c)+" "+this.format(f)+" "+this.format(C)+" "+this.format(d)+" "+this.format(m)),this.lastX=d/s.scale-s.dx,this.lastY=m/s.scale-s.dy}createRect(e,t,i,n,s){var l=this.state,a=this.createVmlElement(e);return a.style.position="absolute",a.style.left=this.format((t+l.dx)*l.scale)+"px",a.style.top=this.format((i+l.dy)*l.scale)+"px",a.style.width=this.format(n*l.scale)+"px",a.style.height=this.format(s*l.scale)+"px",a}rect(e,t,i,n){this.node=this.createRect("rect",e,t,i,n)}roundrect(e,t,i,n,s,l){this.node=this.createRect("roundrect",e,t,i,n),this.node.setAttribute("arcsize",Math.max(s*100/i,l*100/n)+"%")}ellipse(e,t,i,n){this.node=this.createRect("oval",e,t,i,n)}image(e,t,i,n,s,l,a,o){var h=null;if(!l)h=this.createRect("image",e,t,i,n),h.src=s;else{h=this.createRect("rect",e,t,i,n),h.stroked="false";var d=this.createVmlElement("fill");d.aspect=l?"atmost":"ignore",d.rotate="true",d.type="frame",d.src=s,h.appendChild(d)}a&&o?h.style.rotation="180":a?h.style.flip="x":o&&(h.style.flip="y"),(this.state.alpha<1||this.state.fillAlpha<1)&&(h.style.filter+="alpha(opacity="+this.state.alpha*this.state.fillAlpha*100+")"),this.root.appendChild(h)}createDiv(e,t,i,n){var s=this.createElement("div"),l=this.state,a="";if(l.fontBackgroundColor!=null&&(a+="background-color:"+mxUtils$1.htmlEntities(l.fontBackgroundColor)+";"),l.fontBorderColor!=null&&(a+="border:1px solid "+mxUtils$1.htmlEntities(l.fontBorderColor)+";"),mxUtils$1.isNode(e))s.appendChild(e);else if(n!="fill"&&n!="width"){var o=this.createElement("div");o.style.cssText=a,o.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",o.style.zoom="1",o.style.textDecoration="inherit",o.innerHTML=e,s.appendChild(o)}else s.style.cssText=a,s.innerHTML=e;var h=s.style;return h.fontSize=l.fontSize/this.vmlScale+"px",h.fontFamily=l.fontFamily,h.color=l.fontColor,h.verticalAlign="top",h.textAlign=t||"left",h.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?l.fontSize*mxConstants$1.LINE_HEIGHT/this.vmlScale+"px":mxConstants$1.LINE_HEIGHT,(l.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(h.fontWeight="bold"),(l.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(h.fontStyle="italic"),(l.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&(h.textDecoration="underline"),s}text(e,t,i,n,s,l,a,o,h,d,m,g,c){if(this.textEnabled&&s!=null){var f=this.state;if(h=="html"){if(f.rotation!=null){var C=this.rotatePoint(e,t,f.rotation,f.rotationCx,f.rotationCy);e=C.x,t=C.y}document.documentMode==8&&!mxClient.IS_EM?(e+=f.dx,t+=f.dy,d!="fill"&&a==mxConstants$1.ALIGN_TOP&&(t-=1)):(e*=f.scale,t*=f.scale);var v=document.documentMode==8&&!mxClient.IS_EM?this.createVmlElement("group"):this.createElement("div");v.style.position="absolute",v.style.display="inline",v.style.left=this.format(e)+"px",v.style.top=this.format(t)+"px",v.style.zoom=f.scale;var w=this.createElement("div");w.style.position="relative",w.style.display="inline";var S=mxUtils$1.getAlignmentAsPoint(l,a),T=S.x,P=S.y,L=this.createDiv(s,l,a,d),k=this.createElement("div");if(c!=null&&L.setAttribute("dir",c),o&&i>0){if(m||(L.style.width=Math.round(i)+"px"),L.style.wordWrap=mxConstants$1.WORD_WRAP,L.style.whiteSpace="normal",L.style.wordWrap=="break-word"){var G=L;G.firstChild!=null&&G.firstChild.nodeName=="DIV"&&(G.firstChild.style.width="100%")}}else L.style.whiteSpace="nowrap";var Y=f.rotation+(g||0);if(this.rotateHtml&&Y!=0?(k.style.display="inline",k.style.zoom="1",k.appendChild(L),document.documentMode==8&&!mxClient.IS_EM&&this.root.nodeName!="DIV"?(w.appendChild(k),v.appendChild(w)):v.appendChild(k)):document.documentMode==8&&!mxClient.IS_EM?(w.appendChild(L),v.appendChild(w)):(L.style.display="inline",v.appendChild(L)),this.root.nodeName!="DIV"){var te=this.createVmlElement("rect");te.stroked="false",te.filled="false",te.appendChild(v),this.root.appendChild(te)}else this.root.appendChild(v);if(m?(L.style.overflow="hidden",L.style.width=Math.round(i)+"px",mxClient.IS_QUIRKS||(L.style.maxHeight=Math.round(n)+"px")):d=="fill"?(L.style.overflow="hidden",L.style.width=Math.max(0,i)+1+"px",L.style.height=Math.max(0,n)+1+"px"):d=="width"&&(L.style.overflow="hidden",L.style.width=Math.max(0,i)+1+"px",L.style.maxHeight=Math.max(0,n)+1+"px"),this.rotateHtml&&Y!=0){var ie=Y*(Math.PI/180),ne=parseFloat(parseFloat(Math.cos(ie)).toFixed(8)),q=parseFloat(parseFloat(Math.sin(-ie)).toFixed(8));ie%=2*Math.PI,ie<0&&(ie+=2*Math.PI),ie%=Math.PI,ie>Math.PI/2&&(ie=Math.PI-ie);var oe=Math.cos(ie),le=Math.sin(ie);document.documentMode==8&&!mxClient.IS_EM&&(L.style.display="inline-block",k.style.display="inline-block",w.style.display="inline-block"),L.style.visibility="hidden",L.style.position="absolute",document.body.appendChild(L);var Z=L;Z.firstChild!=null&&Z.firstChild.nodeName=="DIV"&&(Z=Z.firstChild);var G=Z.offsetWidth+3,B=Z.offsetHeight;m?(i=Math.min(i,G),B=Math.min(B,n)):i=G,o&&(L.style.width=i+"px"),mxClient.IS_QUIRKS&&(m||d=="width")&&B>n&&(B=n,L.style.height=B+"px"),n=B;var re=(n-n*oe+i*-le)/2-q*i*(T+.5)+ne*n*(P+.5),se=(i-i*oe+n*-le)/2+ne*i*(T+.5)+q*n*(P+.5);if(v.nodeName=="group"&&this.root.nodeName=="DIV"){var ve=this.createElement("div");ve.style.display="inline-block",ve.style.position="absolute",ve.style.left=this.format(e+(se-i/2)*f.scale)+"px",ve.style.top=this.format(t+(re-n/2)*f.scale)+"px",v.parentNode.appendChild(ve),ve.appendChild(v)}else{var pe=document.documentMode==8&&!mxClient.IS_EM?1:f.scale;v.style.left=this.format(e+(se-i/2)*pe)+"px",v.style.top=this.format(t+(re-n/2)*pe)+"px"}k.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+ne+", M12="+q+", M21="+-q+", M22="+ne+", sizingMethod='auto expand')",k.style.backgroundColor=this.rotatedHtmlBackground,this.state.alpha<1&&(k.style.filter+="alpha(opacity="+this.state.alpha*100+")"),k.appendChild(L),L.style.position="",L.style.visibility=""}else if(document.documentMode!=8||mxClient.IS_EM){L.style.verticalAlign="top",this.state.alpha<1&&(v.style.filter="alpha(opacity="+this.state.alpha*100+")");var Q=L.parentNode;L.style.visibility="hidden",document.body.appendChild(L),i=L.offsetWidth;var B=L.offsetHeight;mxClient.IS_QUIRKS&&m&&B>n&&(B=n,L.style.height=B+"px"),n=B,L.style.visibility="",Q.appendChild(L),v.style.left=this.format(e+i*T*this.state.scale)+"px",v.style.top=this.format(t+n*P*this.state.scale)+"px"}else this.state.alpha<1&&(L.style.filter="alpha(opacity="+this.state.alpha*100+")"),w.style.left=T*100+"%",w.style.top=P*100+"%"}else this.plainText(e,t,i,n,mxUtils$1.htmlEntities(s,!1),l,a,o,h,d,m,g,c)}}plainText(e,t,i,n,s,l,a,o,h,d,m,g,c){var f=this.state;e=(e+f.dx)*f.scale,t=(t+f.dy)*f.scale;var C=this.createVmlElement("shape");C.style.width="1px",C.style.height="1px",C.stroked="false";var v=this.createVmlElement("fill");v.color=f.fontColor,v.opacity=f.alpha*100+"%",C.appendChild(v);var w=this.createVmlElement("path");w.textpathok="true",w.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0),C.appendChild(w);var S=this.createVmlElement("textpath");S.style.cssText="v-text-align:"+l,S.style.align=l,S.style.fontFamily=f.fontFamily,S.string=s,S.on="true";var T=f.fontSize*f.scale/this.vmlScale;S.style.fontSize=T+"px",(f.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(S.style.fontWeight="bold"),(f.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(S.style.fontStyle="italic"),(f.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&(S.style.textDecoration="underline");var P=s.split(`
`),L=T+(P.length-1)*T*mxConstants$1.LINE_HEIGHT,k=0,G=0;if(a==mxConstants$1.ALIGN_BOTTOM?G=-L/2:a!=mxConstants$1.ALIGN_MIDDLE&&(G=L/2),g!=null){C.style.rotation=g;var Y=g*(Math.PI/180);k=Math.sin(Y)*G,G=Math.cos(Y)*G}C.appendChild(S),C.style.left=this.format(e-k)+"px",C.style.top=this.format(t+G)+"px",this.root.appendChild(C)}stroke(){this.addNode(!1,!0)}fill(){this.addNode(!0,!1)}fillAndStroke(){this.addNode(!0,!0)}}class mxSvgCanvas2D extends mxAbstractCanvas2D{constructor(e,t){super(),u(this,"useDomParser",typeof DOMParser=="function"&&typeof XMLSerializer=="function"),u(this,"node",null),u(this,"matchHtmlAlignment",!0),u(this,"textEnabled",!0),u(this,"foEnabled",!0),u(this,"foAltText","[Object]"),u(this,"foOffset",0),u(this,"textOffset",0),u(this,"imageOffset",0),u(this,"strokeTolerance",0),u(this,"minStrokeWidth",1),u(this,"refCount",0),u(this,"lineHeightCorrection",1),u(this,"pointerEventsValue","all"),u(this,"fontMetricsPadding",10),u(this,"cacheOffsetSize",!0),this.root=e,this.gradients=[],this.defs=null,this.styleEnabled=t??!1;var i=null;if(e.ownerDocument!=document){for(var n=e;n!=null&&n.nodeName!="svg";)n=n.parentNode;i=n}if(i!=null){var s=i.getElementsByTagName("defs");s.length>0&&(this.defs=i.getElementsByTagName("defs")[0]),this.defs==null&&(this.defs=this.createElement("defs"),i.firstChild!=null?i.insertBefore(this.defs,i.firstChild):i.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle())}}format(e){return parseFloat(parseFloat(e).toFixed(2))}getBaseUrl(){var e=window.location.href,t=e.lastIndexOf("#");return t>0&&(e=e.substring(0,t)),e}reset(){super.reset(),this.gradients=[]}createStyle(e){var t=this.createElement("style");return t.setAttribute("type","text/css"),mxUtils$1.write(t,"svg{font-family:"+mxConstants$1.DEFAULT_FONTFAMILY+";font-size:"+mxConstants$1.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),t}createElement(e,t){if(this.root.ownerDocument.createElementNS!=null)return this.root.ownerDocument.createElementNS(t||mxConstants$1.NS_SVG,e);var i=this.root.ownerDocument.createElement(e);return t!=null&&i.setAttribute("xmlns",t),i}getAlternateText(e,t,i,n,s,l,a,o,h,d,m,g,c){return l!=null?this.foAltText:null}createAlternateContent(e,t,i,n,s,l,a,o,h,d,m,g,c){var f=this.getAlternateText(e,t,i,n,s,l,a,o,h,d,m,g,c),C=this.state;if(f!=null&&C.fontSize>0){var v=o==mxConstants$1.ALIGN_TOP?1:o==mxConstants$1.ALIGN_BOTTOM?0:.3,w=a==mxConstants$1.ALIGN_RIGHT?"end":a==mxConstants$1.ALIGN_LEFT?"start":"middle",S=this.createElement("text");S.setAttribute("x",Math.round(t+C.dx)),S.setAttribute("y",Math.round(i+C.dy+v*C.fontSize)),S.setAttribute("fill",C.fontColor||"black"),S.setAttribute("font-family",C.fontFamily),S.setAttribute("font-size",Math.round(C.fontSize)+"px"),w!="start"&&S.setAttribute("text-anchor",w),(C.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&S.setAttribute("font-weight","bold"),(C.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&S.setAttribute("font-style","italic");var T=[];return(C.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&T.push("underline"),(C.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&T.push("line-through"),T.length>0&&S.setAttribute("text-decoration",T.join(" ")),mxUtils$1.write(S,f),S}else return null}createGradientId(e,t,i,n,s){e.charAt(0)=="#"&&(e=e.substring(1)),t.charAt(0)=="#"&&(t=t.substring(1)),e=e.toLowerCase()+"-"+i,t=t.toLowerCase()+"-"+n;var l=null;if(s==null||s==mxConstants$1.DIRECTION_SOUTH)l="s";else if(s==mxConstants$1.DIRECTION_EAST)l="e";else{var a=e;e=t,t=a,s==mxConstants$1.DIRECTION_NORTH?l="s":s==mxConstants$1.DIRECTION_WEST&&(l="e")}return"mx-gradient-"+e+"-"+t+"-"+l}getSvgGradient(e,t,i,n,s){var l=this.createGradientId(e,t,i,n,s),a=this.gradients[l];if(a==null){var o=this.root.ownerSVGElement,h=0,d=l+"-"+h;if(o!=null)for(a=o.ownerDocument.getElementById(d);a!=null&&a.ownerSVGElement!=o;)d=l+"-"+h++,a=o.ownerDocument.getElementById(d);else d="id"+ ++this.refCount;a==null&&(a=this.createSvgGradient(e,t,i,n,s),a.setAttribute("id",d),this.defs!=null?this.defs.appendChild(a):o.appendChild(a)),this.gradients[l]=a}return a.getAttribute("id")}createSvgGradient(e,t,i,n,s){var l=this.createElement("linearGradient");l.setAttribute("x1","0%"),l.setAttribute("y1","0%"),l.setAttribute("x2","0%"),l.setAttribute("y2","0%"),s==null||s==mxConstants$1.DIRECTION_SOUTH?l.setAttribute("y2","100%"):s==mxConstants$1.DIRECTION_EAST?l.setAttribute("x2","100%"):s==mxConstants$1.DIRECTION_NORTH?l.setAttribute("y1","100%"):s==mxConstants$1.DIRECTION_WEST&&l.setAttribute("x1","100%");var a=i<1?";stop-opacity:"+i:"",o=this.createElement("stop");return o.setAttribute("offset","0%"),o.setAttribute("style","stop-color:"+e+a),l.appendChild(o),a=n<1?";stop-opacity:"+n:"",o=this.createElement("stop"),o.setAttribute("offset","100%"),o.setAttribute("style","stop-color:"+t+a),l.appendChild(o),l}addNode(e,t){var i=this.node,n=this.state;if(i!=null){if(i.nodeName=="path")if(this.path!=null&&this.path.length>0)i.setAttribute("d",this.path.join(" "));else return;e&&n.fillColor!=null?this.updateFill():this.styleEnabled||(i.nodeName=="ellipse"&&mxClient.IS_FF?i.setAttribute("fill","transparent"):i.setAttribute("fill","none"),e=!1),t&&n.strokeColor!=null?this.updateStroke():this.styleEnabled||i.setAttribute("stroke","none"),n.transform!=null&&n.transform.length>0&&i.setAttribute("transform",n.transform),n.shadow&&this.root.appendChild(this.createShadow(i)),this.strokeTolerance>0&&!e&&this.root.appendChild(this.createTolerance(i)),this.pointerEvents?i.setAttribute("pointer-events",this.pointerEventsValue):!this.pointerEvents&&this.originalRoot==null&&i.setAttribute("pointer-events","none"),(i.nodeName!="rect"&&i.nodeName!="path"&&i.nodeName!="ellipse"||i.getAttribute("fill")!="none"&&i.getAttribute("fill")!="transparent"||i.getAttribute("stroke")!="none"||i.getAttribute("pointer-events")!="none")&&this.root.appendChild(i),this.node=null}}updateFill(){var e=this.state;if((e.alpha<1||e.fillAlpha<1)&&this.node.setAttribute("fill-opacity",e.alpha*e.fillAlpha),e.fillColor!=null)if(e.gradientColor!=null){var t=this.getSvgGradient(String(e.fillColor),String(e.gradientColor),e.gradientFillAlpha,e.gradientAlpha,e.gradientDirection);if(!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var i=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+i+"#"+t+")")}else this.node.setAttribute("fill","url(#"+t+")")}else this.node.setAttribute("fill",String(e.fillColor).toLowerCase())}getCurrentStrokeWidth(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))}updateStroke(){var e=this.state;this.node.setAttribute("stroke",String(e.strokeColor).toLowerCase()),(e.alpha<1||e.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",e.alpha*e.strokeAlpha);var t=this.getCurrentStrokeWidth();t!=1&&this.node.setAttribute("stroke-width",t),this.node.nodeName=="path"&&this.updateStrokeAttributes(),e.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((e.fixDash?1:e.strokeWidth)*e.scale))}updateStrokeAttributes(){var e=this.state;if(e.lineJoin!=null&&e.lineJoin!="miter"&&this.node.setAttribute("stroke-linejoin",e.lineJoin),e.lineCap!=null){var t=e.lineCap;t=="flat"&&(t="butt"),t!="butt"&&this.node.setAttribute("stroke-linecap",t)}e.miterLimit!=null&&(!this.styleEnabled||e.miterLimit!=10)&&this.node.setAttribute("stroke-miterlimit",e.miterLimit)}createDashPattern(e){var t=[];if(typeof this.state.dashPattern=="string"){var i=this.state.dashPattern.split(" ");if(i.length>0)for(var n=0;n<i.length;n++)t[n]=Number(i[n])*e}return t.join(" ")}createTolerance(e){var t=e.cloneNode(!0),i=parseFloat(t.getAttribute("stroke-width")||1)+this.strokeTolerance;return t.setAttribute("pointer-events","stroke"),t.setAttribute("visibility","hidden"),t.removeAttribute("stroke-dasharray"),t.setAttribute("stroke-width",i),t.setAttribute("fill","none"),t.setAttribute("stroke",mxClient.IS_OT?"none":"white"),t}createShadow(e){var t=e.cloneNode(!0),i=this.state;return t.getAttribute("fill")!="none"&&(!mxClient.IS_FF||t.getAttribute("fill")!="transparent")&&t.setAttribute("fill",i.shadowColor),t.getAttribute("stroke")!="none"&&t.setAttribute("stroke",i.shadowColor),t.setAttribute("transform","translate("+this.format(i.shadowDx*i.scale)+","+this.format(i.shadowDy*i.scale)+")"+(i.transform||"")),t.setAttribute("opacity",i.shadowAlpha),t}setLink(e){if(e==null)this.root=this.originalRoot;else{this.originalRoot=this.root;var t=this.createElement("a");t.setAttributeNS==null||this.root.ownerDocument!=document&&document.documentMode==null?t.setAttribute("xlink:href",e):t.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",e),this.root.appendChild(t),this.root=t}}rotate(e,t,i,n,s){if(e!=0||t||i){var l=this.state;if(n+=l.dx,s+=l.dy,n*=l.scale,s*=l.scale,l.transform=l.transform||"",t&&i)e+=180;else if(t!=i){var a=t?n:0,o=t?-1:1,h=i?s:0,d=i?-1:1;l.transform+="translate("+this.format(a)+","+this.format(h)+")scale("+this.format(o)+","+this.format(d)+")translate("+this.format(-a)+","+this.format(-h)+")"}(t?!i:i)&&(e*=-1),e!=0&&(l.transform+="rotate("+this.format(e)+","+this.format(n)+","+this.format(s)+")"),l.rotation=l.rotation+e,l.rotationCx=n,l.rotationCy=s}}begin(){super.begin(),this.node=this.createElement("path")}rect(e,t,i,n){var s=this.state,l=this.createElement("rect");l.setAttribute("x",this.format((e+s.dx)*s.scale)),l.setAttribute("y",this.format((t+s.dy)*s.scale)),l.setAttribute("width",this.format(i*s.scale)),l.setAttribute("height",this.format(n*s.scale)),this.node=l}roundrect(e,t,i,n,s,l){this.rect(e,t,i,n),s>0&&this.node.setAttribute("rx",this.format(s*this.state.scale)),l>0&&this.node.setAttribute("ry",this.format(l*this.state.scale))}ellipse(e,t,i,n){var s=this.state,l=this.createElement("ellipse");l.setAttribute("cx",this.format((e+i/2+s.dx)*s.scale)),l.setAttribute("cy",this.format((t+n/2+s.dy)*s.scale)),l.setAttribute("rx",i/2*s.scale),l.setAttribute("ry",n/2*s.scale),this.node=l}image(e,t,i,n,s,l,a,o){s=this.converter.convert(s),l=l??!0,a=a??!1,o=o??!1;var h=this.state;e+=h.dx,t+=h.dy;var d=this.createElement("image");d.setAttribute("x",this.format(e*h.scale)+this.imageOffset),d.setAttribute("y",this.format(t*h.scale)+this.imageOffset),d.setAttribute("width",this.format(i*h.scale)),d.setAttribute("height",this.format(n*h.scale)),d.setAttributeNS==null?d.setAttribute("xlink:href",s):d.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",s),l||d.setAttribute("preserveAspectRatio","none"),(h.alpha<1||h.fillAlpha<1)&&d.setAttribute("opacity",h.alpha*h.fillAlpha);var m=this.state.transform||"";if(a||o){var g=1,c=1,f=0,C=0;a&&(g=-1,f=-i-2*e),o&&(c=-1,C=-n-2*t),m+="scale("+g+","+c+")translate("+f*h.scale+","+C*h.scale+")"}m.length>0&&d.setAttribute("transform",m),this.pointerEvents||d.setAttribute("pointer-events","none"),this.root.appendChild(d)}convertHtml(e){if(this.useDomParser){var t=new DOMParser().parseFromString(e,"text/html");t!=null&&(e=new XMLSerializer().serializeToString(t.body),e.substring(0,5)=="<body"&&(e=e.substring(e.indexOf(">",5)+1)),e.substring(e.length-7,e.length)=="</body>"&&(e=e.substring(0,e.length-7)))}else if(document.implementation!=null&&document.implementation.createDocument!=null){var i=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),n=i.createElement("body");i.documentElement.appendChild(n);var s=document.createElement("div");s.innerHTML=e;for(var l=s.firstChild;l!=null;){var a=l.nextSibling;n.appendChild(i.adoptNode(l)),l=a}return n.innerHTML}else{var o=document.createElement("textarea");o.innerHTML=e.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=o.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return e}createDiv(e){var t=e;if(mxUtils$1.isNode(t)||(t="<div><div>"+this.convertHtml(t)+"</div></div>"),!mxClient.IS_IE11&&document.createElementNS){var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(mxUtils$1.isNode(t)){var n=document.createElement("div"),s=n.cloneNode(!1);this.root.ownerDocument!=document?n.appendChild(t.cloneNode(!0)):n.appendChild(t),s.appendChild(n),i.appendChild(s)}else i.innerHTML=t;return i}else return mxUtils$1.isNode(t)&&(t="<div><div>"+mxUtils$1.getXml(t)+"</div></div>"),t='<div xmlns="http://www.w3.org/1999/xhtml">'+t+"</div>",mxUtils$1.parseXml(t).documentElement}updateText(e,t,i,n,s,l,a,o,h,d,m){m!=null&&m.firstChild!=null&&m.firstChild.firstChild!=null&&this.updateTextNodes(e,t,i,n,s,l,a,o,h,d,m.firstChild)}addForeignObject(e,t,i,n,s,l,a,o,h,d,m,g,c,f,C){var v=this.createElement("g"),w=this.createElement("foreignObject");if(w.setAttribute("style","overflow: visible; text-align: left;"),w.setAttribute("pointer-events","none"),f.ownerDocument!=document&&(f=mxUtils$1.importNodeImplementation(w.ownerDocument,f,!0)),w.appendChild(f),v.appendChild(w),this.updateTextNodes(e,t,i,n,l,a,o,d,m,g,v),this.root.ownerDocument!=document){var S=this.createAlternateContent(w,e,t,i,n,s,l,a,o,h,d,m,g);if(S!=null){w.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var T=this.createElement("switch");T.appendChild(w),T.appendChild(S),v.appendChild(T)}}C.appendChild(v)}updateTextNodes(e,t,i,n,s,l,a,o,h,d,m){var g=this.state.scale;mxSvgCanvas2D.createCss(i+2,n,s,l,a,o,h,this.state.fontBackgroundColor!=null?this.state.fontBackgroundColor:null,this.state.fontBorderColor!=null?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+(l==mxConstants$1.ALIGN_TOP?"flex-start":l==mxConstants$1.ALIGN_BOTTOM?"flex-end":"center")+"; justify-content: unsafe "+(s==mxConstants$1.ALIGN_LEFT?"flex-start":s==mxConstants$1.ALIGN_RIGHT?"flex-end":"center")+"; ",this.getTextCss(),g,(c,f,C,v,w)=>{e+=this.state.dx,t+=this.state.dy;var S=m.firstChild,T=S.firstChild,P=T.firstChild,L=P.firstChild,k=(this.rotateHtml?this.state.rotation:0)+(d??0),G=(this.foOffset!=0?"translate("+this.foOffset+" "+this.foOffset+")":"")+(g!=1?"scale("+g+")":"");L.setAttribute("style",w),P.setAttribute("style",v),S.setAttribute("width",Math.ceil(1/Math.min(1,g)*100)+"%"),S.setAttribute("height",Math.ceil(1/Math.min(1,g)*100)+"%");var Y=Math.round(t+f);Y<0?S.setAttribute("y",Y):(S.removeAttribute("y"),C+="padding-top: "+Y+"px; "),T.setAttribute("style",C+"margin-left: "+Math.round(e+c)+"px;"),G+=k!=0?"rotate("+k+" "+e+" "+t+")":"",G!=""?m.setAttribute("transform",G):m.removeAttribute("transform"),this.state.alpha!=1?m.setAttribute("opacity",this.state.alpha):m.removeAttribute("opacity")})}static createCss(e,t,i,n,s,l,a,o,h,d,m,g,c){var f="box-sizing: border-box; font-size: 0; text-align: "+(i==mxConstants$1.ALIGN_LEFT?"left":i==mxConstants$1.ALIGN_RIGHT?"right":"center")+"; ",C=mxUtils$1.getAlignmentAsPoint(i,n),v="overflow: hidden; ",w="width: 1px; ",S="height: 1px; ",T=C.x*e,P=C.y*t;a?(w="width: "+Math.round(e)+"px; ",f+="max-height: "+Math.round(t)+"px; ",P=0):l=="fill"?(w="width: "+Math.round(e)+"px; ",S="height: "+Math.round(t)+"px; ",m+="width: 100%; height: 100%; ",f+=w+S):l=="width"?(w="width: "+Math.round(e)+"px; ",m+="width: 100%; ",f+=w,P=0,t>0&&(f+="max-height: "+Math.round(t)+"px; ")):(v="",P=0);var L="";o!=null&&(L+="background-color: "+o+"; "),h!=null&&(L+="border: 1px solid "+h+"; "),v==""||a?m+=L:f+=L,s&&e>0?(m+="white-space: normal; word-wrap: "+mxConstants$1.WORD_WRAP+"; ",w="width: "+Math.round(e)+"px; ",v!=""&&l!="fill"&&(P=0)):(m+="white-space: nowrap; ",v==""&&(T=0)),c(T,P,d+w+S,f+v,m,v)}getTextCss(){var e=this.state,t=mxConstants$1.ABSOLUTE_LINE_HEIGHT?e.fontSize*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT*this.lineHeightCorrection,i="display: inline-block; font-size: "+e.fontSize+"px; font-family: "+e.fontFamily+"; color: "+e.fontColor+"; line-height: "+t+"; pointer-events: "+(this.pointerEvents?this.pointerEventsValue:"none")+"; ";(e.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(i+="font-weight: bold; "),(e.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(i+="font-style: italic; ");var n=[];return(e.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&n.push("underline"),(e.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&n.push("line-through"),n.length>0&&(i+="text-decoration: "+n.join(" ")+"; "),i}text(e,t,i,n,s,l,a,o,h,d,m,g,c){if(this.textEnabled&&s!=null)if(g=g??0,this.foEnabled&&h=="html"){var f=this.createDiv(s);f!=null&&(c!=null&&f.setAttribute("dir",c),this.addForeignObject(e,t,i,n,s,l,a,o,h,d,m,g,c,f,this.root))}else this.plainText(e+this.state.dx,t+this.state.dy,i,n,s,l,a,o,d,m,g,c)}createClip(e,t,i,n){e=Math.round(e),t=Math.round(t),i=Math.round(i),n=Math.round(n);for(var s="mx-clip-"+e+"-"+t+"-"+i+"-"+n,l=0,a=s+"-"+l;document.getElementById(a)!=null;)a=s+"-"+ ++l;var o=this.createElement("clipPath");o.setAttribute("id",a);var h=this.createElement("rect");return h.setAttribute("x",e),h.setAttribute("y",t),h.setAttribute("width",i),h.setAttribute("height",n),o.appendChild(h),o}plainText(e,t,i,n,s,l,a,o,h,d,m,g){m=m??0;var c=this.state,f=c.fontSize,C=this.createElement("g"),v=c.transform||"";if(this.updateFont(C),m!=0&&(v+="rotate("+m+","+this.format(e*c.scale)+","+this.format(t*c.scale)+")"),g!=null&&C.setAttribute("direction",g),d&&i>0&&n>0){var w=e,Y=t;l==mxConstants$1.ALIGN_CENTER?w-=i/2:l==mxConstants$1.ALIGN_RIGHT&&(w-=i),h!="fill"&&(a==mxConstants$1.ALIGN_MIDDLE?Y-=n/2:a==mxConstants$1.ALIGN_BOTTOM&&(Y-=n));var S=this.createClip(w*c.scale-2,Y*c.scale-2,i*c.scale+4,n*c.scale+4);if(this.defs!=null?this.defs.appendChild(S):this.root.appendChild(S),!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var T=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");C.setAttribute("clip-path","url("+T+"#"+S.getAttribute("id")+")")}else C.setAttribute("clip-path","url(#"+S.getAttribute("id")+")")}var P=l==mxConstants$1.ALIGN_RIGHT?"end":l==mxConstants$1.ALIGN_CENTER?"middle":"start";P!="start"&&C.setAttribute("text-anchor",P),(!this.styleEnabled||f!=mxConstants$1.DEFAULT_FONTSIZE)&&C.setAttribute("font-size",f*c.scale+"px"),v.length>0&&C.setAttribute("transform",v),c.alpha<1&&C.setAttribute("opacity",c.alpha);var L=s.split(`
`),k=Math.round(f*mxConstants$1.LINE_HEIGHT),G=f+(L.length-1)*k,Y=t+f-1;if(a==mxConstants$1.ALIGN_MIDDLE)if(h=="fill")Y-=n/2;else{var te=(this.matchHtmlAlignment&&d&&n>0?Math.min(G,n):G)/2;Y-=te}else if(a==mxConstants$1.ALIGN_BOTTOM)if(h=="fill")Y-=n;else{var te=this.matchHtmlAlignment&&d&&n>0?Math.min(G,n):G;Y-=te+1}for(var ie=0;ie<L.length;ie++){if(L[ie].length>0&&mxUtils$1.trim(L[ie]).length>0){var ne=this.createElement("text");ne.setAttribute("x",this.format(e*c.scale)+this.textOffset),ne.setAttribute("y",this.format(Y*c.scale)+this.textOffset),mxUtils$1.write(ne,L[ie]),C.appendChild(ne)}Y+=k}this.root.appendChild(C),this.addTextBackground(C,s,e,t,i,h=="fill"?n:G,l,a,h)}updateFont(e){var t=this.state;e.setAttribute("fill",t.fontColor),(!this.styleEnabled||t.fontFamily!=mxConstants$1.DEFAULT_FONTFAMILY)&&e.setAttribute("font-family",t.fontFamily),(t.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&e.setAttribute("font-weight","bold"),(t.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&e.setAttribute("font-style","italic");var i=[];(t.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&i.push("underline"),(t.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&i.push("line-through"),i.length>0&&e.setAttribute("text-decoration",i.join(" "))}addTextBackground(e,t,i,n,s,l,a,o,h){var d=this.state;if(d.fontBackgroundColor!=null||d.fontBorderColor!=null){var m=null;if(h=="fill"||h=="width")a==mxConstants$1.ALIGN_CENTER?i-=s/2:a==mxConstants$1.ALIGN_RIGHT&&(i-=s),o==mxConstants$1.ALIGN_MIDDLE?n-=l/2:o==mxConstants$1.ALIGN_BOTTOM&&(n-=l),m=new mxRectangle((i+1)*d.scale,n*d.scale,(s-2)*d.scale,(l+2)*d.scale);else if(e.getBBox!=null&&this.root.ownerDocument==document)try{m=e.getBBox(),m=new mxRectangle(m.x,m.y+1,m.width,m.height)}catch{}else{var g=document.createElement("div");g.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?d.fontSize*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT,g.style.fontSize=d.fontSize+"px",g.style.fontFamily=d.fontFamily,g.style.whiteSpace="nowrap",g.style.position="absolute",g.style.visibility="hidden",g.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",g.style.zoom="1",(d.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(g.style.fontWeight="bold"),(d.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(g.style.fontStyle="italic"),t=mxUtils$1.htmlEntities(t,!1),g.innerHTML=t.replace(/\n/g,"<br/>"),document.body.appendChild(g);var s=g.offsetWidth,l=g.offsetHeight;g.parentNode.removeChild(g),a==mxConstants$1.ALIGN_CENTER?i-=s/2:a==mxConstants$1.ALIGN_RIGHT&&(i-=s),o==mxConstants$1.ALIGN_MIDDLE?n-=l/2:o==mxConstants$1.ALIGN_BOTTOM&&(n-=l),m=new mxRectangle((i+1)*d.scale,(n+2)*d.scale,s*d.scale,(l+1)*d.scale)}if(m!=null){var c=this.createElement("rect");c.setAttribute("fill",d.fontBackgroundColor||"none"),c.setAttribute("stroke",d.fontBorderColor||"none"),c.setAttribute("x",Math.floor(m.x-1)),c.setAttribute("y",Math.floor(m.y-1)),c.setAttribute("width",Math.ceil(m.width+2)),c.setAttribute("height",Math.ceil(m.height));var f=d.fontBorderColor!=null?Math.max(1,this.format(d.scale)):0;c.setAttribute("stroke-width",f),this.root.ownerDocument==document&&mxUtils$1.mod(f,2)==1&&c.setAttribute("transform","translate(0.5, 0.5)"),e.insertBefore(c,e.firstChild)}}}stroke(){this.addNode(!1,!0)}fill(){this.addNode(!0,!1)}fillAndStroke(){this.addNode(!0,!0)}}class mxShape{constructor(e){u(this,"dialect",null),u(this,"scale",1),u(this,"antiAlias",!0),u(this,"minSvgStrokeWidth",1),u(this,"bounds",null),u(this,"points",null),u(this,"node",null),u(this,"state",null),u(this,"style",null),u(this,"boundingBox",null),u(this,"svgStrokeTolerance",8),u(this,"pointerEvents",!0),u(this,"svgPointerEvents","all"),u(this,"shapePointerEvents",!1),u(this,"stencilPointerEvents",!1),u(this,"vmlScale",1),u(this,"outline",!1),u(this,"visible",!0),u(this,"useSvgBoundingBox",!1),u(this,"verticalTextRotation",-90),this.stencil=e,this.initStyles()}init(e){this.node==null&&(this.node=this.create(e),e?.appendChild(this.node))}initStyles(e){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1}isParseVml(){return!0}isHtmlAllowed(){return!1}getSvgScreenOffset(){var e=this.stencil&&this.stencil.strokewidth!="inherit"?Number(this.stencil.strokewidth):this.strokewidth;return mxUtils$1.mod(Math.max(1,Math.round(e*this.scale)),2)==1?.5:0}create(e){var t=null;return e!=null&&e.ownerSVGElement!=null?t=this.createSvg(e):this.dialect!=mxConstants$1.DIALECT_VML&&this.isHtmlAllowed()?t=this.createHtml(e):t=this.createVml(e),t}createSvg(){return document.createElementNS(mxConstants$1.NS_SVG,"g")}createVml(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e}createHtml(){var e=document.createElement("div");return e.style.position="absolute",e}reconfigure(){this.redraw()}redraw(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),this.node.nodeName=="DIV"&&this.isHtmlAllowed()?this.redrawHtmlShape():this.redrawShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)}clear(){if(this.node.ownerSVGElement!=null)for(;this.node.lastChild!=null;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(this.cursor!=null?"cursor:"+this.cursor+";":""),this.node.innerHTML=""}updateBoundsFromPoints(){var e=this.points;if(e!=null&&e.length>0&&e[0]!=null){this.bounds=new mxRectangle(Number(e[0].x),Number(e[0].y),1,1);for(var t=1;t<this.points.length;t++)e[t]!=null&&this.bounds.add(new mxRectangle(Number(e[t].x),Number(e[t].y),1,1))}}getLabelBounds(e){var t=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),i=e;if(t!=mxConstants$1.DIRECTION_SOUTH&&t!=mxConstants$1.DIRECTION_NORTH&&this.state!=null&&this.state.text!=null&&this.state.text.isPaintBoundsInverted()){i=i.clone();var n=i.width;i.width=i.height,i.height=n}var s=this.getLabelMargins(i);if(s!=null){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,!1)=="1",a=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,!1)=="1";if(this.state!=null&&this.state.text!=null&&this.state.text.isPaintBoundsInverted()){var n=s.x;s.x=s.height,s.height=s.width,s.width=s.y,s.y=n,n=l,l=a,a=n}return mxUtils$1.getDirectedBounds(e,s,this.style,l,a)}return e}getLabelMargins(e){return null}checkBounds(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&this.bounds!=null&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0}createVmlGroup(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e.style.width=this.node.style.width,e.style.height=this.node.style.height,e}redrawShape(){var e=this.createCanvas();e!=null&&(e.pointerEvents=this.pointerEvents,this.paint(e),this.node!=e.root&&this.node.insertAdjacentHTML("beforeend",e.root.outerHTML),this.node.nodeName=="DIV"&&document.documentMode==8&&(this.node.style.filter="",mxUtils$1.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(e))}createCanvas(){var e=null;return this.node.ownerSVGElement!=null&&(e=this.createSvgCanvas()),e!=null&&this.outline&&(e.setStrokeWidth(this.strokewidth),e.setStrokeColor(this.stroke),this.isDashed!=null&&e.setDashed(this.isDashed),e.setStrokeWidth=function(){},e.setStrokeColor=function(){},e.setFillColor=function(){},e.setGradient=function(){},e.setDashed=function(){},e.text=function(){}),e}createSvgCanvas(){var e=new mxSvgCanvas2D(this.node,!1);e.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,e.pointerEventsValue=this.svgPointerEvents;var t=this.getSvgScreenOffset();return t!=0?this.node.setAttribute("transform","translate("+t+","+t+")"):this.node.removeAttribute("transform"),e.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(e.format=function(i){return Math.round(parseFloat(i))}),e}createVmlCanvas(){var e=document.documentMode==8&&this.isParseVml()?this.createVmlGroup():this.node,t=new mxVmlCanvas2D(e,!1);if(e.tagUrn!=""){var i=Math.max(1,Math.round(this.bounds.width)),n=Math.max(1,Math.round(this.bounds.height));e.coordsize=i*this.vmlScale+","+n*this.vmlScale,t.scale(this.vmlScale),t.vmlScale=this.vmlScale}var s=this.scale;return t.translate(-Math.round(this.bounds.x/s),-Math.round(this.bounds.y/s)),t}updateVmlContainer(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px";var e=Math.max(1,Math.round(this.bounds.width)),t=Math.max(1,Math.round(this.bounds.height));this.node.style.width=e+"px",this.node.style.height=t+"px",this.node.style.overflow="visible"}redrawHtmlShape(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)}updateHtmlFilters(e){var t="";if(this.opacity<100&&(t+="alpha(opacity="+this.opacity+")"),this.isShadow&&(t+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants$1.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants$1.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants$1.VML_SHADOWCOLOR+"')"),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE){var i=this.fill,n=this.gradient,s="0",l={east:0,south:1,west:2,north:3},a=this.direction!=null?l[this.direction]:0;if(this.gradientDirection!=null&&(a=mxUtils$1.mod(a+l[this.gradientDirection]-1,4)),a==1){s="1";var o=i;i=n,n=o}else if(a==2){var o=i;i=n,n=o}else a==3&&(s="1");t+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+i+"', endColorStr='"+n+"', gradientType='"+s+"')"}e.style.filter=t}updateHtmlColors(e){var t=this.stroke;t!=null&&t!=mxConstants$1.NONE?(e.style.borderColor=t,this.isDashed?e.style.borderStyle="dashed":this.strokewidth>0&&(e.style.borderStyle="solid"),e.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):e.style.borderWidth="0px",t=this.outline?null:this.fill,t!=null&&t!=mxConstants$1.NONE?(e.style.backgroundColor=t,e.style.backgroundImage="none"):this.pointerEvents?e.style.backgroundColor="transparent":document.documentMode==8?mxUtils$1.addTransparentBackgroundFilter(e):this.setTransparentBackgroundImage(e)}updateHtmlBounds(e){var t=document.documentMode>=9?0:Math.ceil(this.strokewidth*this.scale);e.style.borderWidth=Math.max(1,t)+"px",e.style.overflow="hidden",e.style.left=Math.round(this.bounds.x-t/2)+"px",e.style.top=Math.round(this.bounds.y-t/2)+"px",document.compatMode=="CSS1Compat"&&(t=-t),e.style.width=Math.round(Math.max(0,this.bounds.width+t))+"px",e.style.height=Math.round(Math.max(0,this.bounds.height+t))+"px"}destroyCanvas(e){if(e instanceof mxSvgCanvas2D){for(var t in e.gradients){var i=e.gradients[t];i!=null&&(i.mxRefCount=(i.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=e.gradients}}paint(e){var t=!1;if(e!=null&&this.outline){var i=e.stroke;e.stroke=function(){t=!0,i.apply(this,arguments)};var n=e.fillAndStroke;e.fillAndStroke=function(){t=!0,n.apply(this,arguments)}}var s=this.scale,l=this.bounds.x/s,a=this.bounds.y/s,o=this.bounds.width/s,h=this.bounds.height/s;if(this.isPaintBoundsInverted()){var d=(o-h)/2;l+=d,a-=d;var m=o;o=h,h=m}this.updateTransform(e,l,a,o,h),this.configureCanvas(e,l,a,o,h);var g=null;if(this.stencil==null&&this.points==null&&this.shapePointerEvents||this.stencil!=null&&this.stencilPointerEvents){var c=this.createBoundingBox();if(this.dialect==mxConstants$1.DIALECT_SVG)g=this.createTransparentSvgRectangle(c.x,c.y,c.width,c.height),this.node.appendChild(g);else{var f=e.createRect("rect",c.x/s,c.y/s,c.width/s,c.height/s);f.appendChild(e.createTransparentFill()),f.stroked="false",e.root.appendChild(f)}}if(this.stencil!=null)this.stencil.drawShape(e,this,l,a,o,h);else if(e.setStrokeWidth(this.strokewidth),this.points!=null){for(var C=[],v=0;v<this.points.length;v++)this.points[v]!=null&&C.push(new mxPoint(this.points[v].x/s,this.points[v].y/s));this.paintEdgeShape(e,C)}else this.paintVertexShape(e,l,a,o,h);g!=null&&e.state!=null&&e.state.transform!=null&&g.setAttribute("transform",e.state.transform),e!=null&&this.outline&&!t&&(e.rect(l,a,o,h),e.stroke())}configureCanvas(e,t,i,n,s){var l=null;if(this.style!=null&&(l=this.style.dashPattern),e.setAlpha(this.opacity/100),e.setFillAlpha(this.fillOpacity/100),e.setStrokeAlpha(this.strokeOpacity/100),this.isShadow!=null&&e.setShadow(this.isShadow),this.isDashed!=null&&e.setDashed(this.isDashed,this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FIX_DASH,!1)==1:!1),l!=null&&e.setDashPattern(l),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE){var a=this.getGradientBounds(e,t,i,n,s);e.setGradient(this.fill,this.gradient,a.x,a.y,a.width,a.height,this.gradientDirection)}else e.setFillColor(this.fill);e.setStrokeColor(this.stroke)}getGradientBounds(e,t,i,n,s){return new mxRectangle(Number(t),Number(i),n,s)}updateTransform(e,t,i,n,s){e.scale(this.scale),e.rotate(this.getShapeRotation(),this.flipH,this.flipV,t+n/2,i+s/2)}paintVertexShape(e,t,i,n,s){this.paintBackground(e,t,i,n,s),(!this.outline||this.style==null||mxUtils$1.getValue(this.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0)&&(e.setShadow(!1),this.paintForeground(e,t,i,n,s))}paintBackground(e,t,i,n,s){}paintForeground(e,t,i,n,s){}paintEdgeShape(e,t){}getArcSize(e,t){var i=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")i=Math.min(e/2,Math.min(t/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;i=Math.min(e*n,t*n)}return i}paintGlassEffect(e,t,i,n,s,l){var a=Math.ceil(this.strokewidth/2),o=.4;e.setGradient("#ffffff","#ffffff",t,i,n,s*.6,"south",.9,.1),e.begin(),l+=2*a,this.isRounded?(e.moveTo(t-a+l,i-a),e.quadTo(t-a,i-a,t-a,i-a+l),e.lineTo(t-a,i+s*o),e.quadTo(t+n*.5,i+s*.7,t+n+a,i+s*o),e.lineTo(t+n+a,i-a+l),e.quadTo(t+n+a,i-a,t+n+a-l,i-a)):(e.moveTo(t-a,i-a),e.lineTo(t-a,i+s*o),e.quadTo(t+n*.5,i+s*.7,t+n+a,i+s*o),e.lineTo(t+n+a,i-a)),e.close(),e.fill()}addPoints(e,t,i,n,s,l,a){if(t!=null&&t.length>0){a=a??!0;var o=t[t.length-1];if(s&&i){t=t.slice();var h=t[0],d=new mxPoint(o.x+(h.x-o.x)/2,o.y+(h.y-o.y)/2);t.splice(0,0,d)}var m=t[0],g=1;for(a?e.moveTo(m.x,m.y):e.lineTo(m.x,m.y);g<(s?t.length:t.length-1);){var c=t[mxUtils$1.mod(g,t.length)],f=m.x-c.x,C=m.y-c.y;if(i&&(f!=0||C!=0)&&(l==null||mxUtils$1.indexOf(l,g-1)<0)){var v=Math.sqrt(f*f+C*C),w=f*Math.min(n,v/2)/v,S=C*Math.min(n,v/2)/v,T=c.x+w,P=c.y+S;e.lineTo(T,P);for(var L=t[mxUtils$1.mod(g+1,t.length)];g<t.length-2&&Math.round(L.x-c.x)==0&&Math.round(L.y-c.y)==0;)L=t[mxUtils$1.mod(g+2,t.length)],g++;f=L.x-c.x,C=L.y-c.y,v=Math.max(1,Math.sqrt(f*f+C*C));var k=f*Math.min(n,v/2)/v,G=C*Math.min(n,v/2)/v,Y=c.x+k,te=c.y+G;e.quadTo(c.x,c.y,Y,te),c=new mxPoint(Y,te)}else e.lineTo(c.x,c.y);m=c,g++}s?e.close():e.lineTo(o.x,o.y)}}resetStyles(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass}apply(e){if(this.state=e,this.style=e.style,this.style!=null){if(this.fill=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING,this.spacing),this.startSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ROTATION,this.rotation),this.direction=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DIRECTION,this.direction),this.flipH=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,0)==1,this.flipV=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,0)==1,this.stencil!=null&&(this.flipH=mxUtils$1.getValue(this.style,"stencilFlipH",0)==1||this.flipH,this.flipV=mxUtils$1.getValue(this.style,"stencilFlipV",0)==1||this.flipV),this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH){var t=this.flipH;this.flipH=this.flipV,this.flipV=t}this.isShadow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOW,this.isShadow)==1,this.isDashed=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DASHED,this.isDashed)==1,this.isRounded=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ROUNDED,this.isRounded)==1,this.glass=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GLASS,this.glass)==1,this.fill==mxConstants$1.NONE&&(this.fill=null),this.gradient==mxConstants$1.NONE&&(this.gradient=null),this.stroke==mxConstants$1.NONE&&(this.stroke=null)}}setCursor(e){e==null&&(e=""),this.cursor=e,this.node!=null&&(this.node.style.cursor=e)}getCursor(){return this.cursor}isRoundable(){return!1}updateBoundingBox(){if(this.useSvgBoundingBox&&this.node!=null&&this.node.ownerSVGElement!=null)try{var e=this.node.getBBox();if(e.width>0&&e.height>0){this.boundingBox=new mxRectangle(e.x,e.y,e.width,e.height),this.boundingBox.grow(this.strokewidth*this.scale/2);return}}catch{console.log("updateBoundingBox   Err")}if(this.bounds!=null){var t=this.createBoundingBox();if(t!=null){this.augmentBoundingBox(t);var i=this.getShapeRotation();i!=0&&(t=mxUtils$1.getBoundingBox(t,i))}this.boundingBox=t}}createBoundingBox(){var e=this.bounds.clone();return(this.stencil!=null&&(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&e.rotate90(),e}augmentBoundingBox(e){this.isShadow&&(e.width+=Math.ceil(mxConstants$1.SHADOW_OFFSET_X*this.scale),e.height+=Math.ceil(mxConstants$1.SHADOW_OFFSET_Y*this.scale)),e.grow(this.strokewidth*this.scale/2)}isPaintBoundsInverted(){return this.stencil==null&&(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH)}getRotation(){return this.rotation!=null?this.rotation:0}getTextRotation(){var e=this.getRotation();return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,1)!=1&&(e+=this.verticalTextRotation),e}getShapeRotation(){var e=this.getRotation();return this.direction!=null&&(this.direction==mxConstants$1.DIRECTION_NORTH?e+=270:this.direction==mxConstants$1.DIRECTION_WEST?e+=180:this.direction==mxConstants$1.DIRECTION_SOUTH&&(e+=90)),e}createTransparentSvgRectangle(e,t,i,n){var s=document.createElementNS(mxConstants$1.NS_SVG,"rect");return s.setAttribute("x",e),s.setAttribute("y",t),s.setAttribute("width",i),s.setAttribute("height",n),s.setAttribute("fill","none"),s.setAttribute("stroke","none"),s.setAttribute("pointer-events","all"),s}setTransparentBackgroundImage(e){e.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"}releaseSvgGradients(e){if(e!=null)for(var t in e){var i=e[t];i!=null&&(i.mxRefCount=(i.mxRefCount||0)-1,i.mxRefCount==0&&i.parentNode!=null&&i.parentNode.removeChild(i))}}destroy(){this.node!=null&&(mxEvent$1.release(this.node),this.node.parentNode!=null&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null}}class mxPolyline extends mxShape{constructor(e,t,i){super(),this.points=e,this.stroke=t,this.strokewidth=i??1}getRotation(){return 0}getShapeRotation(){return 0}isPaintBoundsInverted(){return!1}paintEdgeShape(e,t){var i=e.pointerEventsValue;e.pointerEventsValue="stroke",this.style==null||this.style[mxConstants$1.STYLE_CURVED]!=1?this.paintLine(e,t,this.isRounded):this.paintCurvedLine(e,t),e.pointerEventsValue=i}paintLine(e,t,i){var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,t,i,n,!1),e.stroke()}paintCurvedLine(e,t){e.begin();var i=t[0],n=t.length;e.moveTo(i.x,i.y);for(var s=1;s<n-2;s++){var o=t[s],h=t[s+1],l=(o.x+h.x)/2,a=(o.y+h.y)/2;e.quadTo(o.x,o.y,l,a)}var o=t[n-2],h=t[n-1];e.quadTo(o.x,o.y,h.x,h.y),e.stroke()}}class mxGuide{constructor(e,t){u(this,"states",null),u(this,"horizontal",!0),u(this,"vertical",!0),u(this,"guideX",null),u(this,"guideY",null),u(this,"rounded",!1),u(this,"tolerance",2),this.graph=e,this.setStates(t)}setStates(e){this.states=e}isEnabledForEvent(e){return!0}getGuideTolerance(e){return e&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance}createGuideShape(e){var t=new mxPolyline([],mxConstants$1.GUIDE_COLOR,mxConstants$1.GUIDE_STROKEWIDTH);return t.isDashed=!0,t}isStateIgnored(e){return!1}move(e,t,i,n){if(this.states!=null&&(this.horizontal||this.vertical)&&e!=null&&t!=null){let oe=function(Z,B,re){var se=!1;re&&Math.abs(Z-S)<f?(t.x=Z-e.getCenterX(),f=Math.abs(Z-S),se=!0):re||(Math.abs(Z-v)<f?(t.x=Z-e.x,f=Math.abs(Z-v),se=!0):Math.abs(Z-w)<f&&(t.x=Z-e.x-e.width,f=Math.abs(Z-w),se=!0)),se&&(h=B,d=Z,this.guideX==null&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),o=o||se},le=function(Z,B,re){var se=!1;re&&Math.abs(Z-L)<C?(t.y=Z-e.getCenterY(),C=Math.abs(Z-L),se=!0):re||(Math.abs(Z-T)<C?(t.y=Z-e.y,C=Math.abs(Z-T),se=!0):Math.abs(Z-P)<C&&(t.y=Z-e.y-e.height,C=Math.abs(Z-P),se=!0)),se&&(g=B,c=Z,this.guideY==null&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),m=m||se};var s=this.graph.getView().scale,l=this.getGuideTolerance(i)*s,a=e.clone();a.x+=t.x,a.y+=t.y;for(var o=!1,h=null,d=null,m=!1,g=null,c=null,f=l,C=l,v=a.x,w=a.x+a.width,S=a.getCenterX(),T=a.y,P=a.y+a.height,L=a.getCenterY(),k=0;k<this.states.length;k++){var G=this.states[k];G!=null&&!this.isStateIgnored(G)&&(this.horizontal&&(oe.call(this,G.getCenterX(),G,!0),oe.call(this,G.x,G,!1),oe.call(this,G.x+G.width,G,!1),G.cell==null&&oe.call(this,G.getCenterX(),G,!1)),this.vertical&&(le.call(this,G.getCenterY(),G,!0),le.call(this,G.y,G,!1),le.call(this,G.y+G.height,G,!1),G.cell==null&&le.call(this,G.getCenterY(),G,!1)))}this.graph.snapDelta(t,e,!i,o,m),t=this.getDelta(e,h,t.x,g,t.y);var Y=this.graph.container;if(!o&&this.guideX!=null)this.guideX.node.style.visibility="hidden";else if(this.guideX!=null){var te=null,ie=null;h!=null&&e!=null&&(te=Math.min(e.y+t.y-this.graph.panDy,h.y),ie=Math.max(e.y+e.height+t.y-this.graph.panDy,h.y+h.height)),te!=null&&ie!=null?this.guideX.points=[new mxPoint(d,te),new mxPoint(d,ie)]:this.guideX.points=[new mxPoint(d,-this.graph.panDy),new mxPoint(d,Y.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(h,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()}if(!m&&this.guideY!=null)this.guideY.node.style.visibility="hidden";else if(this.guideY!=null){var ne=null,q=null;g!=null&&e!=null&&(ne=Math.min(e.x+t.x-this.graph.panDx,g.x),q=Math.max(e.x+e.width+t.x-this.graph.panDx,g.x+g.width)),ne!=null&&q!=null?this.guideY.points=[new mxPoint(ne,c),new mxPoint(q,c)]:this.guideY.points=[new mxPoint(-this.graph.panDx,c),new mxPoint(Y.scrollWidth-3-this.graph.panDx,c)],this.guideY.stroke=this.getGuideColor(g,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()}}return t}getDelta(e,t,i,n,s){var l=this.graph.view.scale;return(this.rounded||t!=null&&t.cell==null)&&(i=Math.round((e.x+i)/l)*l-e.x),(this.rounded||n!=null&&n.cell==null)&&(s=Math.round((e.y+s)/l)*l-e.y),new mxPoint(i,s)}getGuideColor(e,t){return mxConstants$1.GUIDE_COLOR}hide(){this.setVisible(!1)}setVisible(e){this.guideX!=null&&(this.guideX.node.style.visibility=e?"visible":"hidden"),this.guideY!=null&&(this.guideY.node.style.visibility=e?"visible":"hidden")}destroy(){this.guideX!=null&&(this.guideX.destroy(),this.guideX=null),this.guideY!=null&&(this.guideY.destroy(),this.guideY=null)}}class mxDragSource{constructor(e,t){u(this,"dragOffset",null),u(this,"dragElement",null),u(this,"previewElement",null),u(this,"enabled",!0),u(this,"currentGraph",null),u(this,"currentDropTarget",null),u(this,"currentPoint",null),u(this,"currentGuide",null),u(this,"currentHighlight",null),u(this,"autoscroll",!0),u(this,"guidesEnabled",!0),u(this,"gridEnabled",!0),u(this,"highlightDropTargets",!0),u(this,"dragElementZIndex",100),u(this,"dragElementOpacity",70),u(this,"checkEventSource",!0),this.element=e,this.dropHandler=t,mxEvent$1.addGestureListeners(e,i=>{this.mouseDown(i)}),mxEvent$1.addListener(e,"dragstart",function(i){mxEvent$1.consume(i)}),this.eventConsumer=function(i,n){var s=n.getProperty("eventName"),l=n.getProperty("event");s!=mxEvent$1.MOUSE_DOWN&&l.consume()}}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isGuidesEnabled(){return this.guidesEnabled}setGuidesEnabled(e){this.guidesEnabled=e}isGridEnabled(){return this.gridEnabled}setGridEnabled(e){this.gridEnabled=e}getGraphForEvent(e){return null}getDropTarget(e,t,i,n){return e.getCellAt(t,i)}createDragElement(e){return this.element.cloneNode(!0)}createPreviewElement(e){return null}isActive(){return this.mouseMoveHandler!=null}reset(){this.currentGraph!=null&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()}mouseDown(e){this.enabled&&!mxEvent$1.isConsumed(e)&&this.mouseMoveHandler==null&&(this.startDrag(e),this.mouseMoveHandler=mxUtils$1.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils$1.bind(this,this.mouseUp),mxEvent$1.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent$1.isMouseEvent(e)&&(this.eventSource=mxEvent$1.getSource(e),mxEvent$1.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))}startDrag(e){this.dragElement=this.createDragElement(e),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils$1.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")}stopDrag(){this.removeDragElement()}removeDragElement(){this.dragElement!=null&&(this.dragElement.parentNode!=null&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)}getElementForEvent(e){return mxEvent$1.isTouchEvent(e)||mxEvent$1.isPenEvent(e)?document.elementFromPoint(mxEvent$1.getClientX(e),mxEvent$1.getClientY(e)):mxEvent$1.getSource(e)}graphContainsEvent(e,t){var i=mxEvent$1.getClientX(t),n=mxEvent$1.getClientY(t),s=mxUtils$1.getOffset(e.container),l=mxUtils$1.getScrollOrigin(),a=this.getElementForEvent(t);if(this.checkEventSource)for(;a!=null&&a!=e.container;)a=a.parentNode;return a!=null&&i>=s.x-l.x&&n>=s.y-l.y&&i<=s.x-l.x+e.container.offsetWidth&&n<=s.y-l.y+e.container.offsetHeight}mouseMove(e){var t=this.getGraphForEvent(e);if(t!=null&&!this.graphContainsEvent(t,e)&&(t=null),t!=this.currentGraph&&(this.currentGraph!=null&&this.dragExit(this.currentGraph,e),this.currentGraph=t,this.currentGraph!=null&&this.dragEnter(this.currentGraph,e)),this.currentGraph!=null&&this.dragOver(this.currentGraph,e),this.dragElement!=null&&(this.previewElement==null||this.previewElement.style.visibility!="visible")){var i=mxEvent$1.getClientX(e),n=mxEvent$1.getClientY(e);this.dragElement.parentNode==null&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",this.dragOffset!=null&&(i+=this.dragOffset.x,n+=this.dragOffset.y);var s=mxUtils$1.getDocumentScrollOrigin(document);this.dragElement.style.left=i+s.x+"px",this.dragElement.style.top=n+s.y+"px"}else this.dragElement!=null&&(this.dragElement.style.visibility="hidden");mxEvent$1.consume(e)}mouseUp(e){if(this.currentGraph!=null){if(this.currentPoint!=null&&(this.previewElement==null||this.previewElement.style.visibility!="hidden")){var t=this.currentGraph.view.scale,i=this.currentGraph.view.translate,n=this.currentPoint.x/t-i.x,s=this.currentPoint.y/t-i.y;this.drop(this.currentGraph,e,this.currentDropTarget,n,s)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent$1.consume(e)}removeListeners(){this.eventSource!=null&&(mxEvent$1.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent$1.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null}dragEnter(e,t){e.isMouseDown=!0,e.isMouseTrigger=mxEvent$1.isMouseEvent(t),this.previewElement=this.createPreviewElement(e),this.previewElement!=null&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&this.previewElement!=null&&(this.currentGuide=new mxGuide(e,e.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(e,mxConstants$1.DROP_TARGET_COLOR)),e.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.eventConsumer)}dragExit(e,t){this.currentDropTarget=null,this.currentPoint=null,e.isMouseDown=!1,e.removeListener(this.eventConsumer),this.previewElement!=null&&(this.previewElement.parentNode!=null&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),this.currentGuide!=null&&(this.currentGuide.destroy(),this.currentGuide=null),this.currentHighlight!=null&&(this.currentHighlight.destroy(),this.currentHighlight=null)}dragOver(e,t){var i=mxUtils$1.getOffset(e.container),n=mxUtils$1.getScrollOrigin(e.container),s=mxEvent$1.getClientX(t)-i.x+n.x-e.panDx,l=mxEvent$1.getClientY(t)-i.y+n.y-e.panDy;if(e.autoScroll&&(this.autoscroll==null||this.autoscroll)&&e.scrollPointToVisible(s,l,e.autoExtend),this.currentHighlight!=null&&e.isDropEnabled()){this.currentDropTarget=this.getDropTarget(e,s,l,t);var a=e.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(a)}if(this.previewElement!=null){this.previewElement.parentNode==null&&(e.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var o=this.isGridEnabled()&&e.isGridEnabledEvent(t),h=!0;if(this.currentGuide!=null&&this.currentGuide.isEnabledForEvent(t)){var d=parseInt(this.previewElement.style.width),m=parseInt(this.previewElement.style.height),g=new mxRectangle(0,0,d,m),c=new mxPoint(s,l);c=this.currentGuide.move(g,c,o,!0),h=!1,s=c.x,l=c.y}else if(o){var f=e.view.scale,C=e.view.translate,v=e.gridSize/2;s=(e.snap(s/f-C.x-v)+C.x)*f,l=(e.snap(l/f-C.y-v)+C.y)*f}this.currentGuide!=null&&h&&this.currentGuide.hide(),this.previewOffset!=null&&(s+=this.previewOffset.x,l+=this.previewOffset.y),this.previewElement.style.left=Math.round(s)+"px",this.previewElement.style.top=Math.round(l)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(s,l)}drop(e,t,i,n,s){this.dropHandler.apply(this,arguments),e.container.style.visibility!="hidden"&&e.container.focus()}}class mxEventSource{constructor(e){u(this,"eventListeners",null),u(this,"eventsEnabled",!0),u(this,"eventSource",null),this.setEventSource(e)}isEventsEnabled(){return this.eventsEnabled}setEventsEnabled(e){this.eventsEnabled=e}getEventSource(){return this.eventSource}setEventSource(e){this.eventSource=e}addListener(e,t){this.eventListeners==null&&(this.eventListeners=[]),this.eventListeners.push(e),this.eventListeners.push(t)}removeListener(e){if(this.eventListeners!=null)for(var t=0;t<this.eventListeners.length;)this.eventListeners[t+1]==e?this.eventListeners.splice(t,2):t+=2}fireEvent(e,t){if(this.eventListeners!=null&&this.isEventsEnabled()){e==null&&(e=new mxEventObject$1),t==null&&(t=this.getEventSource()),t==null&&(t=this);for(var i=[t,e],n=0;n<this.eventListeners.length;n+=2){var s=this.eventListeners[n];(s==null||s==e.getName())&&this.eventListeners[n+1].apply(this,i)}}}}class mxWindow extends mxEventSource{constructor(e,t,i,n,s,l,a,o,h,d){super(),u(this,"closeImage",mxClient.imageBasePath+"/close.gif"),u(this,"minimizeImage",mxClient.imageBasePath+"/minimize.gif"),u(this,"normalizeImage",mxClient.imageBasePath+"/normalize.gif"),u(this,"maximizeImage",mxClient.imageBasePath+"/maximize.gif"),u(this,"resizeImage",mxClient.imageBasePath+"/resize.gif"),u(this,"visible",!1),u(this,"minimumSize",new mxRectangle(0,0,50,40)),u(this,"destroyOnClose",!0),u(this,"contentHeightCorrection",document.documentMode==8||document.documentMode==7?6:2),u(this,"title",null),u(this,"content",null),t!=null&&(a=a??!0,this.content=t,this.init(i,n,s,l,d),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(a),this.setTitle(e),(o==null||o)&&this.installMoveHandler(),h!=null&&h.parentNode!=null?h.parentNode.replaceChild(this.div,h):document.body.appendChild(this.div))}init(e,t,i,n,s){s=s??"mxWindow",this.div=document.createElement("div"),this.div.className=s,this.div.style.left=e+"px",this.div.style.top=t+"px",this.table=document.createElement("table"),this.table.className=s,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),i!=null&&(mxClient.IS_QUIRKS||(this.div.style.width=i+"px"),this.table.style.width=i+"px"),n!=null&&(mxClient.IS_QUIRKS||(this.div.style.height=n+"px"),this.table.style.height=n+"px");var l=document.createElement("tbody"),a=document.createElement("tr");this.title=document.createElement("td"),this.title.className=s+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),a.appendChild(this.title),l.appendChild(a),a=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=s+"Pane",document.documentMode==7&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=s+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),(mxClient.IS_QUIRKS||this.content.nodeName.toUpperCase()!="DIV")&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),a.appendChild(this.td),l.appendChild(a),this.table.appendChild(l),this.div.appendChild(this.table);var o=h=>{this.activate()};mxEvent$1.addGestureListeners(this.title,o),mxEvent$1.addGestureListeners(this.table,o),this.hide()}setTitle(e){for(var t=this.title.firstChild;t!=null;){var i=t.nextSibling;t.nodeType==mxConstants$1.NODETYPE_TEXT&&t.parentNode.removeChild(t),t=i}mxUtils$1.write(this.title,e||""),this.title.appendChild(this.buttons)}setScrollable(e){(navigator.userAgent==null||navigator.userAgent.indexOf("Presto/2.5")<0)&&(e?this.contentWrapper.style.overflow="auto":this.contentWrapper.style.overflow="hidden")}activate(){if(mxWindow.activeWindow!=this){var e=mxUtils$1.getCurrentStyle(this.getElement()),t=e!=null?e.zIndex:3;if(mxWindow.activeWindow){var i=mxWindow.activeWindow.getElement();i!=null&&i.style!=null&&(i.style.zIndex=t)}var n=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(t)+1,this.fireEvent(new mxEventObject$1(mxEvent$1.ACTIVATE,"previousWindow",n))}}getElement(){return this.div}fit(){mxUtils$1.fit(this.div)}isResizable(){return this.resize!=null?this.resize.style.display!="none":!1}setResizable(e){if(e)if(this.resize==null){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize";var t=null,i=null,n=null,s=null,l=h=>{this.activate(),t=mxEvent$1.getClientX(h),i=mxEvent$1.getClientY(h),n=this.div.offsetWidth,s=this.div.offsetHeight,mxEvent$1.addGestureListeners(document,null,a,o),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_START,"event",h)),mxEvent$1.consume(h)},a=h=>{if(t!=null&&i!=null){var d=mxEvent$1.getClientX(h)-t,m=mxEvent$1.getClientY(h)-i;this.setSize(n+d,s+m),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE,"event",h)),mxEvent$1.consume(h)}},o=h=>{t!=null&&i!=null&&(t=null,i=null,mxEvent$1.removeGestureListeners(document,null,a,o),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_END,"event",h)),mxEvent$1.consume(h))};mxEvent$1.addGestureListeners(this.resize,l,a,o),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else this.resize!=null&&(this.resize.style.display="none")}setSize(e,t){e=Math.max(this.minimumSize.width,e),t=Math.max(this.minimumSize.height,t),mxClient.IS_QUIRKS||(this.div.style.width=e+"px",this.div.style.height=t+"px"),this.table.style.width=e+"px",this.table.style.height=t+"px",mxClient.IS_QUIRKS||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}setMinimizable(e){this.minimize.style.display=e?"":"none"}getMinimumSize(){return new mxRectangle(0,0,0,this.title.offsetHeight)}installMinimizeHandler(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);var e=!1,t=null,i=null,n=s=>{if(this.activate(),e)e=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=t,mxClient.IS_QUIRKS||(this.div.style.height=i),this.table.style.height=i,this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject$1(mxEvent$1.NORMALIZE,"event",s));else{e=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",t=this.maximize.style.display,this.maximize.style.display="none",i=this.table.style.height;var l=this.getMinimumSize();l.height>0&&(mxClient.IS_QUIRKS||(this.div.style.height=l.height+"px"),this.table.style.height=l.height+"px"),l.width>0&&(mxClient.IS_QUIRKS||(this.div.style.width=l.width+"px"),this.table.style.width=l.width+"px"),this.resize!=null&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject$1(mxEvent$1.MINIMIZE,"event",s))}mxEvent$1.consume(s)};mxEvent$1.addGestureListeners(this.minimize,n)}setMaximizable(e){this.maximize.style.display=e?"":"none"}installMaximizeHandler(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var e=!1,t=null,i=null,n=null,s=null,l=null,a=o=>{if(this.activate(),this.maximize.style.display!="none"){if(e){if(e=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.display=l,this.div.style.left=t+"px",this.div.style.top=i+"px",!mxClient.IS_QUIRKS){this.div.style.height=n,this.div.style.width=s;var h=mxUtils$1.getCurrentStyle(this.contentWrapper);(h.overflow=="auto"||this.resize!=null)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}this.table.style.height=n,this.table.style.width=s,this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject$1(mxEvent$1.NORMALIZE,"event",o))}else{e=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",l=this.minimize.style.display,this.minimize.style.display="none",t=parseInt(this.div.style.left),i=parseInt(this.div.style.top),n=this.table.style.height,s=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var d=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);if(mxClient.IS_QUIRKS||(this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=d-2+"px"),this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=d-2+"px",this.resize!=null&&(this.resize.style.visibility="hidden"),!mxClient.IS_QUIRKS){var h=mxUtils$1.getCurrentStyle(this.contentWrapper);(h.overflow=="auto"||this.resize!=null)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}this.fireEvent(new mxEventObject$1(mxEvent$1.MAXIMIZE,"event",o))}mxEvent$1.consume(o)}};mxEvent$1.addGestureListeners(this.maximize,a),mxEvent$1.addListener(this.title,"dblclick",a)}installMoveHandler(){this.title.style.cursor="move",mxEvent$1.addGestureListeners(this.title,e=>{var t=mxEvent$1.getClientX(e),i=mxEvent$1.getClientY(e),n=this.getX(),s=this.getY(),l=o=>{var h=mxEvent$1.getClientX(o)-t,d=mxEvent$1.getClientY(o)-i;this.setLocation(n+h,s+d),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE,"event",o)),mxEvent$1.consume(o)},a=o=>{mxEvent$1.removeGestureListeners(document,null,l,a),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_END,"event",o)),mxEvent$1.consume(o)};mxEvent$1.addGestureListeners(document,null,l,a),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_START,"event",e)),mxEvent$1.consume(e)}),mxClient.IS_POINTER&&(this.title.style.touchAction="none")}setLocation(e,t){this.div.style.left=e+"px",this.div.style.top=t+"px"}getX(){return parseInt(this.div.style.left)}getY(){return parseInt(this.div.style.top)}installCloseHandler(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent$1.addGestureListeners(this.closeImg,e=>{this.fireEvent(new mxEventObject$1(mxEvent$1.CLOSE,"event",e)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent$1.consume(e)})}setImage(e){this.image=document.createElement("img"),this.image.setAttribute("src",e),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)}setClosable(e){this.closeImg.style.display=e?"":"none"}isVisible(){return this.div!=null?this.div.style.display!="none":!1}setVisible(e){this.div!=null&&this.isVisible()!=e&&(e?this.show():this.hide())}show(){this.div.style.display="",this.activate();var e=mxUtils$1.getCurrentStyle(this.contentWrapper);!mxClient.IS_QUIRKS&&(e.overflow=="auto"||this.resize!=null)&&this.contentWrapper.style.display!="none"&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject$1(mxEvent$1.SHOW))}hide(){this.div.style.display="none",this.fireEvent(new mxEventObject$1(mxEvent$1.HIDE))}destroy(){this.fireEvent(new mxEventObject$1(mxEvent$1.DESTROY)),this.div!=null&&(mxEvent$1.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null}}const _=class Ne{static init(){if(Ne.window==null&&document.body!=null){var e=Ne.consoleName+" - mxGraph "+mxClient.VERSION,t=document.createElement("table");t.setAttribute("width","100%"),t.setAttribute("height","100%");var i=document.createElement("tbody"),n=document.createElement("tr"),s=document.createElement("td");s.style.verticalAlign="top",Ne.textarea=document.createElement("textarea"),Ne.textarea.setAttribute("wrap","off"),Ne.textarea.setAttribute("readOnly","true"),Ne.textarea.style.height="100%",Ne.textarea.style.resize="none",Ne.textarea.value=Ne.buffer,mxClient.IS_NS&&document.compatMode!="BackCompat"?Ne.textarea.style.width="99%":Ne.textarea.style.width="100%",s.appendChild(Ne.textarea),n.appendChild(s),i.appendChild(n),n=document.createElement("tr"),Ne.td=document.createElement("td"),Ne.td.style.verticalAlign="top",Ne.td.setAttribute("height","30px"),n.appendChild(Ne.td),i.appendChild(n),t.appendChild(i),Ne.addButton("Info",function(d){Ne.info()}),Ne.addButton("DOM",function(d){var m=mxUtils$1.getInnerHtml(document.body);Ne.debug(m)}),Ne.addButton("Trace",function(d){Ne.TRACE=!Ne.TRACE,Ne.TRACE?Ne.debug("Tracing enabled"):Ne.debug("Tracing disabled")}),Ne.addButton("Copy",function(d){try{mxUtils$1.copy(Ne.textarea.value)}catch(m){mxUtils$1.alert(m)}}),Ne.addButton("Show",function(d){try{mxUtils$1.popup(Ne.textarea.value)}catch(m){mxUtils$1.alert(m)}}),Ne.addButton("Clear",function(d){Ne.textarea.value=""});var l=0,a=0;if(typeof window.innerWidth=="number"?(l=window.innerHeight,a=window.innerWidth):(l=document.documentElement.clientHeight||document.body.clientHeight,a=document.body.clientWidth),Ne.window=new mxWindow(e,t,Math.max(0,a-320),Math.max(0,l-210),300,160),Ne.window.setMaximizable(!0),Ne.window.setScrollable(!1),Ne.window.setResizable(!0),Ne.window.setClosable(!0),Ne.window.destroyOnClose=!1,mxClient.IS_NS&&!mxClient.IS_GC&&!mxClient.IS_SF&&document.compatMode!="BackCompat"||document.documentMode==11){var o=Ne.window.getElement(),h=function(d,m){Ne.textarea.style.height=Math.max(0,o.offsetHeight-70)+"px"};Ne.window.addListener(mxEvent$1.RESIZE_END,h),Ne.window.addListener(mxEvent$1.MAXIMIZE,h),Ne.window.addListener(mxEvent$1.NORMALIZE,h),Ne.textarea.style.height="92px"}}}static info(){Ne.writeln(mxUtils$1.toString(navigator))}static addButton(e,t){var i=document.createElement("button");mxUtils$1.write(i,e),mxEvent$1.addListener(i,"click",t),Ne.td.appendChild(i)}static isVisible(){return Ne.window!=null?Ne.window.isVisible():!1}static show(){Ne.setVisible(!0)}static setVisible(e){Ne.window==null&&Ne.init(),Ne.window!=null&&Ne.window.setVisible(e)}static enter(e){if(Ne.TRACE)return Ne.writeln("Entering "+e),new Date().getTime()}static leave(e,t){if(Ne.TRACE){var i=t!=0?" ("+(new Date().getTime()-t)+" ms)":"";Ne.writeln("Leaving "+e+i)}}static debug(){Ne.DEBUG&&Ne.writeln.apply(this,arguments)}static warn(){Ne.WARN&&Ne.writeln.apply(this,arguments)}static write(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");Ne.textarea!=null?(Ne.textarea.value=Ne.textarea.value+e,navigator.userAgent!=null&&navigator.userAgent.indexOf("Presto/2.5")>=0&&(Ne.textarea.style.visibility="hidden",Ne.textarea.style.visibility="visible"),Ne.textarea.scrollTop=Ne.textarea.scrollHeight):Ne.buffer+=e}static writeln(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");Ne.write(e+`
`)}};u(_,"consoleName","Console"),u(_,"TRACE",!1),u(_,"DEBUG",!0),u(_,"WARN",!0),u(_,"buffer","");let mxLog=_;class mxGeometry extends mxRectangle{constructor(e,t,i,n){super(e,t,i,n),u(this,"TRANSLATE_CONTROL_POINTS",!0),u(this,"alternateBounds",null),u(this,"sourcePoint",null),u(this,"targetPoint",null),u(this,"points",null),u(this,"offset",null),u(this,"relative",!1)}swap(){if(this.alternateBounds!=null){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=e}}getTerminalPoint(e){return e?this.sourcePoint:this.targetPoint}setTerminalPoint(e,t){return t?this.sourcePoint=e:this.targetPoint=e,e}rotate(e,t){var i=mxUtils$1.toRadians(e),n=Math.cos(i),s=Math.sin(i);if(!this.relative){var l=new mxPoint(this.getCenterX(),this.getCenterY()),a=mxUtils$1.getRotatedPoint(l,n,s,t);this.x=Math.round(a.x-this.width/2),this.y=Math.round(a.y-this.height/2)}if(this.sourcePoint!=null){var a=mxUtils$1.getRotatedPoint(this.sourcePoint,n,s,t);this.sourcePoint.x=Math.round(a.x),this.sourcePoint.y=Math.round(a.y)}if(this.targetPoint!=null){var a=mxUtils$1.getRotatedPoint(this.targetPoint,n,s,t);this.targetPoint.x=Math.round(a.x),this.targetPoint.y=Math.round(a.y)}if(this.points!=null){for(var o=0;o<this.points.length;o++)if(this.points[o]!=null){var a=mxUtils$1.getRotatedPoint(this.points[o],n,s,t);this.points[o].x=Math.round(a.x),this.points[o].y=Math.round(a.y)}}}translate(e,t){if(e=parseFloat(e),t=parseFloat(t),this.relative||(this.x=parseFloat(this.x)+e,this.y=parseFloat(this.y)+t),this.sourcePoint!=null&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+t),this.targetPoint!=null&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+e,this.targetPoint.y=parseFloat(this.targetPoint.y)+t),this.TRANSLATE_CONTROL_POINTS&&this.points!=null)for(var i=0;i<this.points.length;i++)this.points[i]!=null&&(this.points[i].x=parseFloat(this.points[i].x)+e,this.points[i].y=parseFloat(this.points[i].y)+t)}scale(e,t,i){if(e=parseFloat(e),t=parseFloat(t),this.sourcePoint!=null&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*t),this.targetPoint!=null&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*e,this.targetPoint.y=parseFloat(this.targetPoint.y)*t),this.points!=null)for(var n=0;n<this.points.length;n++)this.points[n]!=null&&(this.points[n].x=parseFloat(this.points[n].x)*e,this.points[n].y=parseFloat(this.points[n].y)*t);this.relative||(this.x=parseFloat(this.x)*e,this.y=parseFloat(this.y)*t,i&&(t=e=Math.min(e,t)),this.width=parseFloat(this.width)*e,this.height=parseFloat(this.height)*t)}equals(e){return super.equals(e)&&this.relative==e.relative&&(this.sourcePoint==null&&e.sourcePoint==null||this.sourcePoint!=null&&this.sourcePoint.equals(e.sourcePoint))&&(this.targetPoint==null&&e.targetPoint==null||this.targetPoint!=null&&this.targetPoint.equals(e.targetPoint))&&(this.points==null&&e.points==null||this.points!=null&&mxUtils$1.equalPoints(this.points,e.points))&&(this.alternateBounds==null&&e.alternateBounds==null||this.alternateBounds!=null&&this.alternateBounds.equals(e.alternateBounds))&&(this.offset==null&&e.offset==null||this.offset!=null&&this.offset.equals(e.offset))}}const It=class li{constructor(e,t,i,n){this.template=e,this.exclude=t??[],this.idrefs=i??[],this.mapping=n??[],this.reverse=new Object;for(var s in this.mapping)this.reverse[this.mapping[s]]=s}getName(){return mxUtils$1.getFunctionName(this.template.constructor)}cloneTemplate(){return new this.template.constructor}getFieldName(e){if(e!=null){var t=this.reverse[e];t!=null&&(e=t)}return e}getAttributeName(e){if(e!=null){var t=this.mapping[e];t!=null&&(e=t)}return e}isExcluded(e,t,i,n){return t==mxObjectIdentity.FIELD_NAME||mxUtils$1.indexOf(this.exclude,t)>=0}isReference(e,t,i,n){return mxUtils$1.indexOf(this.idrefs,t)>=0}encode(e,t){var i=e.document.createElement(this.getName());return t=this.beforeEncode(e,t,i),this.encodeObject(e,t,i),this.afterEncode(e,t,i)}encodeObject(e,t,i){e.setAttribute(i,"id",e.getId(t));for(var n in t){var s=n,l=t[s];l!=null&&!this.isExcluded(t,s,l,!0)&&(mxUtils$1.isInteger(s)&&(s=null),this.encodeValue(e,t,s,l,i))}}encodeValue(e,t,i,n,s){if(n!=null){if(this.isReference(t,i,n,!0)){var l=e.getId(n);if(l==null){mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+i+"="+n);return}n=l}var a=this.template[i];(i==null||e.encodeDefaults||a!=n)&&(i=this.getAttributeName(i),this.writeAttribute(e,t,i,n,s))}}writeAttribute(e,t,i,n,s){typeof n!="object"?this.writePrimitiveAttribute(e,t,i,n,s):this.writeComplexAttribute(e,t,i,n,s)}writePrimitiveAttribute(e,t,i,n,s){if(n=this.convertAttributeToXml(e,t,i,n,s),i==null){var l=e.document.createElement("add");typeof n=="function"?l.appendChild(e.document.createTextNode(n)):e.setAttribute(l,"value",n),s.appendChild(l)}else typeof n!="function"&&e.setAttribute(s,i,n)}writeComplexAttribute(e,t,i,n,s){var l=e.encode(n);l!=null?(i!=null&&l.setAttribute("as",i),s.appendChild(l)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+i+": "+n)}convertAttributeToXml(e,t,i,n){return this.isBooleanAttribute(e,t,i,n)&&(n=n==!0?"1":"0"),n}isBooleanAttribute(e,t,i,n){return typeof n.length>"u"&&(n==!0||n==!1)}convertAttributeFromXml(e,t,i){var n=t.value;return this.isNumericAttribute(e,t,i)&&(n=parseFloat(n),(isNaN(n)||!isFinite(n))&&(n=0)),n}isNumericAttribute(e,t,i){var n=i.constructor==mxGeometry&&(t.name=="x"||t.name=="y"||t.name=="width"||t.name=="height")||i.constructor==mxPoint&&(t.name=="x"||t.name=="y")||mxUtils$1.isNumeric(t.value);return n}beforeEncode(e,t,i){return t}afterEncode(e,t,i){return i}decode(e,t,i){var n=t.getAttribute("id"),s=e.objects[n];return s==null&&(s=i||this.cloneTemplate(),n!=null&&e.putObject(n,s)),t=this.beforeDecode(e,t,s),this.decodeNode(e,t,s),this.afterDecode(e,t,s)}decodeNode(e,t,i){t!=null&&(this.decodeAttributes(e,t,i),this.decodeChildren(e,t,i))}decodeAttributes(e,t,i){var n=t.attributes;if(n!=null)for(var s=0;s<n.length;s++)this.decodeAttribute(e,n[s],i)}isIgnoredAttribute(e,t,i){return t.nodeName=="as"||t.nodeName=="id"}decodeAttribute(e,t,i){if(!this.isIgnoredAttribute(e,t,i)){var n=t.nodeName,s=this.convertAttributeFromXml(e,t,i),l=this.getFieldName(n);if(this.isReference(i,l,s,!1)){var a=e.getObject(s);if(a==null){mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+n+"="+s);return}s=a}this.isExcluded(i,n,s,!1)||(i[n]=s)}}decodeChildren(e,t,i){for(var n=t.firstChild;n!=null;){var s=n.nextSibling;n.nodeType==mxConstants$1.NODETYPE_ELEMENT&&!this.processInclude(e,n,i)&&this.decodeChild(e,n,i),n=s}}decodeChild(e,t,i){var n=this.getFieldName(t.getAttribute("as"));if(n==null||!this.isExcluded(i,n,t,!1)){var s=this.getFieldTemplate(i,n,t),l=null;t.nodeName=="add"?(l=t.getAttribute("value"),l==null&&li.allowEval&&(l=mxUtils$1.eval(mxUtils$1.getTextContent(t)))):l=e.decode(t,s);try{this.addObjectValue(i,n,l,s)}catch(a){throw new Error(a.message+" for "+t.nodeName)}}}getFieldTemplate(e,t,i){var n=e[t];return n instanceof Array&&n.length>0&&(n=null),n}addObjectValue(e,t,i,n){i!=null&&i!=n&&(t!=null&&t.length>0?e[t]=i:e.push(i))}processInclude(e,t,i){if(t.nodeName=="include"){var n=t.getAttribute("name");if(n!=null)try{var s=mxUtils$1.load(n).getDocumentElement();s!=null&&e.decode(s,i)}catch{}return!0}return!1}beforeDecode(e,t,i){return t}afterDecode(e,t,i){return i}};u(It,"allowEval",!1);let mxObjectCodec=It;const _mxCodecRegistry=class __mxCodecRegistry{static register(r){if(r!=null){var e=r.getName();__mxCodecRegistry.codecs[e]=r;var t=mxUtils$1.getFunctionName(r.template.constructor);t!=e&&__mxCodecRegistry.addAlias(t,e)}return r}static addAlias(r,e){__mxCodecRegistry.aliases[r]=e}static getCodec_encode(r){var e=null;if(r!=null){var t=mxUtils$1.getFunctionName(r),i=__mxCodecRegistry.aliases[t];if(i!=null&&(t=i),e=__mxCodecRegistry.codecs[t],e==null)try{e=new mxObjectCodec(new r),__mxCodecRegistry.register(e)}catch{}}return e}static getCodec(name){var codec=null;if(codec=__mxCodecRegistry.codecs[name],codec==null)try{let classname=name,obj=eval("new "+classname+"()");codec=new mxObjectCodec(obj),__mxCodecRegistry.register(codec)}catch(r){}return codec}};u(_mxCodecRegistry,"codecs",[]),u(_mxCodecRegistry,"aliases",[]);let mxCodecRegistry=_mxCodecRegistry;const pt=class Xt{static create(e){var t="";if(e!=null)for(var i=e.getParent();i!=null;){var n=i.getIndex(e);t=n+Xt.PATH_SEPARATOR+t,e=i,i=e.getParent()}var s=t.length;return s>1&&(t=t.substring(0,s-1)),t}static getParentPath(e){if(e!=null){var t=e.lastIndexOf(Xt.PATH_SEPARATOR);if(t>=0)return e.substring(0,t);if(e.length>0)return""}return null}static resolve(e,t){var i=e;if(t!=null)for(var n=t.split(Xt.PATH_SEPARATOR),s=0;s<n.length;s++)i=i.getChildAt(parseInt(n[s]));return i}static compare(e,t){for(var i=Math.min(e.length,t.length),n=0,s=0;s<i;s++)if(e[s]!=t[s]){if(e[s].length==0||t[s].length==0)n=e[s]==t[s]?0:e[s]>t[s]?1:-1;else{var l=parseInt(e[s]),a=parseInt(t[s]);n=l==a?0:l>a?1:-1}break}if(n==0){var l=e.length,a=t.length;l!=a&&(n=l>a?1:-1)}return n}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}};u(pt,"PATH_SEPARATOR",".");let mxCellPath=pt;class mxCell{constructor(e,t,i){u(this,"id",null),u(this,"geometry",null),u(this,"style",null),u(this,"vertex",!1),u(this,"edge",!1),u(this,"connectable",!0),u(this,"visible",!0),u(this,"collapsed",!1),u(this,"parent",null),u(this,"source",null),u(this,"target",null),u(this,"children",null),u(this,"edges",null),u(this,"mxTransient",["id","value","parent","source","target","children","edges"]),this.value=e,this.setGeometry(t),this.setStyle(i),this.onInit!=null&&this.onInit()}getId(){return this.id}setId(e){this.id=e}getValue(){return this.value}setValue(e){this.value=e}valueChanged(e){var t=this.getValue();return this.setValue(e),t}getGeometry(){return this.geometry}setGeometry(e){this.geometry=e}getStyle(){return this.style}setStyle(e){this.style=e}isVertex(){return this.vertex!=0}setVertex(e){this.vertex=e}isEdge(){return this.edge!=0}setEdge(e){this.edge=e}isConnectable(){return this.connectable!=0}setConnectable(e){this.connectable=e}isVisible(){return this.visible!=0}setVisible(e){this.visible=e}isCollapsed(){return this.collapsed!=0}setCollapsed(e){this.collapsed=e}getParent(){return this.parent}setParent(e){this.parent=e}getTerminal(e){return e?this.source:this.target}setTerminal(e,t){return t?this.source=e:this.target=e,e}getChildCount(){return this.children==null?0:this.children.length}getIndex(e){return mxUtils$1.indexOf(this.children,e)}getChildAt(e){return this.children==null?null:this.children[e]}insert(e,t){return e!=null&&(t==null&&(t=this.getChildCount(),e.getParent()==this&&t--),e.removeFromParent(),e.setParent(this),this.children==null?(this.children=[],this.children.push(e)):this.children.splice(t,0,e)),e}remove(e){var t=null;return this.children!=null&&e>=0&&(t=this.getChildAt(e),t!=null&&(this.children.splice(e,1),t.setParent(null))),t}removeFromParent(){if(this.parent!=null){var e=this.parent.getIndex(this);this.parent.remove(e)}}getEdgeCount(){return this.edges==null?0:this.edges.length}getEdgeIndex(e){return mxUtils$1.indexOf(this.edges,e)}getEdgeAt(e){return this.edges==null?null:this.edges[e]}insertEdge(e,t){return e!=null&&(e.removeFromTerminal(t),e.setTerminal(this,t),(this.edges==null||e.getTerminal(!t)!=this||mxUtils$1.indexOf(this.edges,e)<0)&&(this.edges==null&&(this.edges=[]),this.edges.push(e))),e}removeEdge(e,t){if(e!=null){if(e.getTerminal(!t)!=this&&this.edges!=null){var i=this.getEdgeIndex(e);i>=0&&this.edges.splice(i,1)}e.setTerminal(null,t)}return e}removeFromTerminal(e){var t=this.getTerminal(e);t?.removeEdge(this,e)}hasAttribute(e){var t=this.getValue();return t!=null&&t.nodeType==mxConstants$1.NODETYPE_ELEMENT&&t.hasAttribute?t.hasAttribute(e):t.getAttribute(e)!=null}getAttribute(e,t){var i=this.getValue(),n=i!=null&&i.nodeType==mxConstants$1.NODETYPE_ELEMENT?i.getAttribute(e):null;return n??t}setAttribute(e,t){var i=this.getValue();i!=null&&i.nodeType==mxConstants$1.NODETYPE_ELEMENT&&i.setAttribute(e,t)}clone(){var e=mxUtils$1.clone(this,this.mxTransient);return e.setValue(this.cloneValue()),e}cloneValue(){var e=this.getValue();return e!=null&&(typeof e.clone=="function"?e=e.clone():isNaN(e.nodeType)||(e=e.cloneNode(!0))),e}}class mxCodec{constructor(e){u(this,"elements",null),u(this,"encodeDefaults",!1),this.document=e||mxUtils$1.createXmlDocument(),this.objects=[]}putObject(e,t){return this.objects[e]=t,t}getObject(e){var t=null;if(e!=null&&(t=this.objects[e],t==null&&(t=this.lookup(e),t==null))){var i=this.getElementById(e);i!=null&&(t=this.decode(i))}return t}lookup(e){return null}getElementById(e){return this.updateElements(),this.elements[e]}updateElements(){this.elements==null&&(this.elements=new Object,this.document.documentElement!=null&&this.addElement(this.document.documentElement))}addElement(e){if(e.nodeType==mxConstants$1.NODETYPE_ELEMENT){var t=e.getAttribute("id");if(t!=null){if(this.elements[t]==null)this.elements[t]=e;else if(this.elements[t]!=e)throw new Error(t+": Duplicate ID")}}for(e=e.firstChild;e!=null;)this.addElement(e),e=e.nextSibling}getId(e){var t=null;return e!=null&&(t=this.reference(e),t==null&&e instanceof mxCell&&(t=e.getId(),t==null&&(t=mxCellPath.create(e),t.length==0&&(t="root")))),t}reference(e){return null}encode(e){var t=null;if(e!=null&&e.constructor!=null){var i=mxCodecRegistry.getCodec_encode(e.constructor);i!=null?t=i.encode(this,e):mxUtils$1.isNode(e)?t=mxUtils$1.importNode(this.document,e,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils$1.getFunctionName(e.constructor))}return t}decode(e,t){this.updateElements();var i=null;if(e!=null&&e.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=mxCodecRegistry.getCodec(e.nodeName);n!=null?i=n.decode(this,e,t):(i=e.cloneNode(!0),i.removeAttribute("as"))}return i}decode_tmp(e,t){this.updateElements();var i=null,n=null,n=mxCodecRegistry.getCodec(e.nodeName);if(n!=null)try{i=n.decode(this,e,t)}catch(s){console.log("dec.decode err",s)}else if(e.nodeName=="mxGeometry"){const s=new DOMParser().parseFromString(e.outerHTML,"application/xml");let l=0,a=0,o=0,h=0;for(let d=0;d<s.documentElement.attributes.length;d++){let m=s.documentElement.attributes[d].name;m=="x"?l=parseInt(s.documentElement.attributes[d].value,10):m=="y"?a=parseInt(s.documentElement.attributes[d].value,10):m=="width"?o=parseInt(s.documentElement.attributes[d].value,10):m=="height"&&(h=parseInt(s.documentElement.attributes[d].value,10))}i=new mxGeometry(l,a,o,h)}else console.log("mxCodec decode notreg:",e.nodeName);return i}encodeCell(e,t,i){if(t.appendChild(this.encode(e)),i==null||i)for(var n=e.getChildCount(),s=0;s<n;s++)this.encodeCell(e.getChildAt(s),t)}isCellCodec(e){return e!=null&&typeof e.isCellCodec=="function"?e.isCellCodec():!1}decodeCell(e,t){t=t??!0;var i=null;if(e!=null&&e.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=mxCodecRegistry.getCodec(e.nodeName);if(!this.isCellCodec(n))for(var s=e.firstChild;s!=null&&!this.isCellCodec(n);)n=mxCodecRegistry.getCodec(s.nodeName),s=s.nextSibling;this.isCellCodec(n)||(n=mxCodecRegistry.getCodec(mxCell)),i=n.decode(this,e),t&&this.insertIntoGraph(i)}return i}insertIntoGraph(e){var t=e.parent,i=e.getTerminal(!0),n=e.getTerminal(!1);if(e.setTerminal(null,!1),e.setTerminal(null,!0),e.parent=null,t!=null){if(t==e)throw new Error(t.id+": Self Reference");t.insert(e)}i?.insertEdge(e,!0),n?.insertEdge(e,!1)}setAttribute(e,t,i){t!=null&&i!=null&&e.setAttribute(t,i)}}class mxTemporaryCellStates{constructor(e,t,i,n,s){t=t??1,this.view=e,this.oldValidateCellState=e.validateCellState,this.oldBounds=e.getGraphBounds(),this.oldStates=e.getStates(),this.oldScale=e.getScale(),this.oldDoRedrawShape=e.graph.cellRenderer.doRedrawShape;var l=this;if(s!=null&&(e.graph.cellRenderer.doRedrawShape=function(d){var m=d.shape.paint;d.shape.paint=function(g){var c=s(d);c!=null&&g.setLink(c),m.apply(this,arguments),c!=null&&g.setLink(null)},l.oldDoRedrawShape.apply(e.graph.cellRenderer,arguments),d.shape.paint=m}),e.validateCellState=function(d,m){return d==null||n==null||n(d)?l.oldValidateCellState.apply(e,arguments):null},e.setStates(new mxDictionary),e.setScale(t),i!=null){e.resetValidationState();for(var a=null,o=0;o<i.length;o++){var h=e.getBoundingBox(e.validateCellState(e.validateCell(i[o])));a==null?a=h:a.add(h)}e.setGraphBounds(a||new mxRectangle)}}destroy(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape}}class mxStyleChange{constructor(e,t,i){this.model=e,this.cell=t,this.style=i,this.previous=i}execute(){this.cell!=null&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))}}class mxChildChange{constructor(e,t,i,n){this.model=e,this.parent=t,this.previous=t,this.child=i,this.index=n,this.previousIndex=n}execute(){if(this.child!=null){var e=this.model.getParent(this.child),t=e!=null?e.getIndex(this.child):0;this.previous==null&&this.connect(this.child,!1),e=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),this.previous!=null&&this.connect(this.child,!0),this.parent=this.previous,this.previous=e,this.index=this.previousIndex,this.previousIndex=t}}connect(e,t){t=t??!0;var i=e.getTerminal(!0),n=e.getTerminal(!1);i!=null&&(t?this.model.terminalForCellChanged(e,i,!0):this.model.terminalForCellChanged(e,null,!0)),n!=null&&(t?this.model.terminalForCellChanged(e,n,!1):this.model.terminalForCellChanged(e,null,!1)),e.setTerminal(i,!0),e.setTerminal(n,!1);for(var s=this.model.getChildCount(e),l=0;l<s;l++)this.connect(this.model.getChildAt(e,l),t)}}class mxValueChange{constructor(e,t,i){this.model=e,this.cell=t,this.value=i,this.previous=i}execute(){this.cell!=null&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))}}class mxTerminalChange{constructor(e,t,i,n){this.model=e,this.cell=t,this.terminal=i,this.previous=i,this.source=n}execute(){this.cell!=null&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))}}class mxGeometryChange{constructor(e,t,i){this.model=e,this.cell=t,this.geometry=i,this.previous=i}execute(){this.cell!=null&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))}}class mxEffects{static animateChanges(e,t,i){var n=10,s=0,l=function(){for(var o=!1,h=0;h<t.length;h++){var d=t[h];if(d instanceof mxGeometryChange||d instanceof mxTerminalChange||d instanceof mxValueChange||d instanceof mxChildChange||d instanceof mxStyleChange){var m=e.getView().getState(d.cell||d.child,!1);if(m!=null)if(o=!0,d.constructor!=mxGeometryChange||e.model.isEdge(d.cell))mxUtils$1.setOpacity(m.shape.node,100*s/n);else{var g=e.getView().scale,c=(d.geometry.x-d.previous.x)*g,f=(d.geometry.y-d.previous.y)*g,C=(d.geometry.width-d.previous.width)*g,v=(d.geometry.height-d.previous.height)*g;s==0?(m.x-=c,m.y-=f,m.width-=C,m.height-=v):(m.x+=c/n,m.y+=f/n,m.width+=C/n,m.height+=v/n),e.cellRenderer.redraw(m),mxEffects.cascadeOpacity(e,d.cell,100*s/n)}}}s<n&&o?(s++,window.setTimeout(l,a)):i?.()},a=30;l()}static cascadeOpacity(e,t,i){for(var n=e.model.getChildCount(t),s=0;s<n;s++){var l=e.model.getChildAt(t,s),a=e.getView().getState(l);a!=null&&(mxUtils$1.setOpacity(a.shape.node,i),mxEffects.cascadeOpacity(e,l,i))}var o=e.model.getEdges(t);if(o!=null)for(var s=0;s<o.length;s++){var h=e.getView().getState(o[s]);h!=null&&mxUtils$1.setOpacity(h.shape.node,i)}}static fadeOut(e,t,i,n,s,l){n=n||40,s=s||30;var a=t||100;if(mxUtils$1.setOpacity(e,a),l||l==null){var o=function(){a=Math.max(a-n,0),mxUtils$1.setOpacity(e,a),a>0?window.setTimeout(o,s):(e.style.visibility="hidden",i&&e.parentNode&&e.parentNode.removeChild(e))};window.setTimeout(o,s)}else e.style.visibility="hidden",i&&e.parentNode&&e.parentNode.removeChild(e)}}const _mxUtils=class __mxUtils{static removeCursors(r){r.style!=null&&(r.style.cursor="");var e=r.childNodes;if(e!=null)for(var t=e.length,i=0;i<t;i+=1)__mxUtils.removeCursors(e[i])}static getCurrentStyle(r){return r!=null?window.getComputedStyle(r,""):null}static parseCssNumber(r){return r=="thin"?r="2":r=="medium"?r="4":r=="thick"&&(r="6"),r=parseFloat(r),isNaN(r)&&(r=0),r}static hasScrollbars(r){var e=__mxUtils.getCurrentStyle(r);return e!=null&&(e.overflow=="scroll"||e.overflow=="auto")}static bind(r,e){return function(){return e.apply(r,arguments)}}static eval(expr){var result=null;let _mxJavaScriptExpression=null;if(expr.indexOf("function")>=0)try{eval(" _mxJavaScriptExpression= function() { return ("+expr+")}();"),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(r){mxLog.warn(r.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(r){mxLog.warn(r.message+" while evaluating "+expr)}return result}static findNode(r,e,t){if(r.nodeType==mxConstants$1.NODETYPE_ELEMENT){var i=r.getAttribute(e);if(i!=null&&i==t)return r}for(r=r.firstChild;r!=null;){var n=__mxUtils.findNode(r,e,t);if(n!=null)return n;r=r.nextSibling}return null}static getFunctionName(r){var e=null;if(r!=null){if(r.name!=null)e=r.name;else if(e=__mxUtils.trim(r.toString()),/^function\s/.test(e)){e=__mxUtils.ltrim(e.substring(9));var t=e.indexOf("(");t>0&&(e=e.substring(0,t))}}return e}static indexOf(r,e){if(r!=null&&e!=null){for(var t=0;t<r.length;t++)if(r[t]==e)return t}return-1}static forEach(r,e){if(r!=null&&e!=null)for(var t=0;t<r.length;t++)e(r[t]);return r}static remove(r,e){var t=null;if(typeof e=="object")for(var i=__mxUtils.indexOf(e,r);i>=0;)e.splice(i,1),t=r,i=__mxUtils.indexOf(e,r);for(var n in e)e[n]==r&&(delete e[n],t=r);return t}static isNode(r,e,t,i){return r!=null&&!isNaN(r.nodeType)&&(e==null||r.nodeName.toLowerCase()==e.toLowerCase())?t==null||r.getAttribute(t)==i:!1}static isAncestorNode(r,e){for(var t=e;t!=null;){if(t==r)return!0;t=t.parentNode}return!1}static getChildNodes(r,e){e=e||mxConstants$1.NODETYPE_ELEMENT;for(var t=[],i=r.firstChild;i!=null;)i.nodeType==e&&t.push(i),i=i.nextSibling;return t}static importNode(r,e,t){return r.importNode(e,t)}static importNodeImplementation(r,e,t){switch(e.nodeType){case 1:{var i=r.createElement(e.nodeName);if(e.attributes&&e.attributes.length>0)for(var n=0;n<e.attributes.length;n++)i.setAttribute(e.attributes[n].nodeName,e.getAttribute(e.attributes[n].nodeName));if(t&&e.childNodes&&e.childNodes.length>0)for(var n=0;n<e.childNodes.length;n++)i.appendChild(__mxUtils.importNodeImplementation(r,e.childNodes[n],t));return i}case 3:case 4:case 8:return r.createTextNode(e.nodeValue!=null?e.nodeValue:e.value)}}static createXmlDocument(){var r=null;return document.implementation&&document.implementation.createDocument?r=document.implementation.createDocument("","",null):"ActiveXObject"in window&&(r=__mxUtils.createMsXmlDocument()),r}static createMsXmlDocument(){var r=new ActiveXObject("Microsoft.XMLDOM");return r.async=!1,r.validateOnParse=!1,r.resolveExternals=!1,r}static parseXml(r){var e=new DOMParser;return e.parseFromString(r,"text/xml")}static removeWhitespace(r,e){for(var t=e?r.previousSibling:r.nextSibling;t!=null&&t.nodeType==mxConstants$1.NODETYPE_TEXT;){var i=e?t.previousSibling:t.nextSibling,n=__mxUtils.getTextContent(t);__mxUtils.trim(n).length==0&&t.parentNode.removeChild(t),t=i}}static htmlEntities(r,e){return r=String(r||""),r=r.replace(/&/g,"&amp;"),r=r.replace(/"/g,"&quot;"),r=r.replace(/\'/g,"&#39;"),r=r.replace(/</g,"&lt;"),r=r.replace(/>/g,"&gt;"),(e==null||e)&&(r=r.replace(/\n/g,"&#xa;")),r}static isVml(r){return r!=null&&r.tagUrn=="urn:schemas-microsoft-com:vml"}static getXml(r,e){var t="";if(mxClient.IS_IE11)t=__mxUtils.getPrettyXml(r,"","","");else if(window.XMLSerializer!=null){var i=new XMLSerializer;t=i.serializeToString(r)}else r.xml!=null&&(t=r.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,`
`));return e=e||"&#xa;",t=t.replace(/\n/g,e),t}static getPrettyXml(r,e,t,i,n){var s=[];if(r!=null)if(e=e??"  ",t=t??"",i=i??`
`,r.namespaceURI!=null&&r.namespaceURI!=n&&(n=r.namespaceURI,r.getAttribute("xmlns")==null&&r.setAttribute("xmlns",r.namespaceURI)),r.nodeType==mxConstants$1.NODETYPE_DOCUMENT)s.push(__mxUtils.getPrettyXml(r.documentElement,e,t,i,n));else if(r.nodeType==mxConstants$1.NODETYPE_DOCUMENT_FRAGMENT){var l=r.firstChild;if(l!=null)for(;l!=null;)s.push(__mxUtils.getPrettyXml(l,e,t,i,n)),l=l.nextSibling}else if(r.nodeType==mxConstants$1.NODETYPE_COMMENT){var a=__mxUtils.getTextContent(r);a.length>0&&s.push(t+"<!--"+a+"-->"+i)}else if(r.nodeType==mxConstants$1.NODETYPE_TEXT){var a=__mxUtils.getTextContent(r);a.length>0&&s.push(t+__mxUtils.htmlEntities(__mxUtils.trim(a),!1)+i)}else if(r.nodeType==mxConstants$1.NODETYPE_CDATA){var a=__mxUtils.getTextContent(r);a.length>0&&s.push(t+"<![CDATA["+a+"]]"+i)}else{s.push(t+"<"+r.nodeName);var o=r.attributes;if(o!=null)for(var h=0;h<o.length;h++){var d=__mxUtils.htmlEntities(o[h].value);s.push(" "+o[h].nodeName+'="'+d+'"')}var l=r.firstChild;if(l!=null){for(s.push(">"+i);l!=null;)s.push(__mxUtils.getPrettyXml(l,e,t+e,i,n)),l=l.nextSibling;s.push(t+"</"+r.nodeName+">"+i)}else s.push(" />"+i)}return s.join("")}static extractTextWithWhitespace(r){var e=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],t=[];function i(n){if(!(n.length==1&&(n[0].nodeName=="BR"||n[0].innerHTML==`
`)))for(var s=0;s<n.length;s++){var l=n[s];l.nodeName=="BR"||l.innerHTML==`
`||(n.length==1||s==0)&&l.nodeName=="DIV"&&l.innerHTML.toLowerCase()=="<br>"?t.push(`
`):(l.nodeType===3||l.nodeType===4?l.nodeValue.length>0&&t.push(l.nodeValue):l.nodeType!==8&&l.childNodes.length>0&&i(l.childNodes),s<n.length-1&&__mxUtils.indexOf(e,n[s+1].nodeName)>=0&&t.push(`
`))}}return i(r),t.join("")}static replaceTrailingNewlines(r,e){for(var t="";r.length>0&&r.charAt(r.length-1)==`
`;)r=r.substring(0,r.length-1),t+=e;return r+t}static getTextContent(r){return r!=null?r[r.textContent===void 0?"text":"textContent"]:""}static setTextContent(r,e){r.innerText!==void 0?r.innerText=e:r[r.textContent===void 0?"text":"textContent"]=e}static getInnerHtml(r){if(r!=null){var e=new XMLSerializer;return e.serializeToString(r)}return""}static getOuterHtml(r){if(r!=null){var e=new XMLSerializer;return e.serializeToString(r)}return""}static write(r,e){var t=r.ownerDocument,i=t.createTextNode(e);return r?.appendChild(i),i}static writeln(r,e){var t=r.ownerDocument,i=t.createTextNode(e);return r!=null&&(r.appendChild(i),r.appendChild(document.createElement("br"))),i}static br(r,e){e=e||1;for(var t=null,i=0;i<e;i++)r!=null&&(t=r.ownerDocument.createElement("br"),r.appendChild(t));return t}static button(r,e,t){t=t??document;var i=t.createElement("button");return __mxUtils.write(i,r),mxEvent$1.addListener(i,"click",function(n){e(n)}),i}static para(r,e){var t=document.createElement("p");return __mxUtils.write(t,e),r?.appendChild(t),t}static addTransparentBackgroundFilter(r){r.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"}static linkAction(r,e,t,i,n){return __mxUtils.link(r,e,function(){t.execute(i)},n)}static linkInvoke(r,e,t,i,n,s){return __mxUtils.link(r,e,function(){t[i](n)},s)}static link(r,e,t,i){var n=document.createElement("span");return n.style.color="blue",n.style.textDecoration="underline",n.style.cursor="pointer",i!=null&&(n.style.paddingLeft=i+"px"),mxEvent$1.addListener(n,"click",t),__mxUtils.write(n,e),r?.appendChild(n),n}static getDocumentSize(){var r=document.body,e=document.documentElement;try{return new mxRectangle(0,0,r.clientWidth||e.clientWidth,Math.max(r.clientHeight||0,e.clientHeight))}catch{return new mxRectangle}}static fit(r){var e=__mxUtils.getDocumentSize(),t=parseInt(r.offsetLeft),i=parseInt(r.offsetWidth),n=__mxUtils.getDocumentScrollOrigin(r.ownerDocument),s=n.x,l=n.y,a=s+e.width;t+i>a&&(r.style.left=Math.max(s,a-i)+"px");var o=parseInt(r.offsetTop),h=parseInt(r.offsetHeight),d=l+e.height;o+h>d&&(r.style.top=Math.max(l,d-h)+"px")}static load(r){var e=new mxXmlRequest(r,null,"GET",!1);return e.send(),e}static get(r,e,t,i,n,s,l){var a=new mxXmlRequest(r,null,"GET"),o=a.setRequestHeaders;return l&&(a.setRequestHeaders=function(h,d){o.apply(this,arguments);for(var m in l)h.setRequestHeader(m,l[m])}),i!=null&&a.setBinary(i),a.send(e,t,n,s),a}static getAll(r,e,t){for(var i=r.length,n=[],s=0,l=function(){s==0&&t!=null&&t(),s++},a=0;a<r.length;a++)(function(o,h){__mxUtils.get(o,function(d){var m=d.getStatus();m<200||m>299?l():(n[h]=d,i--,i==0&&e(n))},l)})(r[a],a);i==0&&e(n)}static post(r,e,t,i){return new mxXmlRequest(r,e).send(t,i)}static submit(r,e,t,i){return new mxXmlRequest(r,e).simulate(t,i)}static loadInto(r,e,t){e.addEventListener("load",t,!1),e.load(r)}static getValue(r,e,t){var i=r!=null?r[e]:null;return i==null&&(i=t),i}static getNumber(r,e,t){var i=r!=null?r[e]:null;return i==null&&(i=t||0),Number(i)}static getColor(r,e,t){var i=r!=null?r[e]:null;return i==null?i=t:i==mxConstants$1.NONE&&(i=null),i}static clone(r,e,t){t=t??!1;var i=null;if(r!=null&&typeof r.constructor=="function"){i=new r.constructor;for(var n in r)n!=mxObjectIdentity.FIELD_NAME&&(e==null||__mxUtils.indexOf(e,n)<0)&&(!t&&typeof r[n]=="object"?i[n]=__mxUtils.clone(r[n]):i[n]=r[n])}return i}static equalPoints(r,e){if(r==null&&e!=null||r!=null&&e==null||r!=null&&e!=null&&r.length!=e.length)return!1;if(r!=null&&e!=null){for(var t=0;t<r.length;t++)if(r[t]!=null&&e[t]==null||r[t]==null&&e[t]!=null||r[t]!=null&&e[t]!=null&&(r[t].x!=e[t].x||r[t].y!=e[t].y))return!1}return!0}static equalEntries(r,e){var t=0;if(r==null&&e!=null||r!=null&&e==null||r!=null&&e!=null&&r.length!=e.length)return!1;if(r!=null&&e!=null){for(var i in e)t++;for(var i in r)if(t--,(!__mxUtils.isNaN(r[i])||!__mxUtils.isNaN(e[i]))&&r[i]!=e[i])return!1}return t==0}static removeDuplicates(r){for(var e=new mxDictionary,t=[],i=0;i<r.length;i++)e.get(r[i])||(t.push(r[i]),e.put(r[i],!0));return t}static isNaN(r){return typeof r=="number"&&isNaN(r)}static extend(r,e){var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}static toString(r){var e="";for(var t in r)try{if(r[t]==null)e+=t+` = [null]
`;else if(typeof r[t]=="function")e+=t+` => [Function]
`;else if(typeof r[t]=="object"){var i=__mxUtils.getFunctionName(r[t].constructor);e+=t+" => ["+i+`]
`}else e+=t+" = "+r[t]+`
`}catch(n){e+=t+"="+n.message}return e}static toRadians(r){return Math.PI*r/180}static toDegree(r){return r*180/Math.PI}static arcToCurves(r,e,t,i,n,s,l,a,o){if(a-=r,o-=e,t===0||i===0)return Ve;var h=l,d=n;t=Math.abs(t),i=Math.abs(i);var m=-a/2,g=-o/2,c=Math.cos(d*Math.PI/180),f=Math.sin(d*Math.PI/180),C=c*m+f*g,v=-1*f*m+c*g,w=C*C,S=v*v,T=t*t,P=i*i,L=w/T+S/P,k;if(L>1)t=Math.sqrt(L)*t,i=Math.sqrt(L)*i,k=0;else{var G=1;s===h&&(G=-1),k=G*Math.sqrt((T*P-T*S-P*w)/(T*S+P*w))}var Y=k*t*v/i,te=-1*k*i*C/t,ie=c*Y-f*te+a/2,ne=f*Y+c*te+o/2,q=Math.atan2((v-te)/i,(C-Y)/t)-Math.atan2(0,1),oe=q>=0?q:2*Math.PI+q;q=Math.atan2((-v-te)/i,(-C-Y)/t)-Math.atan2((v-te)/i,(C-Y)/t);var le=q>=0?q:2*Math.PI+q;h==0&&le>0?le-=2*Math.PI:h!=0&&le<0&&(le+=2*Math.PI);for(var Z=le*2/Math.PI,B=Math.ceil(Z<0?-1*Z:Z),re=le/B,se=8/3*Math.sin(re/4)*Math.sin(re/4)/Math.sin(re/2),ve=c*t,pe=c*i,Q=f*t,me=f*i,ce=Math.cos(oe),Le=Math.sin(oe),Ie=-se*(ve*Le+me*ce),Ge=-se*(Q*Le-pe*ce),fe=0,Te=0,Ve=[],De=0;De<B;++De){oe+=re,ce=Math.cos(oe),Le=Math.sin(oe),fe=ve*ce-me*Le+ie,Te=Q*ce+pe*Le+ne;var He=-se*(ve*Le+me*ce),ue=-se*(Q*Le-pe*ce),be=De*6;Ve[be]=Number(Ie+r),Ve[be+1]=Number(Ge+e),Ve[be+2]=Number(fe-He+r),Ve[be+3]=Number(Te-ue+e),Ve[be+4]=Number(fe+r),Ve[be+5]=Number(Te+e),Ie=fe+He,Ge=Te+ue}return Ve}static getBoundingBox(r,e,t){var i=null;if(r!=null&&e!=null&&e!=0){var n=__mxUtils.toRadians(e),s=Math.cos(n),l=Math.sin(n);t=t??new mxPoint(r.x+r.width/2,r.y+r.height/2);var a=new mxPoint(r.x,r.y),o=new mxPoint(r.x+r.width,r.y),h=new mxPoint(o.x,r.y+r.height),d=new mxPoint(r.x,h.y);a=__mxUtils.getRotatedPoint(a,s,l,t),o=__mxUtils.getRotatedPoint(o,s,l,t),h=__mxUtils.getRotatedPoint(h,s,l,t),d=__mxUtils.getRotatedPoint(d,s,l,t),i=new mxRectangle(a.x,a.y,0,0),i.add(new mxRectangle(o.x,o.y,0,0)),i.add(new mxRectangle(h.x,h.y,0,0)),i.add(new mxRectangle(d.x,d.y,0,0))}return i}static getRotatedPoint(r,e,t,i){i=i??new mxPoint;var n=r.x-i.x,s=r.y-i.y,l=n*e-s*t,a=s*e+n*t;return new mxPoint(l+i.x,a+i.y)}static getPortConstraints(r,e,t,i){var n=__mxUtils.getValue(r.style,mxConstants$1.STYLE_PORT_CONSTRAINT,__mxUtils.getValue(e.style,t?mxConstants$1.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants$1.STYLE_TARGET_PORT_CONSTRAINT,null));if(n==null)return i;var s=n.toString(),l=mxConstants$1.DIRECTION_MASK_NONE,a=__mxUtils.getValue(r.style,mxConstants$1.STYLE_PORT_CONSTRAINT_ROTATION,0),o=0;a==1&&(o=__mxUtils.getValue(r.style,mxConstants$1.STYLE_ROTATION,0));var h=0;if(o>45?(h=1,o>=135&&(h=2)):o<-45&&(h=3,o<=-135&&(h=2)),s.indexOf(mxConstants$1.DIRECTION_NORTH)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 1:l|=mxConstants$1.DIRECTION_MASK_EAST;break;case 2:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 3:l|=mxConstants$1.DIRECTION_MASK_WEST;break}if(s.indexOf(mxConstants$1.DIRECTION_WEST)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_WEST;break;case 1:l|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 2:l|=mxConstants$1.DIRECTION_MASK_EAST;break;case 3:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break}if(s.indexOf(mxConstants$1.DIRECTION_SOUTH)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 1:l|=mxConstants$1.DIRECTION_MASK_WEST;break;case 2:l|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 3:l|=mxConstants$1.DIRECTION_MASK_EAST;break}if(s.indexOf(mxConstants$1.DIRECTION_EAST)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_EAST;break;case 1:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 2:l|=mxConstants$1.DIRECTION_MASK_WEST;break;case 3:l|=mxConstants$1.DIRECTION_MASK_NORTH;break}return l}static reversePortConstraints(r){var e=0;return e=(r&mxConstants$1.DIRECTION_MASK_WEST)<<3,e|=(r&mxConstants$1.DIRECTION_MASK_NORTH)<<1,e|=(r&mxConstants$1.DIRECTION_MASK_SOUTH)>>1,e|=(r&mxConstants$1.DIRECTION_MASK_EAST)>>3,e}static findNearestSegment(r,e,t){var i=-1;if(r.absolutePoints.length>0)for(var n=r.absolutePoints[0],s=null,l=1;l<r.absolutePoints.length;l++){var a=r.absolutePoints[l],o=__mxUtils.ptSegDistSq(n.x,n.y,a.x,a.y,e,t);(s==null||o<s)&&(s=o,i=l-1),n=a}return i}static getDirectedBounds(r,e,t,i,n){var s=__mxUtils.getValue(t,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST);if(i=i??__mxUtils.getValue(t,mxConstants$1.STYLE_FLIPH,!1),n=n??__mxUtils.getValue(t,mxConstants$1.STYLE_FLIPV,!1),e.x=Math.round(Math.max(0,Math.min(r.width,e.x))),e.y=Math.round(Math.max(0,Math.min(r.height,e.y))),e.width=Math.round(Math.max(0,Math.min(r.width,e.width))),e.height=Math.round(Math.max(0,Math.min(r.height,e.height))),n&&(s==mxConstants$1.DIRECTION_SOUTH||s==mxConstants$1.DIRECTION_NORTH)||i&&(s==mxConstants$1.DIRECTION_EAST||s==mxConstants$1.DIRECTION_WEST)){var l=e.x;e.x=e.width,e.width=l}if(i&&(s==mxConstants$1.DIRECTION_SOUTH||s==mxConstants$1.DIRECTION_NORTH)||n&&(s==mxConstants$1.DIRECTION_EAST||s==mxConstants$1.DIRECTION_WEST)){var l=e.y;e.y=e.height,e.height=l}var a=mxRectangle.fromRectangle(e);return s==mxConstants$1.DIRECTION_SOUTH?(a.y=e.x,a.x=e.height,a.width=e.y,a.height=e.width):s==mxConstants$1.DIRECTION_WEST?(a.y=e.height,a.x=e.width,a.width=e.x,a.height=e.y):s==mxConstants$1.DIRECTION_NORTH&&(a.y=e.width,a.x=e.y,a.width=e.height,a.height=e.x),new mxRectangle(r.x+a.x,r.y+a.y,r.width-a.width-a.x,r.height-a.height-a.y)}static getPerimeterPoint(r,e,t){for(var i=null,n=0;n<r.length-1;n++){var s=__mxUtils.intersection(r[n].x,r[n].y,r[n+1].x,r[n+1].y,e.x,e.y,t.x,t.y);if(s!=null){var l=t.x-s.x,a=t.y-s.y,o={p:s,distSq:a*a+l*l};o!=null&&(i==null||i.distSq>o.distSq)&&(i=o)}}return i!=null?i.p:null}static rectangleIntersectsSegment(r,e,t){var i=r.y,n=r.x,s=i+r.height,l=n+r.width,a=e.x,o=t.x;if(e.x>t.x&&(a=t.x,o=e.x),o>l&&(o=l),a<n&&(a=n),a>o)return!1;var h=e.y,d=t.y,m=t.x-e.x;if(Math.abs(m)>1e-7){var g=(t.y-e.y)/m,c=e.y-g*e.x;h=g*a+c,d=g*o+c}if(h>d){var f=d;d=h,h=f}return d>s&&(d=s),h<i&&(h=i),!(h>d)}static contains(r,e,t){return r.x<=e&&r.x+r.width>=e&&r.y<=t&&r.y+r.height>=t}static intersects(r,e){var t=r.width,i=r.height,n=e.width,s=e.height;if(n<=0||s<=0||t<=0||i<=0)return!1;var l=r.x,a=r.y,o=e.x,h=e.y;return n+=o,s+=h,t+=l,i+=a,(n<o||n>l)&&(s<h||s>a)&&(t<l||t>o)&&(i<a||i>h)}static intersectsHotspot(r,e,t,i,n,s){if(i=i??1,n=n??0,s=s??0,i>0){var l=r.getCenterX(),a=r.getCenterY(),o=r.width,h=r.height,d=__mxUtils.getValue(r.style,mxConstants$1.STYLE_STARTSIZE)*r.view.scale;d>0&&(__mxUtils.getValue(r.style,mxConstants$1.STYLE_HORIZONTAL,!0)?(a=r.y+d/2,h=d):(l=r.x+d/2,o=d)),o=Math.max(n,o*i),h=Math.max(n,h*i),s>0&&(o=Math.min(o,s),h=Math.min(h,s));var m=new mxRectangle(l-o/2,a-h/2,o,h),g=__mxUtils.toRadians(__mxUtils.getValue(r.style,mxConstants$1.STYLE_ROTATION)||0);if(g!=0){var c=Math.cos(-g),f=Math.sin(-g),l=new mxPoint(r.getCenterX(),r.getCenterY()),C=__mxUtils.getRotatedPoint(new mxPoint(e,t),c,f,l);e=C.x,t=C.y}return __mxUtils.contains(m,e,t)}return!0}static getOffset(r,e){for(var t=0,i=0,n=!1,s=r,l=document.body,a=document.documentElement;s!=null&&s!=l&&s!=a&&!n;){var o=__mxUtils.getCurrentStyle(s);o!=null&&(n=n||o.position=="fixed"),s=s.parentNode}if(!e&&!n){var h=__mxUtils.getDocumentScrollOrigin(r.ownerDocument);t+=h.x,i+=h.y}var d=r.getBoundingClientRect();return d!=null&&(t+=d.left,i+=d.top),new mxPoint(t,i)}static getDocumentScrollOrigin(r){if(mxClient.IS_QUIRKS)return new mxPoint(r.body.scrollLeft,r.body.scrollTop);var e=r.defaultView||r.parentWindow,t=e!=null&&window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,i=e!=null&&window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new mxPoint(t,i)}static getScrollOrigin(r,e,t){e=e??!1,t=t??!0;for(var i=r!=null?r.ownerDocument:document,n=i.body,s=i.documentElement,l=new mxPoint,a=!1;r!=null&&r!=n&&r!=s;){!isNaN(r.scrollLeft)&&!isNaN(r.scrollTop)&&(l.x+=r.scrollLeft,l.y+=r.scrollTop);var o=__mxUtils.getCurrentStyle(r);o!=null&&(a=a||o.position=="fixed"),r=e?r.parentNode:null}if(!a&&t){var h=__mxUtils.getDocumentScrollOrigin(i);l.x+=h.x,l.y+=h.y}return l}static convertPoint(r,e,t){var i=__mxUtils.getScrollOrigin(r,!1),n=__mxUtils.getOffset(r);return n.x-=i.x,n.y-=i.y,new mxPoint(e-n.x,t-n.y)}static ltrim(r,e){return e=e||"\\s",r!=null?r.replace(new RegExp("^["+e+"]+","g"),""):null}static rtrim(r,e){return e=e||"\\s",r!=null?r.replace(new RegExp("["+e+"]+$","g"),""):null}static trim(r,e){return __mxUtils.ltrim(__mxUtils.rtrim(r,e),e)}static isNumeric(r){return!isNaN(parseFloat(r))&&isFinite(r)&&(typeof r!="string"||r.toLowerCase().indexOf("0x")<0)}static isInteger(r){return String(parseInt(r))===String(r)}static mod(r,e){return(r%e+e)%e}static intersection(r,e,t,i,n,s,l,a){var o=(a-s)*(t-r)-(l-n)*(i-e),h=(l-n)*(e-s)-(a-s)*(r-n),d=(t-r)*(e-s)-(i-e)*(r-n),m=h/o,g=d/o;if(m>=0&&m<=1&&g>=0&&g<=1){var c=r+m*(t-r),f=e+m*(i-e);return new mxPoint(c,f)}return null}static ptSegDistSq(r,e,t,i,n,s){t-=r,i-=e,n-=r,s-=e;var l=n*t+s*i,a;l<=0?a=0:(n=t-n,s=i-s,l=n*t+s*i,l<=0?a=0:a=l*l/(t*t+i*i));var o=n*n+s*s-a;return o<0&&(o=0),o}static ptLineDist(r,e,t,i,n,s){return Math.abs((i-e)*n-(t-r)*s+t*e-i*r)/Math.sqrt((i-e)*(i-e)+(t-r)*(t-r))}static relativeCcw(r,e,t,i,n,s){t-=r,i-=e,n-=r,s-=e;var l=n*i-s*t;return l==0&&(l=n*t+s*i,l>0&&(n-=t,s-=i,l=n*t+s*i,l<0&&(l=0))),l<0?-1:l>0?1:0}static animateChanges(r,e){mxEffects.animateChanges.apply(this,arguments)}static cascadeOpacity(r,e,t){mxEffects.cascadeOpacity.apply(this,arguments)}static fadeOut(r,e,t,i,n,s){mxEffects.fadeOut.apply(this,arguments)}static setOpacity(r,e){__mxUtils.isVml(r)?e>=100?r.style.filter="":r.style.filter="alpha(opacity="+e/5+")":r.style.opacity=e/100}static createImage(r){var e=null;return e=document.createElement("img"),e.setAttribute("src",r),e.setAttribute("border","0"),e}static sortCells(r,e){e=e??!0;var t=new mxDictionary;return r.sort(function(i,n){var s=t.get(i);s==null&&(s=mxCellPath.create(i).split(mxCellPath.PATH_SEPARATOR),t.put(i,s));var l=t.get(n);l==null&&(l=mxCellPath.create(n).split(mxCellPath.PATH_SEPARATOR),t.put(n,l));var a=mxCellPath.compare(s,l);return a==0?0:a>0==e?1:-1}),r}static getStylename(r){if(r!=null){var e=r.split(";"),t=e[0];if(t.indexOf("=")<0)return t}return""}static getStylenames(r){var e=[];if(r!=null)for(var t=r.split(";"),i=0;i<t.length;i++)t[i].indexOf("=")<0&&e.push(t[i]);return e}static indexOfStylename(r,e){if(r!=null&&e!=null)for(var t=r.split(";"),i=0,n=0;n<t.length;n++){if(t[n]==e)return i;i+=t[n].length+1}return-1}static addStylename(r,e){return __mxUtils.indexOfStylename(r,e)<0&&(r==null?r="":r.length>0&&r.charAt(r.length-1)!=";"&&(r+=";"),r+=e),r}static removeStylename(r,e){var t=[];if(r!=null)for(var i=r.split(";"),n=0;n<i.length;n++)i[n]!=e&&t.push(i[n]);return t.join(";")}static removeAllStylenames(r){var e=[];if(r!=null)for(var t=r.split(";"),i=0;i<t.length;i++)t[i].indexOf("=")>=0&&e.push(t[i]);return e.join(";")}static setCellStyles(r,e,t,i){if(e!=null&&e.length>0){r.beginUpdate();try{for(var n=0;n<e.length;n++)if(e[n]!=null){var s=__mxUtils.setStyle(r.getStyle(e[n]),t,i);r.setStyle(e[n],s)}}finally{r.endUpdate()}}}static setStyle(r,e,t){var i=t!=null&&(typeof t.length>"u"||t.length>0);if(r==null||r.length==0)i&&(r=e+"="+t+";");else if(r.substring(0,e.length+1)==e+"="){var n=r.indexOf(";");i?r=e+"="+t+(n<0?";":r.substring(n)):r=n<0||n==r.length-1?"":r.substring(n+1)}else{var s=r.indexOf(";"+e+"=");if(s<0){if(i){var l=r.charAt(r.length-1)==";"?"":";";r=r+l+e+"="+t+";"}}else{var n=r.indexOf(";",s+1);i?r=r.substring(0,s+1)+e+"="+t+(n<0?";":r.substring(n)):r=r.substring(0,s)+(n<0?";":r.substring(n))}}return r}static setCellStyleFlags(r,e,t,i,n){if(e!=null&&e.length>0){r.beginUpdate();try{for(var s=0;s<e.length;s++)if(e[s]!=null){var l=__mxUtils.setStyleFlag(r.getStyle(e[s]),t,i,n);r.setStyle(e[s],l)}}finally{r.endUpdate()}}}static setStyleFlag(r,e,t,i){if(r==null||r.length==0)i||i==null?r=e+"="+t:r=e+"=0";else{var n=r.indexOf(e+"=");if(n<0){var s=r.charAt(r.length-1)==";"?"":";";i||i==null?r=r+s+e+"="+t:r=r+s+e+"=0"}else{var l=r.indexOf(";",n),a="";l<0?a=r.substring(n+e.length+1):a=r.substring(n+e.length+1,l),i==null?a=parseInt(a)^t:i?a=parseInt(a)|t:a=parseInt(a)&~t,r=r.substring(0,n)+e+"="+a+(l>=0?r.substring(l):"")}}return r}static getAlignmentAsPoint(r,e){var t=-.5,i=-.5;return r==mxConstants$1.ALIGN_LEFT?t=0:r==mxConstants$1.ALIGN_RIGHT&&(t=-1),e==mxConstants$1.ALIGN_TOP?i=0:e==mxConstants$1.ALIGN_BOTTOM&&(i=-1),new mxPoint(t,i)}static getSizeForString(r,e,t,i,n){e=e??mxConstants$1.DEFAULT_FONTSIZE,t=t??mxConstants$1.DEFAULT_FONTFAMILY;var s=document.createElement("div");if(s.style.fontFamily=t,s.style.fontSize=Math.round(e)+"px",s.style.lineHeight=Math.round(e*mxConstants$1.LINE_HEIGHT)+"px",n!=null){(n&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(s.style.fontWeight="bold"),(n&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(s.style.fontStyle="italic");var l=[];(n&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&l.push("underline"),(n&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&l.push("line-through"),l.length>0&&(s.style.textDecoration=l.join(" "))}s.style.position="absolute",s.style.visibility="hidden",s.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",s.style.zoom="1",i!=null?(s.style.width=i+"px",s.style.whiteSpace="normal"):s.style.whiteSpace="nowrap",s.innerHTML=r,document.body.appendChild(s);var a=new mxRectangle(0,0,s.offsetWidth,s.offsetHeight);return document.body.removeChild(s),a}static getViewXml(r,e,t,i,n){if(i=i??0,n=n??0,e=e??1,t==null){var s=r.getModel();t=[s.getRoot()]}var l=r.getView(),a=null,o=l.isEventsEnabled();l.setEventsEnabled(!1);var h=l.drawPane,d=l.overlayPane;r.dialect==mxConstants$1.DIALECT_SVG?(l.drawPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),l.canvas.appendChild(l.drawPane),l.overlayPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),l.canvas.appendChild(l.overlayPane)):(l.drawPane=l.drawPane.cloneNode(!1),l.canvas.appendChild(l.drawPane),l.overlayPane=l.overlayPane.cloneNode(!1),l.canvas.appendChild(l.overlayPane));var m=l.getTranslate();l.translate=new mxPoint(i,n);var g=new mxTemporaryCellStates(r.getView(),e,t);try{var c=new mxCodec;a=c.encode(r.getView())}finally{g.destroy(),l.translate=m,l.canvas.removeChild(l.drawPane),l.canvas.removeChild(l.overlayPane),l.drawPane=h,l.overlayPane=d,l.setEventsEnabled(o)}return a}static getScaleForPageCount(r,e,t,i){if(r<1)return 1;t=t??mxConstants$1.PAGE_FORMAT_A4_PORTRAIT,i=i??0;var n=t.width-i*2,s=t.height-i*2,l=e.getGraphBounds().clone(),a=e.getView().getScale();l.width/=a,l.height/=a;var o=l.width,h=l.height,d=1,m=n/s,g=o/h,c=g/m,f=Math.sqrt(r),C=Math.sqrt(c),v=f*C,w=f/C;if(v<1&&w>r){var S=w/r;w=r,v/=S}if(w<1&&v>r){var S=v/r;v=r,w/=S}for(var T=Math.ceil(v)*Math.ceil(w),P=0;T>r;){var L=Math.floor(v)/v,k=Math.floor(w)/w;L==1&&(L=Math.floor(v-1)/v),k==1&&(k=Math.floor(w-1)/w);var S=1;if(L>k?S=L:S=k,v=v*S,w=w*S,T=Math.ceil(v)*Math.ceil(w),P++,P>10)break}var G=n*v;return d=G/o,d*.99999}static show(r,e,t,i,n,s){if(t=t??0,i=i??0,e==null){var l=window.open();e=l.document}else e.open();document.documentMode==9&&e.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->');var a=r.getGraphBounds(),o=Math.ceil(t-a.x),h=Math.ceil(i-a.y);if(n==null&&(n=Math.ceil(a.width+t)+Math.ceil(Math.ceil(a.x)-a.x)),s==null&&(s=Math.ceil(a.height+i)+Math.ceil(Math.ceil(a.y)-a.y)),document.documentMode==11){for(var d="<html><head>",m=document.getElementsByTagName("base"),g=0;g<m.length;g++)d+=m[g].outerHTML;d+="<style>";for(var g=0;g<document.styleSheets.length;g++)try{d+=document.styleSheets[g].cssText}catch{}d+='</style></head><body style="margin:0px;">',d+='<div style="position:absolute;overflow:hidden;width:'+n+"px;height:"+s+'px;"><div style="position:relative;left:'+o+"px;top:"+h+'px;">',d+=r.container.innerHTML,d+="</div></div></body><html>",e.writeln(d),e.close()}else{e.writeln("<html><head>");for(var m=document.getElementsByTagName("base"),g=0;g<m.length;g++)e.writeln(__mxUtils.getOuterHtml(m[g]));for(var c=document.getElementsByTagName("link"),g=0;g<c.length;g++)e.writeln(__mxUtils.getOuterHtml(c[g]));for(var f=document.getElementsByTagName("style"),g=0;g<f.length;g++)e.writeln(__mxUtils.getOuterHtml(f[g]));e.writeln('</head><body style="margin:0px;"></body></html>'),e.close();var C=e.createElement("div");C.position="absolute",C.overflow="hidden",C.style.width=n+"px",C.style.height=s+"px";var v=e.createElement("div");v.style.position="absolute",v.style.left=o+"px",v.style.top=h+"px";for(var w=r.container.firstChild,S=null;w!=null;){var T=w.cloneNode(!0);w==r.view.drawPane.ownerSVGElement?(C.appendChild(T),S=T):v.appendChild(T),w=w.nextSibling}e.body.appendChild(C),v.firstChild!=null&&e.body.appendChild(v),S!=null&&(S.style.minWidth="",S.style.minHeight="",S.firstChild.setAttribute("transform","translate("+o+","+h+")"))}return __mxUtils.removeCursors(e.body),e}static printScreen(r){var e=window.open();r.getGraphBounds(),__mxUtils.show(r,e.document);var t=function(){e.focus(),e.print(),e.close()};mxClient.IS_GC?e.setTimeout(t,500):t()}static popup(r,e){if(e){var t=document.createElement("div");t.style.overflow="scroll",t.style.width="636px",t.style.height="460px";var i=document.createElement("pre");i.innerHTML=__mxUtils.htmlEntities(r,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),t.appendChild(i);var n=document.body.clientWidth,s=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight),l=new mxWindow("Popup Window",t,n/2-320,s/2-240,640,480,!1,!0);l.setClosable(!0),l.setVisible(!0)}else if(mxClient.IS_NS){var l=window.open();l.document.writeln("<pre>"+__mxUtils.htmlEntities(r)+"</pre"),l.document.close()}else{var l=window.open(),i=l.document.createElement("pre");i.innerHTML=__mxUtils.htmlEntities(r,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),l.document.body.appendChild(i)}}static alert(r){alert(r)}static prompt(r,e){return prompt(r,e??"")}static confirm(r){return confirm(r)}static error(r,e,t,i){var n=document.createElement("div");n.style.padding="20px";var s=document.createElement("img");s.setAttribute("src",i||__mxUtils.errorImage),s.setAttribute("valign","bottom"),s.style.verticalAlign="middle",n.appendChild(s),n.appendChild(document.createTextNode("")),n.appendChild(document.createTextNode("")),n.appendChild(document.createTextNode("")),__mxUtils.write(n,r);var l=document.body.clientWidth,a=document.body.clientHeight||document.documentElement.clientHeight,o=new mxWindow(mxResources$1.get(__mxUtils.errorResource)||__mxUtils.errorResource,n,(l-e)/2,a/4,e,null,!1,!0);if(t){__mxUtils.br(n);var h=document.createElement("p"),d=document.createElement("button");d.setAttribute("style","float:right"),mxEvent$1.addListener(d,"click",function(m){o.destroy()}),__mxUtils.write(d,mxResources$1.get(__mxUtils.closeResource)||__mxUtils.closeResource),h.appendChild(d),n.appendChild(h),__mxUtils.br(n),o.setClosable(!0)}return o.setVisible(!0),o}static makeDraggable(r,e,t,i,n,s,l,a,o,h){var d=new mxDragSource(r,t);return d.dragOffset=new mxPoint(n??0,s??mxConstants$1.TOOLTIP_VERTICAL_OFFSET),d.autoscroll=l,d.setGuidesEnabled(!1),o!=null&&(d.highlightDropTargets=o),h!=null&&(d.getDropTarget=h),d.getGraphForEvent=function(m){return typeof e=="function"?e(m):e},i!=null&&(d.createDragElement=function(){return i.cloneNode(!0)},a&&(d.createPreviewElement=function(m){var g=i.cloneNode(!0),c=parseInt(g.style.width),f=parseInt(g.style.height);return g.style.width=Math.round(c*m.view.scale)+"px",g.style.height=Math.round(f*m.view.scale)+"px",g})),d}};u(_mxUtils,"errorResource",mxClient.language!="none"?"error":""),u(_mxUtils,"closeResource",mxClient.language!="none"?"close":""),u(_mxUtils,"errorImage",mxClient.imageBasePath+"/error.gif"),u(_mxUtils,"setPrefixedStyle",function(){var r=null;return mxClient.IS_OT?r="O":mxClient.IS_SF||mxClient.IS_GC?r="Webkit":mxClient.IS_MT&&(r="Moz"),function(e,t,i){e[t]=i,r!=null&&t.length>0&&(t=r+t.substring(0,1).toUpperCase()+t.substring(1),e[t]=i)}}()),u(_mxUtils,"clearSelection",function(){return document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){}}());let mxUtils$1=_mxUtils;class mxMouseEvent{constructor(e,t){u(this,"consumed",!1),u(this,"graphX",null),u(this,"graphY",null),this.evt=e,this.state=t,this.sourceState=t}getEvent(){return this.evt}getSource(){return mxEvent$1.getSource(this.evt)}isSource(e){return e!=null?mxUtils$1.isAncestorNode(e.node,this.getSource()):!1}getX(){return mxEvent$1.getClientX(this.getEvent())}getY(){return mxEvent$1.getClientY(this.getEvent())}getGraphX(){return this.graphX}getGraphY(){return this.graphY}getState(){return this.state}getCell(){var e=this.getState();return e!=null?e.cell:null}isPopupTrigger(){return mxEvent$1.isPopupTrigger(this.getEvent())}isConsumed(){return this.consumed}consume(e){e=e??(this.evt.touches!=null||mxEvent$1.isMouseEvent(this.evt)),e&&this.evt.preventDefault&&this.evt.preventDefault(),this.consumed=!0}}const yt=class Jt{static addStencil(e,t){Jt.stencils[e]=t}static getStencil(e){return Jt.stencils[e]}};u(yt,"stencils",{});let mxStencilRegistry=yt;const at=class Yt extends mxShape{constructor(e,t,i,n,s,l,a,o,h,d,m,g,c,f,C,v,w,S,T,P,L){super(),u(this,"replaceLinefeeds",!0),u(this,"verticalTextRotation",-90),u(this,"ignoreClippedStringSize",!0),u(this,"ignoreStringSize",!1),u(this,"textWidthPadding",document.documentMode==8&&!mxClient.IS_EM?4:3),u(this,"lastValue",null),u(this,"cacheEnabled",!0),this.value=e,this.bounds=t,this.color=s??"black",this.align=i??mxConstants$1.ALIGN_CENTER,this.valign=n??mxConstants$1.ALIGN_MIDDLE,this.family=l??mxConstants$1.DEFAULT_FONTFAMILY,this.size=a??mxConstants$1.DEFAULT_FONTSIZE,this.fontStyle=o??mxConstants$1.DEFAULT_FONTSTYLE,this.spacing=parseInt(h||2),this.spacingTop=this.spacing+parseInt(d||0),this.spacingRight=this.spacing+parseInt(m||0),this.spacingBottom=this.spacing+parseInt(g||0),this.spacingLeft=this.spacing+parseInt(c||0),this.horizontal=f??!0,this.background=C,this.border=v,this.wrap=w??!1,this.clipped=S??!1,this.overflow=T??"visible",this.labelPadding=P??0,this.textDirection=L,this.rotation=0,this.updateMargin()}isParseVml(){return!1}isHtmlAllowed(){return document.documentMode!=8||mxClient.IS_EM}getSvgScreenOffset(){return 0}checkBounds(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&this.bounds!=null&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)}paint(e,t){var i=this.scale,n=this.bounds.x/i,s=this.bounds.y/i,l=this.bounds.width/i,a=this.bounds.height/i;if(this.updateTransform(e,n,s,l,a),this.configureCanvas(e,n,s,l,a),t)e.updateText(n,s,l,a,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node);else{var o=mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML,h=o||e instanceof mxVmlCanvas2D?"html":"";o=!0,h="html";var d=this.value;!o&&h=="html"&&(d=mxUtils$1.htmlEntities(d,!1)),h=="html"&&!mxUtils$1.isNode(this.value)&&(d=mxUtils$1.replaceTrailingNewlines(d,"<div><br></div>")),d=!mxUtils$1.isNode(this.value)&&this.replaceLinefeeds&&h=="html"?d.replace(/\n/g,"<br/>"):d;var m=this.textDirection;m==mxConstants$1.TEXT_DIRECTION_AUTO&&!o&&(m=this.getAutoDirection()),m!=mxConstants$1.TEXT_DIRECTION_LTR&&m!=mxConstants$1.TEXT_DIRECTION_RTL&&(m=null),e.text(n,s,l,a,d,this.align,this.valign,this.wrap,h,this.overflow,this.clipped,this.getTextRotation(),m)}}redraw(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML))if(this.node.nodeName=="DIV"&&this.isHtmlAllowed())mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,this.state==null||this.state.view.textDiv==null),this.updateHtmlTransform()),this.updateBoundingBox();else{var e=this.createCanvas();e!=null&&e.updateText!=null?(e.pointerEvents=this.pointerEvents,this.paint(e,!0),this.destroyCanvas(e),this.updateBoundingBox()):super.redraw()}else super.redraw(),mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML?this.lastValue=this.value:this.lastValue=null}resetStyles(){super.resetStyles(),this.color="black",this.align=mxConstants$1.ALIGN_CENTER,this.valign=mxConstants$1.ALIGN_MIDDLE,this.family=mxConstants$1.DEFAULT_FONTFAMILY,this.size=mxConstants$1.DEFAULT_FONTSIZE,this.fontStyle=mxConstants$1.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=2,this.spacingRight=2,this.spacingBottom=2,this.spacingLeft=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants$1.DEFAULT_TEXT_DIRECTION,delete this.margin}apply(e){var t=this.spacing;super.apply(e),this.style!=null&&(this.fontStyle=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTFAMILY,this.family),this.size=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTSIZE,this.size),this.color=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTCOLOR,this.color),this.align=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ALIGN,this.align),this.valign=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_TOP,this.spacingTop-t))+this.spacing,this.spacingRight=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_RIGHT,this.spacingRight-t))+this.spacing,this.spacingBottom=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_BOTTOM,this.spacingBottom-t))+this.spacing,this.spacingLeft=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_LEFT,this.spacingLeft-t))+this.spacing,this.horizontal=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipV=null,this.flipH=null}getAutoDirection(){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return e!=null&&e.length>0&&e[0]>"z"?mxConstants$1.TEXT_DIRECTION_RTL:mxConstants$1.TEXT_DIRECTION_LTR}getContentNode(){var e=this.node;return e!=null&&(e.ownerSVGElement==null?e=this.node.firstChild.firstChild:e=e.firstChild.firstChild.firstChild.firstChild.firstChild),e}updateBoundingBox(){var e=this.node;this.boundingBox=this.bounds.clone();var t=this.getTextRotation(),i=this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER):null,n=this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE):null;if(!this.ignoreStringSize&&e!=null&&this.overflow!="fill"&&(!this.clipped||!this.ignoreClippedStringSize||i!=mxConstants$1.ALIGN_CENTER||n!=mxConstants$1.ALIGN_MIDDLE)){var s=null,l=null;if(e.ownerSVGElement!=null)if(e.firstChild!=null&&e.firstChild.firstChild!=null&&e.firstChild.firstChild.nodeName=="foreignObject")e=e.firstChild.firstChild.firstChild.firstChild,l=e.offsetHeight*this.scale,this.overflow=="width"?s=this.boundingBox.width:s=e.offsetWidth*this.scale;else try{var a=e.getBBox();typeof this.value=="string"&&mxUtils$1.trim(this.value)==0?this.boundingBox=null:a.width==0&&a.height==0?this.boundingBox=null:this.boundingBox=new mxRectangle(a.x,a.y,a.width,a.height);return}catch{}else{var o=this.state!=null?this.state.view.textDiv:null;if(this.offsetWidth!=null&&this.offsetHeight!=null)s=this.offsetWidth*this.scale,l=this.offsetHeight*this.scale;else{o!=null&&(this.updateFont(o),this.updateSize(o,!1),this.updateInnerHtml(o),e=o);var h=e;if(document.documentMode==8&&!mxClient.IS_EM){var d=Math.round(this.bounds.width/this.scale);if(this.wrap&&d>0){if(e.style.wordWrap=mxConstants$1.WORD_WRAP,e.style.whiteSpace="normal",e.style.wordWrap!="break-word"){var m=h.getElementsByTagName("div");m.length>0&&(h=m[m.length-1]),s=h.offsetWidth+2,m=this.node.getElementsByTagName("div"),this.clipped&&(s=Math.min(d,s)),m.length>1&&(m[m.length-2].style.width=s+"px")}}else e.style.whiteSpace="nowrap"}else h.firstChild!=null&&h.firstChild.nodeName=="DIV"&&(h=h.firstChild);this.offsetWidth=h.offsetWidth+this.textWidthPadding,this.offsetHeight=h.offsetHeight,s=this.offsetWidth*this.scale,l=this.offsetHeight*this.scale}}s!=null&&l!=null&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,s,l))}if(this.boundingBox!=null)if(t!=0){var g=mxUtils$1.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),t,new mxPoint(0,0));this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=g.x,this.boundingBox.y+=g.y,this.boundingBox.width=g.width,this.boundingBox.height=g.height}else this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null}getShapeRotation(){return 0}getTextRotation(){return this.state!=null&&this.state.shape!=null?this.state.shape.getTextRotation():0}isPaintBoundsInverted(){return!this.horizontal&&this.state!=null&&this.state.view.graph.model.isVertex(this.state.cell)}configureCanvas(e,t,i,n,s){super.configureCanvas(e,t,i,n,s),e.setFontColor(this.color),e.setFontBackgroundColor(this.background),e.setFontBorderColor(this.border),e.setFontFamily(this.family),e.setFontSize(this.size),e.setFontStyle(this.fontStyle)}updateVmlContainer(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width="1px",this.node.style.height="1px",this.node.style.overflow="visible"}getHtmlValue(){var e=this.value;return this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(e=mxUtils$1.htmlEntities(e,!1)),e=mxUtils$1.replaceTrailingNewlines(e,"<div><br></div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,e}getTextCss(){var e=mxConstants$1.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT,t="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+e+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ";(this.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(t+="font-weight: bold; "),(this.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(t+="font-style: italic; ");var i=[];return(this.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&i.push("underline"),(this.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&i.push("line-through"),i.length>0&&(t+="text-decoration: "+i.join(" ")+"; "),t}redrawHtmlShape(){if(mxClient.IS_SVG)this.redrawHtmlShapeWithCss3();else{var e=this.node.style;e.whiteSpace="normal",e.overflow="",e.width="",e.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,this.state==null||this.state.view.textDiv==null),this.offsetWidth=null,this.offsetHeight=null,this.updateHtmlTransform()}}redrawHtmlShapeWithCss3(){var e=Math.max(0,Math.round(this.bounds.width/this.scale)),t=Math.max(0,Math.round(this.bounds.height/this.scale)),i="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",n=this.getTextCss();mxSvgCanvas2D.createCss(e+2,t,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.background!=null?mxUtils$1.htmlEntities(this.background):null,this.border!=null?mxUtils$1.htmlEntities(this.border):null,i,n,this.scale,(s,l,a,o,h,d)=>{var m=this.getTextRotation(),g=(this.scale!=1?"scale("+this.scale+") ":"")+(m!=0?"rotate("+m+"deg) ":"")+(this.margin.x!=0||this.margin.y!=0?"translate("+this.margin.x*100+"%,"+this.margin.y*100+"%)":"");g!=""&&(g="transform-origin: 0 0; transform: "+g+"; "),d==""?(a+=o,o="display:inline-block; min-width: 100%; "+g):o+=g,this.opacity<100&&(h+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",a);var c=mxUtils$1.isNode(this.value)?this.value.outerHTML:this.getHtmlValue();this.node.firstChild==null&&(this.node.innerHTML="<div><div>"+c+"</div></div>"),this.node.firstChild.firstChild.setAttribute("style",h),this.node.firstChild.setAttribute("style",o)})}updateHtmlTransform(){var e=this.getTextRotation(),t=this.node.style,i=this.margin.x,n=this.margin.y;e!=0?(mxUtils$1.setPrefixedStyle(t,"transformOrigin",-i*100+"% "+-n*100+"%"),mxUtils$1.setPrefixedStyle(t,"transform","translate("+i*100+"%,"+n*100+"%) scale("+this.scale+") rotate("+e+"deg)")):(mxUtils$1.setPrefixedStyle(t,"transformOrigin","0% 0%"),mxUtils$1.setPrefixedStyle(t,"transform","scale("+this.scale+") translate("+i*100+"%,"+n*100+"%)")),t.left=Math.round(this.bounds.x-Math.ceil(i*(this.overflow!="fill"&&this.overflow!="width"?3:1)))+"px",t.top=Math.round(this.bounds.y-n*(this.overflow!="fill"?3:1))+"px",this.opacity<100?t.opacity=this.opacity/100:t.opacity=""}updateInnerHtml(e){if(mxUtils$1.isNode(this.value))e.innerHTML=this.value.outerHTML;else{var t=this.value;this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(t=mxUtils$1.htmlEntities(t,!1)),t=mxUtils$1.replaceTrailingNewlines(t,"<div>&nbsp;</div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,t='<div style="display:inline-block;_display:inline;">'+t+"</div>",e.innerHTML=t}}updateHtmlFilter(){var e=this.node.style,t=this.margin.x,P=this.margin.y,i=this.scale;mxUtils$1.setOpacity(this.node,this.opacity);var n=0,s=0,l=this.state!=null?this.state.view.textDiv:null,a=this.node;if(l!=null){l.style.overflow="",l.style.height="",l.style.width="",this.updateFont(l),this.updateSize(l,!1),this.updateInnerHtml(l);var o=Math.round(this.bounds.width/this.scale);this.wrap&&o>0?(l.style.whiteSpace="normal",l.style.wordWrap=mxConstants$1.WORD_WRAP,n=o,this.clipped&&(n=Math.min(n,this.bounds.width)),l.style.width=n+"px"):l.style.whiteSpace="nowrap",a=l,a.firstChild!=null&&a.firstChild.nodeName=="DIV"&&(a=a.firstChild,this.wrap&&l.style.wordWrap=="break-word"&&(a.style.width="100%")),!this.clipped&&this.wrap&&o>0&&(n=a.offsetWidth+this.textWidthPadding,l.style.width=n+"px"),s=a.offsetHeight+2,mxClient.IS_QUIRKS&&this.border!=null&&this.border!=mxConstants$1.NONE&&(s+=3)}else a.firstChild!=null&&a.firstChild.nodeName=="DIV"&&(a=a.firstChild,s=a.offsetHeight);n=a.offsetWidth+this.textWidthPadding,this.clipped&&(s=Math.min(s,this.bounds.height));var o=this.bounds.width/i,h=this.bounds.height/i;this.overflow=="fill"?(s=h,n=o):this.overflow=="width"&&(s=a.scrollHeight,n=o),this.offsetWidth=n,this.offsetHeight=s,mxClient.IS_QUIRKS&&(this.clipped||this.overflow=="width"&&h>0)?(h=Math.min(h,s),e.height=Math.round(h)+"px"):h=s,this.overflow!="fill"&&this.overflow!="width"&&(this.clipped&&(n=Math.min(o,n)),o=n,(mxClient.IS_QUIRKS&&this.clipped||this.wrap)&&(e.width=Math.round(o)+"px")),h*=i,o*=i;var d=this.getTextRotation()*(Math.PI/180),m=parseFloat(parseFloat(Math.cos(d)).toFixed(8)),g=parseFloat(parseFloat(Math.sin(-d)).toFixed(8));d%=2*Math.PI,d<0&&(d+=2*Math.PI),d%=Math.PI,d>Math.PI/2&&(d=Math.PI-d);var c=Math.cos(d),f=Math.sin(-d),C=o*-(t+.5),v=h*-(P+.5),w=(h-h*c+o*f)/2+g*C-m*v,S=(o-o*c+h*f)/2-m*C-g*v;if(d!=0){var T="progid:DXImageTransform.Microsoft.Matrix(M11="+m+", M12="+g+", M21="+-g+", M22="+m+", sizingMethod='auto expand')";e.filter!=null&&e.filter.length>0?e.filter+=" "+T:e.filter=T}var P=0;this.overflow!="fill"&&mxClient.IS_QUIRKS&&(this.valign==mxConstants$1.ALIGN_TOP?P-=1:this.valign==mxConstants$1.ALIGN_BOTTOM?P+=2:P+=1),e.zoom=i,e.left=Math.round(this.bounds.x+S-o/2)+"px",e.top=Math.round(this.bounds.y+w-h/2+P)+"px"}updateValue(){if(mxUtils$1.isNode(this.value))this.node.innerHTML="",this.node.appendChild(this.value);else{var e=this.value;this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(e=mxUtils$1.htmlEntities(e,!1)),e=mxUtils$1.replaceTrailingNewlines(e,"<div><br></div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e;var t=this.background!=null&&this.background!=mxConstants$1.NONE?this.background:null,i=this.border!=null&&this.border!=mxConstants$1.NONE?this.border:null;if(this.overflow=="fill"||this.overflow=="width")t!=null&&(this.node.style.backgroundColor=t),i!=null&&(this.node.style.border="1px solid "+i);else{var n="";t!=null&&(n+="background-color:"+mxUtils$1.htmlEntities(t)+";"),i!=null&&(n+="border:1px solid "+mxUtils$1.htmlEntities(i)+";");var s=mxConstants$1.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT;e='<div style="zoom:1;'+n+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+s+'">'+e+"</div>"}this.node.innerHTML=e;var l=this.node.getElementsByTagName("div");if(l.length>0){var a=this.textDirection;a==mxConstants$1.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(a=this.getAutoDirection()),a==mxConstants$1.TEXT_DIRECTION_LTR||a==mxConstants$1.TEXT_DIRECTION_RTL?l[l.length-1].setAttribute("dir",a):l[l.length-1].removeAttribute("dir")}}}updateFont(e){var t=e.style;t.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT,t.fontSize=this.size+"px",t.fontFamily=this.family,t.verticalAlign="top",t.color=this.color,(this.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD?t.fontWeight="bold":t.fontWeight="",(this.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC?t.fontStyle="italic":t.fontStyle="";var i=[];(this.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&i.push("underline"),(this.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&i.push("line-through"),t.textDecoration=i.join(" "),this.align==mxConstants$1.ALIGN_CENTER?t.textAlign="center":this.align==mxConstants$1.ALIGN_RIGHT?t.textAlign="right":t.textAlign="left"}updateSize(e,t){var i=Math.max(0,Math.round(this.bounds.width/this.scale)),n=Math.max(0,Math.round(this.bounds.height/this.scale)),s=e.style;if(this.clipped?(s.overflow="hidden",mxClient.IS_QUIRKS?s.width=i+"px":(s.maxHeight=n+"px",s.maxWidth=i+"px")):this.overflow=="fill"?(s.width=i+1+"px",s.height=n+1+"px",s.overflow="hidden"):this.overflow=="width"&&(s.width=i+1+"px",s.maxHeight=n+1+"px",s.overflow="hidden"),this.wrap&&i>0){if(s.wordWrap=mxConstants$1.WORD_WRAP,s.whiteSpace="normal",s.width=i+"px",t&&this.overflow!="fill"&&this.overflow!="width"){var l=e;l.firstChild!=null&&l.firstChild.nodeName=="DIV"&&(l=l.firstChild,e.style.wordWrap=="break-word"&&(l.style.width="100%"));var a=l.offsetWidth;if(a==0){var o=e.parentNode;e.style.visibility="hidden",document.body.appendChild(e),a=l.offsetWidth,e.style.visibility="",o.appendChild(e)}a+=3,this.clipped&&(a=Math.min(a,i)),s.width=a+"px"}}else s.whiteSpace="nowrap"}updateMargin(){this.margin=mxUtils$1.getAlignmentAsPoint(this.align,this.valign)}getSpacing(){var e=0,t=0;return this.align==mxConstants$1.ALIGN_CENTER?e=(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants$1.ALIGN_RIGHT?e=-this.spacingRight-Yt.baseSpacingRight:e=this.spacingLeft+Yt.baseSpacingLeft,this.valign==mxConstants$1.ALIGN_MIDDLE?t=(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants$1.ALIGN_BOTTOM?t=-this.spacingBottom-Yt.baseSpacingBottom:t=this.spacingTop+Yt.baseSpacingTop,new mxPoint(e,t)}};u(at,"baseSpacingTop",0),u(at,"baseSpacingBottom",0),u(at,"baseSpacingLeft",0),u(at,"baseSpacingRight",0);let mxText=at;class mxRectangleShape extends mxShape{constructor(e,t,i,n){super(),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}isHtmlAllowed(){var e=!0;return this.style!=null&&(e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),!this.isRounded&&!this.glass&&this.rotation==0&&(e||this.fill!=null&&this.fill!=mxConstants$1.NONE)}paintBackground(e,t,i,n,s){var l=!0;if(this.style!=null&&(l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),l||this.fill!=null&&this.fill!=mxConstants$1.NONE||this.stroke!=null&&this.stroke!=mxConstants$1.NONE){if(!l&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(e.pointerEvents=!1),this.isRounded){var a=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")a=Math.min(n/2,Math.min(s/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;a=Math.min(n*o,s*o)}e.roundrect(t,i,n,s,a,a)}else e.rect(t,i,n,s);e.fillAndStroke()}}isRoundable(e,t,i,n,s){return!0}paintForeground(e,t,i,n,s){this.glass&&!this.outline&&this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.paintGlassEffect(e,t,i,n,s,this.getArcSize(n+this.strokewidth,s+this.strokewidth))}}class mxImageShape extends mxRectangleShape{constructor(e,t,i,n,s){super(),u(this,"preserveImageAspect",!0),this.bounds=e,this.image=t,this.fill=i,this.stroke=n,this.strokewidth=s??1,this.shadow=!1}getSvgScreenOffset(){return 0}apply(e){super.apply(e),this.fill=null,this.stroke=null,this.gradient=null,this.style!=null&&(this.preserveImageAspect=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_ASPECT,1)==1,this.flipH=this.flipH||mxUtils$1.getValue(this.style,"imageFlipH",0)==1,this.flipV=this.flipV||mxUtils$1.getValue(this.style,"imageFlipV",0)==1)}isHtmlAllowed(){return!this.preserveImageAspect}createHtml(){var e=document.createElement("div");return e.style.position="absolute",e}isRoundable(e,t,i,n,s){return!1}paintVertexShape(e,t,i,n,s){if(this.image!=null){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BACKGROUND,null),a=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,null);l!=null&&(e.setFillColor(l),e.setStrokeColor(a),e.rect(t,i,n,s),e.fillAndStroke()),e.image(t,i,n,s,this.image,this.preserveImageAspect,!1,!1);var a=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,null);a!=null&&(e.setShadow(!1),e.setStrokeColor(a),e.rect(t,i,n,s),e.stroke())}else super.paintBackground(e,t,i,n,s)}redrawHtmlShape(){if(this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",this.image!=null){var e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BACKGROUND,""),t=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=e,this.node.style.borderColor=t;var i=this.rotation!=0,n=document.createElement(i?mxClient.VML_PREFIX+":image":"img");n.setAttribute("border","0"),n.style.position="absolute",n.src=this.image;var s=this.opacity<100?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=s,this.flipH&&this.flipV?s+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?s+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(s+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),n.style.filter!=s&&(n.style.filter=s),n.nodeName=="image"?n.style.rotation=this.rotation:this.rotation!=0?mxUtils$1.setPrefixedStyle(n.style,"transform","rotate("+this.rotation+"deg)"):mxUtils$1.setPrefixedStyle(n.style,"transform",""),n.style.width=this.node.style.width,n.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(n)}else this.setTransparentBackgroundImage(this.node)}}const Tt=class Qt{static addMarker(e,t){Qt.markers[e]=t}static createMarker(e,t,i,n,s,l,a,o,h,d){var m=Qt.markers[i];return m!=null?m(e,t,i,n,s,l,a,o,h,d):null}};u(Tt,"markers",[]);let mxMarker=Tt;function diamond(r,e,t,i,n,s,l,a,o,h){var d=t==mxConstants$1.ARROW_DIAMOND?.7071:.9862,m=n*o*d,g=s*o*d;n=n*(l+o),s=s*(l+o);var c=i.clone();c.x-=m,c.y-=g,i.x+=-n-m,i.y+=-s-g;var f=t==mxConstants$1.ARROW_DIAMOND?2:3.4;return function(){r.begin(),r.moveTo(c.x,c.y),r.lineTo(c.x-n/2-s/f,c.y+n/f-s/2),r.lineTo(c.x-n,c.y-s),r.lineTo(c.x-n/2+s/f,c.y-s/2-n/f),r.close(),h?r.fillAndStroke():r.stroke()}}function createOpenArrow(r){return r=r??2,function(e,t,i,n,s,l,a,o,h,d){var m=s*h*1.118,g=l*h*1.118;s=s*(a+h),l=l*(a+h);var c=n.clone();return c.x-=m,c.y-=g,n.x+=-m*2,n.y+=-g*2,function(){e.begin(),e.moveTo(c.x-s-l/r,c.y-l+s/r),e.lineTo(c.x,c.y),e.lineTo(c.x+l/r-s,c.y-l-s/r),e.stroke()}}}function createArrow(r){return r=r??2,function(e,t,i,n,s,l,a,o,h,d){var m=s*h*1.118,g=l*h*1.118;s=s*(a+h),l=l*(a+h);var c=n.clone();c.x-=m,c.y-=g;var f=i!=mxConstants$1.ARROW_CLASSIC&&i!=mxConstants$1.ARROW_CLASSIC_THIN?1:3/4;return n.x+=-s*f-m,n.y+=-l*f-g,function(){e.begin(),e.moveTo(c.x,c.y),e.lineTo(c.x-s-l/r,c.y-l+s/r),(i==mxConstants$1.ARROW_CLASSIC||i==mxConstants$1.ARROW_CLASSIC_THIN)&&e.lineTo(c.x-s*3/4,c.y-l*3/4),e.lineTo(c.x+l/r-s,c.y-l-s/r),e.close(),d?e.fillAndStroke():e.stroke()}}}function oval(r,e,t,i,n,s,l,a,o,h){var d=l/2,m=i.clone();return i.x-=n*d,i.y-=s*d,function(){r.ellipse(m.x-d,m.y-d,l,l),h?r.fillAndStroke():r.stroke()}}class mxConnector extends mxPolyline{constructor(e,t,i){super(e,t,i)}updateBoundingBox(){this.useSvgBoundingBox=this.style!=null&&this.style[mxConstants$1.STYLE_CURVED]==1,super.updateBoundingBox()}paintEdgeShape(e,t){var i=this.createMarker(e,t,!0),n=this.createMarker(e,t,!1);super.paintEdgeShape(e,t),e.setFillColor(this.stroke),e.setShadow(!1),e.setDashed(!1),i?.(),n?.()}createMarker(e,t,i){var n=null,s=t.length,l=mxUtils$1.getValue(this.style,i?mxConstants$1.STYLE_STARTARROW:mxConstants$1.STYLE_ENDARROW),a=i?t[1]:t[s-2],o=i?t[0]:t[s-1];if(l!=null&&a!=null&&o!=null){for(var h=1;h<s-1&&Math.round(a.x-o.x)==0&&Math.round(a.y-o.y)==0;)a=i?t[1+h]:t[s-2-h],h++;var d=o.x-a.x,m=o.y-a.y,g=Math.max(1,Math.sqrt(d*d+m*m)),c=d/g,f=m/g,C=mxUtils$1.getNumber(this.style,i?mxConstants$1.STYLE_STARTSIZE:mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE),v=this.style[i?mxConstants$1.STYLE_STARTFILL:mxConstants$1.STYLE_ENDFILL]!=0;n=mxMarker.createMarker(e,this,l,o,c,f,C,i,this.strokewidth,v)}return n}augmentBoundingBox(e){super.augmentBoundingBox(e);var t=0;mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(t=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_MARKERSIZE)+1),mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(t=Math.max(t,mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE))+1),e.grow(t*this.scale)}}const wt=class qt{constructor(){u(this,"defaultEdgeShape",mxConnector),u(this,"defaultVertexShape",mxRectangleShape),u(this,"defaultTextShape",mxText),u(this,"legacyControlPosition",!0),u(this,"legacySpacing",!0),u(this,"antiAlias",!0),u(this,"minSvgStrokeWidth",1),u(this,"forceControlClickHandler",!1)}static registerShape(e,t){qt.defaultShapes[e]=t}initializeShape(e){e.shape.dialect=e.view.graph.dialect,this.configureShape(e),e.shape.init(e.view.getDrawPane())}createShape(e){var t=null;if(e.style!=null){var i=mxStencilRegistry.getStencil(e.style[mxConstants$1.STYLE_SHAPE]);if(i!=null)t=new mxShape(i);else{var n=this.getShapeConstructor(e);t=new n}}return t}createIndicatorShape(e){e.shape.indicatorShape=this.getShape(e.view.graph.getIndicatorShape(e))}getShape(e){return e!=null?qt.defaultShapes[e]:null}getShapeConstructor(e){var t=this.getShape(e.style[mxConstants$1.STYLE_SHAPE]);return t==null&&(t=e.view.graph.getModel().isEdge(e.cell)?this.defaultEdgeShape:this.defaultVertexShape),t}configureShape(e){e.shape.apply(e),e.shape.image=e.view.graph.getImage(e),e.shape.indicatorColor=e.view.graph.getIndicatorColor(e),e.shape.indicatorStrokeColor=e.style[mxConstants$1.STYLE_INDICATOR_STROKECOLOR],e.shape.indicatorGradientColor=e.view.graph.getIndicatorGradientColor(e),e.shape.indicatorDirection=e.style[mxConstants$1.STYLE_INDICATOR_DIRECTION],e.shape.indicatorImage=e.view.graph.getIndicatorImage(e),this.postConfigureShape(e)}postConfigureShape(e){e.shape!=null&&(this.resolveColor(e,"indicatorGradientColor",mxConstants$1.STYLE_GRADIENTCOLOR),this.resolveColor(e,"indicatorColor",mxConstants$1.STYLE_FILLCOLOR),this.resolveColor(e,"gradient",mxConstants$1.STYLE_GRADIENTCOLOR),this.resolveColor(e,"stroke",mxConstants$1.STYLE_STROKECOLOR),this.resolveColor(e,"fill",mxConstants$1.STYLE_FILLCOLOR))}checkPlaceholderStyles(e){if(e.style!=null){for(var t=["inherit","swimlane","indicated"],i=[mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.STYLE_GRADIENTCOLOR,mxConstants$1.STYLE_FONTCOLOR],n=0;n<i.length;n++)if(mxUtils$1.indexOf(t,e.style[i[n]])>=0)return!0}return!1}resolveColor(e,t,i){var n=i==mxConstants$1.STYLE_FONTCOLOR?e.text:e.shape;if(n!=null){var s=e.view.graph,l=n[t],a=null;if(l=="inherit"?a=s.model.getParent(e.cell):l=="swimlane"?(n[t]=i==mxConstants$1.STYLE_STROKECOLOR||i==mxConstants$1.STYLE_FONTCOLOR?"#000000":"#ffffff",s.model.getTerminal(e.cell,!1)!=null?a=s.model.getTerminal(e.cell,!1):a=e.cell,a=s.getSwimlane(a),i=s.swimlaneIndicatorColorAttribute):l=="indicated"&&e.shape!=null&&(n[t]=e.shape.indicatorColor),a!=null){var o=s.getView().getState(a);if(n[t]=null,o!=null){var h=i==mxConstants$1.STYLE_FONTCOLOR?o.text:o.shape;h!=null&&t!="indicatorColor"?n[t]=h[t]:n[t]=o.style[i]}}}}getLabelValue(e){return e.view.graph.getLabel(e.cell)}createLabel(e,t){var i=e.view.graph;if(i.getModel().isEdge(e.cell),e.style[mxConstants$1.STYLE_FONTSIZE]>0||e.style[mxConstants$1.STYLE_FONTSIZE]==null){var n=i.isHtmlLabel(e.cell)||t!=null&&mxUtils$1.isNode(t);e.text=new this.defaultTextShape(t,new mxRectangle,e.style[mxConstants$1.STYLE_ALIGN]||mxConstants$1.ALIGN_CENTER,i.getVerticalAlign(e),e.style[mxConstants$1.STYLE_FONTCOLOR],e.style[mxConstants$1.STYLE_FONTFAMILY],e.style[mxConstants$1.STYLE_FONTSIZE],e.style[mxConstants$1.STYLE_FONTSTYLE],e.style[mxConstants$1.STYLE_SPACING],e.style[mxConstants$1.STYLE_SPACING_TOP],e.style[mxConstants$1.STYLE_SPACING_RIGHT],e.style[mxConstants$1.STYLE_SPACING_BOTTOM],e.style[mxConstants$1.STYLE_SPACING_LEFT],e.style[mxConstants$1.STYLE_HORIZONTAL],e.style[mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR],e.style[mxConstants$1.STYLE_LABEL_BORDERCOLOR],i.isWrapping(e.cell)&&i.isHtmlLabel(e.cell),i.isLabelClipped(e.cell),e.style[mxConstants$1.STYLE_OVERFLOW],e.style[mxConstants$1.STYLE_LABEL_PADDING],mxUtils$1.getValue(e.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION)),e.text.opacity=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_TEXT_OPACITY,100),e.text.dialect=n?mxConstants$1.DIALECT_STRICTHTML:e.view.graph.dialect,e.text.style=e.style,e.text.state=e,this.initializeLabel(e,e.text);var s=!1,l=function(a){var o=e;if(mxClient.IS_TOUCH||s){var h=mxEvent$1.getClientX(a),d=mxEvent$1.getClientY(a),m=mxUtils$1.convertPoint(i.container,h,d);o=i.view.getState(i.getCellAt(m.x,m.y))}return o};mxEvent$1.addGestureListeners(e.text.node,a=>{this.isLabelEvent(e,a)&&(i.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(a,e)),s=i.dialect!=mxConstants$1.DIALECT_SVG&&mxEvent$1.getSource(a).nodeName=="IMG")},a=>{this.isLabelEvent(e,a)&&i.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(a,l(a)))},a=>{this.isLabelEvent(e,a)&&(i.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(a,l(a))),s=!1)}),i.nativeDblClickEnabled&&mxEvent$1.addListener(e.text.node,"dblclick",a=>{this.isLabelEvent(e,a)&&(i.dblClick(a,e.cell),mxEvent$1.consume(a))})}}initializeLabel(e,t){mxClient.IS_SVG&&mxClient.NO_FO&&t.dialect!=mxConstants$1.DIALECT_SVG?t.init(e.view.graph.container):t.init(e.view.getDrawPane())}createCellOverlays(e){var t=e.view.graph,i=t.getCellOverlays(e.cell),n=null;if(i!=null){n=new mxDictionary;for(var s=0;s<i.length;s++){var l=e.overlays!=null?e.overlays.remove(i[s]):null;if(l==null){var a=new mxImageShape(new mxRectangle,i[s].image.src);a.dialect=e.view.graph.dialect,a.preserveImageAspect=!1,a.overlay=i[s],this.initializeOverlay(e,a),this.installCellOverlayListeners(e,i[s],a),i[s].cursor!=null&&(a.node.style.cursor=i[s].cursor),n.put(i[s],a)}else n.put(i[s],l)}}e.overlays!=null&&e.overlays.visit(function(o,h){h.destroy()}),e.overlays=n}initializeOverlay(e,t){t.init(e.view.getOverlayPane())}installCellOverlayListeners(e,t,i){var n=e.view.graph;mxEvent$1.addListener(i.node,"click",function(s){n.isEditing()&&n.stopEditing(!n.isInvokesStopCellEditing()),t.fireEvent(new mxEventObject$1(mxEvent$1.CLICK,"event",s,"cell",e.cell))}),mxEvent$1.addGestureListeners(i.node,function(s){mxEvent$1.consume(s)},function(s){n.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(s,e))}),mxClient.IS_TOUCH&&mxEvent$1.addListener(i.node,"touchend",function(s){t.fireEvent(new mxEventObject$1(mxEvent$1.CLICK,"event",s,"cell",e.cell))})}createControl(e){var t=e.view.graph,i=t.getFoldingImage(e);if(t.foldingEnabled&&i!=null){if(e.control==null){var n=new mxRectangle(0,0,i.width,i.height);e.control=new mxImageShape(n,i.src),e.control.preserveImageAspect=!1,e.control.dialect=t.dialect,this.initControl(e,e.control,!0,this.createControlClickHandler(e))}}else e.control!=null&&(e.control.destroy(),e.control=null)}createControlClickHandler(e){var t=e.view.graph;return i=>{if(this.forceControlClickHandler||t.isEnabled()){var n=!t.isCellCollapsed(e.cell);t.foldCells(n,!1,[e.cell],null,i),mxEvent$1.consume(i)}}}initControl(e,t,i,n){var s=e.view.graph,l=s.isHtmlLabel(e.cell)&&mxClient.NO_FO&&s.dialect==mxConstants$1.DIALECT_SVG;l?(t.dialect=mxConstants$1.DIALECT_PREFERHTML,t.init(s.container),t.node.style.zIndex=1):t.init(e.view.getOverlayPane());var a=t.innerNode||t.node;if(n!=null&&!mxClient.IS_IOS&&(s.isEnabled()&&(a.style.cursor="pointer"),mxEvent$1.addListener(a,"click",n)),i){var o=null;mxEvent$1.addGestureListeners(a,function(h){o=new mxPoint(mxEvent$1.getClientX(h),mxEvent$1.getClientY(h)),s.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(h,e)),mxEvent$1.consume(h)},function(h){s.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(h,e))},function(h){s.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(h,e)),mxEvent$1.consume(h)}),n!=null&&mxClient.IS_IOS&&a.addEventListener("touchend",function(h){if(o!=null){var d=s.tolerance;Math.abs(o.x-mxEvent$1.getClientX(h))<d&&Math.abs(o.y-mxEvent$1.getClientY(h))<d&&(n.call(n,h),mxEvent$1.consume(h))}},!0)}return a}isShapeEvent(e,t){return!0}isLabelEvent(e,t){return!0}installListeners(e){var t=e.view.graph,i=function(n){var s=e;if(t.dialect!=mxConstants$1.DIALECT_SVG&&mxEvent$1.getSource(n).nodeName=="IMG"||mxClient.IS_TOUCH){var l=mxEvent$1.getClientX(n),a=mxEvent$1.getClientY(n),o=mxUtils$1.convertPoint(t.container,l,a);s=t.view.getState(t.getCellAt(o.x,o.y))}return s};mxEvent$1.addGestureListeners(e.shape.node,n=>{this.isShapeEvent(e,n)&&t.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(n,e))},n=>{this.isShapeEvent(e,n)&&t.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(n,i(n)))},n=>{this.isShapeEvent(e,n)&&t.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(n,i(n)))}),t.nativeDblClickEnabled&&mxEvent$1.addListener(e.shape.node,"dblclick",n=>{this.isShapeEvent(e,n)&&(t.dblClick(n,e.cell),mxEvent$1.consume(n))})}redrawLabel(e,t){var i=e.view.graph,n=this.getLabelValue(e),s=i.isWrapping(e.cell),l=i.isLabelClipped(e.cell),a=e.view.graph.isHtmlLabel(e.cell)||n!=null&&mxUtils$1.isNode(n),o=a?mxConstants$1.DIALECT_STRICTHTML:e.view.graph.dialect,h=e.style[mxConstants$1.STYLE_OVERFLOW]||"visible";if(e.text!=null&&(e.text.wrap!=s||e.text.clipped!=l||e.text.overflow!=h||e.text.dialect!=o)&&(e.text.destroy(),e.text=null),e.text==null&&n!=null&&(mxUtils$1.isNode(n)||n.length>0)?this.createLabel(e,n):e.text!=null&&(n==null||n.length==0)&&(e.text.destroy(),e.text=null),e.text!=null){t&&(e.text.lastValue!=null&&this.isTextShapeInvalid(e,e.text)&&(e.text.lastValue=null),e.text.resetStyles(),e.text.apply(e),e.text.valign=i.getVerticalAlign(e));var d=this.getLabelBounds(e),m=this.getTextScale(e);if(this.resolveColor(e,"color",mxConstants$1.STYLE_FONTCOLOR),t||e.text.value!=n||e.text.isWrapping!=s||e.text.overflow!=h||e.text.isClipping!=l||e.text.scale!=m||e.text.dialect!=o||e.text.bounds==null||!e.text.bounds.equals(d)){e.text.dialect=o,e.text.value=n,e.text.bounds=d,e.text.scale=m,e.text.wrap=s,e.text.clipped=l,e.text.overflow=h;var g=e.text.node.style.visibility;this.redrawLabelShape(e.text),e.text.node.style.visibility=g}}}isTextShapeInvalid(e,t){function i(n,s,l){var a=!1;return s=="spacingTop"||s=="spacingRight"||s=="spacingBottom"||s=="spacingLeft"?a=parseFloat(t[n])-parseFloat(t.spacing)!=(e.style[s]||l):a=t[n]!=(e.style[s]||l),a}return i("fontStyle",mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.DEFAULT_FONTSTYLE)||i("family",mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY)||i("size",mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE)||i("color",mxConstants$1.STYLE_FONTCOLOR,"black")||i("align",mxConstants$1.STYLE_ALIGN,"")||i("valign",mxConstants$1.STYLE_VERTICAL_ALIGN,"")||i("spacing",mxConstants$1.STYLE_SPACING,2)||i("spacingTop",mxConstants$1.STYLE_SPACING_TOP,0)||i("spacingRight",mxConstants$1.STYLE_SPACING_RIGHT,0)||i("spacingBottom",mxConstants$1.STYLE_SPACING_BOTTOM,0)||i("spacingLeft",mxConstants$1.STYLE_SPACING_LEFT,0)||i("horizontal",mxConstants$1.STYLE_HORIZONTAL,!0)||i("background",mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR)||i("border",mxConstants$1.STYLE_LABEL_BORDERCOLOR)||i("opacity",mxConstants$1.STYLE_TEXT_OPACITY,100)||i("textDirection",mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION)}redrawLabelShape(e){e.redraw()}getTextScale(e){return e.view.scale}getLabelBounds(e){var t=e.view.graph,i=e.view.scale,n=t.getModel().isEdge(e.cell),s=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y);if(n){var l=e.text.getSpacing();s.x+=l.x*i,s.y+=l.y*i;var a=t.getCellGeometry(e.cell);a!=null&&(s.width=Math.max(0,a.width*i),s.height=Math.max(0,a.height*i))}else{if(e.text.isPaintBoundsInverted()){var o=s.x;s.x=s.y,s.y=o}s.x+=e.x,s.y+=e.y,s.width=Math.max(1,e.width),s.height=Math.max(1,e.height)}if(e.text.isPaintBoundsInverted()){var h=(e.width-e.height)/2;s.x+=h,s.y-=h;var o=s.width;s.width=s.height,s.height=o}if(e.shape!=null){var d=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),m=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);d==mxConstants$1.ALIGN_CENTER&&m==mxConstants$1.ALIGN_MIDDLE&&(s=e.shape.getLabelBounds(s))}var g=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_WIDTH,null);return g!=null&&(s.width=parseFloat(g)*i),n||this.rotateLabelBounds(e,s),s}rotateLabelBounds(e,t){if(t.y-=e.text.margin.y*t.height,t.x-=e.text.margin.x*t.width,!this.legacySpacing||e.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&e.style[mxConstants$1.STYLE_OVERFLOW]!="width"){var i=e.view.scale,n=e.text.getSpacing();t.x+=n.x*i,t.y+=n.y*i;var s=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),l=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE),a=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_WIDTH,null);t.width=Math.max(0,t.width-(s==mxConstants$1.ALIGN_CENTER&&a==null?e.text.spacingLeft*i+e.text.spacingRight*i:0)),t.height=Math.max(0,t.height-(l==mxConstants$1.ALIGN_MIDDLE?e.text.spacingTop*i+e.text.spacingBottom*i:0))}var o=e.text.getTextRotation();if(o!=0&&e!=null&&e.view.graph.model.isVertex(e.cell)){var h=e.getCenterX(),d=e.getCenterY();if(t.x!=h||t.y!=d){var m=o*(Math.PI/180),g=mxUtils$1.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(m),Math.sin(m),new mxPoint(h,d));t.x=g.x,t.y=g.y}}}redrawCellOverlays(e,t){if(this.createCellOverlays(e),e.overlays!=null){var i=mxUtils$1.mod(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROTATION,0),90),n=mxUtils$1.toRadians(i),s=Math.cos(n),l=Math.sin(n);e.overlays.visit(function(a,o){var h=o.overlay.getBounds(e);if(!e.view.graph.getModel().isEdge(e.cell)&&e.shape!=null&&i!=0){var d=h.getCenterX(),m=h.getCenterY(),g=mxUtils$1.getRotatedPoint(new mxPoint(d,m),s,l,new mxPoint(e.getCenterX(),e.getCenterY()));d=g.x,m=g.y,h.x=Math.round(d-h.width/2),h.y=Math.round(m-h.height/2)}(t||o.bounds==null||o.scale!=e.view.scale||!o.bounds.equals(h))&&(o.bounds=h,o.scale=e.view.scale,o.redraw())})}}redrawControl(e,t){var i=e.view.graph.getFoldingImage(e);if(e.control!=null&&i!=null){var n=this.getControlBounds(e,i.width,i.height),s=this.legacyControlPosition?mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROTATION,0):e.shape.getTextRotation(),l=e.view.scale;(t||e.control.scale!=l||!e.control.bounds.equals(n)||e.control.rotation!=s)&&(e.control.rotation=s,e.control.bounds=n,e.control.scale=l,e.control.redraw())}}getControlBounds(e,t,i){if(e.control!=null){var n=e.view.scale,s=e.getCenterX(),l=e.getCenterY();if(!e.view.graph.getModel().isEdge(e.cell)&&(s=e.x+t*n,l=e.y+i*n,e.shape!=null)){var a=e.shape.getShapeRotation();if(this.legacyControlPosition)a=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROTATION,0);else if(e.shape.isPaintBoundsInverted()){var o=(e.width-e.height)/2;s+=o,l-=o}if(a!=0){var h=mxUtils$1.toRadians(a),d=Math.cos(h),m=Math.sin(h),g=mxUtils$1.getRotatedPoint(new mxPoint(s,l),d,m,new mxPoint(e.getCenterX(),e.getCenterY()));s=g.x,l=g.y}}return e.view.graph.getModel().isEdge(e.cell)?new mxRectangle(Math.round(s-t/2*n),Math.round(l-i/2*n),Math.round(t*n),Math.round(i*n)):new mxRectangle(Math.round(s-t/2*n),Math.round(l-i/2*n),Math.round(t*n),Math.round(i*n))}return null}insertStateAfter(e,t,i){for(var n=this.getShapesForState(e),s=0;s<n.length;s++)if(n[s]!=null&&n[s].node!=null){var l=n[s].node.parentNode!=e.view.getDrawPane()&&n[s].node.parentNode!=e.view.getOverlayPane(),a=l?i:t;if(a!=null&&a.nextSibling!=n[s].node)a.nextSibling==null?a.parentNode.appendChild(n[s].node):a.parentNode.insertBefore(n[s].node,a.nextSibling);else if(a==null)if(n[s].node.parentNode==e.view.graph.container){for(var o=e.view.canvas;o!=null&&o.parentNode!=e.view.graph.container;)o=o.parentNode;o!=null&&o.nextSibling!=null?o.nextSibling!=n[s].node&&n[s].node.parentNode.insertBefore(n[s].node,o.nextSibling):n[s].node.parentNode.appendChild(n[s].node)}else n[s].node.parentNode!=null&&n[s].node.parentNode.firstChild!=null&&n[s].node.parentNode.firstChild!=n[s].node&&n[s].node.parentNode.insertBefore(n[s].node,n[s].node.parentNode.firstChild);l?i=n[s].node:t=n[s].node}return[t,i]}getShapesForState(e){return[e.shape,e.text,e.control]}redraw(e,t,i){var n=this.redrawShape(e,t,i);e.shape!=null&&(i==null||i)&&(this.redrawLabel(e,n),this.redrawCellOverlays(e,n),this.redrawControl(e,n))}redrawShape(e,t,i){var n=e.view.graph.model,s=!1;return e.shape!=null&&e.shape.style!=null&&e.style!=null&&e.shape.style[mxConstants$1.STYLE_SHAPE]!=e.style[mxConstants$1.STYLE_SHAPE]&&(e.shape.destroy(),e.shape=null),e.shape==null&&e.view.graph.container!=null&&e.cell!=e.view.currentRoot&&(n.isVertex(e.cell)||n.isEdge(e.cell))?(e.shape=this.createShape(e),e.shape!=null&&(e.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,e.shape.antiAlias=this.antiAlias,this.createIndicatorShape(e),this.initializeShape(e),this.createCellOverlays(e),this.installListeners(e),e.view.graph.selectionCellsHandler.updateHandler(e))):!t&&e.shape!=null&&(!mxUtils$1.equalEntries(e.shape.style,e.style)||this.checkPlaceholderStyles(e))&&(e.shape.resetStyles(),this.configureShape(e),e.view.graph.selectionCellsHandler.updateHandler(e),t=!0),e.shape!=null&&e.shape.indicatorShape!=this.getShape(e.view.graph.getIndicatorShape(e))&&(e.shape.indicator!=null&&(e.shape.indicator.destroy(),e.shape.indicator=null),this.createIndicatorShape(e),e.shape.indicatorShape!=null&&(e.shape.indicator=new e.shape.indicatorShape,e.shape.indicator.dialect=e.shape.dialect,e.shape.indicator.init(e.node),t=!0)),e.shape!=null&&(this.createControl(e),(t||this.isShapeInvalid(e,e.shape))&&(e.absolutePoints!=null?(e.shape.points=e.absolutePoints.slice(),e.shape.bounds=null):(e.shape.points=null,e.shape.bounds=new mxRectangle(e.x,e.y,e.width,e.height)),e.shape.scale=e.view.scale,i==null||i?this.doRedrawShape(e):e.shape.updateBoundingBox(),s=!0)),s}doRedrawShape(e){e.shape.redraw()}isShapeInvalid(e,t){return t.bounds==null||t.scale!=e.view.scale||e.absolutePoints==null&&!t.bounds.equals(e)||e.absolutePoints!=null&&!mxUtils$1.equalPoints(t.points,e.absolutePoints)}destroy(e){e.shape!=null&&(e.text!=null&&(e.text.destroy(),e.text=null),e.overlays!=null&&(e.overlays.visit(function(t,i){i.destroy()}),e.overlays=null),e.control!=null&&(e.control.destroy(),e.control=null),e.shape.destroy(),e.shape=null)}};u(wt,"defaultShapes",new Object);let mxCellRenderer=wt;class mxChildChangeCodec extends mxObjectCodec{constructor(){super(new mxChildChange,["model","child","previousIndex"],["parent","previous"])}isReference(e,t,i,n){return t=="child"&&(!n||e.model.contains(e.previous))?!0:mxUtils$1.indexOf(this.idrefs,t)>=0}isExcluded(e,t,i,n){return super.isExcluded(e,t,i,n)||n&&i!=null&&(t=="previous"||t=="parent")&&!e.model.contains(i)}afterEncode(e,t,i){return this.isReference(t,"child",t.child,!0)?i.setAttribute("child",e.getId(t.child)):e.encodeCell(t.child,i),i}beforeDecode(e,t,i){if(t.firstChild!=null&&t.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT){t=t.cloneNode(!0);var n=t.firstChild;i.child=e.decodeCell(n,!1);var s=n.nextSibling;for(n.parentNode.removeChild(n),n=s;n!=null;){if(s=n.nextSibling,n.nodeType==mxConstants$1.NODETYPE_ELEMENT){var l=n.getAttribute("id");e.lookup(l)==null&&e.decodeCell(n)}n.parentNode.removeChild(n),n=s}}else{var a=t.getAttribute("child");i.child=e.getObject(a)}return t}afterDecode(e,t,i){return i.child!=null&&(i.child.parent!=null&&i.previous!=null&&i.child.parent!=i.previous&&(i.previous=i.child.parent),i.child.parent=i.previous,i.previous=i.parent,i.previousIndex=i.index),i}}class mxCellCodec extends mxObjectCodec{constructor(){super(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"])}isCellCodec(){return!0}isNumericAttribute(e,t,i){return t.nodeName!=="value"&&super.isNumericAttribute(e,t,i)}isExcluded(e,t,i,n){return super.isExcluded(e,t,i,n)||n&&t=="value"&&i.nodeType==mxConstants$1.NODETYPE_ELEMENT}afterEncode(e,t,i){if(t.value!=null&&t.value.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=i;i=mxUtils$1.importNode(e.document,t.value,!0),i.appendChild(n);var s=n.getAttribute("id");i.setAttribute("id",s),n.removeAttribute("id")}return i}beforeDecode(e,t,i){var n=t.cloneNode(!0),s=this.getName();if(t.nodeName!=s){var l=t.getElementsByTagName(s)[0];l!=null&&l.parentNode==t?(mxUtils$1.removeWhitespace(l,!0),mxUtils$1.removeWhitespace(l,!1),l.parentNode.removeChild(l),n=l):n=null,i.value=t.cloneNode(!0);var a=i.value.getAttribute("id");a!=null&&(i.setId(a),i.value.removeAttribute("id"))}else i.setId(t.getAttribute("id"));if(n!=null)for(var o=0;o<this.idrefs.length;o++){var h=this.idrefs[o],d=n.getAttribute(h);if(d!=null){n.removeAttribute(h);var m=e.objects[d]||e.lookup(d);if(m==null){var g=e.getElementById(d);if(g!=null){var c=mxCodecRegistry.codecs[g.nodeName]||this;m=c.decode(e,g)}}i[h]=m}}return n}}class mxKeyHandler{constructor(e,t){u(this,"graph",null),u(this,"target",null),u(this,"normalKeys",null),u(this,"shiftKeys",null),u(this,"controlKeys",null),u(this,"controlShiftKeys",null),u(this,"enabled",!0),e!=null&&(this.graph=e,this.target=t||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=i=>{this.keyDown(i)},mxEvent$1.addListener(this.target,"keydown",this.keydownHandler))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}bindKey(e,t){this.normalKeys[e]=t}bindShiftKey(e,t){this.shiftKeys[e]=t}bindControlKey(e,t){this.controlKeys[e]=t}bindControlShiftKey(e,t){this.controlShiftKeys[e]=t}isControlDown(e){return mxEvent$1.isControlDown(e)}getFunction(e){return e!=null&&!mxEvent$1.isAltDown(e)?this.isControlDown(e)?mxEvent$1.isShiftDown(e)?this.controlShiftKeys[e.keyCode]:this.controlKeys[e.keyCode]:mxEvent$1.isShiftDown(e)?this.shiftKeys[e.keyCode]:this.normalKeys[e.keyCode]:null}isGraphEvent(e){var t=mxEvent$1.getSource(e);return t==this.target||t.parentNode==this.target||this.graph.cellEditor!=null&&this.graph.cellEditor.isEventSource(e)?!0:mxUtils$1.isAncestorNode(this.graph.container,t)}keyDown(e){if(this.isEnabledForEvent(e)){if(e.keyCode==27)this.escape(e);else if(!this.isEventIgnored(e)){var t=this.getFunction(e);t!=null&&(t(e),mxEvent$1.consume(e))}}}isEnabledForEvent(e){return this.graph.isEnabled()&&!mxEvent$1.isConsumed(e)&&this.isGraphEvent(e)&&this.isEnabled()}isEventIgnored(e){return this.graph.isEditing()}escape(e){this.graph.isEscapeEnabled()&&this.graph.escape(e)}destroy(){this.target!=null&&this.keydownHandler!=null&&(mxEvent$1.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null}}class mxDefaultKeyHandler{constructor(e){if(u(this,"editor",null),u(this,"handler",null),e!=null){this.editor=e,this.handler=new mxKeyHandler(e.graph);var t=this.handler.escape;this.handler.escape=function(i){t.apply(this,arguments),e.hideProperties(),e.fireEvent(new mxEventObject$1(mxEvent$1.ESCAPE,"event",i))}}}bindAction(e,t,i){var n=()=>{this.editor.execute(t)};i?this.handler.bindControlKey(e,n):this.handler.bindKey(e,n)}destroy(){this.handler.destroy(),this.handler=null}}class mxDefaultKeyHandlerCodec extends mxObjectCodec{constructor(){super(new mxDefaultKeyHandler)}encode(e,t){return null}decode(e,t,i){if(i!=null)for(i.editor,t=t.firstChild;t!=null;){if(!this.processInclude(e,t,i)&&t.nodeName=="add"){var n=t.getAttribute("as"),s=t.getAttribute("action"),l=t.getAttribute("control");i.bindAction(n,s,l)}t=t.nextSibling}return i}}class mxDefaultPopupMenu{constructor(e){u(this,"imageBasePath",null),this.config=e}createMenu(e,t,i,n){if(this.config!=null){var s=this.createConditions(e,i,n),l=this.config.firstChild;this.addItems(e,t,i,n,s,l,null)}}addItems(e,t,i,n,s,l,a){for(var o=!1;l!=null;){if(l.nodeName=="add"){var h=l.getAttribute("if");if(h==null||s[h]){var d=l.getAttribute("as");d=mxResources$1.get(d)||d;var m=mxUtils$1.eval(mxUtils$1.getTextContent(l)),g=l.getAttribute("action"),c=l.getAttribute("icon"),f=l.getAttribute("iconCls"),C=l.getAttribute("enabled-if"),v=C==null||s[C];o&&(t.addSeparator(a),o=!1),c!=null&&this.imageBasePath&&(c=this.imageBasePath+c);var w=this.addAction(t,e,d,c,m,g,i,a,f,v);this.addItems(e,t,i,n,s,l.firstChild,w)}}else l.nodeName=="separator"&&(o=!0);l=l.nextSibling}}addAction(e,t,i,n,s,l,a,o,h,d){var m=function(g){typeof s=="function"&&s.call(t,t,a,g),l!=null&&t.execute(l,a,g)};return e.addItem(i,n,m,o,h,d)}createConditions(e,t,i){var n=e.graph.getModel(),s=n.getChildCount(t),l=[];l.nocell=t==null,l.ncells=e.graph.getSelectionCount()>1,l.notRoot=n.getRoot()!=n.getParent(e.graph.getDefaultParent()),l.cell=t!=null;var a=t!=null&&e.graph.getSelectionCount()==1;l.nonEmpty=a&&s>0,l.expandable=a&&e.graph.isCellFoldable(t,!1),l.collapsable=a&&e.graph.isCellFoldable(t,!0),l.validRoot=a&&e.graph.isValidRoot(t),l.emptyValidRoot=l.validRoot&&s==0,l.swimlane=a&&e.graph.isSwimlane(t);for(var o=this.config.getElementsByTagName("condition"),h=0;h<o.length;h++){var d=mxUtils$1.eval(mxUtils$1.getTextContent(o[h])),m=o[h].getAttribute("name");m!=null&&typeof d=="function"&&(l[m]=d(e,t,i))}return l}}class mxDefaultPopupMenuCodec extends mxObjectCodec{constructor(){super(new mxDefaultPopupMenu)}encode(e,t){return null}decode(e,t,i){var n=t.getElementsByTagName("include")[0];return n!=null?this.processInclude(e,n,i):i!=null&&(i.config=t),i}}class mxPopupMenu extends mxEventSource{constructor(e){super(),u(this,"submenuImage",mxClient.imageBasePath+"/submenu.gif"),u(this,"zIndex",10006),u(this,"useLeftButtonForPopup",!1),u(this,"enabled",!0),u(this,"itemCount",0),u(this,"autoExpand",!1),u(this,"smartSeparators",!1),u(this,"labels",!0),this.factoryMethod=e,e!=null&&this.init()}init(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent$1.disableContextMenu(this.div)}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isPopupTrigger(e){return e.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent$1.isLeftMouseButton(e.getEvent())}addItem(e,t,i,n,s,l,a,o){n=n||this,this.itemCount++,n.willAddSeparator&&(n.containsItems&&this.addSeparator(n,!0),n.willAddSeparator=!1),n.containsItems=!0;var h=document.createElement("tr");h.className="mxPopupMenuItem";var d=document.createElement("td");if(d.className="mxPopupMenuIcon",t!=null){var m=document.createElement("img");m.src=t,d.appendChild(m)}else if(s!=null){var g=document.createElement("div");g.className=s,d.appendChild(g)}if(h.appendChild(d),this.labels){var c=document.createElement("td");c.className="mxPopupMenuItem"+(l!=null&&!l?" mxDisabled":""),mxUtils$1.write(c,e),c.align="left",h.appendChild(c);var f=document.createElement("td");f.className="mxPopupMenuItem"+(l!=null&&!l?" mxDisabled":""),f.style.paddingRight="6px",f.style.textAlign="right",h.appendChild(f),n.div==null&&this.createSubmenu(n)}if(n.tbody.appendChild(h),a!=!1&&l!=!1){var C=null;mxEvent$1.addGestureListeners(h,v=>{this.eventReceiver=h,n.activeRow!=h&&n.activeRow!=n&&(n.activeRow!=null&&n.activeRow.div.parentNode!=null&&this.hideSubmenu(n),h.div!=null&&(this.showSubmenu(n,h),n.activeRow=h)),document.selection!=null&&(mxClient.IS_QUIRKS||document.documentMode==8)&&(C=document.selection.createRange()),mxEvent$1.consume(v)},v=>{n.activeRow!=h&&n.activeRow!=n&&(n.activeRow!=null&&n.activeRow.div.parentNode!=null&&this.hideSubmenu(n),this.autoExpand&&h.div!=null&&(this.showSubmenu(n,h),n.activeRow=h)),o||(h.className="mxPopupMenuItemHover")},v=>{if(this.eventReceiver==h){if(n.activeRow!=h&&this.hideMenu(),C!=null){try{C.select()}catch{}C=null}i?.(v)}this.eventReceiver=null,mxEvent$1.consume(v)}),o||mxEvent$1.addListener(h,"mouseout",v=>{h.className="mxPopupMenuItem"})}return h}addCheckmark(e,t){var i=e.firstChild.nextSibling;i.style.backgroundImage="url('"+t+"')",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="2px 50%"}createSubmenu(e){e.table=document.createElement("table"),e.table.className="mxPopupMenu",e.tbody=document.createElement("tbody"),e.table.appendChild(e.tbody),e.div=document.createElement("div"),e.div.className="mxPopupMenu",e.div.style.position="absolute",e.div.style.display="inline",e.div.style.zIndex=this.zIndex,e.div.appendChild(e.table);var t=document.createElement("img");t.setAttribute("src",this.submenuImage);var i=e.firstChild.nextSibling.nextSibling;i.appendChild(t)}showSubmenu(e,t){if(t.div!=null){t.div.style.left=e.div.offsetLeft+t.offsetLeft+t.offsetWidth-1+"px",t.div.style.top=e.div.offsetTop+t.offsetTop+"px",document.body.appendChild(t.div);var i=parseInt(t.div.offsetLeft),n=parseInt(t.div.offsetWidth),s=mxUtils$1.getDocumentScrollOrigin(document),l=document.body,a=document.documentElement,o=s.x+(l.clientWidth||a.clientWidth);i+n>o&&(t.div.style.left=Math.max(0,e.div.offsetLeft-n+-6)+"px"),mxUtils$1.fit(t.div)}}addSeparator(e,t){if(e=e||this,this.smartSeparators&&!t)e.willAddSeparator=!0;else if(e.tbody!=null){e.willAddSeparator=!1;var i=document.createElement("tr"),n=document.createElement("td");n.className="mxPopupMenuIcon",n.style.padding="0 0 0 0px",i.appendChild(n);var s=document.createElement("td");s.style.padding="0 0 0 0px",s.setAttribute("colSpan","2");var l=document.createElement("hr");l.setAttribute("size","1"),s.appendChild(l),i.appendChild(s),e.tbody.appendChild(i)}}popup(e,t,i,n){if(this.div!=null&&this.tbody!=null&&this.factoryMethod!=null){for(this.div.style.left=e+"px",this.div.style.top=t+"px";this.tbody.firstChild!=null;)mxEvent$1.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,i,n),this.itemCount>0&&(this.showMenu(),this.fireEvent(new mxEventObject$1(mxEvent$1.SHOW)))}}isMenuShowing(){return this.div!=null&&this.div.parentNode==document.body}showMenu(){document.documentMode>=9&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils$1.fit(this.div)}hideMenu(){this.div!=null&&(this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject$1(mxEvent$1.HIDE)))}hideSubmenu(e){e.activeRow!=null&&(this.hideSubmenu(e.activeRow),e.activeRow.div.parentNode!=null&&e.activeRow.div.parentNode.removeChild(e.activeRow.div),e.activeRow=null)}destroy(){this.div!=null&&(mxEvent$1.release(this.div),this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.div=null)}}class mxToolbar extends mxEventSource{constructor(e){super(),u(this,"enabled",!0),u(this,"noReset",!1),u(this,"updateDefaultMode",!0),this.container=e}addItem(e,t,i,n,s,l){var a=document.createElement(t!=null?"img":"button"),o=s||(l!=null?"mxToolbarMode":"mxToolbarItem");a.className=o,a.setAttribute("src",t),e!=null&&(t!=null?a.setAttribute("title",e):mxUtils$1.write(a,e)),this.container.appendChild(a),i!=null&&(mxEvent$1.addListener(a,"click",i),mxClient.IS_TOUCH&&mxEvent$1.addListener(a,"touchend",i));var h=d=>{n!=null?a.setAttribute("src",t):a.style.backgroundColor=""};return mxEvent$1.addGestureListeners(a,d=>{if(n!=null?a.setAttribute("src",n):a.style.backgroundColor="gray",l!=null){this.menu==null&&(this.menu=new mxPopupMenu,this.menu.init());var m=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),m!=a){this.currentImg=a,this.menu.factoryMethod=l;var g=new mxPoint(a.offsetLeft,a.offsetTop+a.offsetHeight);this.menu.popup(g.x,g.y,null,d),this.menu.isMenuShowing()&&(a.className=o+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),a.className=o,this.currentImg=null})}}},null,h),mxEvent$1.addListener(a,"mouseout",h),a}addCombo(e){var t=document.createElement("div");t.style.display="inline",t.className="mxToolbarComboContainer";var i=document.createElement("select");return i.className=e||"mxToolbarCombo",t.appendChild(i),this.container.appendChild(t),i}addActionCombo(e,t){var i=document.createElement("select");return i.className=t||"mxToolbarCombo",this.addOption(i,e,null),mxEvent$1.addListener(i,"change",function(n){var s=i.options[i.selectedIndex];i.selectedIndex=0,s.funct!=null&&s.funct(n)}),this.container.appendChild(i),i}addOption(e,t,i){var n=document.createElement("option");return mxUtils$1.writeln(n,t),typeof i=="function"?n.funct=i:n.setAttribute("value",i),e.appendChild(n),n}addSwitchMode(e,t,i,n,s){var l=document.createElement("img");return l.initialClassName=s||"mxToolbarMode",l.className=l.initialClassName,l.setAttribute("src",t),l.altIcon=n,e!=null&&l.setAttribute("title",e),mxEvent$1.addListener(l,"click",a=>{var o=this.selectedMode.altIcon;o!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",o)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=l),this.selectedMode=l;var o=l.altIcon;o!=null?(l.altIcon=l.getAttribute("src"),l.setAttribute("src",o)):l.className=l.initialClassName+"Selected",this.fireEvent(new mxEventObject$1(mxEvent$1.SELECT)),i()}),this.container.appendChild(l),this.defaultMode==null&&(this.defaultMode=l,this.selectMode(l),i()),l}addMode(e,t,i,n,s,l){l=l??!0;var a=document.createElement(t!=null?"img":"button");return a.initialClassName=s||"mxToolbarMode",a.className=a.initialClassName,a.setAttribute("src",t),a.altIcon=n,e!=null&&a.setAttribute("title",e),this.enabled&&l&&(mxEvent$1.addListener(a,"click",o=>{this.selectMode(a,i),this.noReset=!1}),mxEvent$1.addListener(a,"dblclick",o=>{this.selectMode(a,i),this.noReset=!0}),this.defaultMode==null&&(this.defaultMode=a,this.defaultFunction=i,this.selectMode(a,i))),this.container.appendChild(a),a}selectMode(e,t){if(this.selectedMode!=e){if(this.selectedMode!=null){var i=this.selectedMode.altIcon;i!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",i)):this.selectedMode.className=this.selectedMode.initialClassName}this.selectedMode=e;var i=this.selectedMode.altIcon;i!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",i)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject$1(mxEvent$1.SELECT,"function",t))}}resetMode(e){(e||!this.noReset)&&this.selectedMode!=this.defaultMode&&this.selectMode(this.defaultMode,this.defaultFunction)}addSeparator(e){return this.addItem(null,e,null)}addBreak(){mxUtils$1.br(this.container)}addLine(){var e=document.createElement("hr");e.style.marginRight="6px",e.setAttribute("size","1"),this.container.appendChild(e)}destroy(){mxEvent$1.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,this.menu!=null&&this.menu.destroy()}}class mxDefaultToolbar{constructor(e,t){u(this,"toolbar",null),u(this,"resetHandler",null),u(this,"spacing",4),u(this,"connectOnDrop",!1),this.editor=t,e!=null&&t!=null&&this.init(e)}init(e){e!=null&&(this.toolbar=new mxToolbar(e),this.toolbar.addListener(mxEvent$1.SELECT,(t,i)=>{var n=i.getProperty("function");n!=null?this.editor.insertFunction=()=>{n.apply(this,arguments),this.toolbar.resetMode()}:this.editor.insertFunction=null}),this.resetHandler=()=>{this.toolbar!=null&&this.toolbar.resetMode(!0)},this.editor.graph.addListener(mxEvent$1.DOUBLE_CLICK,this.resetHandler),this.editor.addListener(mxEvent$1.ESCAPE,this.resetHandler))}addItem(e,t,i,n){var s=()=>{i!=null&&i.length>0&&this.editor.execute(i)};return this.toolbar.addItem(e,t,s,n)}addSeparator(e){e=e||mxClient.imageBasePath+"/separator.gif",this.toolbar.addSeparator(e)}addCombo(){return this.toolbar.addCombo()}addActionCombo(e){return this.toolbar.addActionCombo(e)}addActionOption(e,t,i){var n=()=>{this.editor.execute(i)};this.addOption(e,t,n)}addOption(e,t,i){return this.toolbar.addOption(e,t,i)}addMode(e,t,i,n,s){var l=()=>{this.editor.setMode(i),s?.(this.editor)};return this.toolbar.addSwitchMode(e,t,l,n)}addPrototype(e,t,i,n,s,l){var a=()=>typeof i=="function"?i():i!=null?this.editor.graph.cloneCell(i):null,o=(m,g)=>{if(typeof s=="function")s(this.editor,a(),m,g);else{let c=a();this.drop(c,m,g)}this.toolbar.resetMode(),mxEvent$1.consume(m)},h=this.toolbar.addMode(e,t,o,n,null,l),d=function(m,g,c){o(g,c)};return this.installDropHandler(h,d),h}drop(e,t,i){var n=this.editor.graph,s=n.getModel();if(i==null||s.isEdge(i)||!this.connectOnDrop||!n.isCellConnectable(i)){for(;i!=null&&!n.isValidDropTarget(i,[e],t);)i=s.getParent(i);this.insert(e,t,i)}else this.connect(e,t,i)}insert(e,t,i){var n=this.editor.graph;if(n.canImportCell(e)){var s=mxEvent$1.getClientX(t),l=mxEvent$1.getClientY(t),a=mxUtils$1.convertPoint(n.container,s,l);return n.isSplitEnabled()&&n.isSplitTarget(i,[e],t)?n.splitEdge(i,[e],null,a.x,a.y):this.editor.addVertex(i,e,a.x,a.y)}return null}connect(e,t,i){var n=this.editor.graph,s=n.getModel();if(i!=null&&n.isCellConnectable(e)&&n.isEdgeValid(null,i,e)){var l=null;s.beginUpdate();try{var a=s.getGeometry(i),o=s.getGeometry(e).clone();o.x=a.x+(a.width-o.width)/2,o.y=a.y+(a.height-o.height)/2;var h=this.spacing*n.gridSize,d=s.getDirectedEdgeCount(i,!0)*20;this.editor.horizontalFlow?o.x+=(o.width+a.width)/2+h+d:o.y+=(o.height+a.height)/2+h+d,e.setGeometry(o);var m=s.getParent(i);if(n.addCell(e,m),n.constrainChild(e),l=this.editor.createEdge(i,e),s.getGeometry(l)==null){var g=new mxGeometry;g.relative=!0,s.setGeometry(l,g)}n.addEdge(l,m,i,e)}finally{s.endUpdate()}n.setSelectionCells([e,l]),n.scrollCellToVisible(e)}}installDropHandler(e,t){var i=document.createElement("img");i.setAttribute("src",e.getAttribute("src"));var n=s=>{i.style.width=2*e.offsetWidth+"px",i.style.height=2*e.offsetHeight+"px",mxUtils$1.makeDraggable(e,this.editor.graph,t,i),mxEvent$1.removeListener(i,"load",n)};mxEvent$1.addListener(i,"load",n)}destroy(){this.resetHandler!=null&&(this.editor.graph.removeListener("dblclick",this.resetHandler),this.editor.removeListener("escape",this.resetHandler),this.resetHandler=null),this.toolbar!=null&&(this.toolbar.destroy(),this.toolbar=null)}}const bt=class ei extends mxObjectCodec{constructor(){super(new mxDefaultToolbar)}encode(e,t){return null}decode(e,t,i){if(i!=null){var n=i.editor;for(t=t.firstChild;t!=null;){if(t.nodeType==mxConstants$1.NODETYPE_ELEMENT&&!this.processInclude(e,t,i)){if(t.nodeName=="separator")i.addSeparator();else if(t.nodeName=="br")i.toolbar.addBreak();else if(t.nodeName=="hr")i.toolbar.addLine();else if(t.nodeName=="add"){var s=t.getAttribute("as");s=mxResources$1.get(s)||s;var l=t.getAttribute("icon"),a=t.getAttribute("pressedIcon"),o=t.getAttribute("action"),h=t.getAttribute("mode"),d=t.getAttribute("template"),m=t.getAttribute("toggle")!="0",g=mxUtils$1.getTextContent(t),c=null;if(o!=null)c=i.addItem(s,l,o,a);else if(h!=null){var f=ei.allowEval?mxUtils$1.eval(g):null;c=i.addMode(s,l,h,a,f)}else if(d!=null||g!=null&&g.length>0){var C=n.templates[d],v=t.getAttribute("style");C!=null&&v!=null&&(C=n.graph.cloneCell(C),C.setStyle(v));var w=null;g!=null&&g.length>0&&ei.allowEval&&(w=mxUtils$1.eval(g)),c=i.addPrototype(s,l,C,a,w,m)}else{var S=mxUtils$1.getChildNodes(t);if(S.length>0)if(l==null)for(var T=i.addActionCombo(s),P=0;P<S.length;P++){var L=S[P];if(L.nodeName=="separator")i.addOption(T,"---");else if(L.nodeName=="add"){var k=L.getAttribute("as"),G=L.getAttribute("action");i.addActionOption(T,k,G)}}else{var Y=null,te=function(){var le=n.templates[Y.value];if(le!=null){var Z=le.clone(),B=Y.options[Y.selectedIndex].cellStyle;return B!=null&&Z.setStyle(B),Z}else mxLog.warn("Template "+le+" not found");return null},ie=i.addPrototype(s,l,te,null,null,m);Y=i.addCombo(),mxEvent$1.addListener(Y,"change",function(){i.toolbar.selectMode(ie,function(le){var Z=mxUtils$1.convertPoint(n.graph.container,mxEvent$1.getClientX(le),mxEvent$1.getClientY(le));return n.addVertex(null,f(),Z.x,Z.y)}),i.toolbar.noReset=!1});for(var P=0;P<S.length;P++){var L=S[P];if(L.nodeName=="separator")i.addOption(Y,"---");else if(L.nodeName=="add"){var k=L.getAttribute("as"),ne=L.getAttribute("template"),q=i.addOption(Y,k,ne||d);q.cellStyle=L.getAttribute("style")}}}}if(c!=null){var oe=t.getAttribute("id");oe!=null&&oe.length>0&&c.setAttribute("id",oe)}}}t=t.nextSibling}}return i}};u(bt,"allowEval",!0);let mxDefaultToolbarCodec=bt;class mxConnectionConstraint{constructor(e,t,i,n,s){this.point=e,this.perimeter=t??!0,this.name=i,this.dx=n||0,this.dy=s||0}}class mxCellState extends mxRectangle{constructor(e,t,i){super(),u(this,"invalidStyle",!1),u(this,"invalid",!0),u(this,"absolutePoints",null),u(this,"visibleSourceState",null),u(this,"visibleTargetState",null),u(this,"terminalDistance",0),u(this,"length",0),u(this,"segments",null),u(this,"shape",null),u(this,"text",null),u(this,"unscaledWidth",null),u(this,"unscaledHeight",null),this.view=e,this.cell=t,this.style=i??{},this.origin=new mxPoint,this.absoluteOffset=new mxPoint}getPerimeterBounds(e,t){if(e=e||0,t=t??new mxRectangle(this.x,this.y,this.width,this.height),this.shape!=null&&this.shape.stencil!=null&&this.shape.stencil.aspect=="fixed"){var i=this.shape.stencil.computeAspect(this.style,t.x,t.y,t.width,t.height);t.x=i.x,t.y=i.y,t.width=this.shape.stencil.w0*i.width,t.height=this.shape.stencil.h0*i.height}return e!=0&&t.grow(e),t}setAbsoluteTerminalPoint(e,t){t?(this.absolutePoints==null&&(this.absolutePoints=[]),this.absolutePoints.length==0?this.absolutePoints.push(e):this.absolutePoints[0]=e):this.absolutePoints==null?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(e)):this.absolutePoints.length==1?this.absolutePoints.push(e):this.absolutePoints[this.absolutePoints.length-1]=e}setCursor(e){this.shape!=null&&this.shape.setCursor(e),this.text!=null&&this.text.setCursor(e)}getVisibleTerminal(e){var t=this.getVisibleTerminalState(e);return t!=null?t.cell:null}getVisibleTerminalState(e){return e?this.visibleSourceState:this.visibleTargetState}setVisibleTerminalState(e,t){t?this.visibleSourceState=e:this.visibleTargetState=e}getCellBounds(){return this.cellBounds}getPaintBounds(){return this.paintBounds}updateCachedBounds(){var e=this.view.translate,t=this.view.scale;this.cellBounds=new mxRectangle(this.x/t-e.x,this.y/t-e.y,this.width/t,this.height/t),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),this.shape!=null&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()}setState(e){this.view=e.view,this.cell=e.cell,this.style=e.style,this.absolutePoints=e.absolutePoints,this.origin=e.origin,this.absoluteOffset=e.absoluteOffset,this.boundingBox=e.boundingBox,this.terminalDistance=e.terminalDistance,this.segments=e.segments,this.length=e.length,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.unscaledWidth=e.unscaledWidth,this.unscaledHeight=e.unscaledHeight}clone(){var e=new mxCellState(this.view,this.cell,this.style);if(this.absolutePoints!=null){e.absolutePoints=[];for(var t=0;t<this.absolutePoints.length;t++)e.absolutePoints[t]=this.absolutePoints[t].clone()}return this.origin!=null&&(e.origin=this.origin.clone()),this.absoluteOffset!=null&&(e.absoluteOffset=this.absoluteOffset.clone()),this.boundingBox!=null&&(e.boundingBox=this.boundingBox.clone()),e.terminalDistance=this.terminalDistance,e.segments=this.segments,e.length=this.length,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.unscaledWidth=this.unscaledWidth,e.unscaledHeight=this.unscaledHeight,e}destroy(){this.view.graph.cellRenderer.destroy(this)}}const N=class ke{static EntityRelation(e,t,i,n,s){var l=e.view,a=l.graph,o=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_SEGMENT,mxConstants$1.ENTITY_SEGMENT)*l.scale,h=e.absolutePoints,d=h[0],m=h[h.length-1],g=!1;if(d!=null)t=new mxCellState,t.x=d.x,t.y=d.y;else if(t!=null){var c=mxUtils$1.getPortConstraints(t,e,!0,mxConstants$1.DIRECTION_MASK_NONE);if(c!=mxConstants$1.DIRECTION_MASK_NONE&&c!=mxConstants$1.DIRECTION_MASK_WEST+mxConstants$1.DIRECTION_MASK_EAST)g=c==mxConstants$1.DIRECTION_MASK_WEST;else{var f=a.getCellGeometry(t.cell);f.relative?g=f.x<=.5:i!=null&&(g=i.x+i.width<t.x)}}else return;var C=!0;if(m!=null)i=new mxCellState,i.x=m.x,i.y=m.y;else if(i!=null){var c=mxUtils$1.getPortConstraints(i,e,!1,mxConstants$1.DIRECTION_MASK_NONE);if(c!=mxConstants$1.DIRECTION_MASK_NONE&&c!=mxConstants$1.DIRECTION_MASK_WEST+mxConstants$1.DIRECTION_MASK_EAST)C=c==mxConstants$1.DIRECTION_MASK_WEST;else{var v=a.getCellGeometry(i.cell);v.relative?C=v.x<=.5:t!=null&&(C=t.x+t.width<i.x)}}if(t!=null&&i!=null){var w=g?t.x:t.x+t.width,S=l.getRoutingCenterY(t),T=C?i.x:i.x+i.width,P=l.getRoutingCenterY(i),L=o,k=g?-L:L,G=new mxPoint(w+k,S);k=C?-L:L;var Y=new mxPoint(T+k,P);if(g==C){var te=g?Math.min(w,T)-o:Math.max(w,T)+o;s.push(new mxPoint(te,S)),s.push(new mxPoint(te,P))}else if(G.x<Y.x==g){var ie=S+(P-S)/2;s.push(G),s.push(new mxPoint(G.x,ie)),s.push(new mxPoint(Y.x,ie)),s.push(Y)}else s.push(G),s.push(Y)}}static Loop(e,t,i,n,s){var l=e.absolutePoints,a=l[0],o=l[l.length-1];if(a!=null&&o!=null){if(n!=null&&n.length>0)for(var h=0;h<n.length;h++){var d=n[h];d=e.view.transformControlPoint(e,d),s.push(new mxPoint(d.x,d.y))}return}if(t!=null){var m=e.view,g=m.graph,d=n!=null&&n.length>0?n[0]:null;d!=null&&(d=m.transformControlPoint(e,d),mxUtils$1.contains(t,d.x,d.y)&&(d=null));var c=0,f=0,C=0,v=0,w=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_SEGMENT,g.gridSize)*m.scale,S=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_WEST);S==mxConstants$1.DIRECTION_NORTH||S==mxConstants$1.DIRECTION_SOUTH?(c=m.getRoutingCenterX(t),f=w):(C=m.getRoutingCenterY(t),v=w),d==null||d.x<t.x||d.x>t.x+t.width?d!=null?(c=d.x,v=Math.max(Math.abs(C-d.y),v)):S==mxConstants$1.DIRECTION_NORTH?C=t.y-2*f:S==mxConstants$1.DIRECTION_SOUTH?C=t.y+t.height+2*f:S==mxConstants$1.DIRECTION_EAST?c=t.x-2*v:c=t.x+t.width+2*v:d!=null&&(c=m.getRoutingCenterX(t),f=Math.max(Math.abs(c-d.x),v),C=d.y,v=0),s.push(new mxPoint(c-f,C-v)),s.push(new mxPoint(c+f,C+v))}}static ElbowConnector(e,t,i,n,s){var l=n!=null&&n.length>0?n[0]:null,a=!1,o=!1;if(t!=null&&i!=null)if(l!=null){var h=Math.min(t.x,i.x),d=Math.max(t.x+t.width,i.x+i.width),m=Math.min(t.y,i.y),g=Math.max(t.y+t.height,i.y+i.height);l=e.view.transformControlPoint(e,l),a=l.y<m||l.y>g,o=l.x<h||l.x>d}else{var h=Math.max(t.x,i.x),d=Math.min(t.x+t.width,i.x+i.width);if(a=h==d,!a){var m=Math.max(t.y,i.y),g=Math.min(t.y+t.height,i.y+i.height);o=m==g}}!o&&(a||e.style[mxConstants$1.STYLE_ELBOW]==mxConstants$1.ELBOW_VERTICAL)?ke.TopToBottom(e,t,i,n,s):ke.SideToSide(e,t,i,n,s)}static SideToSide(e,t,i,n,s){var l=e.view,a=n!=null&&n.length>0?n[0]:null,o=e.absolutePoints,h=o[0],d=o[o.length-1];if(a!=null&&(a=l.transformControlPoint(e,a)),h!=null&&(t=new mxCellState,t.x=h.x,t.y=h.y),d!=null&&(i=new mxCellState,i.x=d.x,i.y=d.y),t!=null&&i!=null){var m=Math.max(t.x,i.x),g=Math.min(t.x+t.width,i.x+i.width),c=a!=null?a.x:Math.round(g+(m-g)/2),f=l.getRoutingCenterY(t),C=l.getRoutingCenterY(i);if(a!=null&&(a.y>=t.y&&a.y<=t.y+t.height&&(f=a.y),a.y>=i.y&&a.y<=i.y+i.height&&(C=a.y)),!mxUtils$1.contains(i,c,f)&&!mxUtils$1.contains(t,c,f)&&s.push(new mxPoint(c,f)),!mxUtils$1.contains(i,c,C)&&!mxUtils$1.contains(t,c,C)&&s.push(new mxPoint(c,C)),s.length==1)if(a!=null)!mxUtils$1.contains(i,c,a.y)&&!mxUtils$1.contains(t,c,a.y)&&s.push(new mxPoint(c,a.y));else{var v=Math.max(t.y,i.y),w=Math.min(t.y+t.height,i.y+i.height);s.push(new mxPoint(c,v+(w-v)/2))}}}static TopToBottom(e,t,i,n,s){var l=e.view,a=n!=null&&n.length>0?n[0]:null,o=e.absolutePoints,h=o[0],d=o[o.length-1];if(a!=null&&(a=l.transformControlPoint(e,a)),h!=null&&(t=new mxCellState,t.x=h.x,t.y=h.y),d!=null&&(i=new mxCellState,i.x=d.x,i.y=d.y),t!=null&&i!=null){var m=Math.max(t.y,i.y),g=Math.min(t.y+t.height,i.y+i.height),c=l.getRoutingCenterX(t);a!=null&&a.x>=t.x&&a.x<=t.x+t.width&&(c=a.x);var f=a!=null?a.y:Math.round(g+(m-g)/2);if(!mxUtils$1.contains(i,c,f)&&!mxUtils$1.contains(t,c,f)&&s.push(new mxPoint(c,f)),a!=null&&a.x>=i.x&&a.x<=i.x+i.width?c=a.x:c=l.getRoutingCenterX(i),!mxUtils$1.contains(i,c,f)&&!mxUtils$1.contains(t,c,f)&&s.push(new mxPoint(c,f)),s.length==1)if(a!=null&&s.length==1)!mxUtils$1.contains(i,a.x,f)&&!mxUtils$1.contains(t,a.x,f)&&s.push(new mxPoint(a.x,f));else{var C=Math.max(t.x,i.x),v=Math.min(t.x+t.width,i.x+i.width);s.push(new mxPoint(C+(v-C)/2,f))}}}static SegmentConnector(e,t,i,n,s){var l=ke.scalePointArray(e.absolutePoints,e.view.scale),a=ke.scaleCellState(t,e.view.scale),o=ke.scaleCellState(i,e.view.scale),h=1,d=s.length>0?s[0]:null,m=!0,g=null;function c(oe){return oe.x=Math.round(oe.x*e.view.scale*10)/10,oe.y=Math.round(oe.y*e.view.scale*10)/10,(d==null||Math.abs(d.x-oe.x)>=h||Math.abs(d.y-oe.y)>=Math.max(1,e.view.scale))&&(s.push(oe),d=oe),d}var f=l[0];f==null&&a!=null?f=new mxPoint(e.view.getRoutingCenterX(a),e.view.getRoutingCenterY(a)):f!=null&&(f=f.clone());var C=l.length-1;if(n!=null&&n.length>0){for(var v=[],w=0;w<n.length;w++){var S=e.view.transformControlPoint(e,n[w],!0);S!=null&&v.push(S)}if(v.length==0)return;f!=null&&v[0]!=null&&(Math.abs(v[0].x-f.x)<h&&(v[0].x=f.x),Math.abs(v[0].y-f.y)<h&&(v[0].y=f.y));var T=l[C];T!=null&&v[v.length-1]!=null&&(Math.abs(v[v.length-1].x-T.x)<h&&(v[v.length-1].x=T.x),Math.abs(v[v.length-1].y-T.y)<h&&(v[v.length-1].y=T.y)),g=v[0];var P=a,L=l[0],k=!1,G=!1,Y=g;L!=null&&(P=null);for(var w=0;w<2;w++){var te=L!=null&&L.x==Y.x,ie=L!=null&&L.y==Y.y,ne=P!=null&&Y.y>=P.y&&Y.y<=P.y+P.height,q=P!=null&&Y.x>=P.x&&Y.x<=P.x+P.width;if(k=ie||L==null&&ne,G=te||L==null&&q,!(w==0&&(k&&G||te&&ie))){if(L!=null&&!ie&&!te&&(ne||q)){m=!ne;break}if(G||k){m=k,w==1&&(m=v.length%2==0?k:G);break}}P=o,L=l[C],L!=null&&(P=null),Y=v[v.length-1],te&&ie&&(v=v.slice(1))}m&&(l[0]!=null&&l[0].y!=g.y||l[0]==null&&a!=null&&(g.y<a.y||g.y>a.y+a.height))?c(new mxPoint(f.x,g.y)):!m&&(l[0]!=null&&l[0].x!=g.x||l[0]==null&&a!=null&&(g.x<a.x||g.x>a.x+a.width))&&c(new mxPoint(g.x,f.y)),m?f.y=g.y:f.x=g.x;for(var w=0;w<v.length;w++)m=!m,g=v[w],m?f.y=g.y:f.x=g.x,c(f.clone())}else g=f,m=!0;if(f=l[C],f==null&&o!=null&&(f=new mxPoint(e.view.getRoutingCenterX(o),e.view.getRoutingCenterY(o))),f!=null&&g!=null&&(m&&(l[C]!=null&&l[C].y!=g.y||l[C]==null&&o!=null&&(g.y<o.y||g.y>o.y+o.height))?c(new mxPoint(f.x,g.y)):!m&&(l[C]!=null&&l[C].x!=g.x||l[C]==null&&o!=null&&(g.x<o.x||g.x>o.x+o.width))&&c(new mxPoint(g.x,f.y))),l[0]==null&&a!=null)for(;s.length>1&&s[1]!=null&&mxUtils$1.contains(a,s[1].x,s[1].y);)s.splice(1,1);if(l[C]==null&&o!=null)for(;s.length>1&&s[s.length-1]!=null&&mxUtils$1.contains(o,s[s.length-1].x,s[s.length-1].y);)s.splice(s.length-1,1);T!=null&&s[s.length-1]!=null&&Math.abs(T.x-s[s.length-1].x)<=h&&Math.abs(T.y-s[s.length-1].y)<=h&&(s.splice(s.length-1,1),s[s.length-1]!=null&&(Math.abs(s[s.length-1].x-T.x)<h&&(s[s.length-1].x=T.x),Math.abs(s[s.length-1].y-T.y)<h&&(s[s.length-1].y=T.y)))}static getJettySize(e,t){var i=mxUtils$1.getValue(e.style,t?mxConstants$1.STYLE_SOURCE_JETTY_SIZE:mxConstants$1.STYLE_TARGET_JETTY_SIZE,mxUtils$1.getValue(e.style,mxConstants$1.STYLE_JETTY_SIZE,ke.orthBuffer));if(i=="auto"){var n=mxUtils$1.getValue(e.style,t?mxConstants$1.STYLE_STARTARROW:mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE);if(n!=mxConstants$1.NONE){var s=mxUtils$1.getNumber(e.style,t?mxConstants$1.STYLE_STARTSIZE:mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE);i=Math.max(2,Math.ceil((s+ke.orthBuffer)/ke.orthBuffer))*ke.orthBuffer}else i=2*ke.orthBuffer}return i}static scalePointArray(e,t){var i=[];if(e!=null)for(var n=0;n<e.length;n++)if(e[n]!=null){var s=new mxPoint(Math.round(e[n].x/t*10)/10,Math.round(e[n].y/t*10)/10);i[n]=s}else i[n]=null;else i=null;return i}static scaleCellState(e,t){var i=null;return e!=null?(i=e.clone(),i.setRect(Math.round(e.x/t*10)/10,Math.round(e.y/t*10)/10,Math.round(e.width/t*10)/10,Math.round(e.height/t*10)/10)):i=null,i}static OrthConnector(e,t,i,n,s){var l=e.view.graph,a=d==null?!1:l.getModel().isEdge(d.cell),o=m==null?!1:l.getModel().isEdge(m.cell),h=ke.scalePointArray(e.absolutePoints,e.view.scale),d=ke.scaleCellState(t,e.view.scale),m=ke.scaleCellState(i,e.view.scale),g=h[0],c=h[h.length-1],f=d!=null?d.x:g.x,C=d!=null?d.y:g.y,v=d!=null?d.width:0,w=d!=null?d.height:0,S=m!=null?m.x:c.x,T=m!=null?m.y:c.y,P=m!=null?m.width:0,L=m!=null?m.height:0,k=ke.getJettySize(e,!0),G=ke.getJettySize(e,!1);d!=null&&m==d&&(G=Math.max(k,G),k=G);var Y=G+k,te=!1;if(g!=null&&c!=null){var Q=c.x-g.x,me=c.y-g.y;te=Q*Q+me*me<Y*Y}if(te||ke.orthPointsFallback&&n!=null&&n.length>0||a||o){ke.SegmentConnector(e,t,i,n,s);return}var ie=[mxConstants$1.DIRECTION_MASK_ALL,mxConstants$1.DIRECTION_MASK_ALL],ne=0;if(d!=null&&(ie[0]=mxUtils$1.getPortConstraints(d,e,!0,mxConstants$1.DIRECTION_MASK_ALL),ne=mxUtils$1.getValue(d.style,mxConstants$1.STYLE_ROTATION,0),ne!=0)){var q=mxUtils$1.getBoundingBox(new mxRectangle(f,C,v,w),ne);f=q.x,C=q.y,v=q.width,w=q.height}if(m!=null&&(ie[1]=mxUtils$1.getPortConstraints(m,e,!1,mxConstants$1.DIRECTION_MASK_ALL),ne=mxUtils$1.getValue(m.style,mxConstants$1.STYLE_ROTATION,0),ne!=0)){var q=mxUtils$1.getBoundingBox(new mxRectangle(S,T,P,L),ne);S=q.x,T=q.y,P=q.width,L=q.height}for(var oe=[0,0],le=[[f,C,v,w],[S,T,P,L]],Z=[k,G],B=0;B<2;B++)ke.limits[B][1]=le[B][0]-Z[B],ke.limits[B][2]=le[B][1]-Z[B],ke.limits[B][4]=le[B][0]+le[B][2]+Z[B],ke.limits[B][8]=le[B][1]+le[B][3]+Z[B];var re=le[0][0]+le[0][2]/2,se=le[0][1]+le[0][3]/2,ve=le[1][0]+le[1][2]/2,pe=le[1][1]+le[1][3]/2,Q=re-ve,me=se-pe,ce=0;Q<0?me<0?ce=2:ce=1:me<=0&&(ce=3,Q==0&&(ce=2));var Le=null;d!=null&&(Le=g);for(var Ie=[[.5,.5],[.5,.5]],B=0;B<2;B++)Le!=null&&(Ie[B][0]=(Le.x-le[B][0])/le[B][2],Math.abs(Le.x-le[B][0])<=1?oe[B]=mxConstants$1.DIRECTION_MASK_WEST:Math.abs(Le.x-le[B][0]-le[B][2])<=1&&(oe[B]=mxConstants$1.DIRECTION_MASK_EAST),Ie[B][1]=(Le.y-le[B][1])/le[B][3],Math.abs(Le.y-le[B][1])<=1?oe[B]=mxConstants$1.DIRECTION_MASK_NORTH:Math.abs(Le.y-le[B][1]-le[B][3])<=1&&(oe[B]=mxConstants$1.DIRECTION_MASK_SOUTH)),Le=null,m!=null&&(Le=c);var Ge=le[0][1]-(le[1][1]+le[1][3]),fe=le[0][0]-(le[1][0]+le[1][2]),Te=le[1][1]-(le[0][1]+le[0][3]),Ve=le[1][0]-(le[0][0]+le[0][2]);ke.vertexSeperations[1]=Math.max(fe-Y,0),ke.vertexSeperations[2]=Math.max(Ge-Y,0),ke.vertexSeperations[4]=Math.max(Te-Y,0),ke.vertexSeperations[3]=Math.max(Ve-Y,0);var De=[],He=[],ue=[];He[0]=fe>=Ve?mxConstants$1.DIRECTION_MASK_WEST:mxConstants$1.DIRECTION_MASK_EAST,ue[0]=Ge>=Te?mxConstants$1.DIRECTION_MASK_NORTH:mxConstants$1.DIRECTION_MASK_SOUTH,He[1]=mxUtils$1.reversePortConstraints(He[0]),ue[1]=mxUtils$1.reversePortConstraints(ue[0]);for(var be=fe>=Ve?fe:Ve,Fe=Ge>=Te?Ge:Te,Pe=[[0,0],[0,0]],je=!1,B=0;B<2;B++)oe[B]==0&&(He[B]&ie[B]||(He[B]=mxUtils$1.reversePortConstraints(He[B])),ue[B]&ie[B]||(ue[B]=mxUtils$1.reversePortConstraints(ue[B])),Pe[B][0]=ue[B],Pe[B][1]=He[B]);Fe>0&&be>0&&((He[0]&ie[0])>0&&(ue[1]&ie[1])>0?(Pe[0][0]=He[0],Pe[0][1]=ue[0],Pe[1][0]=ue[1],Pe[1][1]=He[1],je=!0):(ue[0]&ie[0])>0&&(He[1]&ie[1])>0&&(Pe[0][0]=ue[0],Pe[0][1]=He[0],Pe[1][0]=He[1],Pe[1][1]=ue[1],je=!0)),Fe>0&&!je&&(Pe[0][0]=ue[0],Pe[0][1]=He[0],Pe[1][0]=ue[1],Pe[1][1]=He[1],je=!0),be>0&&!je&&(Pe[0][0]=He[0],Pe[0][1]=ue[0],Pe[1][0]=He[1],Pe[1][1]=ue[1],je=!0);for(var B=0;B<2;B++)oe[B]==0&&(Pe[B][0]&ie[B]||(Pe[B][0]=Pe[B][1]),De[B]=Pe[B][0]&ie[B],De[B]|=(Pe[B][1]&ie[B])<<8,De[B]|=(Pe[1-B][B]&ie[B])<<16,De[B]|=(Pe[1-B][1-B]&ie[B])<<24,De[B]&15||(De[B]=De[B]<<8),De[B]&3840||(De[B]=De[B]&15|De[B]>>8),De[B]&983040||(De[B]=De[B]&65535|(De[B]&251658240)>>8),oe[B]=De[B]&15,(ie[B]==mxConstants$1.DIRECTION_MASK_WEST||ie[B]==mxConstants$1.DIRECTION_MASK_NORTH||ie[B]==mxConstants$1.DIRECTION_MASK_EAST||ie[B]==mxConstants$1.DIRECTION_MASK_SOUTH)&&(oe[B]=ie[B]));var Qe=oe[0]==mxConstants$1.DIRECTION_MASK_EAST?3:oe[0],et=oe[1]==mxConstants$1.DIRECTION_MASK_EAST?3:oe[1];Qe-=ce,et-=ce,Qe<1&&(Qe+=4),et<1&&(et+=4);var Ze=ke.routePatterns[Qe-1][et-1];switch(ke.wayPoints1[0][0]=le[0][0],ke.wayPoints1[0][1]=le[0][1],oe[0]){case mxConstants$1.DIRECTION_MASK_WEST:ke.wayPoints1[0][0]-=k,ke.wayPoints1[0][1]+=Ie[0][1]*le[0][3];break;case mxConstants$1.DIRECTION_MASK_SOUTH:ke.wayPoints1[0][0]+=Ie[0][0]*le[0][2],ke.wayPoints1[0][1]+=le[0][3]+k;break;case mxConstants$1.DIRECTION_MASK_EAST:ke.wayPoints1[0][0]+=le[0][2]+k,ke.wayPoints1[0][1]+=Ie[0][1]*le[0][3];break;case mxConstants$1.DIRECTION_MASK_NORTH:ke.wayPoints1[0][0]+=Ie[0][0]*le[0][2],ke.wayPoints1[0][1]-=k;break}for(var Ke=0,E=(oe[0]&(mxConstants$1.DIRECTION_MASK_EAST|mxConstants$1.DIRECTION_MASK_WEST))>0?0:1,$=E,R=0,B=0;B<Ze.length;B++){var U=Ze[B]&15,F=U==mxConstants$1.DIRECTION_MASK_EAST?3:U;F+=ce,F>4&&(F-=4);var z=ke.dirVectors[F-1];R=F%2>0?0:1,R!=E&&(Ke++,ke.wayPoints1[Ke][0]=ke.wayPoints1[Ke-1][0],ke.wayPoints1[Ke][1]=ke.wayPoints1[Ke-1][1]);var K=(Ze[B]&ke.TARGET_MASK)>0,ge=(Ze[B]&ke.SOURCE_MASK)>0,de=(Ze[B]&ke.SIDE_MASK)>>5;de=de<<ce,de>15&&(de=de>>4);var xe=(Ze[B]&ke.CENTER_MASK)>0;if((ge||K)&&de<9){var Re=0,we=ge?0:1;if(xe&&R==0?Re=le[we][0]+Ie[we][0]*le[we][2]:xe?Re=le[we][1]+Ie[we][1]*le[we][3]:Re=ke.limits[we][de],R==0){var _e=ke.wayPoints1[Ke][0],Oe=(Re-_e)*z[0];Oe>0&&(ke.wayPoints1[Ke][0]+=z[0]*Oe)}else{var Ye=ke.wayPoints1[Ke][1],tt=(Re-Ye)*z[1];tt>0&&(ke.wayPoints1[Ke][1]+=z[1]*tt)}}else xe&&(ke.wayPoints1[Ke][0]+=z[0]*Math.abs(ke.vertexSeperations[F]/2),ke.wayPoints1[Ke][1]+=z[1]*Math.abs(ke.vertexSeperations[F]/2));Ke>0&&ke.wayPoints1[Ke][R]==ke.wayPoints1[Ke-1][R]?Ke--:E=R}for(var B=0;B<=Ke;B++){if(B==Ke){var nt=(oe[1]&(mxConstants$1.DIRECTION_MASK_EAST|mxConstants$1.DIRECTION_MASK_WEST))>0?0:1,dt=nt==$?0:1;if(dt!=(Ke+1)%2)break}s.push(new mxPoint(Math.round(ke.wayPoints1[B][0]*e.view.scale*10)/10,Math.round(ke.wayPoints1[B][1]*e.view.scale*10)/10))}for(var qe=1;qe<s.length;)s[qe-1]==null||s[qe]==null||s[qe-1].x!=s[qe].x||s[qe-1].y!=s[qe].y?qe++:s.splice(qe,1)}static getRoutePattern(e,t,i,n){var s=e[0]==mxConstants$1.DIRECTION_MASK_EAST?3:e[0],l=e[1]==mxConstants$1.DIRECTION_MASK_EAST?3:e[1];s-=t,l-=t,s<1&&(s+=4),l<1&&(l+=4);var a=ke.routePatterns[s-1][l-1];return(i==0||n==0)&&ke.inlineRoutePatterns[s-1][l-1]!=null&&(a=ke.inlineRoutePatterns[s-1][l-1]),a}};u(N,"orthBuffer",10),u(N,"orthPointsFallback",!0),u(N,"dirVectors",[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]]),u(N,"wayPoints1",[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]),u(N,"routePatterns",[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]]),u(N,"inlineRoutePatterns",[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]]),u(N,"vertexSeperations",[]),u(N,"limits",[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),u(N,"LEFT_MASK",32),u(N,"TOP_MASK",64),u(N,"RIGHT_MASK",128),u(N,"BOTTOM_MASK",256),u(N,"LEFT",1),u(N,"TOP",2),u(N,"RIGHT",4),u(N,"BOTTOM",8),u(N,"SIDE_MASK",480),u(N,"CENTER_MASK",512),u(N,"SOURCE_MASK",1024),u(N,"TARGET_MASK",2048),u(N,"VERTEX_MASK",3072);let mxEdgeStyle=N;class mxCellMarker extends mxEventSource{constructor(e,t,i,n){super(),u(this,"graph",null),u(this,"enabled",!0),u(this,"hotspot",mxConstants$1.DEFAULT_HOTSPOT),u(this,"hotspotEnabled",!1),u(this,"validColor",null),u(this,"invalidColor",null),u(this,"currentColor",null),u(this,"validState",null),u(this,"markedState",null),e!=null&&(this.graph=e,this.validColor=t??mxConstants$1.DEFAULT_VALID_COLOR,this.invalidColor=i??mxConstants$1.DEFAULT_INVALID_COLOR,this.hotspot=n??mxConstants$1.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(e))}setEnabled(e){this.enabled=e}isEnabled(){return this.enabled}setHotspot(e){this.hotspot=e}getHotspot(){return this.hotspot}setHotspotEnabled(e){this.hotspotEnabled=e}isHotspotEnabled(){return this.hotspotEnabled}hasValidState(){return this.validState!=null}getValidState(){return this.validState}getMarkedState(){return this.markedState}reset(){this.validState=null,this.markedState!=null&&(this.markedState=null,this.unmark())}process(e){var t=null;return this.isEnabled()&&(t=this.getState(e),this.setCurrentState(t,e)),t}setCurrentState(e,t,i){var n=e!=null?this.isValidState(e):!1;i=i??this.getMarkerColor(t.getEvent(),e,n),n?this.validState=e:this.validState=null,(e!=this.markedState||i!=this.currentColor)&&(this.currentColor=i,e!=null&&this.currentColor!=null?(this.markedState=e,this.mark()):this.markedState!=null&&(this.markedState=null,this.unmark()))}markCell(e,t){var i=this.graph.getView().getState(e);i!=null&&(this.currentColor=t??this.validColor,this.markedState=i,this.mark())}mark(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject$1(mxEvent$1.MARK,"state",this.markedState))}unmark(){this.mark()}isValidState(e){return!0}getMarkerColor(e,t,i){return i?this.validColor:this.invalidColor}getState(e){var t=this.graph.getView(),i=this.getCell(e),n=this.getStateToMark(t.getState(i));return n!=null&&this.intersects(n,e)?n:null}getCell(e){return e.getCell()}getStateToMark(e){return e}intersects(e,t){return this.hotspotEnabled?mxUtils$1.intersectsHotspot(e,t.getGraphX(),t.getGraphY(),this.hotspot,mxConstants$1.MIN_HOTSPOT_SIZE,mxConstants$1.MAX_HOTSPOT_SIZE):!0}destroy(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()}}class EdgeCellMarker extends mxCellMarker{constructor(e,t){super(t),this.edgeHandler=e}getCell(e){var t=super.getCell(e);if((t==this.edgeHandler.state.cell||t==null)&&this.edgeHandler.currentPoint!=null&&(t=this.edgeHandler.graph.getCellAt(this.edgeHandler.currentPoint.x,this.edgeHandler.currentPoint.y)),t!=null&&!this.edgeHandler.graph.isCellConnectable(t)){var i=this.edgeHandler.graph.getModel().getParent(t);this.edgeHandler.graph.getModel().isVertex(i)&&this.edgeHandler.graph.isCellConnectable(i)&&(t=i)}var n=this.edgeHandler.graph.getModel();return(this.edgeHandler.graph.isSwimlane(t)&&this.edgeHandler.currentPoint!=null&&this.edgeHandler.graph.hitsSwimlaneContent(t,this.edgeHandler.currentPoint.x,this.edgeHandler.currentPoint.y)||!this.edgeHandler.isConnectableCell(t)||t==this.edgeHandler.state.cell||t!=null&&!this.edgeHandler.graph.connectableEdges&&n.isEdge(t)||n.isAncestor(this.edgeHandler.state.cell,t))&&(t=null),this.edgeHandler.graph.isCellConnectable(t)||(t=null),t}isValidState(e){var t=this.edgeHandler.graph.getModel(),i=this.edgeHandler.graph.view.getTerminalPort(e,this.edgeHandler.graph.view.getState(t.getTerminal(this.edgeHandler.state.cell,!this.edgeHandler.isSource)),!this.edgeHandler.isSource),n=i!=null?i.cell:null,s=this.edgeHandler.isSource?e.cell:n,l=this.edgeHandler.isSource?n:e.cell;return this.edgeHandler.error=this.edgeHandler.validateConnection(s,l),this.edgeHandler.error==null}}class mxGraphHandler{constructor(e){u(this,"enabled",!0),u(this,"highlightEnabled",!0),u(this,"cloneEnabled",!0),u(this,"moveEnabled",!0),u(this,"guide",null),u(this,"currentDx",null),u(this,"currentDy",null),u(this,"updateCursor",!0),u(this,"selectEnabled",!0),u(this,"connectOnDrop",!1),u(this,"scrollOnMove",!0),u(this,"minimumSize",6),u(this,"previewColor","black"),u(this,"htmlPreview",!1),u(this,"shape",null),u(this,"scaleGrid",!1),u(this,"rotationEnabled",!0),u(this,"allowLivePreview",mxClient.IS_SVG),this.graph=e,this.graph.addMouseListener(this),this.panHandler=()=>{this.suspended||(this.updatePreview(),this.updateHint())},this.graph.addListener(mxEvent$1.PAN,this.panHandler),this.escapeHandler=(t,i)=>{this.reset()},this.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler),this.refreshHandler=(t,i)=>{window.setTimeout(()=>{if(this.first!=null&&!this.suspended){var n=this.currentDx,s=this.currentDy;this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.pBounds==null?this.reset():(this.currentDx=n,this.currentDy=s,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1))}},0)},this.graph.getModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.keyHandler=t=>{if(this.graph.container!=null&&this.graph.container.style.visibility!="hidden"&&this.first!=null&&!this.suspended){var i=this.graph.isCloneEvent(t)&&this.graph.isCellsCloneable()&&this.isCloneEnabled();i!=this.cloning&&(this.cloning=i,this.checkPreview(),this.updatePreview())}},mxEvent$1.addListener(document,"keydown",this.keyHandler),mxEvent$1.addListener(document,"keyup",this.keyHandler)}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isCloneEnabled(){return this.cloneEnabled}setCloneEnabled(e){this.cloneEnabled=e}isMoveEnabled(){return this.moveEnabled}setMoveEnabled(e){this.moveEnabled=e}isSelectEnabled(){return this.selectEnabled}setSelectEnabled(e){this.selectEnabled=e}isRemoveCellsFromParent(){return this.removeCellsFromParent}setRemoveCellsFromParent(e){this.removeCellsFromParent=e}isPropagateSelectionCell(e,t,i){var n=this.graph.model.getParent(e);if(t){var s=this.graph.getCellGeometry(e);return!this.graph.model.isEdge(e)&&!this.graph.model.isEdge(n)&&!this.graph.isSiblingSelected(e)&&(s==null||s.relative||!this.graph.isSwimlane(n))}else return(!this.graph.isToggleEvent(i.getEvent())||!this.graph.isSiblingSelected(e)&&!this.graph.isCellSelected(e)&&!this.graph.isSwimlane(n)||this.graph.isCellSelected(n))&&(this.graph.isToggleEvent(i.getEvent())||!this.graph.isCellSelected(n))}getInitialCellForEvent(e){var t=e.getState();if((!this.graph.isToggleEvent(e.getEvent())||!mxEvent$1.isAltDown(e.getEvent()))&&t!=null&&!this.graph.isCellSelected(t.cell))for(var i=this.graph.model,n=this.graph.view.getState(i.getParent(t.cell));n!=null&&!this.graph.isCellSelected(n.cell)&&(i.isVertex(n.cell)||i.isEdge(n.cell))&&this.isPropagateSelectionCell(t.cell,!0,e);)t=n,n=this.graph.view.getState(this.graph.getModel().getParent(t.cell));return t!=null?t.cell:null}isDelayedSelection(e,t){if(!this.graph.isToggleEvent(t.getEvent())||!mxEvent$1.isAltDown(t.getEvent()))for(;e!=null;){if(this.graph.selectionCellsHandler.isHandled(e))return this.graph.cellEditor.getEditingCell()!=e;e=this.graph.model.getParent(e)}return this.graph.isToggleEvent(t.getEvent())&&!mxEvent$1.isAltDown(t.getEvent())}selectDelayed(e){if(!this.graph.popupMenuHandler.isPopupTrigger(e)){var t=e.getCell();t==null&&(t=this.cell);var i=this.graph.view.getState(t);if(i!=null)if(e.isSource(i.control))this.graph.selectCellForEvent(t,e.getEvent());else{if(!this.graph.isToggleEvent(e.getEvent())||!mxEvent$1.isAltDown(e.getEvent()))for(var n=this.graph.getModel(),s=n.getParent(t);this.graph.view.getState(s)!=null&&(n.isVertex(s)||n.isEdge(s))&&this.isPropagateSelectionCell(t,!1,e);)t=s,s=n.getParent(t);this.graph.selectCellForEvent(t,e.getEvent())}}}consumeMouseEvent(e,t){t.consume()}mouseDown(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&t.getState()!=null&&!mxEvent$1.isMultiTouchEvent(t.getEvent())){var i=this.getInitialCellForEvent(t);if(this.delayedSelection=this.isDelayedSelection(i,t),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(i,t.getEvent()),this.isMoveEnabled()){var n=this.graph.model,s=n.getGeometry(i);this.graph.isCellMovable(i)&&(!n.isEdge(i)||this.graph.getSelectionCount()>1||s.points!=null&&s.points.length>0||n.getTerminal(i,!0)==null||n.getTerminal(i,!1)==null||this.graph.allowDanglingEdges||this.graph.isCloneEvent(t.getEvent())&&this.graph.isCellsCloneable())?this.start(i,t.getX(),t.getY()):this.delayedSelection&&(this.cell=i),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent$1.MOUSE_DOWN,t)}}}getGuideStates(){var e=this.graph.getDefaultParent(),t=this.graph.getModel(),i=n=>this.graph.view.getState(n)!=null&&t.isVertex(n)&&t.getGeometry(n)!=null&&!t.getGeometry(n).relative;return this.graph.view.getCellStates(t.filterDescendants(i,e))}getCells(e){return!this.delayedSelection&&this.graph.isCellMovable(e)?[e]:this.graph.getMovableCells(this.graph.getSelectionCells())}getPreviewBounds(e){var t=this.getBoundingBox(e);if(t!=null){if(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize){var i=this.minimumSize-t.width;t.x-=i/2,t.width=this.minimumSize}else t.x=Math.round(t.x),t.width=Math.ceil(t.width);if(this.graph.view.translate,this.graph.view.scale,t.height<this.minimumSize){var n=this.minimumSize-t.height;t.y-=n/2,t.height=this.minimumSize}else t.y=Math.round(t.y),t.height=Math.ceil(t.height)}return t}getBoundingBox(e){var t=null;if(e!=null&&e.length>0){for(var i=this.graph.getModel(),n=0;n<e.length;n++)if(i.isVertex(e[n])||i.isEdge(e[n])){var s=this.graph.view.getState(e[n]);if(s!=null){var l=s;i.isVertex(e[n])&&s.shape!=null&&s.shape.boundingBox!=null&&(l=s.shape.boundingBox),t==null?t=mxRectangle.fromRectangle(l):t.add(l)}}}return t}createPreviewShape(e){var t=new mxRectangleShape(e,null,this.previewColor);return t.isDashed=!0,this.htmlPreview?(t.dialect=mxConstants$1.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,mxClient.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t}start(e,t,i,n){this.cell=e,this.first=mxUtils$1.convertPoint(this.graph.container,t,i),this.cells=n??this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1,this.cellCount=0;for(var s=0;s<this.cells.length;s++)this.cellCount+=this.addStates(this.cells[s],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());for(var l=this.graph.model.getParent(e),a=this.graph.model.getChildCount(l)<2,o=new mxDictionary,h=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell),s=0;s<h.length;s++){var d=this.graph.view.getState(h[s]);d!=null&&!o.get(d)&&o.put(d,!0)}this.guide.isStateIgnored=m=>{var g=this.graph.model.getParent(m.cell);return m.cell!=null&&(!this.cloning&&this.isCellMoving(m.cell)||m.cell!=(this.target||l)&&!a&&!o.get(m)&&(this.target==null||this.graph.model.getChildCount(this.target)>=2)&&g!=(this.target||l))}}}addStates(e,t){var i=this.graph.view.getState(e),n=0;if(i!=null&&t.get(e)==null){t.put(e,i),n++;for(var s=this.graph.model.getChildCount(e),l=0;l<s;l++)n+=this.addStates(this.graph.model.getChildAt(e,l),t)}return n}isCellMoving(e){return this.allCells.get(e)!=null}useGuidesForEvent(e){return this.guide!=null?this.guide.isEnabledForEvent(e.getEvent())&&!this.graph.isConstrainedEvent(e.getEvent()):!0}snap(e){var t=this.scaleGrid?this.graph.view.scale:1;return e.x=this.graph.snap(e.x/t)*t,e.y=this.graph.snap(e.y/t)*t,e}getDelta(e){var t=mxUtils$1.convertPoint(this.graph.container,e.getX(),e.getY());return new mxPoint(t.x-this.first.x-this.graph.panDx,t.y-this.first.y-this.graph.panDy)}updateHint(e){}removeHint(){}roundLength(e){return Math.round(e*100)/100}isValidDropTarget(e,t){return this.graph.model.getParent(this.cell)!=e}checkPreview(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?(!this.cloning||!this.livePreviewActive)&&(this.livePreviewActive=!0,this.livePreviewUsed=!0):!this.livePreviewUsed&&this.shape==null&&(this.shape=this.createPreviewShape(this.bounds))}mouseMove(e,t){var i=this.graph;if(!t.isConsumed()&&i.isMouseDown&&this.cell!=null&&this.first!=null&&this.bounds!=null&&!this.suspended){if(mxEvent$1.isMultiTouchEvent(t.getEvent())){this.reset();return}var n=this.getDelta(t),s=i.tolerance;if(this.shape!=null||this.livePreviewActive||Math.abs(n.x)>s||Math.abs(n.y)>s){this.highlight==null&&(this.highlight=new mxCellHighlight(this.graph,mxConstants$1.DROP_TARGET_COLOR,3));var l=i.isCloneEvent(t.getEvent())&&i.isCellsCloneable()&&this.isCloneEnabled(),a=i.isGridEnabledEvent(t.getEvent()),o=t.getCell(),h=!0,d=null;this.cloning=l,i.isDropEnabled()&&this.highlightEnabled&&(d=i.getDropTarget(this.cells,t.getEvent(),o,l));var m=i.getView().getState(d),g=!1;if(m!=null&&(l||this.isValidDropTarget(d,t)))this.target!=d&&(this.target=d,this.setHighlightColor(mxConstants$1.DROP_TARGET_COLOR)),g=!0;else if(this.target=null,this.connectOnDrop&&o!=null&&this.cells.length==1&&i.getModel().isVertex(o)&&i.isCellConnectable(o)&&(m=i.getView().getState(o),m!=null)){var c=i.getEdgeValidationError(null,this.cell,o),f=c==null?mxConstants$1.VALID_COLOR:mxConstants$1.INVALID_CONNECT_TARGET_COLOR;this.setHighlightColor(f),g=!0}m!=null&&g?this.highlight.highlight(m):this.highlight.hide(),this.guide!=null&&this.useGuidesForEvent(t)?(n=this.guide.move(this.bounds,n,a,l),h=!1):n=this.graph.snapDelta(n,this.bounds,!a,!1,!1),this.guide!=null&&h&&this.guide.hide(),i.isConstrainedEvent(t.getEvent())&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),this.checkPreview(),(this.currentDx!=n.x||this.currentDy!=n.y)&&(this.currentDx=n.x,this.currentDy=n.y,this.updatePreview())}this.updateHint(t),this.consumeMouseEvent(mxEvent$1.MOUSE_MOVE,t),mxEvent$1.consume(t.getEvent())}else if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!t.isConsumed()&&(t.getState()!=null||t.sourceState!=null)&&!i.isMouseDown){var C=i.getCursorForMouseEvent(t);C==null&&i.isEnabled()&&i.isCellMovable(t.getCell())&&(i.getModel().isEdge(t.getCell())?C=mxConstants$1.CURSOR_MOVABLE_EDGE:C=mxConstants$1.CURSOR_MOVABLE_VERTEX),C!=null&&t.sourceState!=null&&t.sourceState.setCursor(C)}}updatePreview(e){this.livePreviewUsed&&!e?this.cells!=null&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()}updatePreviewShape(){this.shape!=null&&this.pBounds!=null&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())}updateLivePreview(e,t){if(!this.suspended){var i=[];if(this.allCells!=null&&this.allCells.visit((C,v)=>{if(this.graph.view.getState(v.cell)==null)v.destroy();else{var w=v.clone();i.push([v,w]),v.shape!=null&&(v.shape.originalPointerEvents==null&&(v.shape.originalPointerEvents=v.shape.pointerEvents),v.shape.pointerEvents=!1,v.text!=null&&(v.text.originalPointerEvents==null&&(v.text.originalPointerEvents=v.text.pointerEvents),v.text.pointerEvents=!1)),this.graph.model.isVertex(v.cell)&&(v.x+=e,v.y+=t,this.cloning||(v.view.graph.cellRenderer.redraw(v,!0),v.view.invalidate(v.cell),v.invalid=!1,v.control!=null&&v.control.node!=null&&(v.control.node.style.visibility="hidden")))}}),i.length==0)this.reset();else{for(var n=this.graph.view.scale,s=0;s<i.length;s++){var l=i[s][0];if(this.graph.model.isEdge(l.cell)){var a=this.graph.getCellGeometry(l.cell),o=[];if(a!=null&&a.points!=null)for(var h=0;h<a.points.length;h++)a.points[h]!=null&&o.push(new mxPoint(a.points[h].x+e/n,a.points[h].y+t/n));var d=l.visibleSourceState,m=l.visibleTargetState,g=i[s][1].absolutePoints;if(d==null||!this.isCellMoving(d.cell)){var c=g[0];l.setAbsoluteTerminalPoint(new mxPoint(c.x+e,c.y+t),!0),d=null}else l.view.updateFixedTerminalPoint(l,d,!0,this.graph.getConnectionConstraint(l,d,!0));if(m==null||!this.isCellMoving(m.cell)){var f=g[g.length-1];l.setAbsoluteTerminalPoint(new mxPoint(f.x+e,f.y+t),!1),m=null}else l.view.updateFixedTerminalPoint(l,m,!1,this.graph.getConnectionConstraint(l,m,!1));l.view.updatePoints(l,o,d,m),l.view.updateFloatingTerminalPoints(l,d,m),l.view.updateEdgeLabelOffset(l),l.invalid=!1,this.cloning||l.view.graph.cellRenderer.redraw(l,!0)}}this.graph.view.validate(),this.redrawHandles(i),this.resetPreviewStates(i)}}}redrawHandles(e){for(var t=0;t<e.length;t++){var i=this.graph.selectionCellsHandler.getHandler(e[t][0].cell);i?.redraw(!0)}}resetPreviewStates(e){for(var t=0;t<e.length;t++)e[t][0].setState(e[t][1])}suspend(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),this.shape!=null&&(this.shape.node.style.visibility="hidden"),this.guide!=null&&this.guide.setVisible(!1),this.suspended=!0)}resume(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),this.shape!=null&&(this.shape.node.style.visibility="visible"),this.guide!=null&&this.guide.setVisible(!0))}resetLivePreview(){this.allCells!=null&&(this.allCells.visit((e,t)=>{t.shape!=null&&t.shape.originalPointerEvents!=null&&(t.shape.pointerEvents=t.shape.originalPointerEvents,t.shape.originalPointerEvents=null,t.shape.bounds=null,t.text!=null&&(t.text.pointerEvents=t.text.originalPointerEvents,t.text.originalPointerEvents=null)),t.control!=null&&t.control.node!=null&&t.control.node.style.visibility=="hidden"&&(t.control.node.style.visibility=""),t.view.invalidate(t.cell)}),this.graph.view.validate())}setHandlesVisibleForCells(e,t){if(this.handlesVisible!=t){this.handlesVisible=t;for(var i=0;i<e.length;i++){var n=this.graph.selectionCellsHandler.getHandler(e[i]);n!=null&&(n.setHandlesVisible(t),t&&n.redraw())}}}setHighlightColor(e){this.highlight!=null&&this.highlight.setHighlightColor(e)}mouseUp(e,t){if(!t.isConsumed())if(this.livePreviewUsed&&this.resetLivePreview(),this.cell!=null&&this.first!=null&&(this.shape!=null||this.livePreviewUsed)&&this.currentDx!=null&&this.currentDy!=null){var i=this.graph,n=t.getCell();if(this.connectOnDrop&&this.target==null&&n!=null&&i.getModel().isVertex(n)&&i.isCellConnectable(n)&&i.isEdgeValid(null,this.cell,n))i.connectionHandler.connect(this.cell,n,t.getEvent());else{var s=i.isCloneEvent(t.getEvent())&&i.isCellsCloneable()&&this.isCloneEnabled(),l=i.getView().scale,a=this.roundLength(this.currentDx/l),o=this.roundLength(this.currentDy/l),h=this.target;i.isSplitEnabled()&&i.isSplitTarget(h,this.cells,t.getEvent())?i.splitEdge(h,this.cells,null,a,o,t.getGraphX(),t.getGraphY()):this.moveCells(this.cells,a,o,s,this.target,t.getEvent())}}else this.isSelectEnabled()&&this.delayedSelection&&this.cell!=null&&this.selectDelayed(t);this.cellWasClicked&&this.consumeMouseEvent(mxEvent$1.MOUSE_UP,t),this.reset()}reset(){if(this.livePreviewUsed){this.resetLivePreview();try{this.setHandlesVisibleForCells(this.graph.selectionCelltresHandler.getHandledSelectionCells(),!0)}catch{}}this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewActive=null,this.livePreviewUsed=null,this.cellWasClicked=!1,this.suspended=null,this.currentDx=null,this.currentDy=null,this.cellCount=null,this.cloning=!1,this.allCells=null,this.pBounds=null,this.guides=null,this.target=null,this.first=null,this.cells=null,this.cell=null}shouldRemoveCellsFromParent(e,t,i){if(this.graph.getModel().isVertex(e)){var n=this.graph.getView().getState(e);if(n!=null){var s=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(i),mxEvent$1.getClientY(i)),l=mxUtils$1.toRadians(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ROTATION)||0);if(l!=0){var a=Math.cos(-l),o=Math.sin(-l),h=new mxPoint(n.getCenterX(),n.getCenterY());s=mxUtils$1.getRotatedPoint(s,a,o,h)}return!mxUtils$1.contains(n,s.x,s.y)}}return!1}moveCells(e,t,i,n,s,l){n&&(e=this.graph.getCloneableCells(e));var a=this.graph.getModel().getParent(this.cell);s==null&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(a,e,l)&&(s=this.graph.getDefaultParent()),n=n&&!this.graph.isCellLocked(s||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{var o=[];if(!n&&s!=null&&this.removeEmptyParents){for(var h=new mxDictionary,d=0;d<e.length;d++)h.put(e[d],!0);for(var d=0;d<e.length;d++){var m=this.graph.model.getParent(e[d]);m!=null&&!h.get(m)&&(h.put(m,!0),o.push(m))}}e=this.graph.moveCells(e,t,i,n,s,l);for(var g=[],d=0;d<o.length;d++)this.shouldRemoveParent(o[d])&&g.push(o[d]);this.graph.removeCells(g,!1)}finally{this.graph.getModel().endUpdate()}n&&this.graph.setSelectionCells(e),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(e[0])}shouldRemoveParent(e){var t=this.graph.view.getState(e);return t!=null&&(this.graph.model.isEdge(t.cell)||this.graph.model.isVertex(t.cell))&&this.graph.isCellDeletable(t.cell)&&this.graph.model.getChildCount(t.cell)==0&&this.graph.isTransparentState(t)}destroyShapes(){this.shape!=null&&(this.shape.destroy(),this.shape=null),this.guide!=null&&(this.guide.destroy(),this.guide=null),this.highlight!=null&&(this.highlight.destroy(),this.highlight=null)}destroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),this.escapeHandler!=null&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.refreshHandler!=null&&(this.graph.getModel().removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent$1.removeListener(document,"keydown",this.keyHandler),mxEvent$1.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()}}u(mxGraphHandler,"maxCells",50),u(mxGraphHandler,"guidesEnabled",!1),u(mxGraphHandler,"handlesVisible",!0),u(mxGraphHandler,"removeCellsFromParent",!0),u(mxGraphHandler,"removeEmptyParents",!1),u(mxGraphHandler,"maxLivePreview",0);class mxImage{constructor(e,t,i){this.src=e,this.width=t,this.height=i}}class mxConstraintHandler{constructor(e){u(this,"pointImage",new mxImage(mxClient.imageBasePath+"/point.gif",5,5)),u(this,"enabled",!0),u(this,"highlightColor",mxConstants$1.DEFAULT_VALID_COLOR),this.graph=e,this.resetHandler=(t,i)=>{this.currentFocus!=null&&this.graph.view.getState(this.currentFocus.cell)==null?this.reset():this.redraw()},this.graph.model.addListener(mxEvent$1.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent$1.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent$1.SCALE,this.resetHandler),this.graph.addListener(mxEvent$1.ROOT,this.resetHandler)}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}reset(){if(this.focusIcons!=null){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null}this.focusHighlight!=null&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null}getTolerance(e){return this.graph.getTolerance()}getImageForConstraint(e,t,i){return this.pointImage}isEventIgnored(e,t){return!1}isStateIgnored(e,t){return!1}destroyIcons(){if(this.focusIcons!=null){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null,this.focusPoints=null}}destroyFocusHighlight(){this.focusHighlight!=null&&(this.focusHighlight.destroy(),this.focusHighlight=null)}isKeepFocusEvent(e){return mxEvent$1.isShiftDown(e.getEvent())}getCellForEvent(e,t){var i=e.getCell();if(i==null&&t!=null&&(e.getGraphX()!=t.x||e.getGraphY()!=t.y)&&(i=this.graph.getCellAt(t.x,t.y)),i!=null&&!this.graph.isCellConnectable(i)){var n=this.graph.getModel().getParent(i);this.graph.getModel().isVertex(n)&&this.graph.isCellConnectable(n)&&(i=n)}return this.graph.isCellLocked(i)?null:i}update(e,t,i,n){if(this.isEnabled()&&!this.isEventIgnored(e)){this.mouseleaveHandler==null&&this.graph.container!=null&&(this.mouseleaveHandler=()=>{this.reset()},mxEvent$1.addListener(this.graph.container,"mouseleave",this.resetHandler));var s=this.getTolerance(e),l=n!=null?n.x:e.getGraphX(),a=n!=null?n.y:e.getGraphY(),o=new mxRectangle(l-s,a-s,2*s,2*s),h=new mxRectangle(e.getGraphX()-s,e.getGraphY()-s,2*s,2*s),d=this.graph.view.getState(this.getCellForEvent(e,n));!this.isKeepFocusEvent(e)&&(this.currentFocusArea==null||this.currentFocus==null||d!=null||!this.graph.getModel().isVertex(this.currentFocus.cell)||!mxUtils$1.intersects(this.currentFocusArea,h))&&d!=this.currentFocus&&(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(e,d,t)),this.currentConstraint=null,this.currentPoint=null;var m=null;if(this.focusIcons!=null&&this.constraints!=null&&(d==null||this.currentFocus==d))for(var g=h.getCenterX(),c=h.getCenterY(),f=0;f<this.focusIcons.length;f++){var C=g-this.focusIcons[f].bounds.getCenterX(),v=c-this.focusIcons[f].bounds.getCenterY(),w=C*C+v*v;if((this.intersects(this.focusIcons[f],h,t,i)||n!=null&&this.intersects(this.focusIcons[f],o,t,i))&&(m==null||w<m)){this.currentConstraint=this.constraints[f],this.currentPoint=this.focusPoints[f],m=w;var w=this.focusIcons[f].bounds.clone();if(w.grow(mxConstants$1.HIGHLIGHT_SIZE+1),w.width-=1,w.height-=1,this.focusHighlight==null){var S=this.createHighlightShape();S.dialect=this.graph.dialect==mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_SVG:mxConstants$1.DIALECT_VML,S.pointerEvents=!1,S.init(this.graph.getView().getOverlayPane()),this.focusHighlight=S;var T=()=>this.currentFocus!=null?this.currentFocus:d;mxEvent$1.redirectMouseEvents(S.node,this.graph,T)}this.focusHighlight.bounds=w,this.focusHighlight.redraw()}}this.currentConstraint==null&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null}redraw(){if(this.currentFocus!=null&&this.constraints!=null&&this.focusIcons!=null){var e=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=e,this.currentFocusArea=new mxRectangle(e.x,e.y,e.width,e.height);for(var t=0;t<this.constraints.length;t++){var i=this.graph.getConnectionPoint(e,this.constraints[t]),n=this.getImageForConstraint(e,this.constraints[t],i),s=new mxRectangle(Math.round(i.x-n.width/2),Math.round(i.y-n.height/2),n.width,n.height);this.focusIcons[t].bounds=s,this.focusIcons[t].redraw(),this.currentFocusArea.add(this.focusIcons[t].bounds),this.focusPoints[t]=i}}}setFocus(e,t,i){if(this.constraints=t!=null&&!this.isStateIgnored(t,i)&&this.graph.isCellConnectable(t.cell)?this.isEnabled()?this.graph.getAllConnectionConstraints(t,i)||[]:[]:null,this.constraints!=null){if(this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height),this.focusIcons!=null){for(var n=0;n<this.focusIcons.length;n++)this.focusIcons[n].destroy();this.focusIcons=null,this.focusPoints=null}this.focusPoints=[],this.focusIcons=[];for(var n=0;n<this.constraints.length;n++){var s=this.graph.getConnectionPoint(t,this.constraints[n]),l=this.getImageForConstraint(t,this.constraints[n],s),a=l.src,o=new mxRectangle(Math.round(s.x-l.width/2),Math.round(s.y-l.height/2),l.width,l.height),h=new mxImageShape(o,a);h.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,h.preserveImageAspect=!1,h.init(this.graph.getView().getDecoratorPane()),(mxClient.IS_QUIRKS||document.documentMode==8)&&mxEvent$1.addListener(h.node,"dragstart",function(g){return mxEvent$1.consume(g),!1}),h.node.previousSibling!=null&&h.node.parentNode.insertBefore(h.node,h.node.parentNode.firstChild);var d=()=>this.currentFocus!=null?this.currentFocus:t;h.redraw(),mxEvent$1.redirectMouseEvents(h.node,this.graph,d),this.currentFocusArea.add(h.bounds),this.focusIcons.push(h),this.focusPoints.push(s)}this.currentFocusArea.grow(this.getTolerance(e))}else this.destroyIcons(),this.destroyFocusHighlight()}createHighlightShape(){var e=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants$1.HIGHLIGHT_STROKEWIDTH);return e.opacity=mxConstants$1.HIGHLIGHT_OPACITY,e}intersects(e,t,i,n){return mxUtils$1.intersects(e.bounds,t)}destroy(){this.reset(),this.resetHandler!=null&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),this.mouseleaveHandler!=null&&this.graph.container!=null&&(mxEvent$1.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)}}class mxEdgeHandler{constructor(e){u(this,"graph",null),u(this,"state",null),u(this,"marker",null),u(this,"constraintHandler",null),u(this,"error",null),u(this,"shape",null),u(this,"bends",null),u(this,"labelShape",null),u(this,"cloneEnabled",!0),u(this,"addEnabled",!1),u(this,"removeEnabled",!1),u(this,"preferHtml",!1),u(this,"allowHandleBoundsCheck",!0),u(this,"handleImage",null),e!=null&&(this.state=e,this.init(),this.escapeHandler=(t,i)=>{var n=this.index!=null;this.reset(),n&&this.graph.cellRenderer.redraw(this.state,!1,e.view.isRendering())},this.state.view.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}init(){if(this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants$1.CURSOR_MOVABLE_EDGE),mxEvent$1.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=this.state.text!=null&&this.state.text.node.parentNode==this.graph.container,!this.preferHtml){var e=this.state.getVisibleTerminalState(!0);if(e!=null&&(this.preferHtml=e.text!=null&&e.text.node.parentNode==this.graph.container),!this.preferHtml){var t=this.state.getVisibleTerminalState(!1);t!=null&&(this.preferHtml=t.text!=null&&t.text.node.parentNode==this.graph.container)}}if(this.parentHighlightEnabled){var i=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(i)){var n=this.graph.view.getState(i);n!=null&&(this.parentHighlight=this.createParentHighlightShape(n),this.parentHighlight.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(n.style[mxConstants$1.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()))}}(this.graph.getSelectionCount()<mxGraphHandler.maxCells||mxGraphHandler.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants$1.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.redraw()}createCustomHandles(){return null}isVirtualBendsEnabled(e){return this.virtualBendsEnabled&&(this.state.style[mxConstants$1.STYLE_EDGE]==null||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.NONE||this.state.style[mxConstants$1.STYLE_NOEDGESTYLE]==1)&&mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_SHAPE,null)!="arrow"}isCellEnabled(e){return!0}isAddPointEvent(e){return mxEvent$1.isShiftDown(e)}isRemovePointEvent(e){return mxEvent$1.isShiftDown(e)}getSelectionPoints(e){return e.absolutePoints}createParentHighlightShape(e){var t=new mxRectangleShape(e,null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t}createSelectionShape(e){var t=new this.state.shape.constructor;return t.outline=!0,t.apply(this.state),t.isDashed=this.isSelectionDashed(),t.stroke=this.getSelectionColor(),t.isShadow=!1,t}getSelectionColor(){return mxConstants$1.EDGE_SELECTION_COLOR}getSelectionStrokeWidth(){return mxConstants$1.EDGE_SELECTION_STROKEWIDTH}isSelectionDashed(){return mxConstants$1.EDGE_SELECTION_DASHED}isConnectableCell(e){return!0}getCellAt(e,t){return this.outlineConnect?null:this.graph.getCellAt(e,t)}createMarker(){var e=new EdgeCellMarker(this,this.graph);return e}validateConnection(e,t){return this.graph.getEdgeValidationError(this.state.cell,e,t)}createBends(){for(var e=this.state.cell,t=[],i=0;i<this.abspoints.length;i++)if(this.isHandleVisible(i)){var n=i==0,s=i==this.abspoints.length-1,l=n||s;(l||this.graph.isCellBendable(e))&&(a=>{var o=this.createHandleShape(a);this.initBend(o,()=>()=>{this.dblClickRemoveEnabled&&this.removePoint(this.state,a)}),this.isHandleEnabled(i)&&o.setCursor(l?mxConstants$1.CURSOR_TERMINAL_HANDLE:mxConstants$1.CURSOR_BEND_HANDLE),t.push(o),l||(this.points.push(new mxPoint(0,0)),o.node.style.visibility="hidden")})(i)}return t}createVirtualBends(){var e=this.state.cell;this.abspoints[0];var t=[];if(this.graph.isCellBendable(e))for(var i=1;i<this.abspoints.length;i++)(n=>{this.initBend(n),n.setCursor(mxConstants$1.CURSOR_VIRTUAL_BEND_HANDLE),t.push(n)})(this.createHandleShape());return t}isHandleEnabled(e){return!0}isHandleVisible(e){var t=this.state.getVisibleTerminalState(!0),i=this.state.getVisibleTerminalState(!1),n=this.graph.getCellGeometry(this.state.cell),s=n!=null?this.graph.view.getEdgeStyle(this.state,n.points,t,i):null;return s!=mxEdgeStyle.EntityRelation||e==0||e==this.abspoints.length-1}createHandleShape(e){if(this.handleImage!=null){var t=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return t.preserveImageAspect=!1,t}else{var i=mxConstants$1.HANDLE_SIZE;return this.preferHtml&&(i-=1),new mxRectangleShape(new mxRectangle(0,0,i,i),mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}}createLabelHandleShape(){if(this.labelHandleImage!=null){var e=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return e.preserveImageAspect=!1,e}else{var t=mxConstants$1.LABEL_HANDLE_SIZE;return new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants$1.LABEL_HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}}initBend(e,t){this.preferHtml?(e.dialect=mxConstants$1.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(e.node,this.graph,this.state,null,null,null,t),(mxClient.IS_QUIRKS||document.documentMode==8)&&mxEvent$1.addListener(e.node,"dragstart",function(i){return mxEvent$1.consume(i),!1}),mxClient.IS_TOUCH&&e.node.setAttribute("pointer-events","none")}getHandleForEvent(e){var t=mxEvent$1.isMouseEvent(e.getEvent())?1:this.tolerance,i=this.allowHandleBoundsCheck&&t>0?new mxRectangle(e.getGraphX()-t,e.getGraphY()-t,2*t,2*t):null,n=null,s=null;function l(o){if(o!=null&&o.node!=null&&o.node.style.display!="none"&&o.node.style.visibility!="hidden"&&(e.isSource(o)||i!=null&&mxUtils$1.intersects(o.bounds,i))){var h=e.getGraphX()-o.bounds.getCenterX(),d=e.getGraphY()-o.bounds.getCenterY(),m=h*h+d*d;if(n==null||m<=n)return n=m,!0}return!1}if(this.customHandles!=null&&this.isCustomHandleEvent(e)){for(var a=this.customHandles.length-1;a>=0;a--)if(l(this.customHandles[a].shape))return mxEvent$1.CUSTOM_HANDLE-a}if((e.isSource(this.state.text)||l(this.labelShape))&&(s=mxEvent$1.LABEL_HANDLE),this.bends!=null)for(var a=0;a<this.bends.length;a++)l(this.bends[a])&&(s=a);if(this.virtualBends!=null&&this.isAddVirtualBendEvent(e))for(var a=0;a<this.virtualBends.length;a++)l(this.virtualBends[a])&&(s=mxEvent$1.VIRTUAL_HANDLE-a);return s}isAddVirtualBendEvent(e){return!0}isCustomHandleEvent(e){return!0}mouseDown(e,t){var i=this.getHandleForEvent(t);if(this.bends!=null&&this.bends[i]!=null){var n=this.bends[i].bounds;this.snapPoint=new mxPoint(n.getCenterX(),n.getCenterY())}this.addEnabled&&i==null&&this.isAddPointEvent(t.getEvent())?(this.addPoint(this.state,t.getEvent()),t.consume()):i!=null&&!t.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(t.getEvent())?this.removePoint(this.state,i):(i!=mxEvent$1.LABEL_HANDLE||this.graph.isLabelMovable(t.getCell()))&&(i<=mxEvent$1.VIRTUAL_HANDLE&&mxUtils$1.setOpacity(this.virtualBends[mxEvent$1.VIRTUAL_HANDLE-i].node,100),this.start(t.getX(),t.getY(),i)),t.consume())}start(e,t,i){if(this.startX=e,this.startY=t,this.isSource=this.bends==null?!1:i==0,this.isTarget=this.bends==null?!1:i==this.bends.length-1,this.isLabel=i==mxEvent$1.LABEL_HANDLE,this.isSource||this.isTarget){var n=this.state.cell,s=this.graph.model.getTerminal(n,this.isSource);(s==null&&this.graph.isTerminalPointMovable(n,this.isSource)||s!=null&&this.graph.isCellDisconnectable(n,s,this.isSource))&&(this.index=i)}else this.index=i;if(this.index<=mxEvent$1.CUSTOM_HANDLE&&this.index>mxEvent$1.VIRTUAL_HANDLE&&this.customHandles!=null)for(var l=0;l<this.customHandles.length;l++)l!=mxEvent$1.CUSTOM_HANDLE-this.index&&this.customHandles[l].setVisible(!1)}clonePreviewState(e,t){return this.state.clone()}getSnapToTerminalTolerance(){return this.graph.gridSize*this.graph.view.scale/2}updateHint(e,t){}removeHint(){}roundLength(e){return Math.round(e)}isSnapToTerminalsEvent(e){return this.snapToTerminals&&!mxEvent$1.isAltDown(e.getEvent())}getPointForEvent(e){var t=this.graph.getView(),i=t.scale,n=new mxPoint(this.roundLength(e.getGraphX()/i)*i,this.roundLength(e.getGraphY()/i)*i),s=this.getSnapToTerminalTolerance(),l=!1,a=!1;if(s>0&&this.isSnapToTerminalsEvent(e)){let d=function(g){if(g!=null){var c=g.x;Math.abs(n.x-c)<s&&(n.x=c,l=!0);var f=g.y;Math.abs(n.y-f)<s&&(n.y=f,a=!0)}},m=function(g){g!=null&&d.call(this,new mxPoint(t.getRoutingCenterX(g),t.getRoutingCenterY(g)))};if(m.call(this,this.state.getVisibleTerminalState(!0)),m.call(this,this.state.getVisibleTerminalState(!1)),this.state.absolutePoints!=null)for(var o=0;o<this.state.absolutePoints.length;o++)d.call(this,this.state.absolutePoints[o])}if(this.graph.isGridEnabledEvent(e.getEvent())){var h=t.translate;l||(n.x=(this.graph.snap(n.x/i-h.x)+h.x)*i),a||(n.y=(this.graph.snap(n.y/i-h.y)+h.y)*i)}return n}getPreviewTerminalState(e){if(this.constraintHandler.update(e,this.isSource,!0,e.isSource(this.marker.highlight.shape)?null:this.currentPoint),this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null){this.marker.highlight!=null&&this.marker.highlight.state!=null&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?this.marker.highlight.shape.stroke!="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent");var t=this.graph.getModel(),i=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(t.getTerminal(this.state.cell,!this.isSource)),!this.isSource),n=i!=null?i.cell:null,s=this.isSource?this.constraintHandler.currentFocus.cell:n,l=this.isSource?n:this.constraintHandler.currentFocus.cell;this.error=this.validateConnection(s,l);var a=null;return this.error==null&&(a=this.constraintHandler.currentFocus),(this.error!=null||a!=null&&!this.isCellEnabled(a.cell))&&this.constraintHandler.reset(),a}else{if(this.graph.isIgnoreTerminalEvent(e.getEvent()))return this.marker.reset(),null;this.marker.process(e);var o=this.marker.getValidState();return o!=null&&!this.isCellEnabled(o.cell)&&(this.constraintHandler.reset(),this.marker.reset()),this.marker.getValidState()}}getPreviewPoints(e,t){var i=this.graph.getCellGeometry(this.state.cell),n=i.points!=null?i.points.slice():null,s=new mxPoint(e.x,e.y),l=null;if(!this.isSource&&!this.isTarget)if(this.convertPoint(s,!1),n==null)n=[s];else{if(this.index<=mxEvent$1.VIRTUAL_HANDLE&&n.splice(mxEvent$1.VIRTUAL_HANDLE-this.index,0,s),!this.isSource&&!this.isTarget){for(var a=0;a<this.bends.length;a++)if(a!=this.index){var o=this.bends[a];o!=null&&mxUtils$1.contains(o.bounds,e.x,e.y)&&(this.index<=mxEvent$1.VIRTUAL_HANDLE?n.splice(mxEvent$1.VIRTUAL_HANDLE-this.index,1):n.splice(this.index-1,1),l=n)}if(l==null&&this.straightRemoveEnabled&&(t==null||!mxEvent$1.isAltDown(t.getEvent()))){let f=function(C,v){C>0&&C<d.length-1&&mxUtils$1.ptSegDistSq(d[C-1].x,d[C-1].y,d[C+1].x,d[C+1].y,v.x,v.y)<h&&(n.splice(C-1,1),l=n)};var h=this.graph.tolerance*this.graph.tolerance,d=this.state.absolutePoints.slice();d[this.index]=e;var m=this.state.getVisibleTerminalState(!0);if(m!=null){var g=this.graph.getConnectionConstraint(this.state,m,!0);(g==null||this.graph.getConnectionPoint(m,g)==null)&&(d[0]=new mxPoint(m.view.getRoutingCenterX(m),m.view.getRoutingCenterY(m)))}var c=this.state.getVisibleTerminalState(!1);if(c!=null){var g=this.graph.getConnectionConstraint(this.state,c,!1);(g==null||this.graph.getConnectionPoint(c,g)==null)&&(d[d.length-1]=new mxPoint(c.view.getRoutingCenterX(c),c.view.getRoutingCenterY(c)))}f(this.index,e)}}l==null&&this.index>mxEvent$1.VIRTUAL_HANDLE&&(n[this.index-1]=s)}else this.graph.resetEdgesOnConnect&&(n=null);return l??n}isOutlineConnectEvent(e){var t=mxUtils$1.getOffset(this.graph.container),i=e.getEvent(),n=mxEvent$1.getClientX(i),s=mxEvent$1.getClientY(i),l=document.documentElement,a=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),o=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),h=this.currentPoint.x-this.graph.container.scrollLeft+t.x-a,d=this.currentPoint.y-this.graph.container.scrollTop+t.y-o;return this.outlineConnect&&!mxEvent$1.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent$1.isAltDown(e.getEvent())&&e.getState()!=null||this.marker.highlight.isHighlightAt(n,s)||(h!=n||d!=s)&&e.getState()==null&&this.marker.highlight.isHighlightAt(h,d))}updatePreviewState(e,t,i,n,s){var l=this.isSource?i:this.state.getVisibleTerminalState(!0),a=this.isTarget?i:this.state.getVisibleTerminalState(!1),o=this.graph.getConnectionConstraint(e,l,!0),h=this.graph.getConnectionConstraint(e,a,!1),d=this.constraintHandler.currentConstraint;if(d==null&&s&&(i!=null?(n.isSource(this.marker.highlight.shape)&&(t=new mxPoint(n.getGraphX(),n.getGraphY())),d=this.graph.getOutlineConstraint(t,i,n),this.constraintHandler.setFocus(n,i,this.isSource),this.constraintHandler.currentConstraint=d,this.constraintHandler.currentPoint=t):d=new mxConnectionConstraint),this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){var m=this.graph.view.scale;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null?(this.marker.highlight.shape.stroke=s?mxConstants$1.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants$1.OUTLINE_HIGHLIGHT_STROKEWIDTH/m/m,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(n.getCell())&&this.marker.getValidState()!=n.getState()?"transparent":mxConstants$1.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.HIGHLIGHT_STROKEWIDTH/m/m,this.marker.highlight.repaint())}this.isSource?o=d:this.isTarget&&(h=d),(this.isSource||this.isTarget)&&(d!=null&&d.point!=null?(e.style[this.isSource?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X]=d.point.x,e.style[this.isSource?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y]=d.point.y):(delete e.style[this.isSource?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X],delete e.style[this.isSource?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y])),e.setVisibleTerminalState(l,!0),e.setVisibleTerminalState(a,!1),(!this.isSource||l!=null)&&e.view.updateFixedTerminalPoint(e,l,!0,o),(!this.isTarget||a!=null)&&e.view.updateFixedTerminalPoint(e,a,!1,h),(this.isSource||this.isTarget)&&i==null&&(e.setAbsoluteTerminalPoint(t,this.isSource),this.marker.getMarkedState()==null&&(this.error=this.graph.allowDanglingEdges?null:"")),e.view.updatePoints(e,this.points,l,a),e.view.updateFloatingTerminalPoints(e,l,a)}mouseMove(e,t){if(this.index!=null&&this.marker!=null){if(this.currentPoint=this.getPointForEvent(t),this.error=null,!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent$1.isShiftDown(t.getEvent())&&this.snapPoint!=null&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent$1.CUSTOM_HANDLE&&this.index>mxEvent$1.VIRTUAL_HANDLE)this.customHandles!=null&&(this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].processEvent(t),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].positionChanged());else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,t);var i=this.isSource||this.isTarget?this.getPreviewTerminalState(t):null;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null)this.currentPoint=this.constraintHandler.currentPoint.clone();else if(this.outlineConnect){var n=this.isSource||this.isTarget?this.isOutlineConnectEvent(t):!1;n?i=this.marker.highlight.state:i!=null&&i!=t.getState()&&this.graph.isCellConnectable(t.getCell())&&this.marker.highlight.shape!=null&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),i=null)}i!=null&&!this.isCellEnabled(i.cell)&&(i=null,this.marker.reset());var s=this.clonePreviewState(this.currentPoint,i!=null?i.cell:null);this.updatePreviewState(s,this.currentPoint,i,t,n);var l=this.error==null?this.marker.validColor:this.marker.invalidColor;this.setPreviewColor(l),this.abspoints=s.absolutePoints,this.active=!0,this.updateHint(t,this.currentPoint)}this.drawPreview(),mxEvent$1.consume(t.getEvent()),t.consume()}}mouseUp(e,t){if(this.index!=null&&this.marker!=null){var i=this.state.cell,n=this.index;if(this.index=null,t.getX()!=this.startX||t.getY()!=this.startY){var s=!this.graph.isIgnoreTerminalEvent(t.getEvent())&&this.graph.isCloneEvent(t.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(this.error!=null)this.error.length>0&&this.graph.validationAlert(this.error);else if(n<=mxEvent$1.CUSTOM_HANDLE&&n>mxEvent$1.VIRTUAL_HANDLE){if(this.customHandles!=null){var l=this.graph.getModel();l.beginUpdate();try{this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].execute(t)}finally{l.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var a=null;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&(a=this.constraintHandler.currentFocus.cell),a==null&&this.marker.hasValidState()&&this.marker.highlight!=null&&this.marker.highlight.shape!=null&&this.marker.highlight.shape.stroke!="transparent"&&this.marker.highlight.shape.stroke!="white"&&(a=this.marker.validState.cell),a!=null){var l=this.graph.getModel(),o=l.getParent(i);l.beginUpdate();try{if(s){var h=l.getGeometry(i),s=this.graph.cloneCell(i);l.add(o,s,l.getChildCount(o)),h!=null&&(h=h.clone(),l.setGeometry(s,h));var d=l.getTerminal(i,!this.isSource);this.graph.connectCell(s,d,!this.isSource),i=s}i=this.connect(i,a,this.isSource,s,t)}finally{l.endUpdate()}}else if(this.graph.isAllowDanglingEdges()){var m=this.abspoints[this.isSource?0:this.abspoints.length-1];m.x=this.roundLength(m.x/this.graph.view.scale-this.graph.view.translate.x),m.y=this.roundLength(m.y/this.graph.view.scale-this.graph.view.translate.y);var g=this.graph.getView().getState(this.graph.getModel().getParent(i));g!=null&&(m.x-=g.origin.x,m.y-=g.origin.y),m.x-=this.graph.panDx/this.graph.view.scale,m.y-=this.graph.panDy/this.graph.view.scale,i=this.changeTerminalPoint(i,m,this.isSource,s)}}else this.active?i=this.changePoints(i,this.points,s):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(t.getEvent())&&this.graph.selectCellForEvent(this.state.cell,t.getEvent());this.marker!=null&&(this.reset(),i!=this.state.cell&&this.graph.setSelectionCell(i)),t.consume()}}reset(){if(this.active&&this.refresh(),this.error=null,this.index=null,this.label=null,this.points=null,this.snapPoint=null,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.active=!1,this.livePreview&&this.sizers!=null)for(var e=0;e<this.sizers.length;e++)this.sizers[e]!=null&&(this.sizers[e].node.style.display="");if(this.marker!=null&&this.marker.reset(),this.constraintHandler!=null&&this.constraintHandler.reset(),this.customHandles!=null)for(var e=0;e<this.customHandles.length;e++)this.customHandles[e].reset();this.setPreviewColor(mxConstants$1.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()}setPreviewColor(e){this.shape!=null&&(this.shape.stroke=e)}convertPoint(e,t){var i=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/i-n.x),e.y=Math.round(e.y/i-n.y);var s=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell));return s!=null&&(e.x-=s.origin.x,e.y-=s.origin.y),e}moveLabel(e,t,i){var n=this.graph.getModel(),s=n.getGeometry(e.cell);if(s!=null){var l=this.graph.getView().scale;if(s=s.clone(),s.relative){var a=this.graph.getView().getRelativePoint(e,t,i);s.x=Math.round(a.x*1e4)/1e4,s.y=Math.round(a.y),s.offset=new mxPoint(0,0);var a=this.graph.view.getPoint(e,s);s.offset=new mxPoint(Math.round((t-a.x)/l),Math.round((i-a.y)/l))}else{var o=e.absolutePoints,h=o[0],d=o[o.length-1];if(h!=null&&d!=null){var m=h.x+(d.x-h.x)/2,g=h.y+(d.y-h.y)/2;s.offset=new mxPoint(Math.round((t-m)/l),Math.round((i-g)/l)),s.x=0,s.y=0}}n.setGeometry(e.cell,s)}}connect(e,t,i,n,s){var l=this.graph.getModel();l.getParent(e),l.beginUpdate();try{var a=this.constraintHandler.currentConstraint;a==null&&(a=new mxConnectionConstraint),this.graph.connectCell(e,t,i,a)}finally{l.endUpdate()}return e}changeTerminalPoint(e,t,i,n){var s=this.graph.getModel();s.beginUpdate();try{if(n){var l=s.getParent(e),a=s.getTerminal(e,!i);e=this.graph.cloneCell(e),s.add(l,e,s.getChildCount(l)),s.setTerminal(e,a,!i)}var o=s.getGeometry(e);o!=null&&(o=o.clone(),o.setTerminalPoint(t,i),s.setGeometry(e,o),this.graph.connectCell(e,null,i,new mxConnectionConstraint))}finally{s.endUpdate()}return e}changePoints(e,t,i){var n=this.graph.getModel();n.beginUpdate();try{if(i){var s=n.getParent(e),l=n.getTerminal(e,!0),a=n.getTerminal(e,!1);e=this.graph.cloneCell(e),n.add(s,e,n.getChildCount(s)),n.setTerminal(e,l,!0),n.setTerminal(e,a,!1)}var o=n.getGeometry(e);o!=null&&(o=o.clone(),o.points=t,n.setGeometry(e,o))}finally{n.endUpdate()}return e}addPoint(e,t){var i=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(t),mxEvent$1.getClientY(t)),n=this.graph.isGridEnabledEvent(t);this.convertPoint(i,n),this.addPointAt(e,i.x,i.y),mxEvent$1.consume(t)}addPointAt(e,t,i){var n=this.graph.getCellGeometry(e.cell),s=new mxPoint(t,i);if(n!=null){n=n.clone();var l=this.graph.view.translate,a=this.graph.view.scale,o=new mxPoint(l.x*a,l.y*a),h=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(h)){var d=this.graph.view.getState(h);o=new mxPoint(d.x,d.y)}var m=mxUtils$1.findNearestSegment(e,s.x*a+o.x,s.y*a+o.y);n.points==null?n.points=[s]:n.points.splice(m,0,s),this.graph.getModel().setGeometry(e.cell,n),this.refresh(),this.redraw()}}removePoint(e,t){if(t>0&&t<this.abspoints.length-1){var i=this.graph.getCellGeometry(this.state.cell);i!=null&&i.points!=null&&(i=i.clone(),i.points.splice(t-1,1),this.graph.getModel().setGeometry(e.cell,i),this.refresh(),this.redraw())}}getHandleFillColor(e){var t=e==0,i=this.state.cell,n=this.graph.getModel().getTerminal(i,t),s=mxConstants$1.HANDLE_FILLCOLOR;return n!=null&&!this.graph.isCellDisconnectable(i,n,t)||n==null&&!this.graph.isTerminalPointMovable(i,t)?s=mxConstants$1.LOCKED_HANDLE_FILLCOLOR:n!=null&&this.graph.isCellDisconnectable(i,n,t)&&(s=mxConstants$1.CONNECT_HANDLE_FILLCOLOR),s}redraw(e){this.abspoints=this.state.absolutePoints.slice();var t=this.graph.getModel().getGeometry(this.state.cell);if(t!=null){var i=t.points;if(this.bends!=null&&this.bends.length>0&&i!=null){this.points==null&&(this.points=[]);for(var n=1;n<this.bends.length-1;n++)this.bends[n]!=null&&this.abspoints[n]!=null&&(this.points[n-1]=i[n-1])}}this.drawPreview(),e||this.redrawHandles()}redrawHandles(){var e=this.state.cell,t=this.labelShape.bounds;this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height);var i=this.graph.getLabel(e);if(this.labelShape.visible=i!=null&&i.length>0&&this.graph.isLabelMovable(e),this.bends!=null&&this.bends.length>0){var n=this.abspoints.length-1,s=this.abspoints[0],l=s.x,a=s.y;t=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(l-t.width/2),Math.floor(a-t.height/2),t.width,t.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);var o=this.abspoints[n],h=o.x,d=o.y,m=this.bends.length-1;t=this.bends[m].bounds,this.bends[m].bounds=new mxRectangle(Math.floor(h-t.width/2),Math.floor(d-t.height/2),t.width,t.height),this.bends[m].fill=this.getHandleFillColor(m),this.bends[m].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[m].bounds),this.redrawInnerBends(s,o)}if(this.abspoints!=null&&this.virtualBends!=null&&this.virtualBends.length>0){for(var g=this.abspoints[0],c=0;c<this.virtualBends.length;c++)if(this.virtualBends[c]!=null&&this.abspoints[c+1]!=null){var f=this.abspoints[c+1],t=this.virtualBends[c],C=g.x+(f.x-g.x)/2,v=g.y+(f.y-g.y)/2;t.bounds=new mxRectangle(Math.floor(C-t.bounds.width/2),Math.floor(v-t.bounds.height/2),t.bounds.width,t.bounds.height),t.redraw(),mxUtils$1.setOpacity(t.node,this.virtualBendOpacity),g=f,this.manageLabelHandle&&this.checkLabelHandle(t.bounds)}}if(this.labelShape!=null&&this.labelShape.redraw(),this.customHandles!=null)for(var c=0;c<this.customHandles.length;c++){var w=this.customHandles[c].shape.node.style.display;this.customHandles[c].redraw(),this.customHandles[c].shape.node.style.display=w,this.customHandles[c].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[c])?"":"hidden"}}isCustomHandleVisible(e){return!this.graph.isEditing()&&this.state.view.graph.getSelectionCount()==1}setHandlesVisible(e){if(this.bends!=null)for(var t=0;t<this.bends.length;t++)this.bends[t].node.style.display=e?"":"none";if(this.virtualBends!=null)for(var t=0;t<this.virtualBends.length;t++)this.virtualBends[t].node.style.display=e?"":"none";if(this.labelShape!=null&&(this.labelShape.node.style.display=e?"":"none"),this.customHandles!=null)for(var t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)}redrawInnerBends(e,t){for(var i=1;i<this.bends.length-1;i++)if(this.bends[i]!=null)if(this.abspoints[i]!=null){var n=this.abspoints[i].x,s=this.abspoints[i].y,l=this.bends[i].bounds;if(this.bends[i].node.style.visibility="visible",this.bends[i].bounds=new mxRectangle(Math.round(n-l.width/2),Math.round(s-l.height/2),l.width,l.height),this.manageLabelHandle)this.checkLabelHandle(this.bends[i].bounds);else if(this.handleImage==null&&this.labelShape.visible&&mxUtils$1.intersects(this.bends[i].bounds,this.labelShape.bounds)){var a=mxConstants$1.HANDLE_SIZE+3,o=mxConstants$1.HANDLE_SIZE+3;this.bends[i].bounds=new mxRectangle(Math.round(n-a/2),Math.round(s-o/2),a,o)}this.bends[i].redraw()}else this.bends[i].destroy(),this.bends[i]=null}checkLabelHandle(e){if(this.labelShape!=null){var t=this.labelShape.bounds;mxUtils$1.intersects(e,t)&&(e.getCenterY()<t.getCenterY()?t.y=e.y+e.height:t.y=e.y-t.height)}}drawPreview(){if(this.isLabel){var e=this.labelShape.bounds,t=new mxRectangle(Math.round(this.label.x-e.width/2),Math.round(this.label.y-e.height/2),e.width,e.height);this.labelShape.bounds.equals(t)||(this.labelShape.bounds=t,this.labelShape.redraw())}this.shape!=null&&!mxUtils$1.equalPoints(this.shape.points,this.abspoints)&&(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.parentHighlight!=null&&this.parentHighlight.redraw()}refresh(){this.abspoints=this.getSelectionPoints(this.state),this.points=[],this.bends!=null&&(this.destroyBends(this.bends),this.bends=this.createBends()),this.virtualBends!=null&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),this.customHandles!=null&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),this.labelShape!=null&&this.labelShape.node!=null&&this.labelShape.node.parentNode!=null&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)}destroyBends(e){if(e!=null)for(var t=0;t<e.length;t++)e[t]!=null&&e[t].destroy()}destroy(){this.escapeHandler!=null&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.marker!=null&&(this.marker.destroy(),this.marker=null),this.shape!=null&&(this.shape.destroy(),this.shape=null),this.parentHighlight!=null&&(this.parentHighlight.destroy(),this.parentHighlight=null),this.labelShape!=null&&(this.labelShape.destroy(),this.labelShape=null),this.constraintHandler!=null&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()}}u(mxEdgeHandler,"dblClickRemoveEnabled",!1),u(mxEdgeHandler,"mergeRemoveEnabled",!1),u(mxEdgeHandler,"straightRemoveEnabled",!1),u(mxEdgeHandler,"virtualBendsEnabled",!1),u(mxEdgeHandler,"virtualBendOpacity",20),u(mxEdgeHandler,"parentHighlightEnabled",!1),u(mxEdgeHandler,"snapToTerminals",!1),u(mxEdgeHandler,"tolerance",0),u(mxEdgeHandler,"outlineConnect",!1),u(mxEdgeHandler,"manageLabelHandle",!1);let mxElbowEdgeHandler$1=class extends mxEdgeHandler{constructor(e){super(e),u(this,"flipEnabled",!0),u(this,"doubleClickOrientationResource",mxClient.language!="none"?"doubleClickOrientation":"")}createBends(){var e=[],t=this.createHandleShape(0);return this.initBend(t),t.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),e.push(t),e.push(this.createVirtualBend(i=>{!mxEvent$1.isConsumed(i)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,i),mxEvent$1.consume(i))})),this.points.push(new mxPoint(0,0)),t=this.createHandleShape(2),this.initBend(t),t.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),e.push(t),e}createVirtualBend(e){var t=this.createHandleShape();return this.initBend(t,e),t.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(t.node.style.display="none"),t}getCursorForBend(){return this.state.style[mxConstants$1.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants$1.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.EDGESTYLE_ELBOW)&&this.state.style[mxConstants$1.STYLE_ELBOW]==mxConstants$1.ELBOW_VERTICAL?"row-resize":"col-resize"}getTooltipForNode(e){var t=null;return this.bends!=null&&this.bends[1]!=null&&(e==this.bends[1].node||e.parentNode==this.bends[1].node)&&(t=this.doubleClickOrientationResource,t=mxResources$1.get(t)||t),t}convertPoint(e,t){var i=this.graph.getView().getScale(),n=this.graph.getView().getTranslate(),s=this.state.origin;return t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/i-n.x-s.x),e.y=Math.round(e.y/i-n.y-s.y),e}redrawInnerBends(e,t){var i=this.graph.getModel().getGeometry(this.state.cell),n=this.state.absolutePoints,s=null;n.length>1?(e=n[1],t=n[n.length-2]):i.points!=null&&i.points.length>0&&(s=n[0]),s==null?s=new mxPoint(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2):s=new mxPoint(this.graph.getView().scale*(s.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(s.y+this.graph.getView().translate.y+this.state.origin.y));var l=this.bends[1].bounds,a=l.width,o=l.height,h=new mxRectangle(Math.round(s.x-a/2),Math.round(s.y-o/2),a,o);this.manageLabelHandle?this.checkLabelHandle(h):this.handleImage==null&&this.labelShape.visible&&mxUtils$1.intersects(h,this.labelShape.bounds)&&(a=mxConstants$1.HANDLE_SIZE+3,o=mxConstants$1.HANDLE_SIZE+3,h=new mxRectangle(Math.floor(s.x-a/2),Math.floor(s.y-o/2),a,o)),this.bends[1].bounds=h,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)}};class mxEdgeSegmentHandler extends mxElbowEdgeHandler$1{constructor(e){super(e)}getCurrentPoints(){var e=this.state.absolutePoints;if(e!=null){var t=Math.max(1,this.graph.view.scale);if(e.length==2||e.length==3&&(Math.abs(e[0].x-e[1].x)<t&&Math.abs(e[1].x-e[2].x)<t||Math.abs(e[0].y-e[1].y)<t&&Math.abs(e[1].y-e[2].y)<t)){var i=e[0].x+(e[e.length-1].x-e[0].x)/2,n=e[0].y+(e[e.length-1].y-e[0].y)/2;e=[e[0],new mxPoint(i,n),new mxPoint(i,n),e[e.length-1]]}}return e}getPreviewPoints(e){if(this.isSource||this.isTarget)return super.getPreviewPoints(e);var t=this.getCurrentPoints(),i=this.convertPoint(t[0].clone(),!1);e=this.convertPoint(e.clone(),!1);for(var n=[],s=1;s<t.length;s++){var l=this.convertPoint(t[s].clone(),!1);s==this.index&&(Math.round(i.x-l.x)==0&&(i.x=e.x,l.x=e.x),Math.round(i.y-l.y)==0&&(i.y=e.y,l.y=e.y)),s<t.length-1&&n.push(l),i=l}if(n.length==1){var a=this.state.getVisibleTerminalState(!0),o=this.state.getVisibleTerminalState(!1),h=this.state.view.getScale(),d=this.state.view.getTranslate(),m=n[0].x*h+d.x,g=n[0].y*h+d.y;(a!=null&&mxUtils$1.contains(a,m,g)||o!=null&&mxUtils$1.contains(o,m,g))&&(n=[e,e])}return n}updatePreviewState(e,t,i,n){if(super.updatePreviewState(e,t,i,n),!this.isSource&&!this.isTarget){t=this.convertPoint(t.clone(),!1);for(var s=e.absolutePoints,l=s[0],a=s[1],o=[],h=2;h<s.length;h++){var d=s[h];(Math.round(l.x-a.x)!=0||Math.round(a.x-d.x)!=0)&&(Math.round(l.y-a.y)!=0||Math.round(a.y-d.y)!=0)&&o.push(this.convertPoint(a.clone(),!1)),l=a,a=d}var m=this.state.getVisibleTerminalState(!0),g=this.state.getVisibleTerminalState(!1),c=this.state.absolutePoints;if(o.length==0&&(Math.round(s[0].x-s[s.length-1].x)==0||Math.round(s[0].y-s[s.length-1].y)==0))o=[t,t];else if(s.length==5&&o.length==2&&m!=null&&g!=null&&c!=null&&Math.round(c[0].x-c[c.length-1].x)==0){var f=this.graph.getView(),C=f.getScale(),v=f.getTranslate(),w=f.getRoutingCenterY(m)/C-v.y,S=this.graph.getConnectionConstraint(e,m,!0);if(S!=null){var T=this.graph.getConnectionPoint(m,S);T!=null&&(this.convertPoint(T,!1),w=T.y)}var P=f.getRoutingCenterY(g)/C-v.y,L=this.graph.getConnectionConstraint(e,g,!1);if(L){var T=this.graph.getConnectionPoint(g,L);T!=null&&(this.convertPoint(T,!1),P=T.y)}o=[new mxPoint(t.x,w),new mxPoint(t.x,P)]}this.points=o,e.view.updateFixedTerminalPoints(e,m,g),e.view.updatePoints(e,this.points,m,g),e.view.updateFloatingTerminalPoints(e,m,g)}}connect(e,t,i,n,s){var l=this.graph.getModel(),a=l.getGeometry(e),o=null;if(a!=null&&a.points!=null&&a.points.length>0){var h=this.abspoints,d=h[0],m=h[1];o=[];for(var g=2;g<h.length;g++){var c=h[g];(Math.round(d.x-m.x)!=0||Math.round(m.x-c.x)!=0)&&(Math.round(d.y-m.y)!=0||Math.round(m.y-c.y)!=0)&&o.push(this.convertPoint(m.clone(),!1)),d=m,m=c}}l.beginUpdate();try{if(o!=null){var a=l.getGeometry(e);a!=null&&(a=a.clone(),a.points=o,l.setGeometry(e,a))}e=super.connect(e,t,i,n,s)}finally{l.endUpdate()}return e}getTooltipForNode(e){return null}start(e,t,i){super.start(e,t,i),this.bends!=null&&this.bends[i]!=null&&!this.isSource&&!this.isTarget&&mxUtils$1.setOpacity(this.bends[i].node,100)}createBends(){var e=[],s=this.createHandleShape(0);this.initBend(s),s.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),e.push(s);var t=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){this.points==null&&(this.points=[]);for(var i=0;i<t.length-1;i++){s=this.createVirtualBend(),e.push(s);var n=Math.round(t[i].x-t[i+1].x)==0;Math.round(t[i].y-t[i+1].y)==0&&i<t.length-2&&(n=Math.round(t[i].x-t[i+2].x)==0),s.setCursor(n?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}var s=this.createHandleShape(t.length);return this.initBend(s),s.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),e.push(s),e}redraw(){this.refresh(),super.redraw()}redrawInnerBends(e,t){if(this.graph.isCellBendable(this.state.cell)){var i=this.getCurrentPoints();if(i!=null&&i.length>1){var n=!1;if(i.length==4&&Math.round(i[1].x-i[2].x)==0&&Math.round(i[1].y-i[2].y)==0)if(n=!0,Math.round(i[0].y-i[i.length-1].y)==0){var s=i[0].x+(i[i.length-1].x-i[0].x)/2;i[1]=new mxPoint(s,i[1].y),i[2]=new mxPoint(s,i[2].y)}else{var l=i[0].y+(i[i.length-1].y-i[0].y)/2;i[1]=new mxPoint(i[1].x,l),i[2]=new mxPoint(i[2].x,l)}for(var a=0;a<i.length-1;a++)if(this.bends[a+1]!=null){var e=i[a],t=i[a+1],o=new mxPoint(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2),h=this.bends[a+1].bounds;this.bends[a+1].bounds=new mxRectangle(Math.floor(o.x-h.width/2),Math.floor(o.y-h.height/2),h.width,h.height),this.bends[a+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[a+1].bounds)}n&&(mxUtils$1.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils$1.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}}}class mxEllipse extends mxShape{constructor(e,t,i,n){super(),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}paintVertexShape(e,t,i,n,s){e.ellipse(t,i,n,s),e.fillAndStroke()}}class mxVertexHandler{constructor(e){u(this,"graph",null),u(this,"state",null),u(this,"singleSizer",!1),u(this,"index",null),u(this,"allowHandleBoundsCheck",!0),u(this,"handleImage",null),u(this,"tolerance",0),u(this,"rotationEnabled",!0),u(this,"parentHighlightEnabled",!1),u(this,"rotationRaster",!0),u(this,"rotationCursor","crosshair"),u(this,"constrainGroupByChildren",!1),u(this,"horizontalOffset",0),u(this,"verticalOffset",0),e!=null&&(this.state=e,this.init(),this.escapeHandler=(t,i)=>{this.livePreview&&this.index!=null&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()},this.state.view.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}init(){if(this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants$1.CURSOR_MOVABLE_VERTEX),mxGraphHandler.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.maxCells){var e=this.graph.isCellResizable(this.state.cell);if(this.sizers=[],e||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){var t=0;e&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",t++)),this.sizers.push(this.createSizer("n-resize",t++)),this.sizers.push(this.createSizer("ne-resize",t++)),this.sizers.push(this.createSizer("w-resize",t++)),this.sizers.push(this.createSizer("e-resize",t++)),this.sizers.push(this.createSizer("sw-resize",t++)),this.sizers.push(this.createSizer("s-resize",t++))),this.sizers.push(this.createSizer("se-resize",t++)));var i=this.graph.model.getGeometry(this.state.cell);i!=null&&!i.relative&&!this.graph.isSwimlane(this.state.cell)&&this.graph.isLabelMovable(this.state.cell)&&(this.labelShape=this.createSizer(mxConstants$1.CURSOR_LABEL_HANDLE,mxEvent$1.LABEL_HANDLE,mxConstants$1.LABEL_HANDLE_SIZE,mxConstants$1.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants$1.CURSOR_MOVABLE_VERTEX,mxEvent$1.LABEL_HANDLE,null,mxConstants$1.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent$1.ROTATION_HANDLE,mxConstants$1.HANDLE_SIZE+3,mxConstants$1.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()}isRotationHandleVisible(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.maxCells)}isConstrainedEvent(e){return mxEvent$1.isShiftDown(e.getEvent())||this.state.style[mxConstants$1.STYLE_ASPECT]=="fixed"}isCenteredEvent(e,t){return!1}createCustomHandles(){return null}updateMinBounds(){var e=this.graph.getChildCells(this.state.cell);if(e.length>0&&(this.minBounds=this.graph.view.getBounds(e),this.minBounds!=null)){var t=this.state.view.scale,i=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=t,this.minBounds.y/=t,this.minBounds.width/=t,this.minBounds.height/=t,this.x0=this.state.x/t-i.x,this.y0=this.state.y/t-i.y}}getSelectionBounds(e){return new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))}createParentHighlightShape(e){return this.createSelectionShape(e)}createSelectionShape(e){var t=new mxRectangleShape(mxRectangle.fromRectangle(e),null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t}getSelectionColor(){return mxConstants$1.VERTEX_SELECTION_COLOR}getSelectionStrokeWidth(){return mxConstants$1.VERTEX_SELECTION_STROKEWIDTH}isSelectionDashed(){return mxConstants$1.VERTEX_SELECTION_DASHED}createSizer(e,t,i,n){i=i||mxConstants$1.HANDLE_SIZE;var s=new mxRectangle(0,0,i,i),l=this.createSizerShape(s,t,n);return l.isHtmlAllowed()&&this.state.text!=null&&this.state.text.node.parentNode==this.graph.container?(l.bounds.height-=1,l.bounds.width-=1,l.dialect=mxConstants$1.DIALECT_STRICTHTML,l.init(this.graph.container)):(l.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,l.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(l.node,this.graph,this.state),this.graph.isEnabled()&&l.setCursor(e),this.isSizerVisible(t)||(l.visible=!1),l}isSizerVisible(e){return!0}createSizerShape(e,t,i){if(this.handleImage!=null){e=new mxRectangle(e.x,e.y,this.handleImage.width,this.handleImage.height);var n=new mxImageShape(e,this.handleImage.src);return n.preserveImageAspect=!1,n}else return t==mxEvent$1.ROTATION_HANDLE?new mxEllipse(e,i||mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR):new mxRectangleShape(e,i||mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}moveSizerTo(e,t,i,n){e!=null&&(e.bounds.x=Math.floor(t-e.bounds.width/2),e.bounds.y=Math.floor(i-e.bounds.height/2),e.node!=null&&e.node.style.display!="none"&&e.redraw())}getHandleForEvent(e){var t=mxEvent$1.isMouseEvent(e.getEvent())?1:this.tolerance,i=this.allowHandleBoundsCheck&&t>0?new mxRectangle(e.getGraphX()-t,e.getGraphY()-t,2*t,2*t):null,n=l=>{var a=l!=null&&l.constructor!=mxImageShape&&this.allowHandleBoundsCheck?new mxRectangle(e.getGraphX()-l.svgStrokeTolerance,e.getGraphY()-l.svgStrokeTolerance,2*l.svgStrokeTolerance,2*l.svgStrokeTolerance):i;return l!=null&&(e.isSource(l)||a!=null&&mxUtils$1.intersects(l.bounds,a)&&l.node.style.display!="none"&&l.node.style.visibility!="hidden")};if(n(this.rotationShape))return mxEvent$1.ROTATION_HANDLE;if(n(this.labelShape))return mxEvent$1.LABEL_HANDLE;if(this.sizers!=null){for(var s=0;s<this.sizers.length;s++)if(n(this.sizers[s]))return s}if(this.customHandles!=null&&this.isCustomHandleEvent(e)){for(var s=this.customHandles.length-1;s>=0;s--)if(n(this.customHandles[s].shape))return mxEvent$1.CUSTOM_HANDLE-s}return null}isCustomHandleEvent(e){return!0}mouseDown(e,t){if(!t.isConsumed()&&this.graph.isEnabled()){var i=this.getHandleForEvent(t);i!=null&&(this.start(t.getGraphX(),t.getGraphY(),i),t.consume())}}isLivePreviewBorder(){return this.state.shape!=null&&this.state.shape.fill==null&&this.state.shape.stroke==null}start(e,t,i){if(this.selectionBorder!=null)if(this.livePreviewActive=this.livePreview&&this.graph.model.getChildCount(this.state.cell)==0,this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=i,this.startX=e,this.startY=t,this.index<=mxEvent$1.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else{var n=this.state.view.graph.model,s=n.getParent(this.state.cell);if(this.state.view.currentRoot!=s&&(n.isVertex(s)||n.isEdge(s))&&(this.parentState=this.state.view.graph.view.getState(s)),this.selectionBorder.node.style.display=i==mxEvent$1.ROTATION_HANDLE?"inline":"none",(!this.livePreviewActive||this.isLivePreviewBorder())&&(this.preview=this.createSelectionShape(this.bounds),!(mxClient.IS_SVG&&Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0")!=0)&&this.state.text!=null&&this.state.text.node.parentNode==this.graph.container?(this.preview.dialect=mxConstants$1.DIALECT_STRICTHTML,this.preview.init(this.graph.container)):(this.preview.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane()))),i==mxEvent$1.ROTATION_HANDLE){var l=this.getRotationHandlePosition(),a=l.x-this.state.getCenterX(),o=l.y-this.state.getCenterY();this.startAngle=a!=0?Math.atan(o/a)*180/Math.PI+90:o<0?180:0,this.startDist=Math.sqrt(a*a+o*o)}if(this.livePreviewActive){this.hideSizers(),i==mxEvent$1.ROTATION_HANDLE?this.rotationShape.node.style.display="":i==mxEvent$1.LABEL_HANDLE?this.labelShape.node.style.display="":this.sizers!=null&&this.sizers[i]!=null?this.sizers[i].node.style.display="":i<=mxEvent$1.CUSTOM_HANDLE&&this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-i].setVisible(!0);var h=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var d=0;d<h.length;d++){var m=this.graph.selectionCellsHandler.getHandler(h[d]);m!=null&&this.edgeHandlers.push(m)}}}}createGhostPreview(){var e=this.graph.cellRenderer.createShape(this.state);return e.init(this.graph.view.getOverlayPane()),e.scale=this.state.view.scale,e.bounds=this.bounds,e.outline=!0,e}setHandlesVisible(e){if(this.sizers!=null)for(var t=0;t<this.sizers.length;t++)this.sizers[t].node.style.display=e?"":"none";if(this.customHandles!=null)for(var t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)}hideSizers(){this.setHandlesVisible(!1)}checkTolerance(e){this.inTolerance&&this.startX!=null&&this.startY!=null&&(mxEvent$1.isMouseEvent(e.getEvent())||Math.abs(e.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(e.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)}updateHint(e){}removeHint(){}roundAngle(e){return Math.round(e*10)/10}roundLength(e){return Math.round(e*100)/100}mouseMove(e,t){!t.isConsumed()&&this.index!=null?(this.checkTolerance(t),this.inTolerance||(this.index<=mxEvent$1.CUSTOM_HANDLE?this.customHandles!=null&&(this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].processEvent(t),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].active=!0,this.ghostPreview!=null?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),this.selectionBounds!=null&&(this.selectionBorder.node.style.display="none")):(this.moveToFront(),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent$1.LABEL_HANDLE?this.moveLabel(t):this.index==mxEvent$1.ROTATION_HANDLE?this.rotateVertex(t):(this.resizeVertex(t),this.updateHint(t))),t.consume()):!this.graph.isMouseDown&&this.getHandleForEvent(t)!=null&&t.consume(!1)}isGhostPreview(){return this.state.view.graph.model.getChildCount(this.state.cell)>0}moveLabel(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),i=this.graph.view.translate,n=this.graph.view.scale;this.graph.isGridEnabledEvent(e.getEvent())&&(t.x=(this.graph.snap(t.x/n-i.x)+i.x)*n,t.y=(this.graph.snap(t.y/n-i.y)+i.y)*n);var s=this.rotationShape!=null?this.sizers.length-2:this.sizers.length-1;this.moveSizerTo(this.sizers[s],t.x,t.y,"A")}rotateVertex(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),i=this.state.x+this.state.width/2-t.x,n=this.state.y+this.state.height/2-t.y;if(this.currentAlpha=i!=0?Math.atan(n/i)*180/Math.PI+90:n<0?180:0,i>0&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(e.getEvent())){var i=t.x-this.state.getCenterX(),n=t.y-this.state.getCenterY(),s=Math.sqrt(i*i+n*n),l;s-this.startDist<2?l=15:s-this.startDist<25?l=5:l=1,this.currentAlpha=Math.round(this.currentAlpha/l)*l}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()}resizeVertex(e){var t=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),i=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),n=new mxPoint(e.getGraphX(),e.getGraphY()),s=this.graph.view.translate,l=this.graph.view.scale,a=Math.cos(-i),o=Math.sin(-i),w=n.x-this.startX,S=n.y-this.startY,h=a*w-o*S,d=o*w+a*S;w=h,S=d;var m=this.graph.getCellGeometry(this.state.cell);if(this.unscaledBounds=this.union(m,w/l,S/l,this.index,this.graph.isGridEnabledEvent(e.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(e),this.isCenteredEvent(this.state,e)),!m.relative){var g=this.graph.getMaximumGraphBounds();if(g!=null&&this.parentState!=null&&(g=mxRectangle.fromRectangle(g),g.x-=(this.parentState.x-s.x*l)/l,g.y-=(this.parentState.y-s.y*l)/l),this.graph.isConstrainChild(this.state.cell)){var c=this.graph.getCellContainmentArea(this.state.cell);if(c!=null){var f=this.graph.getOverlap(this.state.cell);f>0&&(c=mxRectangle.fromRectangle(c),c.x-=c.width*f,c.y-=c.height*f,c.width+=2*c.width*f,c.height+=2*c.height*f),g==null?g=c:(g=mxRectangle.fromRectangle(g),g.intersect(c))}}g!=null&&(this.unscaledBounds.x<g.x&&(this.unscaledBounds.width-=g.x-this.unscaledBounds.x,this.unscaledBounds.x=g.x),this.unscaledBounds.y<g.y&&(this.unscaledBounds.height-=g.y-this.unscaledBounds.y,this.unscaledBounds.y=g.y),this.unscaledBounds.x+this.unscaledBounds.width>g.x+g.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-g.x-g.width),this.unscaledBounds.y+this.unscaledBounds.height>g.y+g.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-g.y-g.height))}var C=this.bounds;this.bounds=new mxRectangle(Number((this.parentState!=null?this.parentState.x:s.x*l)+this.unscaledBounds.x*l),Number((this.parentState!=null?this.parentState.y:s.y*l)+this.unscaledBounds.y*l),this.unscaledBounds.width*l,this.unscaledBounds.height*l),m.relative&&this.parentState!=null&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),a=Math.cos(i),o=Math.sin(i);var v=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY()),w=v.x-t.x,S=v.y-t.y,T=a*w-o*S,P=o*w+a*S,L=T-w,k=P-S,G=this.bounds.x-this.state.x,Y=this.bounds.y-this.state.y,te=a*G-o*Y,ie=o*G+a*Y;this.bounds.x+=L,this.bounds.y+=k,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+L/l),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+k/l),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),!this.graph.isCellCollapsed(this.state.cell)&&(L!=0||k!=0)?(this.childOffsetX=this.state.x-this.bounds.x+te,this.childOffsetY=this.state.y-this.bounds.y+ie):(this.childOffsetX=0,this.childOffsetY=0),C.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(e),this.preview!=null?this.drawPreview():this.updateParentHighlight())}updateLivePreview(e){var t=this.graph.view.scale,i=this.graph.view.translate,n=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/t-i.x,this.state.y/t-i.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height;var s=this.state.absoluteOffset;s=new mxPoint(s.x,s.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;var l=this.graph.getCellGeometry(this.state.cell);if(l!=null){var a=l.offset||this.EMPTY_POINT;a!=null&&!l.relative&&(this.state.absoluteOffset.x=this.state.view.scale*a.x,this.state.absoluteOffset.y=this.state.view.scale*a.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.moveToFront(),this.state.control!=null&&this.state.control.node!=null&&(this.state.control.node.style.visibility="hidden"),this.state.setState(n)}moveToFront(){(this.state.text!=null&&this.state.text.node!=null&&this.state.text.node.nextSibling!=null||this.state.shape!=null&&this.state.shape.node!=null&&this.state.shape.node.nextSibling!=null&&(this.state.text==null||this.state.shape.node.nextSibling!=this.state.text.node))&&(this.state.shape!=null&&this.state.shape.node!=null&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),this.state.text!=null&&this.state.text.node!=null&&this.state.text.node.parentNode.appendChild(this.state.text.node))}mouseUp(e,t){if(this.index!=null&&this.state!=null){var i=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.index;this.index=null,this.ghostPreview==null&&(this.state.view.invalidate(this.state.cell,!1,!1),this.state.view.validate()),this.graph.getModel().beginUpdate();try{if(n<=mxEvent$1.CUSTOM_HANDLE){if(this.customHandles!=null){var s=this.state.view.graph.getCellStyle(this.state.cell);this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].active=!1,this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].execute(t),this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-n]!=null&&(this.state.style=s,this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].positionChanged())}}else if(n==mxEvent$1.ROTATION_HANDLE)if(this.currentAlpha!=null){var l=this.currentAlpha-(this.state.style[mxConstants$1.STYLE_ROTATION]||0);l!=0&&this.rotateCell(this.state.cell,l)}else this.rotateClick();else{var a=this.graph.isGridEnabledEvent(t.getEvent()),o=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),h=Math.cos(-o),d=Math.sin(-o),m=i.x-this.startX,g=i.y-this.startY,c=h*m-d*g,f=d*m+h*g;m=c,g=f;var C=this.graph.view.scale,v=this.isRecursiveResize(this.state,t);this.resizeCell(this.state.cell,this.roundLength(m/C),this.roundLength(g/C),n,a,this.isConstrainedEvent(t),v)}}finally{this.graph.getModel().endUpdate()}t.consume(),this.reset()}}isRecursiveResize(e,t){return this.graph.isRecursiveResize(this.state)}rotateClick(){}rotateCell(e,t,i){if(t!=0){var n=this.graph.getModel();if(n.isVertex(e)||n.isEdge(e)){if(!n.isEdge(e)){var s=this.graph.getCurrentCellStyle(e),l=(s[mxConstants$1.STYLE_ROTATION]||0)+t;this.graph.setCellStyles(mxConstants$1.STYLE_ROTATION,l,[e])}var a=this.graph.getCellGeometry(e);if(a!=null){var o=this.graph.getCellGeometry(i);if(o!=null&&!n.isEdge(i)&&(a=a.clone(),a.rotate(t,new mxPoint(o.width/2,o.height/2)),n.setGeometry(e,a)),n.isVertex(e)&&!a.relative||n.isEdge(e))for(var h=n.getChildCount(e),d=0;d<h;d++)this.rotateCell(n.getChildAt(e,d),t,e)}}}}reset(){if(this.sizers!=null&&this.index!=null&&this.sizers[this.index]!=null&&this.sizers[this.index].node.style.display=="none"&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,this.index=null,this.preview!=null&&(this.preview.destroy(),this.preview=null),this.ghostPreview!=null&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&this.sizers!=null){for(var e=0;e<this.sizers.length;e++)this.sizers[e]!=null&&(this.sizers[e].node.style.display="");this.state.control!=null&&this.state.control.node!=null&&(this.state.control.node.style.visibility="")}if(this.customHandles!=null)for(var e=0;e<this.customHandles.length;e++)this.customHandles[e].active?(this.customHandles[e].active=!1,this.customHandles[e].reset()):this.customHandles[e].setVisible(!0);this.selectionBorder!=null&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.unscaledBounds=null,this.livePreviewActive=null}resizeCell(e,t,i,n,s,l,a){var o=this.graph.model.getGeometry(e);if(o!=null){if(n==mxEvent$1.LABEL_HANDLE){var h=-mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),d=Math.cos(h),m=Math.sin(h),g=this.graph.view.scale,c=mxUtils$1.getRotatedPoint(new mxPoint(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/g),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/g)),d,m);o=o.clone(),o.offset==null?o.offset=c:(o.offset.x+=c.x,o.offset.y+=c.y),this.graph.model.setGeometry(e,o)}else if(this.unscaledBounds!=null){var g=this.graph.view.scale;(this.childOffsetX!=0||this.childOffsetY!=0)&&this.moveChildren(e,Math.round(this.childOffsetX/g),Math.round(this.childOffsetY/g)),this.graph.resizeCell(e,this.unscaledBounds,a)}}}moveChildren(e,t,i){for(var n=this.graph.getModel(),s=n.getChildCount(e),l=0;l<s;l++){var a=n.getChildAt(e,l),o=this.graph.getCellGeometry(a);o!=null&&(o=o.clone(),o.translate(t,i),n.setGeometry(a,o))}}union(e,t,i,n,s,l,a,o,h){if(s=s!=null?s&&this.graph.gridEnabled:this.graph.gridEnabled,this.singleSizer){var d=e.x+e.width+t,m=e.y+e.height+i;s&&(d=this.graph.snap(d/l)*l,m=this.graph.snap(m/l)*l);var g=new mxRectangle(e.x,e.y,0,0);return g.add(new mxRectangle(d,m,0,0)),g}else{var c=e.width,f=e.height,C=e.x-a.x*l,v=C+c,w=e.y-a.y*l,S=w+f,T=C+c/2,P=w+f/2;n>4?(S=S+i,s?S=this.graph.snap(S/l)*l:S=Math.round(S/l)*l):n<3&&(w=w+i,s?w=this.graph.snap(w/l)*l:w=Math.round(w/l)*l),n==0||n==3||n==5?(C+=t,s?C=this.graph.snap(C/l)*l:C=Math.round(C/l)*l):(n==2||n==4||n==7)&&(v+=t,s?v=this.graph.snap(v/l)*l:v=Math.round(v/l)*l);var L=v-C,k=S-w;if(o){var G=this.graph.getCellGeometry(this.state.cell);if(G!=null){var Y=G.width/G.height;n==1||n==2||n==7||n==6?L=k*Y:k=L/Y,n==0&&(C=v-L,w=S-k)}}if(h){L+=L-c,k+=k-f;var te=T-(C+L/2),ie=P-(w+k/2);C+=te,w+=ie,v+=te,S+=ie}L<0&&(C+=L,L=Math.abs(L)),k<0&&(w+=k,k=Math.abs(k));var ne=new mxRectangle(C+a.x*l,w+a.y*l,L,k);return this.minBounds!=null&&(ne.width=Math.max(ne.width,this.minBounds.x*l+this.minBounds.width*l+Math.max(0,this.x0*l-ne.x)),ne.height=Math.max(ne.height,this.minBounds.y*l+this.minBounds.height*l+Math.max(0,this.y0*l-ne.y))),ne}}redraw(e){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),e||this.redrawHandles()}getHandlePadding(){var e=new mxPoint(0,0),t=this.tolerance;return this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null&&(this.bounds.width<2*this.sizers[0].bounds.width+2*t||this.bounds.height<2*this.sizers[0].bounds.height+2*t)&&(t/=2,e.x=this.sizers[0].bounds.width+t,e.y=this.sizers[0].bounds.height+t),e}getSizerBounds(){return this.bounds}redrawHandles(){var e=this.getSizerBounds(),t=this.tolerance;if(this.horizontalOffset=0,this.verticalOffset=0,this.state.view.scale>=.8)try{if(this.customHandles!=null)for(var i=0;i<this.customHandles.length;i++){var n=this.customHandles[i].shape.node.style.display;this.customHandles[i].redraw(),this.customHandles[i].shape.node.style.display=n,this.customHandles[i].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[i])?"":"hidden"}}catch(w){console.log("ERROR",w)}if(this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null){if(this.index==null&&this.manageSizers&&this.sizers.length>=8){var s=this.getHandlePadding();this.horizontalOffset=s.x,this.verticalOffset=s.y,(this.horizontalOffset!=0||this.verticalOffset!=0)&&(e=new mxRectangle(e.x,e.y,e.width,e.height),e.x-=this.horizontalOffset/2,e.width+=this.horizontalOffset,e.y-=this.verticalOffset/2,e.height+=this.verticalOffset),this.sizers.length>=8&&(e.width<2*this.sizers[0].bounds.width+2*t||e.height<2*this.sizers[0].bounds.height+2*t?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}var l=e.x+e.width,a=e.y+e.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],l,a,"B");else{var o=e.x+e.width/2,h=e.y+e.height/2;if(this.sizers.length>=8){var d=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],m=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),g=Math.cos(m),c=Math.sin(m),f=Math.round(m*4/Math.PI),C=new mxPoint(e.getCenterX(),e.getCenterY()),v=mxUtils$1.getRotatedPoint(new mxPoint(e.x,e.y),g,c,C);this.moveSizerTo(this.sizers[0],v.x,v.y,"C"),this.sizers[0].setCursor(d[mxUtils$1.mod(0+f,d.length)]),v.x=o,v.y=e.y,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[1],v.x,v.y,"D"),this.sizers[1].setCursor(d[mxUtils$1.mod(1+f,d.length)]),v.x=l,v.y=e.y,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[2],v.x,v.y,"E"),this.sizers[2].setCursor(d[mxUtils$1.mod(2+f,d.length)]),v.x=e.x,v.y=h,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[3],v.x,v.y,"F"),this.sizers[3].setCursor(d[mxUtils$1.mod(7+f,d.length)]),v.x=l,v.y=h,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[4],v.x,v.y,"G"),this.sizers[4].setCursor(d[mxUtils$1.mod(3+f,d.length)]),v.x=e.x,v.y=a,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[5],v.x,v.y,"H"),this.sizers[5].setCursor(d[mxUtils$1.mod(6+f,d.length)]),v.x=o,v.y=a,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[6],v.x,v.y,"I"),this.sizers[6].setCursor(d[mxUtils$1.mod(5+f,d.length)]),v.x=l,v.y=a,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[7],v.x,v.y,"J"),this.sizers[7].setCursor(d[mxUtils$1.mod(4+f,d.length)]),v.x=o+this.state.absoluteOffset.x,v.y=h+this.state.absoluteOffset.y,v=mxUtils$1.getRotatedPoint(v,g,c,C),this.moveSizerTo(this.sizers[8],v.x,v.y,"K")}else this.state.width>=2&&this.state.height>=2?this.moveSizerTo(this.sizers[0],o+this.state.absoluteOffset.x,h+this.state.absoluteOffset.y,"L"):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y,"M")}}if(this.rotationShape!=null){var m=mxUtils$1.toRadians(this.currentAlpha!=null?this.currentAlpha:this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),g=Math.cos(m),c=Math.sin(m),C=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),v=mxUtils$1.getRotatedPoint(this.getRotationHandlePosition(),g,c,C);this.rotationShape.node!=null&&(this.moveSizerTo(this.rotationShape,v.x,v.y,"M"),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()?"hidden":"")}if(this.selectionBorder!=null&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0")),this.edgeHandlers!=null)for(var i=0;i<this.edgeHandlers.length;i++)this.edgeHandlers[i].redraw()}isCustomHandleVisible(e){return!this.graph.isEditing()&&this.state.view.graph.getSelectionCount()==1}getRotationHandlePosition(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)}isParentHighlightVisible(){return!0}updateParentHighlight(){if(this.selectionBorder!=null&&this.isParentHighlightVisible()){if(this.parentHighlight!=null){var e=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(e)){var t=this.graph.view.getState(e),i=this.parentHighlight.bounds;t!=null&&(i.x!=t.x||i.y!=t.y||i.width!=t.width||i.height!=t.height)&&(this.parentHighlight.bounds=mxRectangle.fromRectangle(t),this.parentHighlight.redraw())}else this.parentHighlight.destroy(),this.parentHighlight=null}else if(this.parentHighlightEnabled){var e=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(e)){var t=this.graph.view.getState(e);t!=null&&(this.parentHighlight=this.createParentHighlightShape(t),this.parentHighlight.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(t.style[mxConstants$1.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw())}}}}drawPreview(){this.preview!=null&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()}getSelectionBorderBounds(){return this.bounds}destroy(){if(this.escapeHandler!=null&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.preview!=null&&(this.preview.destroy(),this.preview=null),this.parentHighlight!=null&&(this.parentHighlight.destroy(),this.parentHighlight=null),this.ghostPreview!=null&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.selectionBorder!=null&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),this.sizers!=null){for(var e=0;e<this.sizers.length;e++)this.sizers[e].destroy();this.sizers=null}if(this.customHandles!=null){for(var e=0;e<this.customHandles.length;e++)this.customHandles[e].destroy();this.customHandles=null}}}u(mxVertexHandler,"livePreview",!1),u(mxVertexHandler,"manageSizers",!1),u(mxVertexHandler,"rotationHandleVSpacing",-16);class mxLabel extends mxRectangleShape{constructor(e,t,i,n){super(e,t,i,n),u(this,"spacing",2),u(this,"indicatorSize",10),u(this,"indicatorSpacing",2)}init(e){super.init(e),this.indicatorShape!=null&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))}redraw(){this.indicator!=null&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),super.redraw()}isHtmlAllowed(){return super.isHtmlAllowed()&&this.indicatorColor==null&&this.indicatorShape==null}paintForeground(e,t,i,n,s){this.paintImage(e,t,i,n,s),this.paintIndicator(e,t,i,n,s),super.paintForeground(e,t,i,n,s)}paintImage(e,t,i,n,s){if(this.image!=null){var l=this.getImageBounds(t,i,n,s);e.image(l.x,l.y,l.width,l.height,this.image,!1,!1,!1)}}getImageBounds(e,t,i,n){var s=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_ALIGN,mxConstants$1.ALIGN_LEFT),l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE),a=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_WIDTH,mxConstants$1.DEFAULT_IMAGESIZE),o=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_HEIGHT,mxConstants$1.DEFAULT_IMAGESIZE),h=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_SPACING,this.spacing)+5;return s==mxConstants$1.ALIGN_CENTER?e+=(i-a)/2:s==mxConstants$1.ALIGN_RIGHT?e+=i-a-h:e+=h,l==mxConstants$1.ALIGN_TOP?t+=h:l==mxConstants$1.ALIGN_BOTTOM?t+=n-o-h:t+=(n-o)/2,new mxRectangle(e,t,a,o)}paintIndicator(e,t,i,n,s){if(this.indicator!=null)this.indicator.bounds=this.getIndicatorBounds(t,i,n,s),this.indicator.paint(e);else if(this.indicatorImage!=null){var l=this.getIndicatorBounds(t,i,n,s);e.image(l.x,l.y,l.width,l.height,this.indicatorImage,!1,!1,!1)}}getIndicatorBounds(e,t,i,n){var s=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_ALIGN,mxConstants$1.ALIGN_LEFT),l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE),a=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_INDICATOR_WIDTH,this.indicatorSize),o=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_INDICATOR_HEIGHT,this.indicatorSize),h=this.spacing+5;return s==mxConstants$1.ALIGN_RIGHT?e+=i-a-h:s==mxConstants$1.ALIGN_CENTER?e+=(i-a)/2:e+=h,l==mxConstants$1.ALIGN_BOTTOM?t+=n-o-h:l==mxConstants$1.ALIGN_TOP?t+=h:t+=(n-o)/2,new mxRectangle(e,t,a,o)}redrawHtmlShape(){for(super.redrawHtmlShape();this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(this.image!=null){var e=document.createElement("img");e.style.position="relative",e.setAttribute("border","0");var t=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);t.x-=this.bounds.x,t.y-=this.bounds.y,e.style.left=Math.round(t.x)+"px",e.style.top=Math.round(t.y)+"px",e.style.width=Math.round(t.width)+"px",e.style.height=Math.round(t.height)+"px",e.src=this.image,this.node.appendChild(e)}}}u(mxLabel,"imageSize",mxConstants$1.DEFAULT_IMAGESIZE);class mxPanningManager{constructor(e){u(this,"damper",1/6),u(this,"delay",10),u(this,"handleMouseOut",!0),u(this,"border",0),this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(i,n){},mouseMove:function(i,n){},mouseUp:(i,n)=>{this.active&&this.stop()}},e.addMouseListener(this.mouseListener),this.mouseUpListener=()=>{this.active&&this.stop()},mxEvent$1.addListener(document,"mouseup",this.mouseUpListener);var t=()=>(this.scrollbars=mxUtils$1.hasScrollbars(e.container),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,window.setInterval(()=>{if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){var i=-e.container.scrollLeft-Math.ceil(this.dx),n=-e.container.scrollTop-Math.ceil(this.dy);e.panGraph(i,n),e.panDx=this.scrollLeft-e.container.scrollLeft,e.panDy=this.scrollTop-e.container.scrollTop,e.fireEvent(new mxEventObject$1(mxEvent$1.PAN))}else e.panGraph(this.getDx(),this.getDy())},this.delay));this.isActive=function(){return this.active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=e.view.translate.x,this.t0y=e.view.translate.y,this.active=!0},this.panTo=function(i,n,s,l){this.active||this.start(),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,s=s??0,l=l??0;var a=e.container;this.dx=i+s-a.scrollLeft-a.clientWidth,this.dx<0&&Math.abs(this.dx)<this.border?this.dx=this.border+this.dx:this.handleMouseOut?this.dx=Math.max(this.dx,0):this.dx=0,this.dx==0&&(this.dx=i-a.scrollLeft,this.dx>0&&this.dx<this.border?this.dx=this.dx-this.border:this.handleMouseOut?this.dx=Math.min(0,this.dx):this.dx=0),this.dy=n+l-a.scrollTop-a.clientHeight,this.dy<0&&Math.abs(this.dy)<this.border?this.dy=this.border+this.dy:this.handleMouseOut?this.dy=Math.max(this.dy,0):this.dy=0,this.dy==0&&(this.dy=n-a.scrollTop,this.dy>0&&this.dy<this.border?this.dy=this.dy-this.border:this.handleMouseOut?this.dy=Math.min(0,this.dy):this.dy=0),this.dx!=0||this.dy!=0?(this.dx*=this.damper,this.dy*=this.damper,this.thread==null&&(this.thread=t())):this.thread!=null&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,this.thread!=null&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)e.panDx=0,e.panDy=0,e.fireEvent(new mxEventObject$1(mxEvent$1.PAN));else{var i=e.panDx,n=e.panDy;(i!=0||n!=0)&&(e.panGraph(0,0),e.view.setTranslate(this.t0x+i/e.view.scale,this.t0y+n/e.view.scale))}},this.destroy=function(){e.removeMouseListener(this.mouseListener),mxEvent$1.removeListener(document,"mouseup",this.mouseUpListener)}}}class mxCellOverlay extends mxEventSource{constructor(e,t,i,n,s,l){super(),u(this,"defaultOverlap",.5),this.image=e,this.tooltip=t,this.align=i??this.align,this.verticalAlign=n??this.verticalAlign,this.offset=s??new mxPoint,this.cursor=l??"help"}getBounds(e){var t=e.view.graph.getModel().isEdge(e.cell),i=e.view.scale,n=null,s=this.image.width,l=this.image.height;if(t){var a=e.absolutePoints;if(a.length%2==1)n=a[Math.floor(a.length/2)];else{var o=a.length/2,h=a[o-1],d=a[o];n=new mxPoint(h.x+(d.x-h.x)/2,h.y+(d.y-h.y)/2)}}else n=new mxPoint,this.align==mxConstants$1.ALIGN_LEFT?n.x=e.x:this.align==mxConstants$1.ALIGN_CENTER?n.x=e.x+e.width/2:n.x=e.x+e.width,this.verticalAlign==mxConstants$1.ALIGN_TOP?n.y=e.y:this.verticalAlign==mxConstants$1.ALIGN_MIDDLE?n.y=e.y+e.height/2:n.y=e.y+e.height;return new mxRectangle(Math.round(n.x-(s*this.defaultOverlap-this.offset.x)*i),Math.round(n.y-(l*this.defaultOverlap-this.offset.y)*i),s*i,l*i)}toString(){return this.tooltip}}class mxRootChange{constructor(e,t){this.model=e,this.root=t,this.previous=t}execute(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)}}class mxCellEditor{constructor(e){u(this,"textarea",null),u(this,"editingCell",null),u(this,"trigger",null),u(this,"modified",!1),u(this,"autoSize",!0),u(this,"selectText",!0),u(this,"emptyLabelText",mxClient.IS_FF?"<br>":""),u(this,"escapeCancelsEditing",!0),u(this,"textNode",""),u(this,"zIndex",5),u(this,"minResize",new mxRectangle(0,20)),u(this,"wordWrapPadding",mxClient.IS_QUIRKS?2:mxClient.IS_IE11?0:1),u(this,"blurEnabled",!1),u(this,"initialValue",null),u(this,"align",null),this.graph=e,this.zoomHandler=()=>{this.graph.isEditing()&&this.resize()},this.graph.view.addListener(mxEvent$1.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=t=>{this.editingCell!=null&&this.graph.getView().getState(this.editingCell)==null&&this.stopEditing(!0)},this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler)}init(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position=this.isLegacyEditor()?"absolute":"relative",this.installListeners(this.textarea)}applyValue(e,t){this.graph.labelChanged(e.cell,t,this.trigger)}setAlign(e){this.textarea!=null&&(this.textarea.style.textAlign=e),this.align=e,this.resize()}getInitialValue(e,t){var i=mxUtils$1.htmlEntities(this.graph.getEditingValue(e.cell,t),!1);return!mxClient.IS_QUIRKS&&document.documentMode!=8&&document.documentMode!=9&&document.documentMode!=10&&(i=mxUtils$1.replaceTrailingNewlines(i,"<div><br></div>")),i.replace(/\n/g,"<br>")}getCurrentValue(e){return mxUtils$1.extractTextWithWhitespace(this.textarea.childNodes)}isCancelEditingKeyEvent(e){return this.escapeCancelsEditing||mxEvent$1.isShiftDown(e)||mxEvent$1.isControlDown(e)||mxEvent$1.isMetaDown(e)}installListeners(e){mxEvent$1.addListener(e,"dragstart",l=>{this.graph.stopEditing(!1),mxEvent$1.consume(l)}),mxEvent$1.addListener(e,"blur",l=>{this.blurEnabled&&this.focusLost(l)}),mxEvent$1.addListener(e,"keydown",l=>{mxEvent$1.isConsumed(l)||(this.isStopEditingEvent(l)?(this.graph.stopEditing(!1),mxEvent$1.consume(l)):l.keyCode==27&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(l)),mxEvent$1.consume(l)))});var t=l=>{this.editingCell!=null&&this.clearOnChange&&e.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||l.keyCode!=8&&l.keyCode!=46)&&(this.clearOnChange=!1,e.innerHTML="")};mxEvent$1.addListener(e,"keypress",t),mxEvent$1.addListener(e,"paste",t);var i=l=>{this.editingCell!=null&&(this.textarea.innerHTML.length==0||this.textarea.innerHTML=="<br>"?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0):this.clearOnChange=!1)};mxEvent$1.addListener(e,mxClient.IS_IE11?"keyup":"input",i),mxEvent$1.addListener(e,"cut",i),mxEvent$1.addListener(e,"paste",i);var n=mxClient.IS_IE11?"keydown":"input",s=l=>{this.editingCell!=null&&this.autoSize&&!mxEvent$1.isConsumed(l)&&(this.resizeThread!=null&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(()=>{this.resizeThread=null,this.resize()},0))};mxEvent$1.addListener(e,n,s),mxEvent$1.addListener(window,"resize",s),document.documentMode>=9?(mxEvent$1.addListener(e,"DOMNodeRemoved",s),mxEvent$1.addListener(e,"DOMNodeInserted",s)):(mxEvent$1.addListener(e,"cut",s),mxEvent$1.addListener(e,"paste",s))}isStopEditingEvent(e){return e.keyCode==113||this.graph.isEnterStopsCellEditing()&&e.keyCode==13&&!mxEvent$1.isControlDown(e)&&!mxEvent$1.isShiftDown(e)}isEventSource(e){return mxEvent$1.getSource(e)==this.textarea}resize(){var e=this.graph.getView().getState(this.editingCell);if(e==null)this.stopEditing(!0);else if(this.textarea!=null){var t=this.graph.getModel().isEdge(e.cell),i=this.graph.getView().scale,n=null;if(!this.autoSize||e.style[mxConstants$1.STYLE_OVERFLOW]=="fill")this.bounds=this.getEditorBounds(e),this.textarea.style.width=Math.round(this.bounds.width/i)+"px",this.textarea.style.height=Math.round(this.bounds.height/i)+"px",document.documentMode==8||mxClient.IS_QUIRKS?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants$1.WORD_WRAP,this.textarea.style.whiteSpace="normal",e.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&(this.textarea.style.width=Math.round(this.bounds.width/i)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap",e.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&(this.textarea.style.width=""));else{var s=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_WIDTH,null);if(n=e.text!=null&&this.align==null?e.text.margin:null,n==null&&(n=mxUtils$1.getAlignmentAsPoint(this.align||mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER),mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE))),t){if(this.bounds=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y,0,0),s!=null){var l=(parseFloat(s)+2)*i;this.bounds.width=l,this.bounds.x+=n.x*l}}else{var a=mxRectangle.fromRectangle(e),o=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),h=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);if(a=e.shape!=null&&o==mxConstants$1.ALIGN_CENTER&&h==mxConstants$1.ALIGN_MIDDLE?e.shape.getLabelBounds(a):a,s!=null&&(a.width=parseFloat(s)*i),!e.view.graph.cellRenderer.legacySpacing||e.style[mxConstants$1.STYLE_OVERFLOW]!="width"){var d=parseInt(e.style[mxConstants$1.STYLE_SPACING]||2)*i,m=(parseInt(e.style[mxConstants$1.STYLE_SPACING_TOP]||0)+mxText.baseSpacingTop)*i+d,g=(parseInt(e.style[mxConstants$1.STYLE_SPACING_RIGHT]||0)+mxText.baseSpacingRight)*i+d,c=(parseInt(e.style[mxConstants$1.STYLE_SPACING_BOTTOM]||0)+mxText.baseSpacingBottom)*i+d,f=(parseInt(e.style[mxConstants$1.STYLE_SPACING_LEFT]||0)+mxText.baseSpacingLeft)*i+d,o=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),h=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);a=new mxRectangle(a.x+f,a.y+m,a.width-(o==mxConstants$1.ALIGN_CENTER&&s==null?f+g:0),a.height-(h==mxConstants$1.ALIGN_MIDDLE?m+c:0))}this.bounds=new mxRectangle(a.x+e.absoluteOffset.x,a.y+e.absoluteOffset.y,a.width,a.height)}if(this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()){this.textarea.style.wordWrap=mxConstants$1.WORD_WRAP,this.textarea.style.whiteSpace="normal";var l=Math.round(this.bounds.width/i)+this.wordWrapPadding;this.textarea.style.position!="relative"?(this.textarea.style.width=l+"px",this.textarea.scrollWidth>l&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):this.textarea.style.maxWidth=l+"px"}else this.textarea.style.whiteSpace="nowrap",this.textarea.style.width="";document.documentMode==8&&(this.textarea.style.zoom="1",this.textarea.style.height="auto");var C=this.textarea.scrollWidth,v=this.textarea.scrollHeight;document.documentMode==8?(this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-n.x*(this.bounds.width-(C+1)*i)+C*(i-1)*0+(n.x+.5)*2)/i))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-n.y*(this.bounds.height-(v+.5)*i)+v*(i-1)*0+Math.abs(n.y+.5)*1)/i))+"px",this.textarea.style.width=Math.round(C*i)+"px",this.textarea.style.height=Math.round(v*i)+"px"):mxClient.IS_QUIRKS?(this.textarea.style.left=Math.max(0,Math.ceil(this.bounds.x-n.x*(this.bounds.width-(C+1)*i)+C*(i-1)*0+(n.x+.5)*2))+"px",this.textarea.style.top=Math.max(0,Math.ceil(this.bounds.y-n.y*(this.bounds.height-(v+.5)*i)+v*(i-1)*0+Math.abs(n.y+.5)*1))+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-n.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-n.y*(this.bounds.height-4)+(n.y==-1?3:0))+1)+"px")}mxUtils$1.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils$1.setPrefixedStyle(this.textarea.style,"transform","scale("+i+","+i+")"+(n==null?"":" translate("+n.x*100+"%,"+n.y*100+"%)"))}}focusLost(){this.stopEditing(!this.graph.isInvokesStopCellEditing())}getBackgroundColor(e){return null}isLegacyEditor(){var e=!1;if(mxClient.IS_SVG){var t=this.graph.view.getDrawPane().ownerSVGElement;if(t!=null){var i=mxUtils$1.getCurrentStyle(t);i!=null&&(e=i.position=="absolute")}}return!e}startEditing(e,t){this.stopEditing(!0),this.align=null,this.textarea==null&&this.init(),this.graph.tooltipHandler!=null&&this.graph.tooltipHandler.hideTooltip();var i=this.graph.getView().getState(e);if(i!=null){this.graph.getView().scale;var n=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE),s=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY),l=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FONTCOLOR,"black"),a=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT),o=(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD,h=(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC,d=[];(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&d.push("underline"),(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&d.push("line-through"),this.textarea.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?Math.round(n*mxConstants$1.LINE_HEIGHT)+"px":mxConstants$1.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(i),this.textarea.style.textDecoration=d.join(" "),this.textarea.style.fontWeight=o?"bold":"normal",this.textarea.style.fontStyle=h?"italic":"",this.textarea.style.fontSize=Math.round(n)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=s,this.textarea.style.textAlign=a,this.textarea.style.outline="none",this.textarea.style.color=l;var m=this.textDirection=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION);m==mxConstants$1.TEXT_DIRECTION_AUTO&&i!=null&&i.text!=null&&i.text.dialect!=mxConstants$1.DIALECT_STRICTHTML&&!mxUtils$1.isNode(i.text.value)&&(m=i.text.getAutoDirection()),m==mxConstants$1.TEXT_DIRECTION_LTR||m==mxConstants$1.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",m):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(i,t)||"",this.initialValue=this.textarea.innerHTML,this.textarea.innerHTML.length==0||this.textarea.innerHTML=="<br>"?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=e,this.trigger=t,this.textNode=null,i.text!=null&&this.isHideLabel(i)&&(this.textNode=i.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(i.cell)||i.style[mxConstants$1.STYLE_OVERFLOW]!="fill")&&window.setTimeout(()=>{this.resize()},0),this.resize();try{this.textarea.focus(),this.isSelectText()&&this.textarea.innerHTML.length>0&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch{}}}isSelectText(){return this.selectText}clearSelection(){var e=null;window.getSelection?e=window.getSelection():document.selection&&(e=document.selection),e!=null&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())}stopEditing(e){if(e=e||!1,this.editingCell!=null){this.textNode!=null&&(this.textNode.style.visibility="visible",this.textNode=null);var t=e?null:this.graph.view.getState(this.editingCell),i=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.trigger=null,this.bounds=null,this.textarea.blur(),this.clearSelection(),this.textarea.parentNode!=null&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),t!=null&&(this.textarea.innerHTML!=i||this.align!=null)){this.prepareTextarea();var n=this.getCurrentValue(t);this.graph.getModel().beginUpdate();try{n!=null&&this.applyValue(t,n),this.align!=null&&this.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,this.align,[t.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent$1.release(this.textarea),this.textarea=null,this.align=null}}prepareTextarea(){this.textarea.lastChild!=null&&this.textarea.lastChild.nodeName=="BR"&&this.textarea.removeChild(this.textarea.lastChild)}isHideLabel(e){return!0}getMinimumSize(e){var t=this.graph.getView().scale;return new mxRectangle(0,0,e.text==null?30:e.text.size*t+20,this.textarea.style.textAlign=="left"?120:40)}getEditorBounds(e){var t=this.graph.getModel().isEdge(e.cell),i=this.graph.getView().scale,n=this.getMinimumSize(e),s=n.width,l=n.height,a=null;if(!t&&e.view.graph.cellRenderer.legacySpacing&&e.style[mxConstants$1.STYLE_OVERFLOW]=="fill")a=e.shape.getLabelBounds(mxRectangle.fromRectangle(e));else{var o=parseInt(e.style[mxConstants$1.STYLE_SPACING]||0)*i,h=(parseInt(e.style[mxConstants$1.STYLE_SPACING_TOP]||0)+mxText.baseSpacingTop)*i+o,d=(parseInt(e.style[mxConstants$1.STYLE_SPACING_RIGHT]||0)+mxText.baseSpacingRight)*i+o,m=(parseInt(e.style[mxConstants$1.STYLE_SPACING_BOTTOM]||0)+mxText.baseSpacingBottom)*i+o,g=(parseInt(e.style[mxConstants$1.STYLE_SPACING_LEFT]||0)+mxText.baseSpacingLeft)*i+o;a=new mxRectangle(e.x,e.y,Math.max(s,e.width-g-d),Math.max(l,e.height-h-m));var c=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),f=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);if(a=e.shape!=null&&c==mxConstants$1.ALIGN_CENTER&&f==mxConstants$1.ALIGN_MIDDLE?e.shape.getLabelBounds(a):a,t?(a.x=e.absoluteOffset.x,a.y=e.absoluteOffset.y,e.text!=null&&e.text.boundingBox!=null&&(e.text.boundingBox.x>0&&(a.x=e.text.boundingBox.x),e.text.boundingBox.y>0&&(a.y=e.text.boundingBox.y))):e.text!=null&&e.text.boundingBox!=null&&(a.x=Math.min(a.x,e.text.boundingBox.x),a.y=Math.min(a.y,e.text.boundingBox.y)),a.x+=g,a.y+=h,e.text!=null&&e.text.boundingBox!=null&&(t?(a.width=Math.max(s,e.text.boundingBox.width),a.height=Math.max(l,e.text.boundingBox.height)):(a.width=Math.max(a.width,e.text.boundingBox.width),a.height=Math.max(a.height,e.text.boundingBox.height))),this.graph.getModel().isVertex(e.cell)){var C=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER);C==mxConstants$1.ALIGN_LEFT?a.x-=e.width:C==mxConstants$1.ALIGN_RIGHT&&(a.x+=e.width);var v=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);v==mxConstants$1.ALIGN_TOP?a.y-=e.height:v==mxConstants$1.ALIGN_BOTTOM&&(a.y+=e.height)}}return new mxRectangle(Math.round(a.x),Math.round(a.y),Math.round(a.width),Math.round(a.height))}getEmptyLabelText(e){return this.emptyLabelText}getEditingCell(){return this.editingCell}destroy(){this.textarea!=null&&(mxEvent$1.release(this.textarea),this.textarea.parentNode!=null&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)}}const ct=class Wt{static putValue(e,t){Wt.values[e]=t}static getValue(e){return Wt.values[e]}static getName(e){for(var t in Wt.values)if(Wt.values[t]==e)return t;return null}};u(ct,"values",[]);let mxStyleRegistry=ct;class mxUndoableEdit{constructor(e,t){u(this,"undone",!1),u(this,"redone",!1),this.source=e,this.changes=[],this.significant=t??!0}isEmpty(){return this.changes.length==0}isSignificant(){return this.significant}add(e){this.changes.push(e)}notify(){}die(){}undo(){if(!this.undone){this.source.fireEvent(new mxEventObject$1(mxEvent$1.START_EDIT));for(var e=this.changes.length,t=e-1;t>=0;t--){var i=this.changes[t];i.execute!=null?i.execute():i.undo!=null&&i.undo(),this.source.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTED,"change",i))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject$1(mxEvent$1.END_EDIT))}this.notify()}redo(){if(!this.redone){this.source.fireEvent(new mxEventObject$1(mxEvent$1.START_EDIT));for(var e=this.changes.length,t=0;t<e;t++){var i=this.changes[t];i.execute!=null?i.execute():i.redo!=null&&i.redo(),this.source.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTED,"change",i))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject$1(mxEvent$1.END_EDIT))}this.notify()}}class mxCurrentRootChange{constructor(e,t){if(this.view=e,this.root=t,this.previous=t,this.isUp=t==null,!this.isUp)for(var i=this.view.currentRoot,n=this.view.graph.getModel();i!=null;){if(i==t){this.isUp=!0;break}i=n.getParent(i)}}execute(){var e=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=e;var t=this.view.graph.getTranslateForRoot(this.view.currentRoot);t!=null&&(this.view.translate=new mxPoint(-t.x,-t.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh();var i=this.isUp?mxEvent$1.UP:mxEvent$1.DOWN;this.view.fireEvent(new mxEventObject$1(i,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp}}class mxGraphView extends mxEventSource{constructor(e){super(),u(this,"EMPTY_POINT",new mxPoint),u(this,"doneResource",mxClient.language!="none"?"done":""),u(this,"updatingDocumentResource",mxClient.language!="none"?"updatingDocument":""),u(this,"allowEval",!1),u(this,"captureDocumentGesture",!0),u(this,"optimizeVmlReflows",!0),u(this,"rendering",!0),u(this,"currentRoot",null),u(this,"scale",1),u(this,"updateStyle",!1),u(this,"lastNode",null),u(this,"lastHtmlNode",null),u(this,"lastForegroundNode",null),u(this,"lastForegroundHtmlNode",null),this.graph=e,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}getGraphBounds(){return this.graphBounds}setGraphBounds(e){this.graphBounds=e}getBounds(e){var t=null;if(e!=null&&e.length>0){for(var i=this.graph.getModel(),n=0;n<e.length;n++)if(i.isVertex(e[n])||i.isEdge(e[n])){var s=this.getState(e[n]);s!=null&&(t==null?t=mxRectangle.fromRectangle(s):t.add(s))}}return t}setCurrentRoot(e){if(this.currentRoot!=e){var t=new mxCurrentRootChange(this,e);t.execute();var i=new mxUndoableEdit(this,!0);i.add(t),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",i)),this.graph.sizeDidChange()}return e}scaleAndTranslate(e,t,i){var n=this.scale,s=new mxPoint(this.translate.x,this.translate.y);(this.scale!=e||this.translate.x!=t||this.translate.y!=i)&&(this.scale=e,this.translate.x=t,this.translate.y=i,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.SCALE_AND_TRANSLATE,"scale",e,"previousScale",n,"translate",this.translate,"previousTranslate",s))}getScale(){return this.scale}setScale(e){var t=this.scale;this.scale!=e&&(this.scale=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.SCALE,"scale",e,"previousScale",t))}getTranslate(){return this.translate}setTranslate(e,t){var i=new mxPoint(this.translate.x,this.translate.y);(this.translate.x!=e||this.translate.y!=t)&&(this.translate.x=e,this.translate.y=t,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.TRANSLATE,"translate",this.translate,"previousTranslate",i))}viewStateChanged(){this.revalidate(),this.graph.sizeDidChange()}refresh(){this.currentRoot!=null&&this.clear(),this.revalidate()}revalidate(){this.invalidate(),this.validate()}clear(e,t,i){var n=this.graph.getModel();if(e=e||n.getRoot(),t=t??!1,i=i??!0,this.removeState(e),i&&(t||e!=this.currentRoot))for(var s=n.getChildCount(e),l=0;l<s;l++)this.clear(n.getChildAt(e,l),t);else this.invalidate(e)}invalidate(e,t,i){var n=this.graph.getModel();e=e||n.getRoot(),t=t??!0,i=i??!0;var s=this.getState(e);if(s!=null&&(s.invalid=!0),!e.invalidating){if(e.invalidating=!0,t)for(var l=n.getChildCount(e),a=0;a<l;a++){var o=n.getChildAt(e,a);this.invalidate(o,t,i)}if(i)for(var h=n.getEdgeCount(e),a=0;a<h;a++)this.invalidate(n.getEdgeAt(e,a),t,i);delete e.invalidating}}validate(e){var t=mxLog.enter("mxGraphView.validate");window.status=mxResources$1.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var i=null;this.optimizeVmlReflows&&this.canvas!=null&&this.textDiv==null&&(document.documentMode==8&&!mxClient.IS_EM||mxClient.IS_QUIRKS)&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),i=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv));var n=this.getBoundingBox(this.validateCellState(this.validateCell(e||(this.currentRoot!=null?this.currentRoot:this.graph.getModel().getRoot()))));this.setGraphBounds(n??this.getEmptyBounds()),this.validateBackground(),i!=null&&(this.canvas.style.display=i,this.textDiv.parentNode.removeChild(this.textDiv),this.placeholder!=null&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources$1.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",t)}getEmptyBounds(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)}getBoundingBox(e,t){t=t??!0;var i=null;if(e!=null&&(e.shape!=null&&e.shape.boundingBox!=null&&(i=e.shape.boundingBox.clone()),e.text!=null&&e.text.boundingBox!=null&&(i!=null?i.add(e.text.boundingBox):i=e.text.boundingBox.clone()),t))for(var n=this.graph.getModel(),s=n.getChildCount(e.cell),l=0;l<s;l++){var a=this.getBoundingBox(this.getState(n.getChildAt(e.cell,l)));a!=null&&(i==null?i=a:i.add(a))}return i}createBackgroundPageShape(e){return new mxRectangleShape(e,"white","black")}validateBackground(){this.validateBackgroundImage(),this.validateBackgroundPage()}validateBackgroundImage(){var e=this.graph.getBackgroundImage();if(e!=null){if(this.backgroundImage==null||this.backgroundImage.image!=e.src){this.backgroundImage!=null&&this.backgroundImage.destroy();var t=new mxRectangle(0,0,1,1);this.backgroundImage=new mxImageShape(t,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),document.documentMode==8&&!mxClient.IS_EM&&mxEvent$1.addGestureListeners(this.backgroundImage.node,i=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(i))},i=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(i))},i=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(i))})}this.redrawBackgroundImage(this.backgroundImage,e)}else this.backgroundImage!=null&&(this.backgroundImage.destroy(),this.backgroundImage=null)}validateBackgroundPage(){if(this.graph.pageVisible){var e=this.getBackgroundPageBounds();this.backgroundPageShape==null?(this.backgroundPageShape=this.createBackgroundPageShape(e),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent$1.addListener(this.backgroundPageShape.node,"dblclick",t=>{this.graph.dblClick(t)}),mxEvent$1.addGestureListeners(this.backgroundPageShape.node,t=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(t))},t=>{this.graph.tooltipHandler!=null&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent$1.isConsumed(t)&&this.graph.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(t))},t=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(t))})):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=e,this.backgroundPageShape.redraw())}else this.backgroundPageShape!=null&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)}getBackgroundPageBounds(){var e=this.graph.pageFormat,t=this.scale*this.graph.pageScale,i=new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,e.width*t,e.height*t);return i}redrawBackgroundImage(e,t){e.scale=this.scale,e.bounds.x=this.scale*this.translate.x,e.bounds.y=this.scale*this.translate.y,e.bounds.width=this.scale*t.width,e.bounds.height=this.scale*t.height,e.redraw()}validateCell(e,t){if(t=t??!0,e!=null){t=t&&this.graph.isCellVisible(e);var i=this.getState(e,t);if(i!=null&&!t)this.removeState(e);else for(var n=this.graph.getModel(),s=n.getChildCount(e),l=0;l<s;l++)this.validateCell(n.getChildAt(e,l),t&&(!this.isCellCollapsed(e)||e==this.currentRoot))}return e}validateCellState(e,t){t=t??!0;var i=null;if(e!=null&&(i=this.getState(e),i!=null)){var n=this.graph.getModel();if(i.invalid&&(i.invalid=!1,(i.style==null||i.invalidStyle)&&(i.style=this.graph.getCellStyle(i.cell),i.invalidStyle=!1),e!=this.currentRoot&&this.validateCellState(n.getParent(e),!1),i.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!0),!1),!0),i.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!1),!1),!1),this.updateCellState(i),e!=this.currentRoot&&!i.invalid&&(this.graph.cellRenderer.redraw(i,!1,this.isRendering()),i.updateCachedBounds())),t&&!i.invalid){i.shape!=null&&this.stateValidated(i);for(var s=n.getChildCount(e),l=0;l<s;l++)this.validateCellState(n.getChildAt(e,l))}}return i}updateCellState(e){if(e.absoluteOffset.x=0,e.absoluteOffset.y=0,e.origin.x=0,e.origin.y=0,e.length=0,e.cell!=this.currentRoot){var t=this.graph.getModel(),i=this.getState(t.getParent(e.cell));i!=null&&i.cell!=this.currentRoot&&(e.origin.x+=i.origin.x,e.origin.y+=i.origin.y);var n=this.graph.getChildOffsetForCell(e.cell);n!=null&&(e.origin.x+=n.x,e.origin.y+=n.y);var s=this.graph.getCellGeometry(e.cell);if(s!=null){if(!t.isEdge(e.cell))if(n=s.offset!=null?s.offset:this.EMPTY_POINT,s.relative&&i!=null)if(t.isEdge(i.cell)){var l=this.getPoint(i,s);l!=null&&(e.origin.x+=l.x/this.scale-i.origin.x-this.translate.x,e.origin.y+=l.y/this.scale-i.origin.y-this.translate.y)}else e.origin.x+=s.x*i.unscaledWidth+n.x,e.origin.y+=s.y*i.unscaledHeight+n.y;else e.absoluteOffset.x=this.scale*n.x,e.absoluteOffset.y=this.scale*n.y,e.origin.x+=s.x,e.origin.y+=s.y;e.x=this.scale*(this.translate.x+e.origin.x),e.y=this.scale*(this.translate.y+e.origin.y),e.width=this.scale*s.width,e.unscaledWidth=s.width,e.height=this.scale*s.height,e.unscaledHeight=s.height,t.isVertex(e.cell)&&this.updateVertexState(e,s),t.isEdge(e.cell)&&this.updateEdgeState(e,s)}}e.updateCachedBounds()}isCellCollapsed(e){return this.graph.isCellCollapsed(e)}updateVertexState(e,t){var i=this.graph.getModel(),n=this.getState(i.getParent(e.cell));if(t.relative&&n!=null&&!i.isEdge(n.cell)){var s=mxUtils$1.toRadians(n.style[mxConstants$1.STYLE_ROTATION]||"0");if(s!=0){var l=Math.cos(s),a=Math.sin(s),o=new mxPoint(e.getCenterX(),e.getCenterY()),h=new mxPoint(n.getCenterX(),n.getCenterY()),d=mxUtils$1.getRotatedPoint(o,l,a,h);e.x=d.x-e.width/2,e.y=d.y-e.height/2}}this.updateVertexLabelOffset(e)}updateEdgeState(e,t){var i=e.getVisibleTerminalState(!0),n=e.getVisibleTerminalState(!1);if(this.graph.model.getTerminal(e.cell,!0)!=null&&i==null||i==null&&t.getTerminalPoint(!0)==null||this.graph.model.getTerminal(e.cell,!1)!=null&&n==null||n==null&&t.getTerminalPoint(!1)==null)this.clear(e.cell,!0);else{this.updateFixedTerminalPoints(e,i,n),this.updatePoints(e,t.points,i,n),this.updateFloatingTerminalPoints(e,i,n);var s=e.absolutePoints;e.cell!=this.currentRoot&&(s==null||s.length<2||s[0]==null||s[s.length-1]==null)?this.clear(e.cell,!0):(this.updateEdgeBounds(e),this.updateEdgeLabelOffset(e))}}updateVertexLabelOffset(e){var t=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER);if(t==mxConstants$1.ALIGN_LEFT){var i=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_WIDTH,null);i!=null?i*=this.scale:i=e.width,e.absoluteOffset.x-=i}else if(t==mxConstants$1.ALIGN_RIGHT)e.absoluteOffset.x+=e.width;else if(t==mxConstants$1.ALIGN_CENTER){var i=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LABEL_WIDTH,null);if(i!=null){var n=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER),s=0;n==mxConstants$1.ALIGN_CENTER?s=.5:n==mxConstants$1.ALIGN_RIGHT&&(s=1),s!=0&&(e.absoluteOffset.x-=(i*this.scale-e.width)*s)}}var l=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);l==mxConstants$1.ALIGN_TOP?e.absoluteOffset.y-=e.height:l==mxConstants$1.ALIGN_BOTTOM&&(e.absoluteOffset.y+=e.height)}resetValidationState(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null}stateValidated(e){var t=this.graph.getModel().isEdge(e.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(e.cell)&&this.graph.keepEdgesInBackground,i=t?this.lastForegroundHtmlNode||this.lastHtmlNode:this.lastHtmlNode,n=t?this.lastForegroundNode||this.lastNode:this.lastNode,s=this.graph.cellRenderer.insertStateAfter(e,n,i);t?(this.lastForegroundHtmlNode=s[1],this.lastForegroundNode=s[0]):(this.lastHtmlNode=s[1],this.lastNode=s[0])}updateFixedTerminalPoints(e,t,i){this.updateFixedTerminalPoint(e,t,!0,this.graph.getConnectionConstraint(e,t,!0)),this.updateFixedTerminalPoint(e,i,!1,this.graph.getConnectionConstraint(e,i,!1))}updateFixedTerminalPoint(e,t,i,n){e.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(e,t,i,n),i)}getFixedTerminalPoint(e,t,i,n){var s=null;if(n!=null&&(s=this.graph.getConnectionPoint(t,n,!1)),s==null&&t==null){var l=this.scale,a=this.translate,o=e.origin,h=this.graph.getCellGeometry(e.cell);s=h.getTerminalPoint(i),s!=null&&(s=new mxPoint(l*(a.x+s.x+o.x),l*(a.y+s.y+o.y)))}return s}updateBoundsFromStencil(e){var t=null;if(e!=null&&e.shape!=null&&e.shape.stencil!=null&&e.shape.stencil.aspect=="fixed"){t=mxRectangle.fromRectangle(e);var i=e.shape.stencil.computeAspect(e.style,e.x,e.y,e.width,e.height);e.setRect(i.x,i.y,e.shape.stencil.w0*i.width,e.shape.stencil.h0*i.height)}return t}updatePoints(e,t,i,n){if(e!=null){var s=[];s.push(e.absolutePoints[0]);var l=this.getEdgeStyle(e,t,i,n);if(l!=null){var a=this.getTerminalPort(e,i,!0),o=this.getTerminalPort(e,n,!1),h=this.updateBoundsFromStencil(a),d=this.updateBoundsFromStencil(o);l(e,a,o,t,s),h!=null&&a.setRect(h.x,h.y,h.width,h.height),d!=null&&o.setRect(d.x,d.y,d.width,d.height)}else if(t!=null){for(var m=0;m<t.length;m++)if(t[m]!=null){var g=mxUtils$1.clone(t[m]);s.push(this.transformControlPoint(e,g))}}var c=e.absolutePoints;s.push(c[c.length-1]),e.absolutePoints=s}}transformControlPoint(e,t,i){if(e!=null&&t!=null){var n=e.origin,s=i?1:this.scale;return new mxPoint(s*(t.x+this.translate.x+n.x),s*(t.y+this.translate.y+n.y))}return null}isLoopStyleEnabled(e,t,i,n){var s=this.graph.getConnectionConstraint(e,i,!0),l=this.graph.getConnectionConstraint(e,n,!1);return(t==null||t.length<2)&&(!mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ORTHOGONAL_LOOP,!1)||(s==null||s.point==null)&&(l==null||l.point==null))?i!=null&&i==n:!1}getEdgeStyle(e,t,i,n){var s=this.isLoopStyleEnabled(e,t,i,n)?mxUtils$1.getValue(e.style,mxConstants$1.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils$1.getValue(e.style,mxConstants$1.STYLE_NOEDGESTYLE,!1)?null:e.style[mxConstants$1.STYLE_EDGE];if(typeof s=="string"){var l=mxStyleRegistry.getValue(s);l==null&&this.isAllowEval()&&(l=mxUtils$1.eval(s)),s=l}return typeof s=="function"?s:null}updateFloatingTerminalPoints(e,t,i){var n=e.absolutePoints,s=n[0],l=n[n.length-1];l==null&&i!=null&&this.updateFloatingTerminalPoint(e,i,t,!1),s==null&&t!=null&&this.updateFloatingTerminalPoint(e,t,i,!0)}updateFloatingTerminalPoint(e,t,i,n){e.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(e,t,i,n),n)}getFloatingTerminalPoint(e,t,i,n){t=this.getTerminalPort(e,t,n);var s=this.getNextPoint(e,i,n),l=this.graph.isOrthogonal(e),a=mxUtils$1.toRadians(Number(t.style[mxConstants$1.STYLE_ROTATION]||"0")),o=new mxPoint(t.getCenterX(),t.getCenterY());if(a!=0){var h=Math.cos(-a),d=Math.sin(-a);s=mxUtils$1.getRotatedPoint(s,h,d,o)}var m=parseFloat(e.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0);m+=parseFloat(e.style[n?mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING:mxConstants$1.STYLE_TARGET_PERIMETER_SPACING]||0);var g=this.getPerimeterPoint(t,s,a==0&&l,m);if(a!=0){var h=Math.cos(a),d=Math.sin(a);g=mxUtils$1.getRotatedPoint(g,h,d,o)}return g}getTerminalPort(e,t,i){var n=i?mxConstants$1.STYLE_SOURCE_PORT:mxConstants$1.STYLE_TARGET_PORT,s=mxUtils$1.getValue(e.style,n);if(s!=null){var l=this.getState(this.graph.getModel().getCell(s));l!=null&&(t=l)}return t}getPerimeterPoint(e,t,i,n){var s=null;if(e!=null){var l=this.getPerimeterFunction(e);if(l!=null&&t!=null){var a=this.getPerimeterBounds(e,n);if(a.width>0||a.height>0){s=new mxPoint(t.x,t.y);var o=!1,h=!1;this.graph.model.isVertex(e.cell)&&(o=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FLIPH,0)==1,h=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FLIPV,0)==1,e.shape!=null&&e.shape.stencil!=null&&(o=mxUtils$1.getValue(e.style,"stencilFlipH",0)==1||o,h=mxUtils$1.getValue(e.style,"stencilFlipV",0)==1||h),o&&(s.x=2*a.getCenterX()-s.x),h&&(s.y=2*a.getCenterY()-s.y)),s=l(a,e,s,i),s!=null&&(o&&(s.x=2*a.getCenterX()-s.x),h&&(s.y=2*a.getCenterY()-s.y))}}s==null&&(s=this.getPoint(e))}return s}getRoutingCenterX(e){var t=e.style!=null&&parseFloat(e.style[mxConstants$1.STYLE_ROUTING_CENTER_X])||0;return e.getCenterX()+t*e.width}getRoutingCenterY(e){var t=e.style!=null&&parseFloat(e.style[mxConstants$1.STYLE_ROUTING_CENTER_Y])||0;return e.getCenterY()+t*e.height}getPerimeterBounds(e,t){return t=t??0,e!=null&&(t+=parseFloat(e.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0)),e.getPerimeterBounds(t*this.scale)}getPerimeterFunction(e){var t=e.style[mxConstants$1.STYLE_PERIMETER];if(typeof t=="string"){var i=mxStyleRegistry.getValue(t);i==null&&this.isAllowEval()&&(i=mxUtils$1.eval(t)),t=i}return typeof t=="function"?t:null}getNextPoint(e,t,i){var n=e.absolutePoints,s=null;if(n!=null&&n.length>=2){var l=n.length;s=n[i?Math.min(1,l-1):Math.max(0,l-2)]}return s==null&&t!=null&&(s=new mxPoint(t.getCenterX(),t.getCenterY())),s}getVisibleTerminal(e,t){for(var i=this.graph.getModel(),n=i.getTerminal(e,t),s=n;n!=null&&n!=this.currentRoot;)(!this.graph.isCellVisible(s)||this.isCellCollapsed(n))&&(s=n),n=i.getParent(n);return s!=null&&(!i.contains(s)||i.getParent(s)==i.getRoot()||s==this.currentRoot)&&(s=null),s}updateEdgeBounds(e){var t=e.absolutePoints,i=t[0],n=t[t.length-1];if(i.x!=n.x||i.y!=n.y){var s=n.x-i.x,l=n.y-i.y;e.terminalDistance=Math.sqrt(s*s+l*l)}else e.terminalDistance=0;var a=0,o=[],h=i;if(h!=null){for(var d=h.x,m=h.y,g=d,c=m,f=1;f<t.length;f++){var C=t[f];if(C!=null){var s=h.x-C.x,l=h.y-C.y,v=Math.sqrt(s*s+l*l);o.push(v),a+=v,h=C,d=Math.min(h.x,d),m=Math.min(h.y,m),g=Math.max(h.x,g),c=Math.max(h.y,c)}}e.length=a,e.segments=o;var w=1;e.x=d,e.y=m,e.width=Math.max(w,g-d),e.height=Math.max(w,c-m)}}getPoint(e,t){var i=e.getCenterX(),n=e.getCenterY();if(e.segments!=null&&(t==null||t.relative)){for(var s=t!=null?t.x/2:0,l=e.absolutePoints.length,a=Math.round((s+.5)*e.length),o=e.segments[0],h=0,d=1;a>=Math.round(h+o)&&d<l-1;)h+=o,o=e.segments[d++];var m=o==0?0:(a-h)/o,g=e.absolutePoints[d-1],c=e.absolutePoints[d];if(g!=null&&c!=null){var f=0,C=0,v=0;if(t!=null){f=t.y;var w=t.offset;w!=null&&(C=w.x,v=w.y)}var S=c.x-g.x,T=c.y-g.y,P=o==0?0:T/o,L=o==0?0:S/o;i=g.x+S*m+(P*f+C)*this.scale,n=g.y+T*m-(L*f-v)*this.scale}}else if(t!=null){var w=t.offset;w!=null&&(i+=w.x,n+=w.y)}return new mxPoint(i,n)}getRelativePoint(e,t,i){var n=this.graph.getModel(),s=n.getGeometry(e.cell);if(s!=null){var l=e.absolutePoints.length;if(s.relative&&l>1){for(var a=e.length,o=e.segments,h=e.absolutePoints[0],d=e.absolutePoints[1],m=mxUtils$1.ptSegDistSq(h.x,h.y,d.x,d.y,t,i),g=0,c=0,f=0,C=2;C<l;C++){c+=o[C-2],d=e.absolutePoints[C];var v=mxUtils$1.ptSegDistSq(h.x,h.y,d.x,d.y,t,i);v<=m&&(m=v,g=C-1,f=c),h=d}var w=o[g];h=e.absolutePoints[g],d=e.absolutePoints[g+1];var S=h.x,T=h.y,P=d.x,L=d.y,k=t,G=i,Y=S-P,te=T-L;k-=P,G-=L;var ie=0;k=Y-k,G=te-G;var ne=k*Y+G*te;ne<=0?ie=0:ie=ne*ne/(Y*Y+te*te);var q=Math.sqrt(ie);q>w&&(q=w);var oe=Math.sqrt(mxUtils$1.ptSegDistSq(h.x,h.y,d.x,d.y,t,i)),le=mxUtils$1.relativeCcw(h.x,h.y,d.x,d.y,t,i);return le==-1&&(oe=-oe),new mxPoint((a/2-f-q)/a*-2,oe/this.scale)}}return new mxPoint}updateEdgeLabelOffset(e){var t=e.absolutePoints;if(e.absoluteOffset.x=e.getCenterX(),e.absoluteOffset.y=e.getCenterY(),t!=null&&t.length>0&&e.segments!=null){var i=this.graph.getCellGeometry(e.cell);if(i.relative){var n=this.getPoint(e,i);n!=null&&(e.absoluteOffset=n)}else{var s=t[0],l=t[t.length-1];if(s!=null&&l!=null){var a=l.x-s.x,o=l.y-s.y,h=0,d=0,m=i.offset;m!=null&&(h=m.x,d=m.y);var g=s.x+a/2+h*this.scale,c=s.y+o/2+d*this.scale;e.absoluteOffset.x=g,e.absoluteOffset.y=c}}}}getState(e,t){t=t||!1;var i=null;return e!=null&&(i=this.states.get(e),t&&(i==null||this.updateStyle)&&this.graph.isCellVisible(e)&&(i==null?(i=this.createState(e),this.states.put(e,i)):i.style=this.graph.getCellStyle(e))),i}isRendering(){return this.rendering}setRendering(e){this.rendering=e}isAllowEval(){return this.allowEval}setAllowEval(e){this.allowEval=e}getStates(){return this.states}setStates(e){this.states=e}getCellStates(e){if(e==null)return this.states;for(var t=[],i=0;i<e.length;i++){var n=this.getState(e[i]);n!=null&&t.push(n)}return t}removeState(e){var t=null;return e!=null&&(t=this.states.remove(e),t!=null&&(this.graph.cellRenderer.destroy(t),t.invalid=!0,t.destroy())),t}createState(e){return new mxCellState(this,e,this.graph.getCellStyle(e))}getCanvas(){return this.canvas}getBackgroundPane(){return this.backgroundPane}getDrawPane(){return this.drawPane}getOverlayPane(){return this.overlayPane}getDecoratorPane(){return this.decoratorPane}isContainerEvent(e){var t=mxEvent$1.getSource(e);return t==this.graph.container||t.parentNode==this.backgroundPane||t.parentNode!=null&&t.parentNode.parentNode==this.backgroundPane||t==this.canvas.parentNode||t==this.canvas||t==this.backgroundPane||t==this.drawPane||t==this.overlayPane||t==this.decoratorPane}isScrollEvent(e){var t=mxUtils$1.getOffset(this.graph.container),i=new mxPoint(e.clientX-t.x,e.clientY-t.y),n=this.graph.container.offsetWidth,s=this.graph.container.clientWidth;if(n>s&&i.x>s+2&&i.x<=n)return!0;var l=this.graph.container.offsetHeight,a=this.graph.container.clientHeight;return l>a&&i.y>a+2&&i.y<=l}init(){this.installListeners();var e=this.graph;e.dialect==mxConstants$1.DIALECT_SVG?this.createSvg():e.dialect==mxConstants$1.DIALECT_VML?this.createVml():this.createHtml()}installListeners(){var e=this.graph,t=e.container;if(t!=null){mxClient.IS_TOUCH&&(mxEvent$1.addListener(t,"gesturestart",n=>{e.fireGestureEvent(n),mxEvent$1.consume(n)}),mxEvent$1.addListener(t,"gesturechange",n=>{e.fireGestureEvent(n),mxEvent$1.consume(n)}),mxEvent$1.addListener(t,"gestureend",n=>{e.fireGestureEvent(n),mxEvent$1.consume(n)})),mxEvent$1.addGestureListeners(t,n=>{this.isContainerEvent(n)&&(!mxClient.IS_IE11&&!mxClient.IS_GC&&!mxClient.IS_OP&&!mxClient.IS_SF||!this.isScrollEvent(n))&&e.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(n))},n=>{this.isContainerEvent(n)&&e.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(n))},n=>{this.isContainerEvent(n)&&e.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(n))}),mxEvent$1.addListener(t,"dblclick",n=>{this.isContainerEvent(n)&&e.dblClick(n)});var i=function(n){var s=null;if(mxClient.IS_TOUCH){var l=mxEvent$1.getClientX(n),a=mxEvent$1.getClientY(n),o=mxUtils$1.convertPoint(t,l,a);s=e.view.getState(e.getCellAt(o.x,o.y))}return s};e.addMouseListener({mouseDown:function(n,s){e.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=n=>{e.tooltipHandler!=null&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),this.captureDocumentGesture&&e.isMouseDown&&e.container!=null&&!this.isContainerEvent(n)&&e.container.style.display!="none"&&e.container.style.visibility!="hidden"&&!mxEvent$1.isConsumed(n)&&e.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(n,i(n)))},this.endHandler=n=>{this.captureDocumentGesture&&e.isMouseDown&&e.container!=null&&!this.isContainerEvent(n)&&e.container.style.display!="none"&&e.container.style.visibility!="hidden"&&e.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(n))},mxEvent$1.addGestureListeners(document,null,this.moveHandler,this.endHandler)}}createHtml(){var e=this.graph.container;if(e!=null&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas),this.updateContainerStyle(e),mxClient.IS_QUIRKS)){var t=i=>{var n=this.getGraphBounds(),s=n.x+n.width+this.graph.border,l=n.y+n.height+this.graph.border;this.updateHtmlCanvasSize(s,l)};mxEvent$1.addListener(window,"resize",t)}}updateHtmlCanvasSize(e,t){if(this.graph.container!=null){var i=this.graph.container.offsetWidth,n=this.graph.container.offsetHeight;i<e?this.canvas.style.width=e+"px":this.canvas.style.width="100%",n<t?this.canvas.style.height=t+"px":this.canvas.style.height="100%"}}createHtmlPane(e,t){var i=document.createElement("DIV");return e!=null&&t!=null?(i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width=e,i.style.height=t):i.style.position="relative",i}createVml(){var e=this.graph.container;if(e!=null){var t=e.offsetWidth,i=e.offsetHeight;this.canvas=this.createVmlPane(t,i),this.canvas.style.overflow="hidden",this.backgroundPane=this.createVmlPane(t,i),this.drawPane=this.createVmlPane(t,i),this.overlayPane=this.createVmlPane(t,i),this.decoratorPane=this.createVmlPane(t,i),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas)}}createVmlPane(e,t){var i=document.createElement(mxClient.VML_PREFIX+":group");return i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width=e+"px",i.style.height=t+"px",i.setAttribute("coordsize",e+","+t),i.setAttribute("coordorigin","0,0"),i}createSvg(){var e=this.graph.container;this.canvas=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var t=document.createElementNS(mxConstants$1.NS_SVG,"svg");t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.display="block",t.appendChild(this.canvas),mxClient.IS_IE11&&(t.style.overflow="hidden"),e!=null&&(e.appendChild(t),this.updateContainerStyle(e))}updateContainerStyle(e){var t=mxUtils$1.getCurrentStyle(e);t!=null&&t.position=="static"&&(e.style.position="relative"),mxClient.IS_POINTER&&(e.style.touchAction="none")}destroy(){var e=this.canvas!=null?this.canvas.ownerSVGElement:null;e==null&&(e=this.canvas),e!=null&&e.parentNode!=null&&(this.clear(this.currentRoot,!0),mxEvent$1.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent$1.release(this.graph.container),e.parentNode.removeChild(e),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)}}class mxPerimeter{static RectanglePerimeter(e,t,i,n){var s=e.getCenterX(),l=e.getCenterY(),a=i.x-s,o=i.y-l,h=Math.atan2(o,a),d=new mxPoint(0,0),m=Math.PI,g=Math.PI/2,c=g-h,f=Math.atan2(e.height,e.width);return h<-m+f||h>m-f?(d.x=e.x,d.y=l-e.width*Math.tan(h)/2):h<-f?(d.y=e.y,d.x=s-e.height*Math.tan(c)/2):h<f?(d.x=e.x+e.width,d.y=l+e.width*Math.tan(h)/2):(d.y=e.y+e.height,d.x=s+e.height*Math.tan(c)/2),n&&(i.x>=e.x&&i.x<=e.x+e.width?d.x=i.x:i.y>=e.y&&i.y<=e.y+e.height&&(d.y=i.y),i.x<e.x?d.x=e.x:i.x>e.x+e.width&&(d.x=e.x+e.width),i.y<e.y?d.y=e.y:i.y>e.y+e.height&&(d.y=e.y+e.height)),d}static EllipsePerimeter(e,t,i,n){var s=e.x,l=e.y,a=e.width/2,o=e.height/2,h=s+a,d=l+o,m=i.x,g=i.y,c=parseInt(m-h),f=parseInt(g-d);if(c==0&&f!=0)return new mxPoint(h,d+o*f/Math.abs(f));if(c==0&&f==0)return new mxPoint(m,g);if(n){if(g>=l&&g<=l+e.height){var C=g-d,v=Math.sqrt(a*a*(1-C*C/(o*o)))||0;return m<=s&&(v=-v),new mxPoint(h+v,g)}if(m>=s&&m<=s+e.width){var v=m-h,C=Math.sqrt(o*o*(1-v*v/(a*a)))||0;return g<=l&&(C=-C),new mxPoint(m,d+C)}}var w=f/c,S=d-w*h,T=a*a*w*w+o*o,P=-2*h*T,L=a*a*w*w*h*h+o*o*h*h-a*a*o*o,k=Math.sqrt(P*P-4*T*L),G=(-P+k)/(2*T),Y=(-P-k)/(2*T),te=w*G+S,ie=w*Y+S,ne=Math.sqrt(Math.pow(G-m,2)+Math.pow(te-g,2)),q=Math.sqrt(Math.pow(Y-m,2)+Math.pow(ie-g,2)),oe=0,le=0;return ne<q?(oe=G,le=te):(oe=Y,le=ie),new mxPoint(oe,le)}static RhombusPerimeter(e,t,i,n){var s=e.x,l=e.y,a=e.width,o=e.height,h=s+a/2,d=l+o/2,m=i.x,g=i.y;if(h==m)return d>g?new mxPoint(h,l):new mxPoint(h,l+o);if(d==g)return h>m?new mxPoint(s,d):new mxPoint(s+a,d);var c=h,f=d;return n&&(m>=s&&m<=s+a?c=m:g>=l&&g<=l+o&&(f=g)),m<h?g<d?mxUtils$1.intersection(m,g,c,f,h,l,s,d):mxUtils$1.intersection(m,g,c,f,h,l+o,s,d):g<d?mxUtils$1.intersection(m,g,c,f,h,l,s+a,d):mxUtils$1.intersection(m,g,c,f,h,l+o,s+a,d)}static TrianglePerimeter(e,t,i,n){var s=t!=null?t.style[mxConstants$1.STYLE_DIRECTION]:null,l=s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_SOUTH,a=e.x,o=e.y,h=e.width,d=e.height,m=a+h/2,g=o+d/2,c=new mxPoint(a,o),f=new mxPoint(a+h,g),C=new mxPoint(a,o+d);s==mxConstants$1.DIRECTION_NORTH?(c=C,f=new mxPoint(m,o),C=new mxPoint(a+h,o+d)):s==mxConstants$1.DIRECTION_SOUTH?(f=new mxPoint(m,o+d),C=new mxPoint(a+h,o)):s==mxConstants$1.DIRECTION_WEST&&(c=new mxPoint(a+h,o),f=new mxPoint(a,g),C=new mxPoint(a+h,o+d));var v=i.x-m,w=i.y-g,S=l?Math.atan2(v,w):Math.atan2(w,v),T=l?Math.atan2(h,d):Math.atan2(d,h),P=!1;s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_WEST?P=S>-T&&S<T:P=S<-Math.PI+T||S>Math.PI-T;var L=null;if(P)n&&(l&&i.x>=c.x&&i.x<=C.x||!l&&i.y>=c.y&&i.y<=C.y)?l?L=new mxPoint(i.x,c.y):L=new mxPoint(c.x,i.y):s==mxConstants$1.DIRECTION_NORTH?L=new mxPoint(a+h/2+d*Math.tan(S)/2,o+d):s==mxConstants$1.DIRECTION_SOUTH?L=new mxPoint(a+h/2-d*Math.tan(S)/2,o):s==mxConstants$1.DIRECTION_WEST?L=new mxPoint(a+h,o+d/2+h*Math.tan(S)/2):L=new mxPoint(a,o+d/2-h*Math.tan(S)/2);else{if(n){var k=new mxPoint(m,g);i.y>=o&&i.y<=o+d?(k.x=l?m:s==mxConstants$1.DIRECTION_WEST?a+h:a,k.y=i.y):i.x>=a&&i.x<=a+h&&(k.x=i.x,k.y=l?s==mxConstants$1.DIRECTION_NORTH?o+d:o:g),v=i.x-k.x,w=i.y-k.y,m=k.x,g=k.y}l&&i.x<=a+h/2||!l&&i.y<=o+d/2?L=mxUtils$1.intersection(i.x,i.y,m,g,c.x,c.y,f.x,f.y):L=mxUtils$1.intersection(i.x,i.y,m,g,f.x,f.y,C.x,C.y)}return L==null&&(L=new mxPoint(m,g)),L}static HexagonPerimeter(e,t,i,n){var s=e.x,l=e.y,a=e.width,o=e.height,h=e.getCenterX(),d=e.getCenterY(),m=i.x,g=i.y,c=m-h,f=g-d,C=-Math.atan2(f,c),v=Math.PI,w=Math.PI/2,S=new mxPoint(h,d),T=t!=null?mxUtils$1.getValue(t.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,P=T==mxConstants$1.DIRECTION_NORTH||T==mxConstants$1.DIRECTION_SOUTH,L=new mxPoint,k=new mxPoint;if((m<s&&g<l||m<s&&g>l+o||m>s+a&&g<l||m>s+a&&g>l+o)&&(n=!1),n){if(P){if(m==h){if(g<=l)return new mxPoint(h,l);if(g>=l+o)return new mxPoint(h,l+o)}else if(m<s){if(g==l+o/4)return new mxPoint(s,l+o/4);if(g==l+3*o/4)return new mxPoint(s,l+3*o/4)}else if(m>s+a){if(g==l+o/4)return new mxPoint(s+a,l+o/4);if(g==l+3*o/4)return new mxPoint(s+a,l+3*o/4)}else if(m==s){if(g<d)return new mxPoint(s,l+o/4);if(g>d)return new mxPoint(s,l+3*o/4)}else if(m==s+a){if(g<d)return new mxPoint(s+a,l+o/4);if(g>d)return new mxPoint(s+a,l+3*o/4)}if(g==l)return new mxPoint(h,l);if(g==l+o)return new mxPoint(h,l+o);m<h?g>l+o/4&&g<l+3*o/4?(L=new mxPoint(s,l),k=new mxPoint(s,l+o)):g<l+o/4?(L=new mxPoint(s-Math.floor(.5*a),l+Math.floor(.5*o)),k=new mxPoint(s+a,l-Math.floor(.25*o))):g>l+3*o/4&&(L=new mxPoint(s-Math.floor(.5*a),l+Math.floor(.5*o)),k=new mxPoint(s+a,l+Math.floor(1.25*o))):m>h&&(g>l+o/4&&g<l+3*o/4?(L=new mxPoint(s+a,l),k=new mxPoint(s+a,l+o)):g<l+o/4?(L=new mxPoint(s,l-Math.floor(.25*o)),k=new mxPoint(s+Math.floor(1.5*a),l+Math.floor(.5*o))):g>l+3*o/4&&(L=new mxPoint(s+Math.floor(1.5*a),l+Math.floor(.5*o)),k=new mxPoint(s,l+Math.floor(1.25*o))))}else{if(g==d){if(m<=s)return new mxPoint(s,l+o/2);if(m>=s+a)return new mxPoint(s+a,l+o/2)}else if(g<l){if(m==s+a/4)return new mxPoint(s+a/4,l);if(m==s+3*a/4)return new mxPoint(s+3*a/4,l)}else if(g>l+o){if(m==s+a/4)return new mxPoint(s+a/4,l+o);if(m==s+3*a/4)return new mxPoint(s+3*a/4,l+o)}else if(g==l){if(m<h)return new mxPoint(s+a/4,l);if(m>h)return new mxPoint(s+3*a/4,l)}else if(g==l+o){if(m<h)return new mxPoint(s+a/4,l+o);if(g>d)return new mxPoint(s+3*a/4,l+o)}if(m==s)return new mxPoint(s,d);if(m==s+a)return new mxPoint(s+a,d);g<d?m>s+a/4&&m<s+3*a/4?(L=new mxPoint(s,l),k=new mxPoint(s+a,l)):m<s+a/4?(L=new mxPoint(s-Math.floor(.25*a),l+o),k=new mxPoint(s+Math.floor(.5*a),l-Math.floor(.5*o))):m>s+3*a/4&&(L=new mxPoint(s+Math.floor(.5*a),l-Math.floor(.5*o)),k=new mxPoint(s+Math.floor(1.25*a),l+o)):g>d&&(m>s+a/4&&m<s+3*a/4?(L=new mxPoint(s,l+o),k=new mxPoint(s+a,l+o)):m<s+a/4?(L=new mxPoint(s-Math.floor(.25*a),l),k=new mxPoint(s+Math.floor(.5*a),l+Math.floor(1.5*o))):m>s+3*a/4&&(L=new mxPoint(s+Math.floor(.5*a),l+Math.floor(1.5*o)),k=new mxPoint(s+Math.floor(1.25*a),l)))}var G=h,Y=d;m>=s&&m<=s+a?(G=m,g<d?Y=l+o:Y=l):g>=l&&g<=l+o&&(Y=g,m<h?G=s+a:G=s),S=mxUtils$1.intersection(G,Y,i.x,i.y,L.x,L.y,k.x,k.y)}else{if(P){var te=Math.atan2(o/4,a/2);if(C==te)return new mxPoint(s+a,l+Math.floor(.25*o));if(C==w)return new mxPoint(s+Math.floor(.5*a),l);if(C==v-te)return new mxPoint(s,l+Math.floor(.25*o));if(C==-te)return new mxPoint(s+a,l+Math.floor(.75*o));if(C==-w)return new mxPoint(s+Math.floor(.5*a),l+o);if(C==-v+te)return new mxPoint(s,l+Math.floor(.75*o));C<te&&C>-te?(L=new mxPoint(s+a,l),k=new mxPoint(s+a,l+o)):C>te&&C<w?(L=new mxPoint(s,l-Math.floor(.25*o)),k=new mxPoint(s+Math.floor(1.5*a),l+Math.floor(.5*o))):C>w&&C<v-te?(L=new mxPoint(s-Math.floor(.5*a),l+Math.floor(.5*o)),k=new mxPoint(s+a,l-Math.floor(.25*o))):C>v-te&&C<=v||C<-v+te&&C>=-v?(L=new mxPoint(s,l),k=new mxPoint(s,l+o)):C<-te&&C>-w?(L=new mxPoint(s+Math.floor(1.5*a),l+Math.floor(.5*o)),k=new mxPoint(s,l+Math.floor(1.25*o))):C<-w&&C>-v+te&&(L=new mxPoint(s-Math.floor(.5*a),l+Math.floor(.5*o)),k=new mxPoint(s+a,l+Math.floor(1.25*o)))}else{var te=Math.atan2(o/2,a/4);if(C==te)return new mxPoint(s+Math.floor(.75*a),l);if(C==v-te)return new mxPoint(s+Math.floor(.25*a),l);if(C==v||C==-v)return new mxPoint(s,l+Math.floor(.5*o));if(C==0)return new mxPoint(s+a,l+Math.floor(.5*o));if(C==-te)return new mxPoint(s+Math.floor(.75*a),l+o);if(C==-v+te)return new mxPoint(s+Math.floor(.25*a),l+o);C>0&&C<te?(L=new mxPoint(s+Math.floor(.5*a),l-Math.floor(.5*o)),k=new mxPoint(s+Math.floor(1.25*a),l+o)):C>te&&C<v-te?(L=new mxPoint(s,l),k=new mxPoint(s+a,l)):C>v-te&&C<v?(L=new mxPoint(s-Math.floor(.25*a),l+o),k=new mxPoint(s+Math.floor(.5*a),l-Math.floor(.5*o))):C<0&&C>-te?(L=new mxPoint(s+Math.floor(.5*a),l+Math.floor(1.5*o)),k=new mxPoint(s+Math.floor(1.25*a),l)):C<-te&&C>-v+te?(L=new mxPoint(s,l+o),k=new mxPoint(s+a,l+o)):C<-v+te&&C>-v&&(L=new mxPoint(s-Math.floor(.25*a),l),k=new mxPoint(s+Math.floor(.5*a),l+Math.floor(1.5*o)))}S=mxUtils$1.intersection(h,d,i.x,i.y,L.x,L.y,k.x,k.y)}return S??new mxPoint(h,d)}}class mxStylesheet{constructor(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}createDefaultVertexStyle(){var e=new Object;return e[mxConstants$1.STYLE_SHAPE]=mxConstants$1.SHAPE_RECTANGLE,e[mxConstants$1.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,e[mxConstants$1.STYLE_VERTICAL_ALIGN]=mxConstants$1.ALIGN_MIDDLE,e[mxConstants$1.STYLE_ALIGN]=mxConstants$1.ALIGN_CENTER,e[mxConstants$1.STYLE_FILLCOLOR]="#C3D9FF",e[mxConstants$1.STYLE_STROKECOLOR]="#6482B9",e[mxConstants$1.STYLE_FONTCOLOR]="#774400",e}createDefaultEdgeStyle(){var e=new Object;return e[mxConstants$1.STYLE_SHAPE]=mxConstants$1.SHAPE_CONNECTOR,e[mxConstants$1.STYLE_ENDARROW]=mxConstants$1.ARROW_CLASSIC,e[mxConstants$1.STYLE_VERTICAL_ALIGN]=mxConstants$1.ALIGN_MIDDLE,e[mxConstants$1.STYLE_ALIGN]=mxConstants$1.ALIGN_CENTER,e[mxConstants$1.STYLE_STROKECOLOR]="#6482B9",e[mxConstants$1.STYLE_FONTCOLOR]="#446299",e}putDefaultVertexStyle(e){this.putCellStyle("defaultVertex",e)}putDefaultEdgeStyle(e){this.putCellStyle("defaultEdge",e)}getDefaultVertexStyle(){return this.styles.defaultVertex}getDefaultEdgeStyle(){return this.styles.defaultEdge}putCellStyle(e,t){this.styles[e]=t}getCellStyle(e,t){var i=t;if(e!=null&&e.length>0){var n=e.split(";");i!=null&&e.charAt(0)!=";"?i=mxUtils$1.clone(i):i=new Object;for(var s=0;s<n.length;s++){var l=n[s],a=l.indexOf("=");if(a>=0){var o=l.substring(0,a),h=l.substring(a+1);h==mxConstants$1.NONE?delete i[o]:mxUtils$1.isNumeric(h)?i[o]=parseFloat(h):i[o]=h}else{var d=this.styles[l];if(d!=null)for(var o in d)i[o]=d[o]}}}return i}}class mxSelectionChange{constructor(e,t,i){this.selectionModel=e,this.added=t!=null?t.slice():null,this.removed=i!=null?i.slice():null}execute(){var e=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources$1.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,this.removed!=null)for(var t=0;t<this.removed.length;t++)this.selectionModel.cellRemoved(this.removed[t]);if(this.added!=null)for(var t=0;t<this.added.length;t++)this.selectionModel.cellAdded(this.added[t]);var i=this.added;this.added=this.removed,this.removed=i,window.status=mxResources$1.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",e),this.selectionModel.fireEvent(new mxEventObject$1(mxEvent$1.CHANGE,"added",this.added,"removed",this.removed))}}class mxGraphSelectionModel extends mxEventSource{constructor(e){super(),u(this,"doneResource",mxClient.language!="none"?"done":""),u(this,"updatingSelectionResource",mxClient.language!="none"?"updatingSelection":""),u(this,"singleSelection",!1),this.graph=e,this.cells=[]}isSingleSelection(){return this.singleSelection}setSingleSelection(e){this.singleSelection=e}isSelected(e){return e!=null?mxUtils$1.indexOf(this.cells,e)>=0:!1}isEmpty(){return this.cells.length==0}clear(){this.changeSelection(null,this.cells)}setCell(e){e!=null&&this.setCells([e])}setCells(e){if(e!=null){this.singleSelection&&(e=[this.getFirstSelectableCell(e)]);for(var t=[],i=0;i<e.length;i++)this.graph.isCellSelectable(e[i])&&t.push(e[i]);this.changeSelection(t,this.cells)}}getFirstSelectableCell(e){if(e!=null){for(var t=0;t<e.length;t++)if(this.graph.isCellSelectable(e[t]))return e[t]}return null}addCell(e){e!=null&&this.addCells([e])}addCells(e){if(e!=null){var t=null;this.singleSelection&&(t=this.cells,e=[this.getFirstSelectableCell(e)]);for(var i=[],n=0;n<e.length;n++)!this.isSelected(e[n])&&this.graph.isCellSelectable(e[n])&&i.push(e[n]);this.changeSelection(i,t)}}removeCell(e){e!=null&&this.removeCells([e])}removeCells(e){if(e!=null){for(var t=[],i=0;i<e.length;i++)this.isSelected(e[i])&&t.push(e[i]);this.changeSelection(null,t)}}changeSelection(e,t){if(e!=null&&e.length>0&&e[0]!=null||t!=null&&t.length>0&&t[0]!=null){var i=new mxSelectionChange(this,e,t);i.execute();var n=new mxUndoableEdit(this,!1);n.add(i),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",n))}}cellAdded(e){e!=null&&!this.isSelected(e)&&this.cells.push(e)}cellRemoved(e){if(e!=null){var t=mxUtils$1.indexOf(this.cells,e);t>=0&&this.cells.splice(t,1)}}}class mxPopupMenuHandler extends mxPopupMenu{constructor(e,t){super(),u(this,"graph",null),u(this,"selectOnPopup",!0),u(this,"clearSelectionOnBackground",!0),u(this,"triggerX",null),u(this,"triggerY",null),u(this,"screenX",null),u(this,"screenY",null),e!=null&&(this.graph=e,this.factoryMethod=t,this.graph.addMouseListener(this),this.gestureHandler=(i,n)=>{this.inTolerance=!1},this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler),this.init())}init(){super.init(),mxEvent$1.addGestureListeners(this.div,e=>{this.graph.tooltipHandler.hide()})}isSelectOnPopup(e){return this.selectOnPopup}mouseDown(e,t){this.isEnabled()&&!mxEvent$1.isMultiTouchEvent(t.getEvent())&&(this.hideMenu(),this.triggerX=t.getGraphX(),this.triggerY=t.getGraphY(),this.screenX=mxEvent$1.getMainEvent(t.getEvent()).screenX,this.screenY=mxEvent$1.getMainEvent(t.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(t),this.inTolerance=!0)}mouseMove(e,t){this.inTolerance&&this.screenX!=null&&this.screenY!=null&&(Math.abs(mxEvent$1.getMainEvent(t.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent$1.getMainEvent(t.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)}mouseUp(e,t){if(this.popupTrigger&&this.inTolerance&&this.triggerX!=null&&this.triggerY!=null){var i=this.getCellForPopupEvent(t);this.graph.isEnabled()&&this.isSelectOnPopup(t)&&i!=null&&!this.graph.isCellSelected(i)?this.graph.setSelectionCell(i):this.clearSelectionOnBackground&&i==null&&this.graph.clearSelection(),this.graph.tooltipHandler.hide();var n=mxUtils$1.getScrollOrigin();this.popup(t.getX()+n.x+1,t.getY()+n.y+1,i,t.getEvent()),t.consume()}this.popupTrigger=!1,this.inTolerance=!1}getCellForPopupEvent(e){return e.getCell()}destroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),super.destroy()}}class mxPanningHandler extends mxEventSource{constructor(e){super(),u(this,"graph",null),u(this,"useLeftButtonForPanning",!1),u(this,"usePopupTrigger",!0),u(this,"ignoreCell",!1),u(this,"previewEnabled",!0),u(this,"useGrid",!1),u(this,"panningEnabled",!0),u(this,"pinchEnabled",!0),u(this,"maxScale",8),u(this,"minScale",.01),u(this,"dx",null),u(this,"dy",null),u(this,"startX",0),u(this,"startY",0),e!=null&&(this.graph=e,this.graph.addMouseListener(this),this.forcePanningHandler=(t,i)=>{var n=i.getProperty("eventName"),s=i.getProperty("event");n==mxEvent$1.MOUSE_DOWN&&this.isForcePanningEvent(s)&&(this.start(s),this.active=!0,this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_START,"event",s)),s.consume())},this.graph.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=(t,i)=>{if(this.isPinchEnabled()){var n=i.getProperty("event");!mxEvent$1.isConsumed(n)&&n.type=="gesturestart"?(this.initialScale=this.graph.view.scale,!this.active&&this.mouseDownEvent!=null&&(this.start(this.mouseDownEvent),this.mouseDownEvent=null)):n.type=="gestureend"&&this.initialScale!=null&&(this.initialScale=null),this.initialScale!=null&&this.zoomGraph(n)}},this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler),this.mouseUpListener=()=>{this.active&&this.reset()},mxEvent$1.addListener(document,"mouseup",this.mouseUpListener))}isActive(){return this.active||this.initialScale!=null}isPanningEnabled(){return this.panningEnabled}setPanningEnabled(e){this.panningEnabled=e}isPinchEnabled(){return this.pinchEnabled}setPinchEnabled(e){this.pinchEnabled=e}isPanningTrigger(e){var t=e.getEvent();return this.useLeftButtonForPanning&&e.getState()==null&&mxEvent$1.isLeftMouseButton(t)||mxEvent$1.isControlDown(t)&&mxEvent$1.isShiftDown(t)||this.usePopupTrigger&&mxEvent$1.isPopupTrigger(t)}isForcePanningEvent(e){return this.ignoreCell||mxEvent$1.isMultiTouchEvent(e.getEvent())}mouseDown(e,t){this.mouseDownEvent=t,!t.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(t)&&(this.start(t),this.consumePanningTrigger(t))}start(e){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=e.getX(),this.startY=e.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0}consumePanningTrigger(e){e.consume()}mouseMove(e,t){if(this.dx=t.getX()-this.startX,this.dy=t.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject$1(mxEvent$1.PAN,"event",t));else if(this.panningTrigger){var i=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!i&&this.active&&this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_START,"event",t))}(this.active||this.panningTrigger)&&t.consume()}mouseUp(e,t){if(this.active){if(this.dx!=null&&this.dy!=null){if(!this.graph.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.graph.container)){var i=this.graph.getView().scale,n=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(n.x+this.dx/i,n.y+this.dy/i)}t.consume()}this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_END,"event",t))}this.reset()}zoomGraph(e){var t=Math.round(this.initialScale*e.scale*100)/100;this.minScale!=null&&(t=Math.max(this.minScale,t)),this.maxScale!=null&&(t=Math.min(this.maxScale,t)),this.graph.view.scale!=t&&(this.graph.zoomTo(t),mxEvent$1.consume(e))}reset(){this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null}panGraph(e,t){this.graph.getView().setTranslate(e,t)}destroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent$1.removeListener(document,"mouseup",this.mouseUpListener)}}class ConnectionCellMarker extends mxCellMarker{constructor(e,t,i){super(i),this.connectionHandler=e,this.hotspotEnabled=t}getCell(e){var t=super.getCell(e);if(this.connectionHandler==null)return t;if(this.connectionHandler.error=null,t==null&&this.connectionHandler.currentPoint!=null&&(t=this.connectionHandler.graph.getCellAt(this.connectionHandler.currentPoint.x,this.connectionHandler.currentPoint.y)),t!=null&&!this.connectionHandler.graph.isCellConnectable(t)){var i=this.connectionHandler.graph.getModel().getParent(t);this.connectionHandler.graph.getModel().isVertex(i)&&this.connectionHandler.graph.isCellConnectable(i)&&(t=i)}return(this.connectionHandler.graph.isSwimlane(t)&&this.connectionHandler.currentPoint!=null&&this.connectionHandler.graph.hitsSwimlaneContent(t,this.connectionHandler.currentPoint.x,this.connectionHandler.currentPoint.y)||!this.connectionHandler.isConnectableCell(t))&&(t=null),t!=null?this.connectionHandler.isConnecting()?this.connectionHandler.previous!=null&&(this.connectionHandler.error=this.connectionHandler.validateConnection(this.connectionHandler.previous.cell,t),this.connectionHandler.error!=null&&this.connectionHandler.error.length==0&&(t=null,this.connectionHandler.isCreateTarget(e.getEvent())&&(this.connectionHandler.error=null))):this.connectionHandler.isValidSource(t,e)||(t=null):this.connectionHandler.isConnecting()&&!this.connectionHandler.isCreateTarget(e.getEvent())&&!this.connectionHandler.graph.allowDanglingEdges&&(this.connectionHandler.error=""),t}isValidState(e){return this.connectionHandler.isConnecting()?this.connectionHandler.error==null:super.isValidState(e)}getMarkerColor(e,t,i){return this.connectionHandler.connectImage==null||this.connectionHandler.isConnecting()?super.getMarkerColor(e,t,i):null}intersects(e,t){return this.connectionHandler.connectImage!=null||this.connectionHandler.isConnecting()?!0:super.intersects(e,t)}}class mxConnectionHandler extends mxEventSource{constructor(e,t){super(),u(this,"graph",null),u(this,"factoryMethod",!0),u(this,"moveIconFront",!1),u(this,"moveIconBack",!1),u(this,"connectImage",null),u(this,"targetConnectImage",!1),u(this,"enabled",!0),u(this,"select",!0),u(this,"createTarget",!1),u(this,"marker",null),u(this,"constraintHandler",null),u(this,"error",null),u(this,"waypointsEnabled",!1),u(this,"ignoreMouseDown",!1),u(this,"first",null),u(this,"connectIconOffset",new mxPoint(0,mxConstants$1.TOOLTIP_VERTICAL_OFFSET)),u(this,"edgeState",null),u(this,"changeHandler",null),u(this,"drillHandler",null),u(this,"mouseDownCounter",0),u(this,"movePreviewAway",!1),u(this,"outlineConnect",!1),u(this,"livePreview",!1),u(this,"cursor",null),u(this,"insertBeforeSource",!1),e!=null&&(this.graph=e,this.factoryMethod=t,this.init(),this.escapeHandler=(i,n)=>{this.reset()},this.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isInsertBefore(e,t,i,n,s){return this.insertBeforeSource&&t!=i}isCreateTarget(e){return this.createTarget}setCreateTarget(e){this.createTarget=e}createShape(){var e=this.livePreview&&this.edgeState!=null?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants$1.INVALID_COLOR);return e.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,e.scale=this.graph.view.scale,e.pointerEvents=!1,e.isDashed=!0,e.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(e.node,this.graph,null),e}init(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=e=>{this.iconState!=null&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),this.iconState!=null?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):this.previous!=null&&this.graph.view.getState(this.previous.cell)==null&&this.reset()},this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=e=>{this.reset()},this.graph.addListener(mxEvent$1.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent$1.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent$1.UP,this.drillHandler)}isConnectableCell(e){return!0}createMarker(){var e=new ConnectionCellMarker(this,!0,this.graph);return e}start(e,t,i,n){this.previous=e,this.first=new mxPoint(t,i),this.edgeState=n??this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=e,this.marker.mark(),this.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.previous))}isConnecting(){return this.first!=null&&this.shape!=null}isValidSource(e,t){return this.graph.isValidSource(e)}isValidTarget(e){return!0}validateConnection(e,t){return this.isValidTarget(t)?this.graph.getEdgeValidationError(null,e,t):""}getConnectImage(e){return this.connectImage}isMoveIconToFrontForState(e){return e.text!=null&&e.text.node.parentNode==this.graph.container?!0:this.moveIconFront}createIcons(e){var t=this.getConnectImage(e);if(t!=null&&e!=null){this.iconState=e;var i=[],n=new mxRectangle(0,0,t.width,t.height),s=new mxImageShape(n,t.src,null,null,0);s.preserveImageAspect=!1,this.isMoveIconToFrontForState(e)?(s.dialect=mxConstants$1.DIALECT_STRICTHTML,s.init(this.graph.container)):(s.dialect=this.graph.dialect==mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_SVG:mxConstants$1.DIALECT_VML,s.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&s.node.previousSibling!=null&&s.node.parentNode.insertBefore(s.node,s.node.parentNode.firstChild)),s.node.style.cursor=mxConstants$1.CURSOR_CONNECT;var l=()=>this.currentState!=null?this.currentState:e,a=o=>{mxEvent$1.isConsumed(o)||(this.icon=s,this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(o,l())))};return mxEvent$1.redirectMouseEvents(s.node,this.graph,l,a),i.push(s),this.redrawIcons(i,this.iconState),i}return null}redrawIcons(e,t){if(e!=null&&e[0]!=null&&t!=null){var i=this.getIconPosition(e[0],t);e[0].bounds.x=i.x,e[0].bounds.y=i.y,e[0].redraw()}}getIconPosition(e,t){var i=this.graph.getView().scale,n=t.getCenterX(),s=t.getCenterY();if(this.graph.isSwimlane(t.cell)){var l=this.graph.getStartSize(t.cell);n=l.width!=0?t.x+l.width*i/2:n,s=l.height!=0?t.y+l.height*i/2:s;var a=mxUtils$1.toRadians(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION)||0);if(a!=0){var o=Math.cos(a),h=Math.sin(a),d=new mxPoint(t.getCenterX(),t.getCenterY()),m=mxUtils$1.getRotatedPoint(new mxPoint(n,s),o,h,d);n=m.x,s=m.y}}return new mxPoint(n-e.bounds.width/2,s-e.bounds.height/2)}destroyIcons(){if(this.icons!=null){for(var e=0;e<this.icons.length;e++)this.icons[e].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}}isStartEvent(e){return this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null||this.previous!=null&&this.error==null&&(this.icons==null||this.icons!=null&&this.icon!=null)}mouseDown(e,t){if(this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!t.isConsumed()&&!this.isConnecting()&&this.isStartEvent(t)){if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.edgeState=this.createEdgeState(t),this.mouseDownCounter=1,this.waypointsEnabled&&this.shape==null&&(this.waypoints=null,this.shape=this.createShape(),this.edgeState!=null&&this.shape.apply(this.edgeState)),this.previous==null&&this.edgeState!=null){var i=this.graph.getPointForEvent(t.getEvent());this.edgeState.cell.geometry.setTerminalPoint(i,!0)}this.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.previous)),t.consume()}this.selectedIcon=this.icon,this.icon=null}isImmediateConnectSource(e){return!this.graph.isCellMovable(e.cell)}createEdgeState(e){return null}isOutlineConnectEvent(e){var t=mxUtils$1.getOffset(this.graph.container),i=e.getEvent(),n=mxEvent$1.getClientX(i),s=mxEvent$1.getClientY(i),l=document.documentElement,a=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),o=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),h=this.currentPoint.x-this.graph.container.scrollLeft+t.x-a,d=this.currentPoint.y-this.graph.container.scrollTop+t.y-o;return this.outlineConnect&&!mxEvent$1.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent$1.isAltDown(e.getEvent())&&e.getState()!=null||this.marker.highlight.isHighlightAt(n,s)||(h!=n||d!=s)&&e.getState()==null&&this.marker.highlight.isHighlightAt(h,d))}updateCurrentState(e,t){if(this.constraintHandler.update(e,this.first==null,!1,this.first==null||e.isSource(this.marker.highlight.shape)?null:t),this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null)this.marker.highlight!=null&&this.marker.highlight.state!=null&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?this.marker.highlight.shape.stroke!="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),this.previous!=null&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),this.error==null&&(this.currentState=this.constraintHandler.currentFocus),(this.error!=null||this.currentState!=null&&!this.isCellEnabled(this.currentState.cell))&&this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(e.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(e),this.currentState=this.marker.getValidState()),this.currentState!=null&&!this.isCellEnabled(this.currentState.cell)&&(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null);var i=this.isOutlineConnectEvent(e);if(this.currentState!=null&&i){e.isSource(this.marker.highlight.shape)&&(t=new mxPoint(e.getGraphX(),e.getGraphY()));var n=this.graph.getOutlineConstraint(t,this.currentState,e);this.constraintHandler.setFocus(e,this.currentState,!1),this.constraintHandler.currentConstraint=n,this.constraintHandler.currentPoint=t}if(this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){var s=this.graph.view.scale;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null?(this.marker.highlight.shape.stroke=mxConstants$1.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.OUTLINE_HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(e.getCell())&&this.marker.getValidState()!=e.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants$1.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint())}}}isCellEnabled(e){return!0}convertWaypoint(e){var t=this.graph.getView().getScale(),i=this.graph.getView().getTranslate();e.x=e.x/t-i.x,e.y=e.y/t-i.y}snapToPreview(e,t){if(!mxEvent$1.isAltDown(e.getEvent())&&this.previous!=null){var i=this.graph.gridSize*this.graph.view.scale/2,n=this.sourceConstraint!=null?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(n.x-e.getGraphX())<i&&(t.x=n.x),Math.abs(n.y-e.getGraphY())<i&&(t.y=n.y)}}mouseMove(e,t){if(!t.isConsumed()&&(this.ignoreMouseDown||this.first!=null||!this.graph.isMouseDown)){!this.isEnabled()&&this.currentState!=null&&(this.destroyIcons(),this.currentState=null);var i=this.graph.getView(),n=i.scale,s=i.translate,l=new mxPoint(t.getGraphX(),t.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(t.getEvent())&&(l=new mxPoint((this.graph.snap(l.x/n-s.x)+s.x)*n,(this.graph.snap(l.y/n-s.y)+s.y)*n)),this.snapToPreview(t,l),this.currentPoint=l,(this.first!=null||this.isEnabled()&&this.graph.isEnabled())&&(this.shape!=null||this.first==null||Math.abs(t.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(t.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(t,l),this.first!=null){var a=null,o=l;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null?(a=this.constraintHandler.currentConstraint,o=this.constraintHandler.currentPoint.clone()):this.previous!=null&&!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent$1.isShiftDown(t.getEvent())&&(Math.abs(this.previous.getCenterX()-l.x)<Math.abs(this.previous.getCenterY()-l.y)?l.x=this.previous.getCenterX():l.y=this.previous.getCenterY());var h=this.first;if(this.selectedIcon!=null){var d=this.selectedIcon.bounds.width,m=this.selectedIcon.bounds.height;if(this.currentState!=null&&this.targetConnectImage){var g=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=g.x,this.selectedIcon.bounds.y=g.y}else{var c=new mxRectangle(t.getGraphX()+this.connectIconOffset.x,t.getGraphY()+this.connectIconOffset.y,d,m);this.selectedIcon.bounds=c}this.selectedIcon.redraw()}if(this.edgeState!=null)this.updateEdgeState(o,a),o=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],h=this.edgeState.absolutePoints[0];else{if(this.currentState!=null&&this.constraintHandler.currentConstraint==null){var f=this.getTargetPerimeterPoint(this.currentState,t);f!=null&&(o=f)}if(this.sourceConstraint==null&&this.previous!=null){var C=this.waypoints!=null&&this.waypoints.length>0?this.waypoints[0]:o,f=this.getSourcePerimeterPoint(this.previous,C,t);f!=null&&(h=f)}}if(this.currentState==null&&this.movePreviewAway){var f=h;if(this.edgeState!=null&&this.edgeState.absolutePoints.length>=2){var v=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];v!=null&&(f=v)}var w=o.x-f.x,S=o.y-f.y,T=Math.sqrt(w*w+S*S);if(T==0)return;this.originalPoint=o.clone(),o.x-=w*4/T,o.y-=S*4/T}else this.originalPoint=null;if(this.shape==null){var w=Math.abs(t.getGraphX()-this.first.x),S=Math.abs(t.getGraphY()-this.first.y);(w>this.graph.tolerance||S>this.graph.tolerance)&&(this.shape=this.createShape(),this.edgeState!=null&&this.shape.apply(this.edgeState),this.updateCurrentState(t,l))}if(this.shape!=null){if(this.edgeState!=null)this.shape.points=this.edgeState.absolutePoints;else{var P=[h];this.waypoints!=null&&(P=P.concat(this.waypoints)),P.push(o),this.shape.points=P}this.drawPreview()}this.cursor!=null&&(this.graph.container.style.cursor=this.cursor),mxEvent$1.consume(t.getEvent()),t.consume()}else!this.isEnabled()||!this.graph.isEnabled()?this.constraintHandler.reset():this.previous!=this.currentState&&this.edgeState==null?(this.destroyIcons(),this.currentState!=null&&this.error==null&&this.constraintHandler.currentConstraint==null&&(this.icons=this.createIcons(this.currentState),this.icons==null&&(this.currentState.setCursor(mxConstants$1.CURSOR_CONNECT),t.consume())),this.previous=this.currentState):this.previous==this.currentState&&this.currentState!=null&&this.icons==null&&!this.graph.isMouseDown&&t.consume();if(!this.graph.isMouseDown&&this.currentState!=null&&this.icons!=null){for(var L=!1,k=t.getSource(),G=0;G<this.icons.length&&!L;G++)L=k==this.icons[G].node||k.parentNode==this.icons[G].node;L||this.updateIcons(this.currentState,this.icons,t)}}else this.constraintHandler.reset()}updateEdgeState(e,t){this.sourceConstraint!=null&&this.sourceConstraint.point!=null&&(this.edgeState.style[mxConstants$1.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants$1.STYLE_EXIT_Y]=this.sourceConstraint.point.y),t!=null&&t.point!=null?(this.edgeState.style[mxConstants$1.STYLE_ENTRY_X]=t.point.x,this.edgeState.style[mxConstants$1.STYLE_ENTRY_Y]=t.point.y):(delete this.edgeState.style[mxConstants$1.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants$1.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,this.currentState!=null?null:e],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),this.currentState!=null&&(t==null&&(t=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,t));var i=null;if(this.waypoints!=null){i=[];for(var n=0;n<this.waypoints.length;n++){var s=this.waypoints[n].clone();this.convertWaypoint(s),i[n]=s}}this.graph.view.updatePoints(this.edgeState,i,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)}getTargetPerimeterPoint(e,t){var i=null,n=e.view,s=n.getPerimeterFunction(e);if(s!=null){var l=this.waypoints!=null&&this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),a=s(n.getPerimeterBounds(e),this.edgeState,l,!1);a!=null&&(i=a)}else i=new mxPoint(e.getCenterX(),e.getCenterY());return i}getSourcePerimeterPoint(e,t,i){var n=null,s=e.view,l=s.getPerimeterFunction(e),a=new mxPoint(e.getCenterX(),e.getCenterY());if(l!=null){var o=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROTATION,0),h=-o*(Math.PI/180);o!=0&&(t=mxUtils$1.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(h),Math.sin(h),a));var d=l(s.getPerimeterBounds(e),e,t,!1);d!=null&&(o!=0&&(d=mxUtils$1.getRotatedPoint(new mxPoint(d.x,d.y),Math.cos(-h),Math.sin(-h),a)),n=d)}else n=a;return n}updateIcons(e,t,i){}isStopEvent(e){return e.getState()!=null}addWaypointForEvent(e){var t=mxUtils$1.convertPoint(this.graph.container,e.getX(),e.getY()),i=Math.abs(t.x-this.first.x),n=Math.abs(t.y-this.first.y),s=this.waypoints!=null||this.mouseDownCounter>1&&(i>this.graph.tolerance||n>this.graph.tolerance);if(s){this.waypoints==null&&(this.waypoints=[]);var l=this.graph.view.scale,t=new mxPoint(this.graph.snap(e.getGraphX()/l)*l,this.graph.snap(e.getGraphY()/l)*l);this.waypoints.push(t)}}checkConstraints(e,t){return e==null||t==null||e.point==null||t.point==null||!e.point.equals(t.point)||e.dx!=t.dx||e.dy!=t.dy||e.perimeter!=t.perimeter}mouseUp(e,t){if(!t.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(t)){this.addWaypointForEvent(t),t.consume();return}var i=this.sourceConstraint,n=this.constraintHandler.currentConstraint,s=this.previous!=null?this.previous.cell:null,l=null;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&(l=this.constraintHandler.currentFocus.cell),l==null&&this.currentState!=null&&(l=this.currentState.cell),this.error==null&&(s==null||l==null||s!=l||this.checkConstraints(i,n))?this.connect(s,l,t.getEvent(),t.getCell()):(this.previous!=null&&this.marker.validState!=null&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,t.getEvent()),this.error!=null&&this.error.length>0&&this.graph.validationAlert(this.error)),this.destroyIcons(),t.consume()}this.first!=null&&this.reset()}reset(){this.shape!=null&&(this.shape.destroy(),this.shape=null),this.cursor!=null&&this.graph.container!=null&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject$1(mxEvent$1.RESET))}drawPreview(){this.updatePreview(this.error==null),this.shape.redraw()}updatePreview(e){this.shape.strokewidth=this.getEdgeWidth(e),this.shape.stroke=this.getEdgeColor(e)}getEdgeColor(e){return e?mxConstants$1.VALID_COLOR:mxConstants$1.INVALID_COLOR}getEdgeWidth(e){return e?3:1}connect(e,t,i,n){if(t!=null||this.isCreateTarget(i)||this.graph.allowDanglingEdges){var s=this.graph.getModel(),l=!1,a=null;s.beginUpdate();try{if(e!=null&&t==null&&!this.graph.isIgnoreTerminalEvent(i)&&this.isCreateTarget(i)&&(t=this.createTargetVertex(i,e),t!=null)){if(n=this.graph.getDropTarget([t],i,n),l=!0,n==null||!this.graph.getModel().isEdge(n)){var o=this.graph.getView().getState(n);if(o!=null){var h=s.getGeometry(t);h.x-=o.origin.x,h.y-=o.origin.y}}else n=this.graph.getDefaultParent();this.graph.addCell(t,n)}var d=this.graph.getDefaultParent();e!=null&&t!=null&&s.getParent(e)==s.getParent(t)&&s.getParent(s.getParent(e))!=s.getRoot()&&(d=s.getParent(e),e.geometry!=null&&e.geometry.relative&&t.geometry!=null&&t.geometry.relative&&(d=s.getParent(d)));var m=null,g=null;if(this.edgeState!=null&&(m=this.edgeState.cell.value,g=this.edgeState.cell.style),a=this.insertEdge(d,null,m,e,t,g),a!=null){this.graph.setConnectionConstraint(a,e,!0,this.sourceConstraint),this.graph.setConnectionConstraint(a,t,!1,this.constraintHandler.currentConstraint),this.edgeState!=null&&s.setGeometry(a,this.edgeState.cell.geometry);var d=s.getParent(e);if(this.isInsertBefore(a,e,t,i,n)){for(var c=null,h=e;h.parent!=null&&h.geometry!=null&&h.geometry.relative&&h.parent!=a.parent;)h=this.graph.model.getParent(h);h!=null&&h.parent!=null&&h.parent==a.parent&&s.add(d,a,h.parent.getIndex(h))}var f=s.getGeometry(a);if(f==null&&(f=new mxGeometry,f.relative=!0,s.setGeometry(a,f)),this.waypoints!=null&&this.waypoints.length>0){var C=this.graph.view.scale,v=this.graph.view.translate;f.points=[];for(var w=0;w<this.waypoints.length;w++){var S=this.waypoints[w];f.points.push(new mxPoint(S.x/C-v.x,S.y/C-v.y))}}if(t==null){var T=this.graph.view.translate,C=this.graph.view.scale,S=this.originalPoint!=null?new mxPoint(this.originalPoint.x/C-T.x,this.originalPoint.y/C-T.y):new mxPoint(this.currentPoint.x/C-T.x,this.currentPoint.y/C-T.y);S.x-=this.graph.panDx/this.graph.view.scale,S.y-=this.graph.panDy/this.graph.view.scale,f.setTerminalPoint(S,!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CONNECT,"cell",a,"terminal",t,"event",i,"target",n,"terminalInserted",l))}}catch(P){mxLog.show(),mxLog.debug(P.message)}finally{s.endUpdate()}this.select&&this.selectCells(a,l?t:null)}}selectCells(e,t){this.graph.setSelectionCell(e)}insertEdge(e,t,i,n,s,l){if(this.factoryMethod==null)return this.graph.insertEdge(e,t,i,n,s,l);var a=this.createEdge(i,n,s,l);return a=this.graph.addEdge(a,e,n,s),a}createTargetVertex(e,t){for(var n=this.graph.getCellGeometry(t);n!=null&&n.relative;)t=this.graph.getModel().getParent(t),n=this.graph.getCellGeometry(t);var i=this.graph.cloneCell(t),n=this.graph.getModel().getGeometry(i);if(n!=null){var s=this.graph.view.translate,l=this.graph.view.scale,a=new mxPoint(this.currentPoint.x/l-s.x,this.currentPoint.y/l-s.y);n.x=Math.round(a.x-n.width/2-this.graph.panDx/l),n.y=Math.round(a.y-n.height/2-this.graph.panDy/l);var o=this.getAlignmentTolerance();if(o>0){var h=this.graph.view.getState(t);if(h!=null){var d=h.x/l-s.x,m=h.y/l-s.y;Math.abs(d-n.x)<=o&&(n.x=Math.round(d)),Math.abs(m-n.y)<=o&&(n.y=Math.round(m))}}}return i}getAlignmentTolerance(e){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance}createEdge(e,t,i,n){var s=null;if(this.factoryMethod!=null&&(s=this.factoryMethod(t,i,n)),s==null){s=new mxCell(e||""),s.setEdge(!0),s.setStyle(n);var l=new mxGeometry;l.relative=!0,s.setGeometry(l)}return s}destroy(){this.graph.removeMouseListener(this),this.shape!=null&&(this.shape.destroy(),this.shape=null),this.marker!=null&&(this.marker.destroy(),this.marker=null),this.constraintHandler!=null&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),this.drillHandler!=null&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),this.escapeHandler!=null&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)}}class mxSelectionCellsHandler extends mxEventSource{constructor(e){super(),u(this,"enabled",!0),u(this,"maxHandlers",100),this.graph=e,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=(t,i)=>{this.isEnabled()&&this.refresh()},this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.UP,this.refreshHandler)}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}getHandler(e){return this.handlers.get(e)}isHandled(e){return this.getHandler(e)!=null}reset(){this.handlers.visit(function(e,t){t.reset.apply(t)})}getHandledSelectionCells(){return this.graph.getSelectionCells()}refresh(){var e=this.handlers;this.handlers=new mxDictionary;for(var t=mxUtils$1.sortCells(this.getHandledSelectionCells(),!1),i=0;i<t.length;i++){var n=this.graph.view.getState(t[i]);if(n!=null){var s=e.remove(t[i]);s!=null&&(s.state!=n?(s.destroy(),s=null):this.isHandlerActive(s)||(s.refresh!=null&&s.refresh(),s.redraw())),s==null&&(s=this.graph.createHandler(n),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD,"state",n))),s!=null&&this.handlers.put(t[i],s)}}e.visit((l,a)=>{this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE,"state",a.state)),a.destroy()})}isHandlerActive(e){return e.index!=null}updateHandler(e){var t=this.handlers.remove(e.cell);if(t!=null){var i=t.index,n=t.startX,s=t.startY;t.destroy(),t=this.graph.createHandler(e),t!=null&&(this.handlers.put(e.cell,t),i!=null&&n!=null&&s!=null&&t.start(n,s,i))}}mouseDown(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var i=[e,t];this.handlers.visit(function(n,s){s.mouseDown.apply(s,i)})}}mouseMove(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var i=[e,t];this.handlers.visit(function(n,s){s.mouseMove.apply(s,i)})}}mouseUp(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var i=[e,t];this.handlers.visit(function(n,s){s.mouseUp.apply(s,i)})}}destroy(){this.graph.removeMouseListener(this),this.refreshHandler!=null&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)}}class mxTooltipHandler{constructor(e,t){u(this,"zIndex",10005),u(this,"graph",null),u(this,"delay",null),u(this,"ignoreTouchEvents",!0),u(this,"hideOnHover",!1),u(this,"destroyed",!1),u(this,"enabled",!0),e!=null&&(this.graph=e,this.delay=t||500,this.graph.addMouseListener(this))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isHideOnHover(){return this.hideOnHover}setHideOnHover(e){this.hideOnHover=e}init(){document.body!=null&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent$1.addGestureListeners(this.div,e=>{this.hideTooltip()}))}getStateForEvent(e){return e.getState()}mouseDown(e,t){this.reset(t,!1),this.hideTooltip()}mouseMove(e,t){if(t.getX()!=this.lastX||t.getY()!=this.lastY){this.reset(t,!0);var i=this.getStateForEvent(t);(this.isHideOnHover()||i!=this.state||t.getSource()!=this.node&&(!this.stateSource||i!=null&&this.stateSource==(t.isSource(i.shape)||!t.isSource(i.text))))&&this.hideTooltip()}this.lastX=t.getX(),this.lastY=t.getY()}mouseUp(e,t){this.reset(t,!0),this.hideTooltip()}resetTimer(){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null)}reset(e,t,i){if((!this.ignoreTouchEvents||mxEvent$1.isMouseEvent(e.getEvent()))&&(this.resetTimer(),i=i??this.getStateForEvent(e),t&&this.isEnabled()&&i!=null&&(this.div==null||this.div.style.visibility=="hidden"))){var n=e.getSource(),s=e.getX(),l=e.getY(),a=e.isSource(i.shape)||e.isSource(i.text);this.thread=window.setTimeout(()=>{if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var o=this.graph.getTooltip(i,n,s,l);this.show(o,s,l),this.state=i,this.node=n,this.stateSource=a}},this.delay)}}hide(){this.resetTimer(),this.hideTooltip()}hideTooltip(){this.div!=null&&(this.div.style.visibility="hidden",this.div.innerHTML="")}show(e,t,i){if(!this.destroyed&&e!=null&&e.length>0){this.div==null&&this.init();var n=mxUtils$1.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=t+n.x+"px",this.div.style.top=i+mxConstants$1.TOOLTIP_VERTICAL_OFFSET+n.y+"px",mxUtils$1.isNode(e)?(this.div.innerHTML="",this.div.appendChild(e)):this.div.innerHTML=e.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils$1.fit(this.div)}}destroy(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent$1.release(this.div),this.div!=null&&this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)}}class mxVisibleChange{constructor(e,t,i){this.model=e,this.cell=t,this.visible=i,this.previous=i}execute(){this.cell!=null&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))}}class mxCollapseChange{constructor(e,t,i){this.model=e,this.cell=t,this.collapsed=i,this.previous=i}execute(){this.cell!=null&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))}}class mxGraphModel extends mxEventSource{constructor(e){super(),u(this,"root",null),u(this,"cells",null),u(this,"maintainEdgeParent",!0),u(this,"ignoreRelativeEdgeParent",!0),u(this,"createIds",!0),u(this,"prefix",""),u(this,"postfix",""),u(this,"nextId",0),u(this,"updateLevel",0),u(this,"endingUpdate",!1),this.currentEdit=this.createUndoableEdit(),e!=null?this.setRoot(e):this.clear()}clear(){this.setRoot(this.createRoot())}isCreateIds(){return this.createIds}setCreateIds(e){this.createIds=e}createRoot(){var e=new mxCell;return e.insert(new mxCell),e}getCell(e){return this.cells!=null?this.cells[e]:null}filterCells(e,t){var i=null;if(e!=null){i=[];for(var n=0;n<e.length;n++)t(e[n])&&i.push(e[n])}return i}getDescendants(e){return this.filterDescendants(null,e)}filterDescendants(e,t){var i=[];t=t||this.getRoot(),(e==null||e(t))&&i.push(t);for(var n=this.getChildCount(t),s=0;s<n;s++){var l=this.getChildAt(t,s);i=i.concat(this.filterDescendants(e,l))}return i}getRoot(e){var t=e||this.root;if(e!=null)for(;e!=null;)t=e,e=this.getParent(e);return t}setRoot(e){return this.execute(new mxRootChange(this,e)),e}rootChanged(e){var t=this.root;return this.root=e,this.nextId=0,this.cells=null,this.cellAdded(e),t}isRoot(e){return e!=null&&this.root==e}isLayer(e){return this.isRoot(this.getParent(e))}isAncestor(e,t){for(;t!=null&&t!=e;)t=this.getParent(t);return t==e}contains(e){return this.isAncestor(this.root,e)}getParent(e){return e!=null?e.getParent():null}add(e,t,i){if(t!=e&&e!=null&&t!=null){i==null&&(i=this.getChildCount(e));var n=e!=this.getParent(t);this.execute(new mxChildChange(this,e,t,i)),this.maintainEdgeParent&&n&&this.updateEdgeParents(t)}return t}cellAdded(e){if(e!=null){if(e.getId()==null&&this.createIds&&e.setId(this.createId(e)),e.getId()!=null){var t=this.getCell(e.getId());if(t!=e){for(;t!=null;)e.setId(this.createId(e)),t=this.getCell(e.getId());this.cells==null&&(this.cells=new Object),this.cells[e.getId()]=e}}mxUtils$1.isNumeric(e.getId())&&(this.nextId=Math.max(this.nextId,e.getId()));for(var i=this.getChildCount(e),n=0;n<i;n++)this.cellAdded(this.getChildAt(e,n))}}createId(e){var t=this.nextId;return this.nextId++,this.prefix+t+this.postfix}updateEdgeParents(e,t){t=t||this.getRoot(e);for(var i=this.getChildCount(e),n=0;n<i;n++){var s=this.getChildAt(e,n);this.updateEdgeParents(s,t)}for(var l=this.getEdgeCount(e),a=[],n=0;n<l;n++)a.push(this.getEdgeAt(e,n));for(var n=0;n<a.length;n++){var o=a[n];this.isAncestor(t,o)&&this.updateEdgeParent(o,t)}}updateEdgeParent(e,t){for(var i=this.getTerminal(e,!0),n=this.getTerminal(e,!1),s=null;i!=null&&!this.isEdge(i)&&i.geometry!=null&&i.geometry.relative;)i=this.getParent(i);for(;n!=null&&this.ignoreRelativeEdgeParent&&!this.isEdge(n)&&n.geometry!=null&&n.geometry.relative;)n=this.getParent(n);if(this.isAncestor(t,i)&&this.isAncestor(t,n)&&(i==n?s=this.getParent(i):s=this.getNearestCommonAncestor(i,n),s!=null&&(this.getParent(s)!=this.root||this.isAncestor(s,e))&&this.getParent(e)!=s)){var l=this.getGeometry(e);if(l!=null){var a=this.getOrigin(this.getParent(e)),o=this.getOrigin(s),h=o.x-a.x,d=o.y-a.y;l=l.clone(),l.translate(-h,-d),this.setGeometry(e,l)}this.add(s,e,this.getChildCount(s))}}getOrigin(e){var t=null;if(e!=null){if(t=this.getOrigin(this.getParent(e)),!this.isEdge(e)){var i=this.getGeometry(e);i!=null&&(t.x+=i.x,t.y+=i.y)}}else t=new mxPoint;return t}getNearestCommonAncestor(e,t){if(e!=null&&t!=null){var i=mxCellPath.create(t);if(i!=null&&i.length>0){var n=e,s=mxCellPath.create(n);if(i.length<s.length){n=t;var l=s;s=i,i=l}for(;n!=null;){var a=this.getParent(n);if(i.indexOf(s+mxCellPath.PATH_SEPARATOR)==0&&a!=null)return n;s=mxCellPath.getParentPath(s),n=a}}}return null}remove(e){return e==this.root?this.setRoot(null):this.getParent(e)!=null&&this.execute(new mxChildChange(this,null,e)),e}cellRemoved(e){if(e!=null&&this.cells!=null){for(var t=this.getChildCount(e),i=t-1;i>=0;i--)this.cellRemoved(this.getChildAt(e,i));this.cells!=null&&e.getId()!=null&&delete this.cells[e.getId()]}}parentForCellChanged(e,t,i){var n=this.getParent(e);if(t!=null)(t!=n||n.getIndex(e)!=i)&&t.insert(e,i);else if(n!=null){var s=n.getIndex(e);n.remove(s)}var l=this.contains(t),a=this.contains(n);return l&&!a?this.cellAdded(e):a&&!l&&this.cellRemoved(e),n}getChildCount(e){return e!=null?e.getChildCount():0}getChildAt(e,t){return e!=null?e.getChildAt(t):null}getChildren(e){return e!=null?e.children:null}getChildVertices(e){return this.getChildCells(e,!0,!1)}getChildEdges(e){return this.getChildCells(e,!1,!0)}getChildCells(e,t,i){t=t??!1,i=i??!1;for(var n=this.getChildCount(e),s=[],l=0;l<n;l++){var a=this.getChildAt(e,l);(!i&&!t||i&&this.isEdge(a)||t&&this.isVertex(a))&&s.push(a)}return s}getTerminal(e,t){return e!=null?e.getTerminal(t):null}setTerminal(e,t,i){var n=t!=this.getTerminal(e,i);return this.execute(new mxTerminalChange(this,e,t,i)),this.maintainEdgeParent&&n&&this.updateEdgeParent(e,this.getRoot()),t}setTerminals(e,t,i){this.beginUpdate();try{this.setTerminal(e,t,!0),this.setTerminal(e,i,!1)}finally{this.endUpdate()}}terminalForCellChanged(e,t,i){var n=this.getTerminal(e,i);return t!=null?t.insertEdge(e,i):n?.removeEdge(e,i),n}getEdgeCount(e){return e!=null?e.getEdgeCount():0}getEdgeAt(e,t){return e!=null?e.getEdgeAt(t):null}getDirectedEdgeCount(e,t,i){for(var n=0,s=this.getEdgeCount(e),l=0;l<s;l++){var a=this.getEdgeAt(e,l);a!=i&&this.getTerminal(a,t)==e&&n++}return n}getConnections(e){return this.getEdges(e,!0,!0,!1)}getIncomingEdges(e){return this.getEdges(e,!0,!1,!1)}getOutgoingEdges(e){return this.getEdges(e,!1,!0,!1)}getEdges(e,t,i,n){t=t??!0,i=i??!0,n=n??!0;for(var s=this.getEdgeCount(e),l=[],a=0;a<s;a++){var o=this.getEdgeAt(e,a),h=this.getTerminal(o,!0),d=this.getTerminal(o,!1);(n&&h==d||h!=d&&(t&&d==e||i&&h==e))&&l.push(o)}return l}getEdgesBetween(e,t,i){i=i??!1;var n=this.getEdgeCount(e),s=this.getEdgeCount(t),l=e,a=n;s<n&&(a=s,l=t);for(var o=[],h=0;h<a;h++){var d=this.getEdgeAt(l,h),m=this.getTerminal(d,!0),g=this.getTerminal(d,!1),c=m==e&&g==t,f=g==e&&m==t;(c||!i&&f)&&o.push(d)}return o}getOpposites(e,t,i,n){i=i??!0,n=n??!0;var s=[];if(e!=null)for(var l=0;l<e.length;l++){var a=this.getTerminal(e[l],!0),o=this.getTerminal(e[l],!1);a==t&&o!=null&&o!=t&&n?s.push(o):o==t&&a!=null&&a!=t&&i&&s.push(a)}return s}getTopmostCells(e){for(var t=new mxDictionary,i=[],n=0;n<e.length;n++)t.put(e[n],!0);for(var n=0;n<e.length;n++){for(var s=e[n],l=!0,a=this.getParent(s);a!=null;){if(t.get(a)){l=!1;break}a=this.getParent(a)}l&&i.push(s)}return i}isVertex(e){return e!=null?e.isVertex():!1}isEdge(e){return e!=null?e.isEdge():!1}isConnectable(e){return e!=null?e.isConnectable():!1}getValue(e){return e!=null?e.getValue():null}setValue(e,t){return this.execute(new mxValueChange(this,e,t)),t}valueForCellChanged(e,t){return e.valueChanged(t)}getGeometry(e){return e!=null?e.getGeometry():null}setGeometry(e,t){return t!=this.getGeometry(e)&&this.execute(new mxGeometryChange(this,e,t)),t}geometryForCellChanged(e,t){var i=this.getGeometry(e);return e.setGeometry(t),i}getStyle(e){return e!=null?e.getStyle():null}setStyle(e,t){return t!=this.getStyle(e)&&this.execute(new mxStyleChange(this,e,t)),t}styleForCellChanged(e,t){var i=this.getStyle(e);return e.setStyle(t),i}isCollapsed(e){return e!=null?e.isCollapsed():!1}setCollapsed(e,t){return t!=this.isCollapsed(e)&&this.execute(new mxCollapseChange(this,e,t)),t}collapsedStateForCellChanged(e,t){var i=this.isCollapsed(e);return e.setCollapsed(t),i}isVisible(e){return e!=null?e.isVisible():!1}setVisible(e,t){return t!=this.isVisible(e)&&this.execute(new mxVisibleChange(this,e,t)),t}visibleStateForCellChanged(e,t){var i=this.isVisible(e);return e.setVisible(t),i}execute(e){e.execute(),this.beginUpdate(),this.currentEdit.add(e),this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTE,"change",e)),this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTED,"change",e)),this.endUpdate()}beginUpdate(){this.updateLevel++,this.fireEvent(new mxEventObject$1(mxEvent$1.BEGIN_UPDATE)),this.updateLevel==1&&this.fireEvent(new mxEventObject$1(mxEvent$1.START_EDIT))}endUpdate(){if(this.updateLevel--,this.updateLevel==0&&this.fireEvent(new mxEventObject$1(mxEvent$1.END_EDIT)),!this.endingUpdate){this.endingUpdate=this.updateLevel==0,this.fireEvent(new mxEventObject$1(mxEvent$1.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject$1(mxEvent$1.BEFORE_UNDO,"edit",this.currentEdit));var e=this.currentEdit;this.currentEdit=this.createUndoableEdit(),e.notify(),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",e))}}finally{this.endingUpdate=!1}}}createUndoableEdit(e){var t=new mxUndoableEdit(this,e??!0);return t.notify=function(){t.source.fireEvent(new mxEventObject$1(mxEvent$1.CHANGE,"edit",t,"changes",t.changes)),t.source.fireEvent(new mxEventObject$1(mxEvent$1.NOTIFY,"edit",t,"changes",t.changes))},t}mergeChildren(e,t,i){i=i??!0,this.beginUpdate();try{var n=new Object;this.mergeChildrenImpl(e,t,i,n);for(var s in n){var l=n[s],a=this.getTerminal(l,!0);a!=null&&(a=n[mxCellPath.create(a)],this.setTerminal(l,a,!0)),a=this.getTerminal(l,!1),a!=null&&(a=n[mxCellPath.create(a)],this.setTerminal(l,a,!1))}}finally{this.endUpdate()}}mergeChildrenImpl(e,t,i,n){this.beginUpdate();try{for(var s=e.getChildCount(),l=0;l<s;l++){var a=e.getChildAt(l);if(typeof a.getId=="function"){var o=a.getId(),h=o!=null&&(!this.isEdge(a)||!i)?this.getCell(o):null;if(h==null){var d=a.clone();d.setId(o),d.setTerminal(a.getTerminal(!0),!0),d.setTerminal(a.getTerminal(!1),!1),h=t.insert(d),this.cellAdded(h)}n[mxCellPath.create(a)]=h,this.mergeChildrenImpl(a,h,i,n)}}}finally{this.endUpdate()}}getParents(e){var t=[];if(e!=null)for(var i=new mxDictionary,n=0;n<e.length;n++){var s=this.getParent(e[n]);s!=null&&!i.get(s)&&(i.put(s,!0),t.push(s))}return t}cloneCell(e,t){return e!=null?this.cloneCells([e],t)[0]:null}cloneCells(e,t,i){t=t??!0,i=i??new Object;for(var n=[],s=0;s<e.length;s++)e[s]!=null?n.push(this.cloneCellImpl(e[s],i,t)):n.push(null);for(var s=0;s<n.length;s++)n[s]!=null&&this.restoreClone(n[s],e[s],i);return n}cloneCellImpl(e,t,i){var n=mxObjectIdentity.get(e),s=t[n];if(s==null&&(s=this.cellCloned(e),t[n]=s,i))for(var l=this.getChildCount(e),a=0;a<l;a++){var o=this.cloneCellImpl(this.getChildAt(e,a),t,!0);s.insert(o)}return s}cellCloned(e){return e.clone()}restoreClone(e,t,i){var n=this.getTerminal(t,!0);if(n!=null){var s=i[mxObjectIdentity.get(n)];s?.insertEdge(e,!0)}var l=this.getTerminal(t,!1);if(l!=null){var s=i[mxObjectIdentity.get(l)];s?.insertEdge(e,!1)}for(var a=this.getChildCount(e),o=0;o<a;o++)this.restoreClone(this.getChildAt(e,o),this.getChildAt(t,o),i)}}class mxGraph extends mxEventSource{constructor(e,t,i,n){super(),u(this,"isMouseDown",!1),u(this,"stylesheet",null),u(this,"selectionModel",null),u(this,"cellEditor",null),u(this,"dialect",null),u(this,"gridSize",10),u(this,"gridEnabled",!0),u(this,"portsEnabled",!0),u(this,"nativeDblClickEnabled",!0),u(this,"doubleTapEnabled",!0),u(this,"doubleTapTimeout",500),u(this,"doubleTapTolerance",25),u(this,"lastTouchY",0),u(this,"lastTouchY",0),u(this,"lastTouchTime",0),u(this,"tapAndHoldEnabled",!0),u(this,"tapAndHoldDelay",500),u(this,"tapAndHoldInProgress",!1),u(this,"tapAndHoldValid",!1),u(this,"initialTouchX",0),u(this,"initialTouchY",0),u(this,"tolerance",4),u(this,"defaultOverlap",.5),u(this,"defaultParent",null),u(this,"alternateEdgeStyle",null),u(this,"backgroundImage",null),u(this,"pageVisible",!1),u(this,"pageBreaksVisible",!1),u(this,"pageBreakColor","gray"),u(this,"pageBreakDashed",!0),u(this,"minPageBreakDist",20),u(this,"preferPageSize",!1),u(this,"pageFormat",mxConstants$1.PAGE_FORMAT_A4_PORTRAIT),u(this,"pageScale",1.5),u(this,"enabled",!0),u(this,"escapeEnabled",!0),u(this,"invokesStopCellEditing",!0),u(this,"enterStopsCellEditing",!1),u(this,"useScrollbarsForPanning",!0),u(this,"exportEnabled",!0),u(this,"importEnabled",!0),u(this,"cellsLocked",!1),u(this,"cellsCloneable",!0),u(this,"foldingEnabled",!0),u(this,"cellsEditable",!0),u(this,"cellsDeletable",!0),u(this,"cellsMovable",!0),u(this,"edgeLabelsMovable",!0),u(this,"vertexLabelsMovable",!1),u(this,"dropEnabled",!1),u(this,"splitEnabled",!0),u(this,"cellsResizable",!0),u(this,"cellsBendable",!0),u(this,"cellsSelectable",!0),u(this,"cellsDisconnectable",!0),u(this,"autoSizeCells",!1),u(this,"autoSizeCellsOnAdd",!1),u(this,"autoScroll",!0),u(this,"ignoreScrollbars",!1),u(this,"translateToScrollPosition",!1),u(this,"timerAutoScroll",!1),u(this,"allowAutoPanning",!1),u(this,"autoExtend",!0),u(this,"maximumGraphBounds",null),u(this,"minimumGraphSize",null),u(this,"minimumContainerSize",null),u(this,"maximumContainerSize",null),u(this,"resizeContainer",!1),u(this,"border",0),u(this,"keepEdgesInForeground",!1),u(this,"keepEdgesInBackground",!1),u(this,"allowNegativeCoordinates",!0),u(this,"constrainChildren",!0),u(this,"constrainRelativeChildren",!1),u(this,"extendParents",!0),u(this,"extendParentsOnAdd",!0),u(this,"extendParentsOnMove",!1),u(this,"recursiveResize",!1),u(this,"collapseToPreferredSize",!0),u(this,"zoomFactor",1.2),u(this,"keepSelectionVisibleOnZoom",!1),u(this,"centerZoom",!0),u(this,"resetViewOnRootChange",!0),u(this,"resetEdgesOnResize",!1),u(this,"resetEdgesOnMove",!1),u(this,"resetEdgesOnConnect",!0),u(this,"allowLoops",!1),u(this,"defaultLoopStyle",mxEdgeStyle.Loop),u(this,"multigraph",!0),u(this,"connectableEdges",!1),u(this,"allowDanglingEdges",!0),u(this,"cloneInvalidEdges",!1),u(this,"disconnectOnMove",!0),u(this,"labelsVisible",!0),u(this,"htmlLabels",!1),u(this,"swimlaneSelectionEnabled",!0),u(this,"swimlaneNesting",!0),u(this,"swimlaneIndicatorColorAttribute",mxConstants$1.STYLE_FILLCOLOR),u(this,"minFitScale",.1),u(this,"maxFitScale",8),u(this,"panDx",0),u(this,"panDy",0),u(this,"collapsedImage",new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9)),u(this,"expandedImage",new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9)),u(this,"warningImage",new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16)),u(this,"alreadyConnectedResource",mxClient.language!="none"?"alreadyConnected":""),u(this,"containsValidationErrorsResource",mxClient.language!="none"?"containsValidationErrors":""),u(this,"collapseExpandResource",mxClient.language!="none"?"collapse-expand":""),this.mouseListeners=null,this.renderHint=i,mxClient.IS_SVG?this.dialect=mxConstants$1.DIALECT_SVG:i==mxConstants$1.RENDERING_HINT_FASTEST?this.dialect=mxConstants$1.DIALECT_STRICTHTML:i==mxConstants$1.RENDERING_HINT_FASTER?this.dialect=mxConstants$1.DIALECT_PREFERHTML:this.dialect=mxConstants$1.DIALECT_MIXEDHTML,this.model=t??new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(n??this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=(s,l)=>{this.graphModelChanged(l.getProperty("edit").changes)},this.model.addListener(mxEvent$1.CHANGE,this.graphModelChangeListener),this.createHandlers(),e!=null&&this.init(e),this.view.revalidate()}init(e){this.container=e,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent$1.addListener(e,"mouseleave",()=>{this.tooltipHandler!=null&&this.tooltipHandler.hide()}),document.documentMode==8&&e.insertAdjacentHTML("beforeend","<"+mxClient.VML_PREFIX+':group style="DISPLAY: none;"></'+mxClient.VML_PREFIX+":group>")}createHandlers(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()}createTooltipHandler(){return new mxTooltipHandler(this)}createSelectionCellsHandler(){return new mxSelectionCellsHandler(this)}createConnectionHandler(){return new mxConnectionHandler(this)}createGraphHandler(){return new mxGraphHandler(this)}createPanningHandler(){return new mxPanningHandler(this)}createPopupMenuHandler(){return new mxPopupMenuHandler(this)}createSelectionModel(){return new mxGraphSelectionModel(this)}createStylesheet(){return new mxStylesheet}createGraphView(){return new mxGraphView(this)}createCellRenderer(){return new mxCellRenderer}createCellEditor(){return new mxCellEditor(this)}getModel(){return this.model}getView(){return this.view}getStylesheet(){return this.stylesheet}setStylesheet(e){this.stylesheet=e}getSelectionModel(){return this.selectionModel}setSelectionModel(e){this.selectionModel=e}getSelectionCellsForChanges(e,t){for(var i=new mxDictionary,n=[],s=h=>{if(!i.get(h)&&this.model.contains(h))if(this.model.isEdge(h)||this.model.isVertex(h))i.put(h,!0),n.push(h);else for(var d=this.model.getChildCount(h),m=0;m<d;m++)s(this.model.getChildAt(h,m))},l=0;l<e.length;l++){var a=e[l];if(a.constructor!=mxRootChange&&(t==null||!t(a))){var o=null;a instanceof mxChildChange?o=a.child:a.cell!=null&&a.cell instanceof mxCell&&(o=a.cell),o!=null&&s(o)}}return n}graphModelChanged(e){for(var t=0;t<e.length;t++)this.processChange(e[t]);this.updateSelection(),this.view.validate(),this.sizeDidChange()}updateSelection(){for(var e=this.getSelectionCells(),t=[],i=0;i<e.length;i++)if(!this.model.contains(e[i])||!this.isCellVisible(e[i]))t.push(e[i]);else for(var n=this.model.getParent(e[i]);n!=null&&n!=this.view.currentRoot;){if(this.isCellCollapsed(n)||!this.isCellVisible(n)){t.push(e[i]);break}n=this.model.getParent(n)}this.removeSelectionCells(t)}processChange(e){if(e instanceof mxRootChange)this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(e.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject$1(mxEvent$1.ROOT));else if(e instanceof mxChildChange){var t=this.model.getParent(e.child);this.view.invalidate(e.child,!0,!0),(!this.model.contains(t)||this.isCellCollapsed(t))&&(this.view.invalidate(e.child,!0,!0),this.removeStateForCell(e.child),this.view.currentRoot==e.child&&this.home()),t!=e.previous&&(t!=null&&this.view.invalidate(t,!1,!1),e.previous!=null&&this.view.invalidate(e.previous,!1,!1))}else if(e instanceof mxTerminalChange||e instanceof mxGeometryChange)(e instanceof mxTerminalChange||e.previous==null&&e.geometry!=null||e.previous!=null&&!e.previous.equals(e.geometry))&&this.view.invalidate(e.cell);else if(e instanceof mxValueChange)this.view.invalidate(e.cell,!1,!1);else if(e instanceof mxStyleChange){this.view.invalidate(e.cell,!0,!0);var i=this.view.getState(e.cell);i!=null&&(i.invalidStyle=!0)}else e.cell!=null&&e.cell instanceof mxCell&&this.removeStateForCell(e.cell)}removeStateForCell(e){for(var t=this.model.getChildCount(e),i=0;i<t;i++)this.removeStateForCell(this.model.getChildAt(e,i));this.view.invalidate(e,!1,!0),this.view.removeState(e)}addCellOverlay(e,t){e.overlays==null&&(e.overlays=[]),e.overlays.push(t);var i=this.view.getState(e);return i!=null&&this.cellRenderer.redraw(i),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_OVERLAY,"cell",e,"overlay",t)),t}getCellOverlays(e){return e.overlays}removeCellOverlay(e,t){if(t==null)this.removeCellOverlays(e);else{var i=mxUtils$1.indexOf(e.overlays,t);if(i>=0){e.overlays.splice(i,1),e.overlays.length==0&&(e.overlays=null);var n=this.view.getState(e);n!=null&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_OVERLAY,"cell",e,"overlay",t))}else t=null}return t}removeCellOverlays(e){var t=e.overlays;if(t!=null){e.overlays=null;var i=this.view.getState(e);i!=null&&this.cellRenderer.redraw(i);for(var n=0;n<t.length;n++)this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_OVERLAY,"cell",e,"overlay",t[n]))}return t}clearCellOverlays(e){e=e??this.model.getRoot(),this.removeCellOverlays(e);for(var t=this.model.getChildCount(e),i=0;i<t;i++){var n=this.model.getChildAt(e,i);this.clearCellOverlays(n)}}setCellWarning(e,t,i,n){if(t!=null&&t.length>0){i=i??this.warningImage;var s=new mxCellOverlay(i,"<font color=red>"+t+"</font>");return n&&s.addListener(mxEvent$1.CLICK,(l,a)=>{this.isEnabled()&&this.setSelectionCell(e)}),this.addCellOverlay(e,s)}else this.removeCellOverlays(e);return null}startEditing(e){this.startEditingAtCell(null,e)}startEditingAtCell(e,t){(t==null||!mxEvent$1.isMultiTouchEvent(t))&&(e==null&&(e=this.getSelectionCell(),e!=null&&!this.isCellEditable(e)&&(e=null)),e!=null&&(this.fireEvent(new mxEventObject$1(mxEvent$1.START_EDITING,"cell",e,"event",t)),this.cellEditor.startEditing(e,t),this.fireEvent(new mxEventObject$1(mxEvent$1.EDITING_STARTED,"cell",e,"event",t))))}getEditingValue(e,t){return this.convertValueToString(e)}stopEditing(e){this.cellEditor.stopEditing(e),this.fireEvent(new mxEventObject$1(mxEvent$1.EDITING_STOPPED,"cancel",e))}labelChanged(e,t,i){this.model.beginUpdate();try{var n=e.value;this.cellLabelChanged(e,t,this.isAutoSizeCell(e)),this.fireEvent(new mxEventObject$1(mxEvent$1.LABEL_CHANGED,"cell",e,"value",t,"old",n,"event",i))}finally{this.model.endUpdate()}return e}cellLabelChanged(e,t,i){this.model.beginUpdate();try{this.model.setValue(e,t),i&&this.cellSizeUpdated(e,!1)}finally{this.model.endUpdate()}}escape(e){this.fireEvent(new mxEventObject$1(mxEvent$1.ESCAPE,"event",e))}click(e){var t=e.getEvent(),i=e.getCell(),n=new mxEventObject$1(mxEvent$1.CLICK,"event",t,"cell",i);if(e.isConsumed()&&n.consume(),this.fireEvent(n),this.isEnabled()&&!mxEvent$1.isConsumed(t)&&!n.isConsumed()){if(i!=null){if(this.isTransparentClickEvent(t)){var s=!1,l=this.getCellAt(e.graphX,e.graphY,null,null,null,m=>{var g=this.isCellSelected(m.cell);return s=s||g,!s||g||m.cell!=i&&this.model.isAncestor(m.cell,i)});l!=null&&(i=l)}}else if(this.isSwimlaneSelectionEnabled()&&(i=this.getSwimlaneAt(e.getGraphX(),e.getGraphY()),i!=null&&(!this.isToggleEvent(t)||!mxEvent$1.isAltDown(t)))){for(var a=i,o=[];a!=null;){a=this.model.getParent(a);var h=this.view.getState(a);this.isSwimlane(a)&&h!=null&&o.push(a)}if(o.length>0){o=o.reverse(),o.splice(0,0,i),o.push(i);for(var d=0;d<o.length-1;d++)this.isCellSelected(o[d])&&(i=o[this.isToggleEvent(t)?d:d+1])}}i!=null?this.selectCellForEvent(i,t):this.isToggleEvent(t)||this.clearSelection()}}isSiblingSelected(e){for(var t=this.model,i=t.getParent(e),n=t.getChildCount(i),s=0;s<n;s++){var l=t.getChildAt(i,s);if(e!=l&&this.isCellSelected(l))return!0}return!1}dblClick(e,t){var i=new mxEventObject$1(mxEvent$1.DOUBLE_CLICK,"event",e,"cell",t);this.fireEvent(i),this.isEnabled()&&!mxEvent$1.isConsumed(e)&&!i.isConsumed()&&t!=null&&this.isCellEditable(t)&&!this.isEditing(t)&&(this.startEditingAtCell(t,e),mxEvent$1.consume(e))}tapAndHold(e){var t=e.getEvent(),i=new mxEventObject$1(mxEvent$1.TAP_AND_HOLD,"event",t,"cell",e.getCell());if(this.fireEvent(i),i.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent$1.isConsumed(t)&&!i.isConsumed()&&this.connectionHandler.isEnabled()){var n=this.view.getState(this.connectionHandler.marker.getCell(e));n!=null&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=n,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(e),this.connectionHandler.previous=n,this.connectionHandler.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.connectionHandler.previous)))}}scrollPointToVisible(e,t,i,n){if(!this.timerAutoScroll&&(this.ignoreScrollbars||mxUtils$1.hasScrollbars(this.container))){var s=this.container;if(n=n??20,e>=s.scrollLeft&&t>=s.scrollTop&&e<=s.scrollLeft+s.clientWidth&&t<=s.scrollTop+s.clientHeight){var l=s.scrollLeft+s.clientWidth-e;if(l<n){var a=s.scrollLeft;if(s.scrollLeft+=n-l,i&&a==s.scrollLeft){if(this.dialect==mxConstants$1.DIALECT_SVG){var o=this.view.getDrawPane().ownerSVGElement,h=this.container.scrollWidth+n-l;o.style.width=h+"px"}else{var h=Math.max(s.clientWidth,s.scrollWidth)+n-l,d=this.view.getCanvas();d.style.width=h+"px"}s.scrollLeft+=n-l}}else l=e-s.scrollLeft,l<n&&(s.scrollLeft-=n-l);var m=s.scrollTop+s.clientHeight-t;if(m<n){var a=s.scrollTop;if(s.scrollTop+=n-m,a==s.scrollTop&&i){if(this.dialect==mxConstants$1.DIALECT_SVG){var o=this.view.getDrawPane().ownerSVGElement,g=this.container.scrollHeight+n-m;o.style.height=g+"px"}else{var g=Math.max(s.clientHeight,s.scrollHeight)+n-m,d=this.view.getCanvas();d.style.height=g+"px"}s.scrollTop+=n-m}}else m=t-s.scrollTop,m<n&&(s.scrollTop-=n-m)}}else this.allowAutoPanning&&!this.panningHandler.isActive()&&(this.panningManager==null&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(e+this.panDx,t+this.panDy))}createPanningManager(){return new mxPanningManager(this)}getBorderSizes(){var e=mxUtils$1.getCurrentStyle(this.container);return new mxRectangle(mxUtils$1.parseCssNumber(e.paddingLeft)+(e.borderLeftStyle!="none"?mxUtils$1.parseCssNumber(e.borderLeftWidth):0),mxUtils$1.parseCssNumber(e.paddingTop)+(e.borderTopStyle!="none"?mxUtils$1.parseCssNumber(e.borderTopWidth):0),mxUtils$1.parseCssNumber(e.paddingRight)+(e.borderRightStyle!="none"?mxUtils$1.parseCssNumber(e.borderRightWidth):0),mxUtils$1.parseCssNumber(e.paddingBottom)+(e.borderBottomStyle!="none"?mxUtils$1.parseCssNumber(e.borderBottomWidth):0))}getPreferredPageSize(e,t,i){this.view.scale;var n=this.view.translate,s=this.pageFormat,l=this.pageScale,a=new mxRectangle(0,0,Math.ceil(s.width*l),Math.ceil(s.height*l)),o=this.pageBreaksVisible?Math.ceil(t/a.width):1,h=this.pageBreaksVisible?Math.ceil(i/a.height):1;return new mxRectangle(0,0,o*a.width+2+n.x,h*a.height+2+n.y)}fit(e,t,i,n,s,l,a){if(this.container!=null){e=e??this.getBorder(),t=t??!1,i=i??0,n=n??!0,s=s??!1,l=l??!1;var o=this.getBorderSizes(),h=this.container.offsetWidth-o.x-o.width-1,d=a??this.container.offsetHeight-o.y-o.height-1,m=this.view.getGraphBounds();if(m.width>0&&m.height>0){t&&m.x!=null&&m.y!=null&&(m=m.clone(),m.width+=m.x,m.height+=m.y,m.x=0,m.y=0);var g=this.view.scale,c=m.width/g,f=m.height/g;this.backgroundImage!=null&&(c=Math.max(c,this.backgroundImage.width-m.x/g),f=Math.max(f,this.backgroundImage.height-m.y/g));var C=(t?e:2*e)+i+1;h-=C,d-=C;var v=s?d/f:l?h/c:Math.min(h/c,d/f);if(this.minFitScale!=null&&(v=Math.max(v,this.minFitScale)),this.maxFitScale!=null&&(v=Math.min(v,this.maxFitScale)),n)if(t)this.view.scale!=v&&this.view.setScale(v);else if(mxUtils$1.hasScrollbars(this.container)){this.view.setScale(v);var w=this.getGraphBounds();w.x!=null&&(this.container.scrollLeft=w.x),w.y!=null&&(this.container.scrollTop=w.y)}else{var S=m.x!=null?Math.floor(this.view.translate.x-m.x/g+e/v+i/2):e,T=m.y!=null?Math.floor(this.view.translate.y-m.y/g+e/v+i/2):e;this.view.scaleAndTranslate(v,S,T)}else return v}}return this.view.scale}sizeDidChange(){var e=this.getGraphBounds();if(this.container!=null){var t=this.getBorder(),i=Math.max(0,e.x)+e.width+2*t,n=Math.max(0,e.y)+e.height+2*t;if(this.minimumContainerSize!=null&&(i=Math.max(i,this.minimumContainerSize.width),n=Math.max(n,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(i,n),this.preferPageSize||this.pageVisible){var s=this.getPreferredPageSize(e,Math.max(1,i),Math.max(1,n));s!=null&&(i=s.width*this.view.scale,n=s.height*this.view.scale)}if(this.minimumGraphSize!=null&&(i=Math.max(i,this.minimumGraphSize.width*this.view.scale),n=Math.max(n,this.minimumGraphSize.height*this.view.scale)),i=Math.ceil(i),n=Math.ceil(n),this.dialect==mxConstants$1.DIALECT_SVG){var l=this.view.getDrawPane().ownerSVGElement;l!=null&&(l.style.minWidth=Math.max(1,i)+"px",l.style.minHeight=Math.max(1,n)+"px",l.style.width="100%",l.style.height="100%")}else mxClient.IS_QUIRKS?this.view.updateHtmlCanvasSize(Math.max(1,i),Math.max(1,n)):(this.view.canvas.style.minWidth=Math.max(1,i)+"px",this.view.canvas.style.minHeight=Math.max(1,n)+"px");this.updatePageBreaks(this.pageBreaksVisible,i,n)}this.fireEvent(new mxEventObject$1(mxEvent$1.SIZE,"bounds",e))}doResizeContainer(e,t){this.maximumContainerSize!=null&&(e=Math.min(this.maximumContainerSize.width,e),t=Math.min(this.maximumContainerSize.height,t)),this.container.style.width=Math.ceil(e)+"px",this.container.style.height=Math.ceil(t)+"px"}updatePageBreaks(e,t,i){var n=this.view.scale,s=this.view.translate,l=this.pageFormat,a=n*this.pageScale,o=new mxRectangle(0,0,l.width*a,l.height*a),h=mxRectangle.fromRectangle(this.getGraphBounds());h.width=Math.max(1,h.width),h.height=Math.max(1,h.height),o.x=Math.floor((h.x-s.x*n)/o.width)*o.width+s.x*n,o.y=Math.floor((h.y-s.y*n)/o.height)*o.height+s.y*n,h.width=Math.ceil((h.width+(h.x-o.x))/o.width)*o.width,h.height=Math.ceil((h.height+(h.y-o.y))/o.height)*o.height,e=e&&Math.min(o.width,o.height)>this.minPageBreakDist;var d=e?Math.ceil(h.height/o.height)+1:0,m=e?Math.ceil(h.width/o.width)+1:0,g=(m-1)*o.width,c=(d-1)*o.height;this.horizontalPageBreaks==null&&d>0&&(this.horizontalPageBreaks=[]),this.verticalPageBreaks==null&&m>0&&(this.verticalPageBreaks=[]);var f=C=>{if(C!=null){for(var v=C==this.horizontalPageBreaks?d:m,w=0;w<=v;w++){var S=C==this.horizontalPageBreaks?[new mxPoint(Math.round(o.x),Math.round(o.y+w*o.height)),new mxPoint(Math.round(o.x+g),Math.round(o.y+w*o.height))]:[new mxPoint(Math.round(o.x+w*o.width),Math.round(o.y)),new mxPoint(Math.round(o.x+w*o.width),Math.round(o.y+c))];if(C[w]!=null)C[w].points=S,C[w].redraw();else{var T=new mxPolyline(S,this.pageBreakColor);T.dialect=this.dialect,T.pointerEvents=!1,T.isDashed=this.pageBreakDashed,T.init(this.view.backgroundPane),T.redraw(),C[w]=T}}for(var w=v;w<C.length;w++)C[w].destroy();C.splice(v,C.length-v)}};f(this.horizontalPageBreaks),f(this.verticalPageBreaks)}getCurrentCellStyle(e,t){var i=t?null:this.view.getState(e);return i!=null?i.style:this.getCellStyle(e)}getCellStyle(e){var t=this.model.getStyle(e),i=null;return this.model.isEdge(e)?i=this.stylesheet.getDefaultEdgeStyle():i=this.stylesheet.getDefaultVertexStyle(),t!=null&&(i=this.postProcessCellStyle(this.stylesheet.getCellStyle(t,i))),i==null&&(i=new Object),i}postProcessCellStyle(e){if(e!=null){var t=e[mxConstants$1.STYLE_IMAGE],i=this.getImageFromBundles(t);if(i!=null?e[mxConstants$1.STYLE_IMAGE]=i:i=t,i!=null&&i.substring(0,11)=="data:image/"){if(i.substring(0,20)=="data:image/svg+xml,<")i=i.substring(0,19)+encodeURIComponent(i.substring(19));else if(i.substring(0,22)!="data:image/svg+xml,%3C"){var n=i.indexOf(",");n>0&&i.substring(n-7,n+1)!=";base64,"&&(i=i.substring(0,n)+";base64,"+i.substring(n+1))}e[mxConstants$1.STYLE_IMAGE]=i}}return e}setCellStyle(e,t){if(t=t||this.getSelectionCells(),t!=null){this.model.beginUpdate();try{for(var i=0;i<t.length;i++)this.model.setStyle(t[i],e)}finally{this.model.endUpdate()}}}toggleCellStyle(e,t,i){return i=i||this.getSelectionCell(),this.toggleCellStyles(e,t,[i])}toggleCellStyles(e,t,i){t=t??!1,i=i||this.getSelectionCells();var n=null;if(i!=null&&i.length>0){var s=this.getCurrentCellStyle(i[0]);n=mxUtils$1.getValue(s,e,t)?0:1,this.setCellStyles(e,n,i)}return n}setCellStyles(e,t,i){i=i||this.getSelectionCells(),mxUtils$1.setCellStyles(this.model,i,e,t)}toggleCellStyleFlags(e,t,i){this.setCellStyleFlags(e,t,null,i)}setCellStyleFlags(e,t,i,n){if(n=n||this.getSelectionCells(),n!=null&&n.length>0){if(i==null){var s=this.getCurrentCellStyle(n[0]),l=parseInt(s[e]||0);i=(l&t)!=t}mxUtils$1.setCellStyleFlags(this.model,n,e,t,i)}}alignCells(e,t,i){if(t==null&&(t=this.getSelectionCells()),t!=null&&t.length>1){if(i==null)for(var n=0;n<t.length;n++){var s=this.view.getState(t[n]);if(s!=null&&!this.model.isEdge(t[n]))if(i==null)if(e==mxConstants$1.ALIGN_CENTER){i=s.x+s.width/2;break}else if(e==mxConstants$1.ALIGN_RIGHT)i=s.x+s.width;else if(e==mxConstants$1.ALIGN_TOP)i=s.y;else if(e==mxConstants$1.ALIGN_MIDDLE){i=s.y+s.height/2;break}else e==mxConstants$1.ALIGN_BOTTOM?i=s.y+s.height:i=s.x;else e==mxConstants$1.ALIGN_RIGHT?i=Math.max(i,s.x+s.width):e==mxConstants$1.ALIGN_TOP?i=Math.min(i,s.y):e==mxConstants$1.ALIGN_BOTTOM?i=Math.max(i,s.y+s.height):i=Math.min(i,s.x)}if(i!=null){var l=this.view.scale;this.model.beginUpdate();try{for(var n=0;n<t.length;n++){var s=this.view.getState(t[n]);if(s!=null){var a=this.getCellGeometry(t[n]);a!=null&&!this.model.isEdge(t[n])&&(a=a.clone(),e==mxConstants$1.ALIGN_CENTER?a.x+=(i-s.x-s.width/2)/l:e==mxConstants$1.ALIGN_RIGHT?a.x+=(i-s.x-s.width)/l:e==mxConstants$1.ALIGN_TOP?a.y+=(i-s.y)/l:e==mxConstants$1.ALIGN_MIDDLE?a.y+=(i-s.y-s.height/2)/l:e==mxConstants$1.ALIGN_BOTTOM?a.y+=(i-s.y-s.height)/l:a.x+=(i-s.x)/l,this.resizeCell(t[n],a))}}this.fireEvent(new mxEventObject$1(mxEvent$1.ALIGN_CELLS,"align",e,"cells",t))}finally{this.model.endUpdate()}}}return t}flipEdge(e){if(e!=null&&this.alternateEdgeStyle!=null){this.model.beginUpdate();try{var t=this.model.getStyle(e);t==null||t.length==0?this.model.setStyle(e,this.alternateEdgeStyle):this.model.setStyle(e,null),this.resetEdge(e),this.fireEvent(new mxEventObject$1(mxEvent$1.FLIP_EDGE,"edge",e))}finally{this.model.endUpdate()}}return e}addImageBundle(e){this.imageBundles.push(e)}removeImageBundle(e){for(var t=[],i=0;i<this.imageBundles.length;i++)this.imageBundles[i]!=e&&t.push(this.imageBundles[i]);this.imageBundles=t}getImageFromBundles(e){if(e!=null)for(var t=0;t<this.imageBundles.length;t++){var i=this.imageBundles[t].getImage(e);if(i!=null)return i}return null}orderCells(e,t){t==null&&(t=mxUtils$1.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(t,e),this.fireEvent(new mxEventObject$1(mxEvent$1.ORDER_CELLS,"back",e,"cells",t))}finally{this.model.endUpdate()}return t}cellsOrdered(e,t){if(e!=null){this.model.beginUpdate();try{for(var i=0;i<e.length;i++){var n=this.model.getParent(e[i]);t?this.model.add(n,e[i],i):this.model.add(n,e[i],this.model.getChildCount(n)-1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_ORDERED,"back",t,"cells",e))}finally{this.model.endUpdate()}}}groupCells(e,t,i){i==null&&(i=mxUtils$1.sortCells(this.getSelectionCells(),!0)),i=this.getCellsForGroup(i),e==null&&(e=this.createGroupCell(i));var n=this.getBoundsForGroup(e,i,t);if(i.length>0&&n!=null){var s=this.model.getParent(e);s==null&&(s=this.model.getParent(i[0])),this.model.beginUpdate();try{this.getCellGeometry(e)==null&&this.model.setGeometry(e,new mxGeometry);var l=this.model.getChildCount(s);this.cellsAdded([e],s,l,null,null,!1,!1,!1),l=this.model.getChildCount(e),this.cellsAdded(i,e,l,null,null,!1,!1,!1),this.cellsMoved(i,-n.x,-n.y,!1,!1,!1),this.cellsResized([e],[n],!1),this.fireEvent(new mxEventObject$1(mxEvent$1.GROUP_CELLS,"group",e,"border",t,"cells",i))}finally{this.model.endUpdate()}}return e}getCellsForGroup(e){var t=[];if(e!=null&&e.length>0){var i=this.model.getParent(e[0]);t.push(e[0]);for(var n=1;n<e.length;n++)this.model.getParent(e[n])==i&&t.push(e[n])}return t}getBoundsForGroup(e,t,i){var n=this.getBoundingBoxFromGeometry(t,!0);if(n!=null){if(this.isSwimlane(e)){var s=this.getStartSize(e);n.x-=s.width,n.y-=s.height,n.width+=s.width,n.height+=s.height}i!=null&&(n.x-=i,n.y-=i,n.width+=2*i,n.height+=2*i)}return n}createGroupCell(e){var t=new mxCell("");return t.setVertex(!0),t.setConnectable(!1),t}ungroupCells(e){var t=[];if(e==null){e=this.getSelectionCells();for(var i=[],n=0;n<e.length;n++)this.model.getChildCount(e[n])>0&&i.push(e[n]);e=i}if(e!=null&&e.length>0){this.model.beginUpdate();try{for(var n=0;n<e.length;n++){var s=this.model.getChildren(e[n]);if(s!=null&&s.length>0){s=s.slice();var l=this.model.getParent(e[n]),a=this.model.getChildCount(l);this.cellsAdded(s,l,a,null,null,!0),t=t.concat(s)}}this.removeCellsAfterUngroup(e),this.fireEvent(new mxEventObject$1(mxEvent$1.UNGROUP_CELLS,"cells",e))}finally{this.model.endUpdate()}}return t}removeCellsAfterUngroup(e){this.cellsRemoved(this.addAllEdges(e))}removeCellsFromParent(e){e==null&&(e=this.getSelectionCells()),this.model.beginUpdate();try{var t=this.getDefaultParent(),i=this.model.getChildCount(t);this.cellsAdded(e,t,i,null,null,!0),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_CELLS_FROM_PARENT,"cells",e))}finally{this.model.endUpdate()}return e}updateGroupBounds(e,t,i,n,s,l,a){e==null&&(e=this.getSelectionCells()),t=t??0,i=i??!1,n=n??0,s=s??0,l=l??0,a=a??0,this.model.beginUpdate();try{for(var o=e.length-1;o>=0;o--){var h=this.getCellGeometry(e[o]);if(h!=null){var d=this.getChildCells(e[o]);if(d!=null&&d.length>0){var m=this.getBoundingBoxFromGeometry(d,!0);if(m!=null&&m.width>0&&m.height>0){var g=0,c=0;if(this.isSwimlane(e[o])){var f=this.getStartSize(e[o]);g=f.width,c=f.height}h=h.clone(),i&&(h.x=Math.round(h.x+m.x-t-g-a),h.y=Math.round(h.y+m.y-t-c-n)),h.width=Math.round(m.width+2*t+g+a+s),h.height=Math.round(m.height+2*t+c+n+l),this.model.setGeometry(e[o],h),this.moveCells(d,t+g-m.x+a,t+c-m.y+n)}}}}}finally{this.model.endUpdate()}return e}getBoundingBox(e){var t=null;if(e!=null&&e.length>0){for(var i=0;i<e.length;i++)if(this.model.isVertex(e[i])||this.model.isEdge(e[i])){var n=this.view.getBoundingBox(this.view.getState(e[i]),!0);n!=null&&(t==null?t=mxRectangle.fromRectangle(n):t.add(n))}}return t}cloneCell(e,t,i,n){return this.cloneCells([e],t,i,n)[0]}cloneCells(e,t,i,n){t=t??!0;var s=null;if(e!=null){for(var l=new mxDictionary,a=[],o=0;o<e.length;o++)l.put(e[o],!0),a.push(e[o]);if(a.length>0){var h=this.view.scale,d=this.view.translate;s=this.model.cloneCells(e,!0,i);for(var o=0;o<e.length;o++)if(!t&&this.model.isEdge(s[o])&&this.getEdgeValidationError(s[o],this.model.getTerminal(s[o],!0),this.model.getTerminal(s[o],!1))!=null)s[o]=null;else{var m=this.model.getGeometry(s[o]);if(m!=null){var g=this.view.getState(e[o]),c=this.view.getState(this.model.getParent(e[o]));if(g!=null&&c!=null){var f=n?0:c.origin.x,C=n?0:c.origin.y;if(this.model.isEdge(s[o])){var v=g.absolutePoints;if(v!=null){for(var w=this.model.getTerminal(e[o],!0);w!=null&&!l.get(w);)w=this.model.getParent(w);w==null&&v[0]!=null&&m.setTerminalPoint(new mxPoint(v[0].x/h-d.x,v[0].y/h-d.y),!0);for(var S=this.model.getTerminal(e[o],!1);S!=null&&!l.get(S);)S=this.model.getParent(S);var T=v.length-1;S==null&&v[T]!=null&&m.setTerminalPoint(new mxPoint(v[T].x/h-d.x,v[T].y/h-d.y),!1);var P=m.points;if(P!=null)for(var L=0;L<P.length;L++)P[L].x+=f,P[L].y+=C}}else m.translate(f,C)}}}}else s=[]}return s}insertVertex(e,t,i,n,s,l,a,o,h){var d=this.createVertex(e,t,i,n,s,l,a,o,h);return this.addCell(d,e)}createVertex(e,t,i,n,s,l,a,o,h){var d=new mxGeometry(n,s,l,a);d.relative=h??!1;var m=new mxCell(i,d,o);return m.setId(t),m.setVertex(!0),m.setConnectable(!0),m}insertEdge(e,t,i,n,s,l){var a=this.createEdge(e,t,i,n,s,l);return this.addEdge(a,e,n,s)}createEdge(e,t,i,n,s,l){var a=new mxCell(i,new mxGeometry,l);return a.setId(t),a.setEdge(!0),a.geometry.relative=!0,a}addEdge(e,t,i,n,s){return this.addCell(e,t,s,i,n)}addCell(e,t,i,n,s){return this.addCells([e],t,i,n,s)[0]}addCells(e,t,i,n,s,l){t==null&&(t=this.getDefaultParent()),i==null&&(i=this.model.getChildCount(t)),this.model.beginUpdate();try{this.cellsAdded(e,t,i,n,s,l??!1,!0),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_CELLS,"cells",e,"parent",t,"index",i,"source",n,"target",s))}finally{this.model.endUpdate()}return e}cellsAdded(e,t,i,n,s,l,a,o){if(e!=null&&t!=null&&i!=null){this.model.beginUpdate();try{for(var h=l?this.view.getState(t):null,d=h!=null?h.origin:null,m=new mxPoint(0,0),g=0;g<e.length;g++)if(e[g]==null)i--;else{var c=this.model.getParent(e[g]);if(d!=null&&e[g]!=t&&t!=c){var f=this.view.getState(c),C=f!=null?f.origin:m,v=this.model.getGeometry(e[g]);if(v!=null){var w=C.x-d.x,S=C.y-d.y;v=v.clone(),v.translate(w,S),!v.relative&&this.model.isVertex(e[g])&&!this.isAllowNegativeCoordinates()&&(v.x=Math.max(0,v.x),v.y=Math.max(0,v.y)),this.model.setGeometry(e[g],v)}}t==c&&i+g>this.model.getChildCount(t)&&i--,this.model.add(t,e[g],i+g),this.autoSizeCellsOnAdd&&this.autoSizeCell(e[g],!0),(o==null||o)&&this.isExtendParentsOnAdd(e[g])&&this.isExtendParent(e[g])&&this.extendParent(e[g]),(a==null||a)&&this.constrainChild(e[g]),n!=null&&this.cellConnected(e[g],n,!0),s!=null&&this.cellConnected(e[g],s,!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_ADDED,"cells",e,"parent",t,"index",i,"source",n,"target",s,"absolute",l))}finally{this.model.endUpdate()}}}autoSizeCell(e,t){if(t=t??!0,t)for(var i=this.model.getChildCount(e),n=0;n<i;n++)this.autoSizeCell(this.model.getChildAt(e,n));this.getModel().isVertex(e)&&this.isAutoSizeCell(e)&&this.updateCellSize(e)}removeCells(e,t){if(t=t??!0,e==null&&(e=this.getDeletableCells(this.getSelectionCells())),t)e=this.getDeletableCells(this.addAllEdges(e));else{e=e.slice();for(var i=this.getDeletableCells(this.getAllEdges(e)),n=new mxDictionary,s=0;s<e.length;s++)n.put(e[s],!0);for(var s=0;s<i.length;s++)this.view.getState(i[s])==null&&!n.get(i[s])&&(n.put(i[s],!0),e.push(i[s]))}this.model.beginUpdate();try{this.cellsRemoved(e),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_CELLS,"cells",e,"includeEdges",t))}finally{this.model.endUpdate()}return e}cellsRemoved(e){if(e!=null&&e.length>0){var t=this.view.scale,i=this.view.translate;this.model.beginUpdate();try{for(var n=new mxDictionary,s=0;s<e.length;s++)n.put(e[s],!0);for(var s=0;s<e.length;s++){for(var l=this.getAllEdges([e[s]]),a=(d,m)=>{var g=this.model.getGeometry(d);if(g!=null){for(var c=this.model.getTerminal(d,m),f=!1,C=c;C!=null;){if(e[s]==C){f=!0;break}C=this.model.getParent(C)}if(f){g=g.clone();var v=this.view.getState(d);if(v!=null&&v.absolutePoints!=null){var w=v.absolutePoints,S=m?0:w.length-1;g.setTerminalPoint(new mxPoint(w[S].x/t-i.x-v.origin.x,w[S].y/t-i.y-v.origin.y),m)}else{var T=this.view.getState(c);T!=null&&g.setTerminalPoint(new mxPoint(T.getCenterX()/t-i.x,T.getCenterY()/t-i.y),m)}this.model.setGeometry(d,g),this.model.setTerminal(d,null,m)}}},o=0;o<l.length;o++)n.get(l[o])||(n.put(l[o],!0),a(l[o],!0),a(l[o],!1));this.model.remove(e[s])}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_REMOVED,"cells",e))}finally{this.model.endUpdate()}}}splitEdge(e,t,i,n,s,l,a,o){n=n||0,s=s||0,o=o??this.model.getParent(e);var h=this.model.getTerminal(e,!0);this.model.beginUpdate();try{if(i==null){i=this.cloneCell(e);var d=this.view.getState(e),m=this.getCellGeometry(i);if(m!=null&&m.points!=null&&d!=null){var g=this.view.translate,c=this.view.scale,f=mxUtils$1.findNearestSegment(d,(n+g.x)*c,(s+g.y)*c);m.points=m.points.slice(0,f),m=this.getCellGeometry(e),m!=null&&m.points!=null&&(m=m.clone(),m.points=m.points.slice(f),this.model.setGeometry(e,m))}}this.cellsMoved(t,n,s,!1,!1),this.cellsAdded(t,o,this.model.getChildCount(o),null,null,!0),this.cellsAdded([i],o,this.model.getChildCount(o),h,t[0],!1),this.cellConnected(e,t[0],!0),this.fireEvent(new mxEventObject$1(mxEvent$1.SPLIT_EDGE,"edge",e,"cells",t,"newEdge",i,"dx",n,"dy",s))}finally{this.model.endUpdate()}return i}toggleCells(e,t,i){t==null&&(t=this.getSelectionCells()),i&&(t=this.addAllEdges(t)),this.model.beginUpdate();try{this.cellsToggled(t,e),this.fireEvent(new mxEventObject$1(mxEvent$1.TOGGLE_CELLS,"show",e,"cells",t,"includeEdges",i))}finally{this.model.endUpdate()}return t}cellsToggled(e,t){if(e!=null&&e.length>0){this.model.beginUpdate();try{for(var i=0;i<e.length;i++)this.model.setVisible(e[i],t)}finally{this.model.endUpdate()}}}foldCells(e,t,i,n,s){t=t??!1,i==null&&(i=this.getFoldableCells(this.getSelectionCells(),e)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(i,e,t,n),this.fireEvent(new mxEventObject$1(mxEvent$1.FOLD_CELLS,"collapse",e,"recurse",t,"cells",i))}finally{this.model.endUpdate()}return i}cellsFolded(e,t,i,n){if(e!=null&&e.length>0){this.model.beginUpdate();try{for(var s=0;s<e.length;s++)if((!n||this.isCellFoldable(e[s],t))&&t!=this.isCellCollapsed(e[s])){if(this.model.setCollapsed(e[s],t),this.swapBounds(e[s],t),this.isExtendParent(e[s])&&this.extendParent(e[s]),i){var l=this.model.getChildren(e[s]);this.cellsFolded(l,t,i)}this.constrainChild(e[s])}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_FOLDED,"cells",e,"collapse",t,"recurse",i))}finally{this.model.endUpdate()}}}swapBounds(e,t){if(e!=null){var i=this.model.getGeometry(e);i!=null&&(i=i.clone(),this.updateAlternateBounds(e,i,t),i.swap(),this.model.setGeometry(e,i))}}updateAlternateBounds(e,t,i){if(e!=null&&t!=null){var n=this.getCurrentCellStyle(e);if(t.alternateBounds==null){var s=t;if(this.collapseToPreferredSize){var l=this.getPreferredSizeForCell(e);if(l!=null){s=l;var a=mxUtils$1.getValue(n,mxConstants$1.STYLE_STARTSIZE);a>0&&(s.height=Math.max(s.height,a))}}t.alternateBounds=new mxRectangle(0,0,s.width,s.height)}if(t.alternateBounds!=null){t.alternateBounds.x=t.x,t.alternateBounds.y=t.y;var o=mxUtils$1.toRadians(n[mxConstants$1.STYLE_ROTATION]||0);if(o!=0){var h=t.alternateBounds.getCenterX()-t.getCenterX(),d=t.alternateBounds.getCenterY()-t.getCenterY(),m=Math.cos(o),g=Math.sin(o),c=m*h-g*d,f=g*h+m*d;t.alternateBounds.x+=c-h,t.alternateBounds.y+=f-d}}}}addAllEdges(e){var t=e.slice();return mxUtils$1.removeDuplicates(t.concat(this.getAllEdges(e)))}getAllEdges(e){var t=[];if(e!=null)for(var i=0;i<e.length;i++){for(var n=this.model.getEdgeCount(e[i]),s=0;s<n;s++)t.push(this.model.getEdgeAt(e[i],s));var l=this.model.getChildren(e[i]);t=t.concat(this.getAllEdges(l))}return t}updateCellSize(e,t){t=t??!1,this.model.beginUpdate();try{this.cellSizeUpdated(e,t),this.fireEvent(new mxEventObject$1(mxEvent$1.UPDATE_CELL_SIZE,"cell",e,"ignoreChildren",t))}finally{this.model.endUpdate()}return e}cellSizeUpdated(e,t){if(e!=null){this.model.beginUpdate();try{var i=this.getPreferredSizeForCell(e),n=this.model.getGeometry(e);if(i!=null&&n!=null){var s=this.isCellCollapsed(e);if(n=n.clone(),this.isSwimlane(e)){var l=this.getCellStyle(e),a=this.model.getStyle(e);a==null&&(a=""),mxUtils$1.getValue(l,mxConstants$1.STYLE_HORIZONTAL,!0)?(a=mxUtils$1.setStyle(a,mxConstants$1.STYLE_STARTSIZE,i.height+8),s&&(n.height=i.height+8),n.width=i.width):(a=mxUtils$1.setStyle(a,mxConstants$1.STYLE_STARTSIZE,i.width+8),s&&(n.width=i.width+8),n.height=i.height),this.model.setStyle(e,a)}else{var o=this.view.createState(e),h=o.style[mxConstants$1.STYLE_ALIGN]||mxConstants$1.ALIGN_CENTER;h==mxConstants$1.ALIGN_RIGHT?n.x+=n.width-i.width:h==mxConstants$1.ALIGN_CENTER&&(n.x+=Math.round((n.width-i.width)/2));var d=this.getVerticalAlign(o);d==mxConstants$1.ALIGN_BOTTOM?n.y+=n.height-i.height:d==mxConstants$1.ALIGN_MIDDLE&&(n.y+=Math.round((n.height-i.height)/2)),n.width=i.width,n.height=i.height}if(!t&&!s){var m=this.view.getBounds(this.model.getChildren(e));if(m!=null){var g=this.view.translate,c=this.view.scale,f=(m.x+m.width)/c-n.x-g.x,C=(m.y+m.height)/c-n.y-g.y;n.width=Math.max(n.width,f),n.height=Math.max(n.height,C)}}this.cellsResized([e],[n],!1)}}finally{this.model.endUpdate()}}}getPreferredSizeForCell(e,t){var i=null;if(e!=null){var n=this.view.createState(e),s=n.style;if(!this.model.isEdge(e)){var l=s[mxConstants$1.STYLE_FONTSIZE]||mxConstants$1.DEFAULT_FONTSIZE,a=0,o=0;(this.getImage(n)!=null||s[mxConstants$1.STYLE_IMAGE]!=null)&&s[mxConstants$1.STYLE_SHAPE]==mxConstants$1.SHAPE_LABEL&&(s[mxConstants$1.STYLE_VERTICAL_ALIGN]==mxConstants$1.ALIGN_MIDDLE&&(a+=parseFloat(s[mxConstants$1.STYLE_IMAGE_WIDTH])||mxLabel.imageSize),s[mxConstants$1.STYLE_ALIGN]!=mxConstants$1.ALIGN_CENTER&&(o+=parseFloat(s[mxConstants$1.STYLE_IMAGE_HEIGHT])||mxLabel.imageSize)),a+=2*(s[mxConstants$1.STYLE_SPACING]||0),a+=s[mxConstants$1.STYLE_SPACING_LEFT]||0,a+=s[mxConstants$1.STYLE_SPACING_RIGHT]||0,o+=2*(s[mxConstants$1.STYLE_SPACING]||0),o+=s[mxConstants$1.STYLE_SPACING_TOP]||0,o+=s[mxConstants$1.STYLE_SPACING_BOTTOM]||0;var h=this.getFoldingImage(n);h!=null&&(a+=h.width+8);var d=this.cellRenderer.getLabelValue(n);if(d!=null&&d.length>0){this.isHtmlLabel(n.cell)||(d=mxUtils$1.htmlEntities(d,!1)),d=d.replace(/\n/g,"<br>");var m=mxUtils$1.getSizeForString(d,l,s[mxConstants$1.STYLE_FONTFAMILY],t,s[mxConstants$1.STYLE_FONTSTYLE]),g=m.width+a,c=m.height+o;if(!mxUtils$1.getValue(s,mxConstants$1.STYLE_HORIZONTAL,!0)){var f=c;c=g,g=f}this.gridEnabled&&(g=this.snap(g+this.gridSize/2),c=this.snap(c+this.gridSize/2)),i=new mxRectangle(0,0,g,c)}else{var C=4*this.gridSize;i=new mxRectangle(0,0,C,C)}}}return i}resizeCell(e,t,i){return this.resizeCells([e],[t],i)[0]}resizeCells(e,t,i){i=i??this.isRecursiveResize(),this.model.beginUpdate();try{var n=this.cellsResized(e,t,i);this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_CELLS,"cells",e,"bounds",t,"previous",n))}finally{this.model.endUpdate()}return e}cellsResized(e,t,i){i=i??!1;var n=[];if(e!=null&&t!=null&&e.length==t.length){this.model.beginUpdate();try{for(var s=0;s<e.length;s++)n.push(this.cellResized(e[s],t[s],!1,i)),this.isExtendParent(e[s])&&this.extendParent(e[s]),this.constrainChild(e[s]);this.resetEdgesOnResize&&this.resetEdges(e),this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_RESIZED,"cells",e,"bounds",t,"previous",n))}finally{this.model.endUpdate()}}return n}cellResized(e,t,i,n){var s=this.model.getGeometry(e);if(s!=null&&(s.x!=t.x||s.y!=t.y||s.width!=t.width||s.height!=t.height)){var l=s.clone();if(!i&&l.relative){var a=l.offset;a!=null&&(a.x+=t.x-l.x,a.y+=t.y-l.y)}else l.x=t.x,l.y=t.y;l.width=t.width,l.height=t.height,!l.relative&&this.model.isVertex(e)&&!this.isAllowNegativeCoordinates()&&(l.x=Math.max(0,l.x),l.y=Math.max(0,l.y)),this.model.beginUpdate();try{n&&this.resizeChildCells(e,l),this.model.setGeometry(e,l),this.constrainChildCells(e)}finally{this.model.endUpdate()}}return s}resizeChildCells(e,t){for(var i=this.model.getGeometry(e),n=t.width/i.width,s=t.height/i.height,l=this.model.getChildCount(e),a=0;a<l;a++)this.scaleCell(this.model.getChildAt(e,a),n,s,!0)}constrainChildCells(e){for(var t=this.model.getChildCount(e),i=0;i<t;i++)this.constrainChild(this.model.getChildAt(e,i))}scaleCell(e,t,i,n){var s=this.model.getGeometry(e);if(s!=null){var l=this.getCurrentCellStyle(e);s=s.clone();var a=s.x,o=s.y,h=s.width,d=s.height;s.scale(t,i,l[mxConstants$1.STYLE_ASPECT]=="fixed"),l[mxConstants$1.STYLE_RESIZE_WIDTH]=="1"?s.width=h*t:l[mxConstants$1.STYLE_RESIZE_WIDTH]=="0"&&(s.width=h),l[mxConstants$1.STYLE_RESIZE_HEIGHT]=="1"?s.height=d*i:l[mxConstants$1.STYLE_RESIZE_HEIGHT]=="0"&&(s.height=d),this.isCellMovable(e)||(s.x=a,s.y=o),this.isCellResizable(e)||(s.width=h,s.height=d),this.model.isVertex(e)?this.cellResized(e,s,!0,n):this.model.setGeometry(e,s)}}extendParent(e){if(e!=null){var t=this.model.getParent(e),i=this.getCellGeometry(t);if(t!=null&&i!=null&&!this.isCellCollapsed(t)){var n=this.getCellGeometry(e);n!=null&&!n.relative&&(i.width<n.x+n.width||i.height<n.y+n.height)&&(i=i.clone(),i.width=Math.max(i.width,n.x+n.width),i.height=Math.max(i.height,n.y+n.height),this.cellsResized([t],[i],!1))}}}importCells(e,t,i,n,s,l){return this.moveCells(e,t,i,!0,n,s,l)}moveCells(e,t,i,n,s,l,a){if(t=t??0,i=i??0,n=n??!1,e!=null&&(t!=0||i!=0||n||s!=null)){e=this.model.getTopmostCells(e),this.model.beginUpdate();try{for(var o=new mxDictionary,h=0;h<e.length;h++)o.put(e[h],!0);for(var d=w=>{for(;w!=null;){if(o.get(w))return!0;w=this.model.getParent(w)}return!1},m=[],h=0;h<e.length;h++){var g=this.getCellGeometry(e[h]),c=this.model.getParent(e[h]);(g==null||!g.relative||!this.model.isEdge(c)||!d(this.model.getTerminal(c,!0))&&!d(this.model.getTerminal(c,!1)))&&m.push(e[h])}e=m,n&&(e=this.cloneCells(e,this.isCloneInvalidEdges(),a),s==null&&(s=this.getDefaultParent()));var f=this.isAllowNegativeCoordinates();if(s!=null&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(e,t,i,!n&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),s==null,this.isExtendParentsOnMove()&&s==null),this.setAllowNegativeCoordinates(f),s!=null){var C=this.model.getChildCount(s);this.cellsAdded(e,s,C,null,null,!0)}this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_CELLS,"cells",e,"dx",t,"dy",i,"clone",n,"target",s,"event",l))}finally{this.model.endUpdate()}}return e}cellsMoved(e,t,i,n,s,l){if(e!=null&&(t!=0||i!=0)){l=l??!1,this.model.beginUpdate();try{n&&this.disconnectGraph(e);for(var a=0;a<e.length;a++)this.translateCell(e[a],t,i),l&&this.isExtendParent(e[a])?this.extendParent(e[a]):s&&this.constrainChild(e[a]);this.resetEdgesOnMove&&this.resetEdges(e),this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_MOVED,"cells",e,"dx",t,"dy",i,"disconnect",n))}finally{this.model.endUpdate()}}}translateCell(e,t,i){var n=this.model.getGeometry(e);if(n!=null){if(t=parseFloat(t),i=parseFloat(i),n=n.clone(),n.translate(t,i),!n.relative&&this.model.isVertex(e)&&!this.isAllowNegativeCoordinates()&&(n.x=Math.max(0,parseFloat(n.x)),n.y=Math.max(0,parseFloat(n.y))),n.relative&&!this.model.isEdge(e)){var s=this.model.getParent(e),l=0;if(this.model.isVertex(s)){var a=this.getCurrentCellStyle(s);l=mxUtils$1.getValue(a,mxConstants$1.STYLE_ROTATION,0)}if(l!=0){var o=mxUtils$1.toRadians(-l),h=Math.cos(o),d=Math.sin(o),m=mxUtils$1.getRotatedPoint(new mxPoint(t,i),h,d,new mxPoint(0,0));t=m.x,i=m.y}n.offset==null?n.offset=new mxPoint(t,i):(n.offset.x=parseFloat(n.offset.x)+t,n.offset.y=parseFloat(n.offset.y)+i)}this.model.setGeometry(e,n)}}getCellContainmentArea(e){if(e!=null&&!this.model.isEdge(e)){var t=this.model.getParent(e);if(t!=null&&t!=this.getDefaultParent()){var i=this.model.getGeometry(t);if(i!=null){var n=0,s=0,l=i.width,a=i.height;if(this.isSwimlane(t)){var o=this.getStartSize(t),h=this.getCurrentCellStyle(t),d=mxUtils$1.getValue(h,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),m=mxUtils$1.getValue(h,mxConstants$1.STYLE_FLIPH,0)==1,g=mxUtils$1.getValue(h,mxConstants$1.STYLE_FLIPV,0)==1;if(d==mxConstants$1.DIRECTION_SOUTH||d==mxConstants$1.DIRECTION_NORTH){var c=o.width;o.width=o.height,o.height=c}(d==mxConstants$1.DIRECTION_EAST&&!g||d==mxConstants$1.DIRECTION_NORTH&&!m||d==mxConstants$1.DIRECTION_WEST&&g||d==mxConstants$1.DIRECTION_SOUTH&&m)&&(n=o.width,s=o.height),l-=o.width,a-=o.height}return new mxRectangle(n,s,l,a)}}}return null}getMaximumGraphBounds(){return this.maximumGraphBounds}constrainChild(e,t){if(e!=null){var i=this.getCellGeometry(e);if(i!=null&&(this.isConstrainRelativeChildren()||!i.relative)){var n=this.model.getParent(e);this.getCellGeometry(n);var s=this.getMaximumGraphBounds();if(s!=null){var l=this.getBoundingBoxFromGeometry([n],!1);l!=null&&(s=mxRectangle.fromRectangle(s),s.x-=l.x,s.y-=l.y)}if(this.isConstrainChild(e)){var a=this.getCellContainmentArea(e);if(a!=null){var o=this.getOverlap(e);o>0&&(a=mxRectangle.fromRectangle(a),a.x-=a.width*o,a.y-=a.height*o,a.width+=2*a.width*o,a.height+=2*a.height*o),s==null?s=a:(s=mxRectangle.fromRectangle(s),s.intersect(a))}}if(s!=null){var h=[e];if(!this.isCellCollapsed(e))for(var d=this.model.getDescendants(e),m=0;m<d.length;m++)this.isCellVisible(d[m])&&h.push(d[m]);var g=this.getBoundingBoxFromGeometry(h,!1);if(g!=null){i=i.clone();var c=0;i.width>s.width&&(c=i.width-s.width,i.width-=c),g.x+g.width>s.x+s.width&&(c-=g.x+g.width-s.x-s.width-c);var f=0;i.height>s.height&&(f=i.height-s.height,i.height-=f),g.y+g.height>s.y+s.height&&(f-=g.y+g.height-s.y-s.height-f),g.x<s.x&&(c-=g.x-s.x),g.y<s.y&&(f-=g.y-s.y),(c!=0||f!=0)&&(i.relative?(i.offset==null&&(i.offset=new mxPoint),i.offset.x+=c,i.offset.y+=f):(i.x+=c,i.y+=f)),this.model.setGeometry(e,i)}}}}}resetEdges(e){if(e!=null){for(var t=new mxDictionary,i=0;i<e.length;i++)t.put(e[i],!0);this.model.beginUpdate();try{for(var i=0;i<e.length;i++){var n=this.model.getEdges(e[i]);if(n!=null)for(var s=0;s<n.length;s++){var l=this.view.getState(n[s]),a=l!=null?l.getVisibleTerminal(!0):this.view.getVisibleTerminal(n[s],!0),o=l!=null?l.getVisibleTerminal(!1):this.view.getVisibleTerminal(n[s],!1);(!t.get(a)||!t.get(o))&&this.resetEdge(n[s])}this.resetEdges(this.model.getChildren(e[i]))}}finally{this.model.endUpdate()}}}resetEdge(e){var t=this.model.getGeometry(e);return t!=null&&t.points!=null&&t.points.length>0&&(t=t.clone(),t.points=[],this.model.setGeometry(e,t)),e}getOutlineConstraint(e,t,i){if(t.shape!=null){var n=this.view.getPerimeterBounds(t),s=t.style[mxConstants$1.STYLE_DIRECTION];if(s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_SOUTH){n.x+=n.width/2-n.height/2,n.y+=n.height/2-n.width/2;var l=n.width;n.width=n.height,n.height=l}var a=mxUtils$1.toRadians(t.shape.getShapeRotation());if(a!=0){var o=Math.cos(-a),h=Math.sin(-a),d=new mxPoint(n.getCenterX(),n.getCenterY());e=mxUtils$1.getRotatedPoint(e,o,h,d)}var m=1,g=1,c=0,f=0;if(this.getModel().isVertex(t.cell)){var C=t.style[mxConstants$1.STYLE_FLIPH],v=t.style[mxConstants$1.STYLE_FLIPV];if(t.shape!=null&&t.shape.stencil!=null&&(C=mxUtils$1.getValue(t.style,"stencilFlipH",0)==1||C,v=mxUtils$1.getValue(t.style,"stencilFlipV",0)==1||v),s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_SOUTH){var l=C;C=v,v=l}C&&(m=-1,c=-n.width),v&&(g=-1,f=-n.height)}e=new mxPoint((e.x-n.x)*m-c+n.x,(e.y-n.y)*g-f+n.y);var w=n.width==0?0:Math.round((e.x-n.x)*1e3/n.width)/1e3,S=n.height==0?0:Math.round((e.y-n.y)*1e3/n.height)/1e3;return new mxConnectionConstraint(new mxPoint(w,S),!1)}return null}getAllConnectionConstraints(e,t){return e!=null&&e.shape!=null&&e.shape.stencil!=null?e.shape.stencil.constraints:null}getConnectionConstraint(e,t,i){var n=null,s=e.style[i?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X];if(s!=null){var l=e.style[i?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y];l!=null&&(n=new mxPoint(parseFloat(s),parseFloat(l)))}var a=!1,o=0,h=0;return n!=null&&(a=mxUtils$1.getValue(e.style,i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,!0),o=parseFloat(e.style[i?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX]),h=parseFloat(e.style[i?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY]),o=isFinite(o)?o:0,h=isFinite(h)?h:0),new mxConnectionConstraint(n,a,null,o,h)}setConnectionConstraint(e,t,i,n){if(n!=null){this.model.beginUpdate();try{n==null||n.point==null?(this.setCellStyles(i?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X,null,[e]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y,null,[e]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX,null,[e]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY,null,[e]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,null,[e])):n.point!=null&&(this.setCellStyles(i?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X,n.point.x,[e]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y,n.point.y,[e]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX,n.dx,[e]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY,n.dy,[e]),n.perimeter?this.setCellStyles(i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,null,[e]):this.setCellStyles(i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,"0",[e]))}finally{this.model.endUpdate()}}}getConnectionPoint(e,t,i){i=i??!0;var n=null;if(e!=null&&t.point!=null){var s=this.view.getPerimeterBounds(e),l=new mxPoint(s.getCenterX(),s.getCenterY()),a=e.style[mxConstants$1.STYLE_DIRECTION],o=0;a!=null&&mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ANCHOR_POINT_DIRECTION,1)==1&&(a==mxConstants$1.DIRECTION_NORTH?o+=270:a==mxConstants$1.DIRECTION_WEST?o+=180:a==mxConstants$1.DIRECTION_SOUTH&&(o+=90),(a==mxConstants$1.DIRECTION_NORTH||a==mxConstants$1.DIRECTION_SOUTH)&&s.rotate90());var h=this.view.scale;n=new mxPoint(s.x+t.point.x*s.width+t.dx*h,s.y+t.point.y*s.height+t.dy*h);var d=e.style[mxConstants$1.STYLE_ROTATION]||0;if(t.perimeter){if(o!=0){var m=0,g=0;o==90?g=1:o==180?m=-1:o==270&&(g=-1),n=mxUtils$1.getRotatedPoint(n,m,g,l)}n=this.view.getPerimeterPoint(e,n,!1)}else if(d+=o,this.getModel().isVertex(e.cell)){var c=e.style[mxConstants$1.STYLE_FLIPH]==1,f=e.style[mxConstants$1.STYLE_FLIPV]==1;if(e.shape!=null&&e.shape.stencil!=null&&(c=mxUtils$1.getValue(e.style,"stencilFlipH",0)==1||c,f=mxUtils$1.getValue(e.style,"stencilFlipV",0)==1||f),a==mxConstants$1.DIRECTION_NORTH||a==mxConstants$1.DIRECTION_SOUTH){var C=c;c=f,f=C}c&&(n.x=2*s.getCenterX()-n.x),f&&(n.y=2*s.getCenterY()-n.y)}if(d!=0&&n!=null){var v=mxUtils$1.toRadians(d),m=Math.cos(v),g=Math.sin(v);n=mxUtils$1.getRotatedPoint(n,m,g,l)}}return i&&n!=null&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),n}connectCell(e,t,i,n){this.model.beginUpdate();try{var s=this.model.getTerminal(e,i);this.cellConnected(e,t,i,n),this.fireEvent(new mxEventObject$1(mxEvent$1.CONNECT_CELL,"edge",e,"terminal",t,"source",i,"previous",s))}finally{this.model.endUpdate()}return e}cellConnected(e,t,i,n){if(e!=null){this.model.beginUpdate();try{var s=this.model.getTerminal(e,i);if(this.setConnectionConstraint(e,t,i,n),this.isPortsEnabled()){var l=null;this.isPort(t)&&(l=t.getId(),t=this.getTerminalForPort(t,i));var a=i?mxConstants$1.STYLE_SOURCE_PORT:mxConstants$1.STYLE_TARGET_PORT;this.setCellStyles(a,l,[e])}this.model.setTerminal(e,t,i),this.resetEdgesOnConnect&&this.resetEdge(e),this.fireEvent(new mxEventObject$1(mxEvent$1.CELL_CONNECTED,"edge",e,"terminal",t,"source",i,"previous",s))}finally{this.model.endUpdate()}}}disconnectGraph(e){if(e!=null){this.model.beginUpdate();try{for(var t=this.view.scale,i=this.view.translate,n=new mxDictionary,s=0;s<e.length;s++)n.put(e[s],!0);for(var s=0;s<e.length;s++)if(this.model.isEdge(e[s])){var l=this.model.getGeometry(e[s]);if(l!=null){var a=this.view.getState(e[s]),o=this.view.getState(this.model.getParent(e[s]));if(a!=null&&o!=null){l=l.clone();var h=-o.origin.x,d=-o.origin.y,m=a.absolutePoints,g=this.model.getTerminal(e[s],!0);if(g!=null&&this.isCellDisconnectable(e[s],g,!0)){for(;g!=null&&!n.get(g);)g=this.model.getParent(g);g==null&&(l.setTerminalPoint(new mxPoint(m[0].x/t-i.x+h,m[0].y/t-i.y+d),!0),this.model.setTerminal(e[s],null,!0))}var c=this.model.getTerminal(e[s],!1);if(c!=null&&this.isCellDisconnectable(e[s],c,!1)){for(;c!=null&&!n.get(c);)c=this.model.getParent(c);if(c==null){var f=m.length-1;l.setTerminalPoint(new mxPoint(m[f].x/t-i.x+h,m[f].y/t-i.y+d),!1),this.model.setTerminal(e[s],null,!1)}}this.model.setGeometry(e[s],l)}}}}finally{this.model.endUpdate()}}}getCurrentRoot(){return this.view.currentRoot}getTranslateForRoot(e){return null}isPort(e){return!1}getTerminalForPort(e,t){return this.model.getParent(e)}getChildOffsetForCell(e){return null}enterGroup(e){e=e||this.getSelectionCell(),e!=null&&this.isValidRoot(e)&&(this.view.setCurrentRoot(e),this.clearSelection())}exitGroup(){var e=this.model.getRoot(),t=this.getCurrentRoot();if(t!=null){for(var i=this.model.getParent(t);i!=e&&!this.isValidRoot(i)&&this.model.getParent(i)!=e;)i=this.model.getParent(i);i==e||this.model.getParent(i)==e?this.view.setCurrentRoot(null):this.view.setCurrentRoot(i);var n=this.view.getState(t);n!=null&&this.setSelectionCell(t)}}home(){var e=this.getCurrentRoot();if(e!=null){this.view.setCurrentRoot(null);var t=this.view.getState(e);t!=null&&this.setSelectionCell(e)}}isValidRoot(e){return e!=null}getGraphBounds(){return this.view.getGraphBounds()}getCellBounds(e,t,i){var n=[e];t&&(n=n.concat(this.model.getEdges(e)));var s=this.view.getBounds(n);if(i)for(var l=this.model.getChildCount(e),a=0;a<l;a++){var o=this.getCellBounds(this.model.getChildAt(e,a),t,!0);s!=null?s.add(o):s=o}return s}getBoundingBoxFromGeometry(e,t){t=t??!1;var i=null;if(e!=null){for(var n=0;n<e.length;n++)if(t||this.model.isVertex(e[n])){var s=this.getCellGeometry(e[n]);if(s!=null){var l=null;if(this.model.isEdge(e[n])){var a=function(f){f!=null&&(h==null?h=new mxRectangle(f.x,f.y,0,0):h.add(new mxRectangle(f.x,f.y,0,0)))};this.model.getTerminal(e[n],!0)==null&&a(s.getTerminalPoint(!0)),this.model.getTerminal(e[n],!1)==null&&a(s.getTerminalPoint(!1));var o=s.points;if(o!=null&&o.length>0)for(var h=new mxRectangle(o[0].x,o[0].y,0,0),d=1;d<o.length;d++)a(o[d]);l=h}else{var m=this.model.getParent(e[n]);if(s.relative){if(this.model.isVertex(m)&&m!=this.view.currentRoot){var h=this.getBoundingBoxFromGeometry([m],!1);h!=null&&(l=new mxRectangle(s.x*h.width,s.y*h.height,s.width,s.height),mxUtils$1.indexOf(e,m)>=0&&(l.x+=h.x,l.y+=h.y))}}else if(l=mxRectangle.fromRectangle(s),this.model.isVertex(m)&&mxUtils$1.indexOf(e,m)>=0){var h=this.getBoundingBoxFromGeometry([m],!1);h!=null&&(l.x+=h.x,l.y+=h.y)}l!=null&&s.offset!=null&&(l.x+=s.offset.x,l.y+=s.offset.y);var g=this.getCurrentCellStyle(e[n]);if(l!=null){var c=mxUtils$1.getValue(g,mxConstants$1.STYLE_ROTATION,0);c!=0&&(l=mxUtils$1.getBoundingBox(l,c))}}l!=null&&(i==null?i=mxRectangle.fromRectangle(l):i.add(l))}}}return i}refresh(e){this.view.clear(e,e==null),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject$1(mxEvent$1.REFRESH))}snap(e){return this.gridEnabled&&(e=Math.round(e/this.gridSize)*this.gridSize),e}snapDelta(e,t,i,n,s){var l=this.view.translate,a=this.view.scale;if(!i&&this.gridEnabled){var o=this.gridSize*a*.5;if(!n){var h=t.x-(this.snap(t.x/a-l.x)+l.x)*a;Math.abs(e.x-h)<o?e.x=0:e.x=this.snap(e.x/a)*a-h}if(!s){var d=t.y-(this.snap(t.y/a-l.y)+l.y)*a;Math.abs(e.y-d)<o?e.y=0:e.y=this.snap(e.y/a)*a-d}}else{var o=.5*a;if(!n){var h=t.x-(Math.round(t.x/a-l.x)+l.x)*a;Math.abs(e.x-h)<o?e.x=0:e.x=Math.round(e.x/a)*a-h}if(!s){var d=t.y-(Math.round(t.y/a-l.y)+l.y)*a;Math.abs(e.y-d)<o?e.y=0:e.y=Math.round(e.y/a)*a-d}}return e}panGraph(e,t){if(this.useScrollbarsForPanning&&mxUtils$1.hasScrollbars(this.container))this.container.scrollLeft=-e,this.container.scrollTop=-t;else{var i=this.view.getCanvas();if(this.dialect==mxConstants$1.DIALECT_SVG)if(e==0&&t==0){if(i.removeAttribute("transform"),this.shiftPreview1!=null){for(var n=this.shiftPreview1.firstChild;n!=null;){var s=n.nextSibling;this.container.appendChild(n),n=s}for(this.shiftPreview1.parentNode!=null&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(i.parentNode),n=this.shiftPreview2.firstChild;n!=null;){var s=n.nextSibling;this.container.appendChild(n),n=s}this.shiftPreview2.parentNode!=null&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(i.setAttribute("transform","translate("+e+","+t+")"),this.shiftPreview1==null){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";for(var l=this.shiftPreview1,n=this.container.firstChild;n!=null;){var s=n.nextSibling;n!=i.parentNode?l.appendChild(n):l=this.shiftPreview2,n=s}this.shiftPreview1.firstChild!=null&&this.container.insertBefore(this.shiftPreview1,i.parentNode),this.shiftPreview2.firstChild!=null&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=e+"px",this.shiftPreview1.style.top=t+"px",this.shiftPreview2.style.left=e+"px",this.shiftPreview2.style.top=t+"px"}else i.style.left=e+"px",i.style.top=t+"px";this.panDx=e,this.panDy=t,this.fireEvent(new mxEventObject$1(mxEvent$1.PAN))}}zoomIn(){this.zoom(this.zoomFactor)}zoomOut(){this.zoom(1/this.zoomFactor)}zoomActual(){this.view.scale==1?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))}zoomTo(e,t){this.zoom(e/this.view.scale,t)}center(e,t,i,n){e=e??!0,t=t??!0,i=i??.5,n=n??.5;var s=mxUtils$1.hasScrollbars(this.container),l=2*this.getBorder(),a=this.container.clientWidth-l,o=this.container.clientHeight-l,h=this.getGraphBounds(),d=this.view.translate,m=this.view.scale,g=e?a-h.width:0,c=t?o-h.height:0;if(!s)this.view.setTranslate(e?Math.floor(d.x-h.x*m+g*i/m):d.x,t?Math.floor(d.y-h.y*m+c*n/m):d.y);else{h.x-=d.x,h.y-=d.y;var f=this.container.scrollWidth,C=this.container.scrollHeight;f>a&&(g=0),C>o&&(c=0),this.view.setTranslate(Math.floor(g/2-h.x),Math.floor(c/2-h.y)),this.container.scrollLeft=(f-a)/2,this.container.scrollTop=(C-o)/2}}zoom(e,t){t=t??this.centerZoom;var i=Math.round(this.view.scale*e*100)/100,n=this.view.getState(this.getSelectionCell());if(e=i/this.view.scale,this.keepSelectionVisibleOnZoom&&n!=null){var s=new mxRectangle(n.x*e,n.y*e,n.width*e,n.height*e);this.view.scale=i,this.scrollRectToVisible(s)||(this.view.revalidate(),this.view.setScale(i))}else{var l=mxUtils$1.hasScrollbars(this.container);if(t&&!l){var a=this.container.offsetWidth,o=this.container.offsetHeight;if(e>1){var h=(e-1)/(i*2);a*=-h,o*=-h}else{var h=(1/e-1)/(this.view.scale*2);a*=h,o*=h}this.view.scaleAndTranslate(i,this.view.translate.x+a,this.view.translate.y+o)}else{var d=this.view.translate.x,m=this.view.translate.y,g=this.container.scrollLeft,c=this.container.scrollTop;if(this.view.setScale(i),l){var a=0,o=0;t&&(a=this.container.offsetWidth*(e-1)/2,o=this.container.offsetHeight*(e-1)/2),this.container.scrollLeft=(this.view.translate.x-d)*this.view.scale+Math.round(g*e+a),this.container.scrollTop=(this.view.translate.y-m)*this.view.scale+Math.round(c*e+o)}}}}zoomToRect(e){var t=this.container.clientWidth/e.width,i=this.container.clientHeight/e.height,n=t/i;e.x=Math.max(0,e.x),e.y=Math.max(0,e.y);var s=Math.min(this.container.scrollWidth,e.x+e.width),l=Math.min(this.container.scrollHeight,e.y+e.height);if(e.width=s-e.x,e.height=l-e.y,n<1){var a=e.height/n,o=(a-e.height)/2;e.height=a;var h=Math.min(e.y,o);e.y=e.y-h,l=Math.min(this.container.scrollHeight,e.y+e.height),e.height=l-e.y}else{var d=e.width*n,m=(d-e.width)/2;e.width=d;var g=Math.min(e.x,m);e.x=e.x-g,s=Math.min(this.container.scrollWidth,e.x+e.width),e.width=s-e.x}var c=this.container.clientWidth/e.width,f=this.view.scale*c;mxUtils$1.hasScrollbars(this.container)?(this.view.setScale(f),this.container.scrollLeft=Math.round(e.x*c),this.container.scrollTop=Math.round(e.y*c)):this.view.scaleAndTranslate(f,this.view.translate.x-e.x/this.view.scale,this.view.translate.y-e.y/this.view.scale)}scrollCellToVisible(e,t){var i=-this.view.translate.x,n=-this.view.translate.y,s=this.view.getState(e);if(s!=null){var l=new mxRectangle(i+s.x,n+s.y,s.width,s.height);if(t&&this.container!=null){var a=this.container.clientWidth,o=this.container.clientHeight;l.x=l.getCenterX()-a/2,l.width=a,l.y=l.getCenterY()-o/2,l.height=o}var h=new mxPoint(this.view.translate.x,this.view.translate.y);if(this.scrollRectToVisible(l)){var d=new mxPoint(this.view.translate.x,this.view.translate.y);this.view.translate.x=h.x,this.view.translate.y=h.y,this.view.setTranslate(d.x,d.y)}}}scrollRectToVisible(e){var t=!1;if(e!=null){var i=this.container.offsetWidth,n=this.container.offsetHeight,s=Math.min(i,e.width),l=Math.min(n,e.height);if(mxUtils$1.hasScrollbars(this.container)){var a=this.container;e.x+=this.view.translate.x,e.y+=this.view.translate.y;var o=a.scrollLeft-e.x,h=Math.max(o-a.scrollLeft,0);o>0?a.scrollLeft-=o+2:(o=e.x+s-a.scrollLeft-a.clientWidth,o>0&&(a.scrollLeft+=o+2));var d=a.scrollTop-e.y,m=Math.max(0,d-a.scrollTop);d>0?a.scrollTop-=d+2:(d=e.y+l-a.scrollTop-a.clientHeight,d>0&&(a.scrollTop+=d+2)),!this.useScrollbarsForPanning&&(h!=0||m!=0)&&this.view.setTranslate(h,m)}else{var g=-this.view.translate.x,c=-this.view.translate.y,f=this.view.scale;e.x+s>g+i&&(this.view.translate.x-=(e.x+s-i-g)/f,t=!0),e.y+l>c+n&&(this.view.translate.y-=(e.y+l-n-c)/f,t=!0),e.x<g&&(this.view.translate.x+=(g-e.x)/f,t=!0),e.y<c&&(this.view.translate.y+=(c-e.y)/f,t=!0),t&&(this.view.refresh(),this.selectionCellsHandler!=null&&this.selectionCellsHandler.refresh())}}return t}getCellGeometry(e){return this.model.getGeometry(e)}isCellVisible(e){return this.model.isVisible(e)}isCellCollapsed(e){return this.model.isCollapsed(e)}isCellConnectable(e){return this.model.isConnectable(e)}isOrthogonal(e){var t=e.style[mxConstants$1.STYLE_ORTHOGONAL];if(t!=null)return t;var i=this.view.getEdgeStyle(e);return i==mxEdgeStyle.SegmentConnector||i==mxEdgeStyle.ElbowConnector||i==mxEdgeStyle.SideToSide||i==mxEdgeStyle.TopToBottom||i==mxEdgeStyle.EntityRelation||i==mxEdgeStyle.OrthConnector}isLoop(e){var t=e.getVisibleTerminalState(!0),i=e.getVisibleTerminalState(!1);return t!=null&&t==i}isCloneEvent(e){return mxEvent$1.isControlDown(e)}isTransparentClickEvent(e){return!1}isToggleEvent(e){return mxClient.IS_MAC?mxEvent$1.isMetaDown(e):mxEvent$1.isControlDown(e)}isGridEnabledEvent(e){return e!=null&&!mxEvent$1.isAltDown(e)}isConstrainedEvent(e){return mxEvent$1.isShiftDown(e)}isIgnoreTerminalEvent(e){return!1}validationAlert(e){mxUtils$1.alert(e)}isEdgeValid(e,t,i){return this.getEdgeValidationError(e,t,i)==null}getEdgeValidationError(e,t,i){if(e!=null&&!this.isAllowDanglingEdges()&&(t==null||i==null))return"";if(e!=null&&this.model.getTerminal(e,!0)==null&&this.model.getTerminal(e,!1)==null)return null;if(!this.allowLoops&&t==i&&t!=null||!this.isValidConnection(t,i))return"";if(t!=null&&i!=null){var n="";if(!this.multigraph){var s=this.model.getEdgesBetween(t,i,!0);(s.length>1||s.length==1&&s[0]!=e)&&(n+=(mxResources$1.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+`
`)}var l=this.model.getDirectedEdgeCount(t,!0,e),a=this.model.getDirectedEdgeCount(i,!1,e);if(this.multiplicities!=null)for(var o=0;o<this.multiplicities.length;o++){var h=this.multiplicities[o].check(this,e,t,i,l,a);h!=null&&(n+=h)}var h=this.validateEdge(e,t,i);return h!=null&&(n+=h),n.length>0?n:null}return this.allowDanglingEdges?null:""}validateEdge(e,t,i){return null}validateGraph(e,t){e=e??this.model.getRoot(),t=t??new Object;for(var i=!0,n=this.model.getChildCount(e),s=0;s<n;s++){var l=this.model.getChildAt(e,s),a=t;this.isValidRoot(l)&&(a=new Object);var o=this.validateGraph(l,a);o!=null?this.setCellWarning(l,o.replace(/\n/g,"<br>")):this.setCellWarning(l,null),i=i&&o==null}var h="";this.isCellCollapsed(e)&&!i&&(h+=(mxResources$1.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+`
`),this.model.isEdge(e)?h+=this.getEdgeValidationError(e,this.model.getTerminal(e,!0),this.model.getTerminal(e,!1))||"":h+=this.getCellValidationError(e)||"";var d=this.validateCell(e,t);return d!=null&&(h+=d),this.model.getParent(e)==null&&this.view.validate(),h.length>0||!i?h:null}getCellValidationError(e){var t=this.model.getDirectedEdgeCount(e,!0),i=this.model.getDirectedEdgeCount(e,!1),n=this.model.getValue(e),s="";if(this.multiplicities!=null)for(var l=0;l<this.multiplicities.length;l++){var a=this.multiplicities[l];(a.source&&mxUtils$1.isNode(n,a.type,a.attr,a.value)&&(t>a.max||t<a.min)||!a.source&&mxUtils$1.isNode(n,a.type,a.attr,a.value)&&(i>a.max||i<a.min))&&(s+=a.countError+`
`)}return s.length>0?s:null}validateCell(e,t){return null}getBackgroundImage(){return this.backgroundImage}setBackgroundImage(e){this.backgroundImage=e}getFoldingImage(e){if(e!=null&&this.foldingEnabled&&!this.getModel().isEdge(e.cell)){var t=this.isCellCollapsed(e.cell);if(this.isCellFoldable(e.cell,!t))return t?this.collapsedImage:this.expandedImage}return null}convertValueToString(e){var t=this.model.getValue(e);if(t!=null){if(mxUtils$1.isNode(t))return t.nodeName;if(typeof t.toString=="function")return t.toString()}return""}getLabel(e){var t="";if(this.labelsVisible&&e!=null){var i=this.getCurrentCellStyle(e);mxUtils$1.getValue(i,mxConstants$1.STYLE_NOLABEL,!1)||(t=this.convertValueToString(e))}return t}isHtmlLabel(e){return this.isHtmlLabels()}isHtmlLabels(){return this.htmlLabels}setHtmlLabels(e){this.htmlLabels=e}isWrapping(e){return this.getCurrentCellStyle(e)[mxConstants$1.STYLE_WHITE_SPACE]=="wrap"}isLabelClipped(e){return this.getCurrentCellStyle(e)[mxConstants$1.STYLE_OVERFLOW]=="hidden"}getTooltip(e,t,i,n){var s=null;if(e!=null){if(e.control!=null&&(t==e.control.node||t.parentNode==e.control.node)&&(s=this.collapseExpandResource,s=mxUtils$1.htmlEntities(mxResources$1.get(s)||s).replace(/\\n/g,"<br>")),s==null&&e.overlays!=null&&e.overlays.visit(function(a,o){s==null&&(t==o.node||t.parentNode==o.node)&&(s=o.overlay.toString())}),s==null){var l=this.selectionCellsHandler.getHandler(e.cell);l!=null&&typeof l.getTooltipForNode=="function"&&(s=l.getTooltipForNode(t))}s==null&&(s=this.getTooltipForCell(e.cell))}return s}getTooltipForCell(e){var t=null;return e!=null&&e.getTooltip!=null?t=e.getTooltip():t=this.convertValueToString(e),t}getLinkForCell(e){return null}getCursorForMouseEvent(e){return this.getCursorForCell(e.getCell())}getCursorForCell(e){return null}getStartSize(e,t){var i=new mxRectangle,n=this.getCurrentCellStyle(e,t),s=parseInt(mxUtils$1.getValue(n,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));return mxUtils$1.getValue(n,mxConstants$1.STYLE_HORIZONTAL,!0)?i.height=s:i.width=s,i}getSwimlaneDirection(e){var t=mxUtils$1.getValue(e,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),i=mxUtils$1.getValue(e,mxConstants$1.STYLE_FLIPH,0)==1,n=mxUtils$1.getValue(e,mxConstants$1.STYLE_FLIPV,0)==1,s=mxUtils$1.getValue(e,mxConstants$1.STYLE_HORIZONTAL,!0),l=s?0:3;t==mxConstants$1.DIRECTION_NORTH?l--:t==mxConstants$1.DIRECTION_WEST?l+=2:t==mxConstants$1.DIRECTION_SOUTH&&(l+=1);var a=mxUtils$1.mod(l,2);return i&&a==1&&(l+=2),n&&a==0&&(l+=2),[mxConstants$1.DIRECTION_NORTH,mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST][mxUtils$1.mod(l,4)]}getActualStartSize(e,t){var i=new mxRectangle;if(this.isSwimlane(e,t)){var n=this.getCurrentCellStyle(e,t),s=parseInt(mxUtils$1.getValue(n,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE)),l=this.getSwimlaneDirection(n);l==mxConstants$1.DIRECTION_NORTH?i.y=s:l==mxConstants$1.DIRECTION_WEST?i.x=s:l==mxConstants$1.DIRECTION_SOUTH?i.height=s:i.width=s}return i}getImage(e){return e!=null&&e.style!=null?e.style[mxConstants$1.STYLE_IMAGE]:null}isTransparentState(e){var t=!1;if(e!=null){var i=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE),n=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE);t=i==mxConstants$1.NONE&&n==mxConstants$1.NONE&&this.getImage(e)==null}return t}getVerticalAlign(e){return e!=null&&e.style!=null?e.style[mxConstants$1.STYLE_VERTICAL_ALIGN]||mxConstants$1.ALIGN_MIDDLE:null}getIndicatorColor(e){return e!=null&&e.style!=null?e.style[mxConstants$1.STYLE_INDICATOR_COLOR]:null}getIndicatorGradientColor(e){return e!=null&&e.style!=null?e.style[mxConstants$1.STYLE_INDICATOR_GRADIENTCOLOR]:null}getIndicatorShape(e){return e!=null&&e.style!=null?e.style[mxConstants$1.STYLE_INDICATOR_SHAPE]:null}getIndicatorImage(e){return e!=null&&e.style!=null?e.style[mxConstants$1.STYLE_INDICATOR_IMAGE]:null}getBorder(){return this.border}setBorder(e){this.border=e}isSwimlane(e,t){return e!=null&&this.model.getParent(e)!=this.model.getRoot()&&!this.model.isEdge(e)?this.getCurrentCellStyle(e,t)[mxConstants$1.STYLE_SHAPE]==mxConstants$1.SHAPE_SWIMLANE:!1}isResizeContainer(){return this.resizeContainer}setResizeContainer(e){this.resizeContainer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isEscapeEnabled(){return this.escapeEnabled}setEscapeEnabled(e){this.escapeEnabled=e}isInvokesStopCellEditing(){return this.invokesStopCellEditing}setInvokesStopCellEditing(e){this.invokesStopCellEditing=e}isEnterStopsCellEditing(){return this.enterStopsCellEditing}setEnterStopsCellEditing(e){this.enterStopsCellEditing=e}isCellLocked(e){var t=this.model.getGeometry(e);return this.isCellsLocked()||t!=null&&this.model.isVertex(e)&&t.relative}isCellsLocked(){return this.cellsLocked}setCellsLocked(e){this.cellsLocked=e}getCloneableCells(e){return this.model.filterCells(e,t=>this.isCellCloneable(t))}isCellCloneable(e){var t=this.getCurrentCellStyle(e);return this.isCellsCloneable()&&t[mxConstants$1.STYLE_CLONEABLE]!=0}isCellsCloneable(){return this.cellsCloneable}setCellsCloneable(e){this.cellsCloneable=e}getExportableCells(e){return this.model.filterCells(e,t=>this.canExportCell(t))}canExportCell(e){return this.exportEnabled}getImportableCells(e){return this.model.filterCells(e,t=>this.canImportCell(t))}canImportCell(e){return this.importEnabled}isCellSelectable(e){return this.isCellsSelectable()}isCellsSelectable(){return this.cellsSelectable}setCellsSelectable(e){this.cellsSelectable=e}getDeletableCells(e){return this.model.filterCells(e,t=>this.isCellDeletable(t))}isCellDeletable(e){var t=this.getCurrentCellStyle(e);return this.isCellsDeletable()&&t[mxConstants$1.STYLE_DELETABLE]!=0}isCellsDeletable(){return this.cellsDeletable}setCellsDeletable(e){this.cellsDeletable=e}isLabelMovable(e){return!this.isCellLocked(e)&&(this.model.isEdge(e)&&this.edgeLabelsMovable||this.model.isVertex(e)&&this.vertexLabelsMovable)}isCellRotatable(e){var t=this.getCurrentCellStyle(e);return t[mxConstants$1.STYLE_ROTATABLE]!=0}getMovableCells(e){return this.model.filterCells(e,t=>this.isCellMovable(t))}isCellMovable(e){var t=this.getCurrentCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&t[mxConstants$1.STYLE_MOVABLE]!=0}isCellsMovable(){return this.cellsMovable}setCellsMovable(e){this.cellsMovable=e}isGridEnabled(){return this.gridEnabled}setGridEnabled(e){this.gridEnabled=e}isPortsEnabled(){return this.portsEnabled}setPortsEnabled(e){this.portsEnabled=e}getGridSize(){return this.gridSize}setGridSize(e){this.gridSize=e}getTolerance(){return this.tolerance}setTolerance(e){this.tolerance=e}isVertexLabelsMovable(){return this.vertexLabelsMovable}setVertexLabelsMovable(e){this.vertexLabelsMovable=e}isEdgeLabelsMovable(){return this.edgeLabelsMovable}setEdgeLabelsMovable(e){this.edgeLabelsMovable=e}isSwimlaneNesting(){return this.swimlaneNesting}setSwimlaneNesting(e){this.swimlaneNesting=e}isSwimlaneSelectionEnabled(){return this.swimlaneSelectionEnabled}setSwimlaneSelectionEnabled(e){this.swimlaneSelectionEnabled=e}isMultigraph(){return this.multigraph}setMultigraph(e){this.multigraph=e}isAllowLoops(){return this.allowLoops}setAllowDanglingEdges(e){this.allowDanglingEdges=e}isAllowDanglingEdges(){return this.allowDanglingEdges}setConnectableEdges(e){this.connectableEdges=e}isConnectableEdges(){return this.connectableEdges}setCloneInvalidEdges(e){this.cloneInvalidEdges=e}isCloneInvalidEdges(){return this.cloneInvalidEdges}setAllowLoops(e){this.allowLoops=e}isDisconnectOnMove(){return this.disconnectOnMove}setDisconnectOnMove(e){this.disconnectOnMove=e}isDropEnabled(){return this.dropEnabled}setDropEnabled(e){this.dropEnabled=e}isSplitEnabled(){return this.splitEnabled}setSplitEnabled(e){this.splitEnabled=e}isCellResizable(e){var t=this.getCurrentCellStyle(e);return this.isCellsResizable()&&!this.isCellLocked(e)&&mxUtils$1.getValue(t,mxConstants$1.STYLE_RESIZABLE,"1")!="0"}isCellsResizable(){return this.cellsResizable}setCellsResizable(e){this.cellsResizable=e}isTerminalPointMovable(e,t){return!0}isCellBendable(e){var t=this.getCurrentCellStyle(e);return this.isCellsBendable()&&!this.isCellLocked(e)&&t[mxConstants$1.STYLE_BENDABLE]!=0}isCellsBendable(){return this.cellsBendable}setCellsBendable(e){this.cellsBendable=e}isCellEditable(e){var t=this.getCurrentCellStyle(e);return this.isCellsEditable()&&!this.isCellLocked(e)&&t[mxConstants$1.STYLE_EDITABLE]!=0}isCellsEditable(){return this.cellsEditable}setCellsEditable(e){this.cellsEditable=e}isCellDisconnectable(e,t,i){return this.isCellsDisconnectable()&&!this.isCellLocked(e)}isCellsDisconnectable(){return this.cellsDisconnectable}setCellsDisconnectable(e){this.cellsDisconnectable=e}isValidSource(e){return e==null&&this.allowDanglingEdges||e!=null&&(!this.model.isEdge(e)||this.connectableEdges)&&this.isCellConnectable(e)}isValidTarget(e){return this.isValidSource(e)}isValidConnection(e,t){return this.isValidSource(e)&&this.isValidTarget(t)}setConnectable(e){this.connectionHandler.setEnabled(e)}isConnectable(){return this.connectionHandler.isEnabled()}setTooltips(e){this.tooltipHandler.setEnabled(e)}setPanning(e){this.panningHandler.panningEnabled=e}isEditing(e){if(this.cellEditor!=null){var t=this.cellEditor.getEditingCell();return e==null?t!=null:e==t}return!1}isAutoSizeCell(e){var t=this.getCurrentCellStyle(e);return this.isAutoSizeCells()||t[mxConstants$1.STYLE_AUTOSIZE]==1}isAutoSizeCells(){return this.autoSizeCells}setAutoSizeCells(e){this.autoSizeCells=e}isExtendParent(e){return!this.getModel().isEdge(e)&&this.isExtendParents()}isExtendParents(){return this.extendParents}setExtendParents(e){this.extendParents=e}isExtendParentsOnAdd(e){return this.extendParentsOnAdd}setExtendParentsOnAdd(e){this.extendParentsOnAdd=e}isExtendParentsOnMove(){return this.extendParentsOnMove}setExtendParentsOnMove(e){this.extendParentsOnMove=e}isRecursiveResize(e){return this.recursiveResize}setRecursiveResize(e){this.recursiveResize=e}isConstrainChild(e){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(e))}isConstrainChildren(){return this.constrainChildren}setConstrainChildren(e){this.constrainChildren=e}isConstrainRelativeChildren(){return this.constrainRelativeChildren}setConstrainRelativeChildren(e){this.constrainRelativeChildren=e}isAllowNegativeCoordinates(){return this.allowNegativeCoordinates}setAllowNegativeCoordinates(e){this.allowNegativeCoordinates=e}getOverlap(e){return this.isAllowOverlapParent(e)?this.defaultOverlap:0}isAllowOverlapParent(e){return!1}getFoldableCells(e,t){return this.model.filterCells(e,i=>this.isCellFoldable(i,t))}isCellFoldable(e,t){var i=this.getCurrentCellStyle(e);return this.model.getChildCount(e)>0&&i[mxConstants$1.STYLE_FOLDABLE]!=0}isValidDropTarget(e,t,i){return e!=null&&(this.isSplitEnabled()&&this.isSplitTarget(e,t,i)||!this.model.isEdge(e)&&(this.isSwimlane(e)||this.model.getChildCount(e)>0&&!this.isCellCollapsed(e)))}isSplitTarget(e,t,i){if(this.model.isEdge(e)&&t!=null&&t.length==1&&this.isCellConnectable(t[0])&&this.getEdgeValidationError(e,this.model.getTerminal(e,!0),t[0])==null){var n=this.model.getTerminal(e,!0),s=this.model.getTerminal(e,!1);return!this.model.isAncestor(t[0],n)&&!this.model.isAncestor(t[0],s)}return!1}getDropTarget(e,t,i,n){if(!this.isSwimlaneNesting()){for(var s=0;s<e.length;s++)if(this.isSwimlane(e[s]))return null}var l=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(t),mxEvent$1.getClientY(t));l.x-=this.panDx,l.y-=this.panDy;var a=this.getSwimlaneAt(l.x,l.y);if(i==null)i=a;else if(a!=null){for(var o=this.model.getParent(a);o!=null&&this.isSwimlane(o)&&o!=i;)o=this.model.getParent(o);o==i&&(i=a)}for(;i!=null&&!this.isValidDropTarget(i,e,t)&&!this.model.isLayer(i);)i=this.model.getParent(i);if(n==null||!n)for(var h=i;h!=null&&mxUtils$1.indexOf(e,h)<0;)h=this.model.getParent(h);return!this.model.isLayer(i)&&h==null?i:null}getDefaultParent(){var e=this.getCurrentRoot();if(e==null&&(e=this.defaultParent,e==null)){var t=this.model.getRoot();e=this.model.getChildAt(t,0)}return e}setDefaultParent(e){this.defaultParent=e}getSwimlane(e){for(;e!=null&&!this.isSwimlane(e);)e=this.model.getParent(e);return e}getSwimlaneAt(e,t,i){if(i==null&&(i=this.getCurrentRoot(),i==null&&(i=this.model.getRoot())),i!=null)for(var n=this.model.getChildCount(i),s=0;s<n;s++){var l=this.model.getChildAt(i,s);if(l!=null){var a=this.getSwimlaneAt(e,t,l);if(a!=null)return a;if(this.isCellVisible(l)&&this.isSwimlane(l)){var o=this.view.getState(l);if(this.intersects(o,e,t))return l}}}return null}getCellAt(e,t,i,n,s,l){if(n=n??!0,s=s??!0,i==null&&(i=this.getCurrentRoot(),i==null&&(i=this.getModel().getRoot())),i!=null)for(var a=this.model.getChildCount(i),o=a-1;o>=0;o--){var h=this.model.getChildAt(i,o),d=this.getCellAt(e,t,h,n,s,l);if(d!=null)return d;if(this.isCellVisible(h)&&(s&&this.model.isEdge(h)||n&&this.model.isVertex(h))){var m=this.view.getState(h);if(m!=null&&(l==null||!l(m,e,t))&&this.intersects(m,e,t))return h}}return null}intersects(e,t,i){if(e!=null){var n=e.absolutePoints;if(n!=null)for(var s=this.tolerance*this.tolerance,l=n[0],a=1;a<n.length;a++){var o=n[a],h=mxUtils$1.ptSegDistSq(l.x,l.y,o.x,o.y,t,i);if(h<=s)return!0;l=o}else{var d=mxUtils$1.toRadians(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROTATION)||0);if(d!=0){var m=Math.cos(-d),g=Math.sin(-d),c=new mxPoint(e.getCenterX(),e.getCenterY()),l=mxUtils$1.getRotatedPoint(new mxPoint(t,i),m,g,c);t=l.x,i=l.y}if(mxUtils$1.contains(e,t,i))return!0}}return!1}hitsSwimlaneContent(e,t,i){var n=this.getView().getState(e),s=this.getStartSize(e);if(n!=null){var l=this.getView().getScale();if(t-=n.x,i-=n.y,s.width>0&&t>0&&t>s.width*l||s.height>0&&i>0&&i>s.height*l)return!0}return!1}getChildVertices(e){return this.getChildCells(e,!0,!1)}getChildEdges(e){return this.getChildCells(e,!1,!0)}getChildCells(e,t,i){e=e??this.getDefaultParent(),t=t??!1,i=i??!1;for(var n=this.model.getChildCells(e,t,i),s=[],l=0;l<n.length;l++)this.isCellVisible(n[l])&&s.push(n[l]);return s}getConnections(e,t){return this.getEdges(e,t,!0,!0,!1)}getIncomingEdges(e,t){return this.getEdges(e,t,!0,!1,!1)}getOutgoingEdges(e,t){return this.getEdges(e,t,!1,!0,!1)}getEdges(e,t,i,n,s,l){i=i??!0,n=n??!0,s=s??!0,l=l??!1;for(var a=[],o=this.isCellCollapsed(e),h=this.model.getChildCount(e),d=0;d<h;d++){var m=this.model.getChildAt(e,d);(o||!this.isCellVisible(m))&&(a=a.concat(this.model.getEdges(m,i,n)))}a=a.concat(this.model.getEdges(e,i,n));for(var g=[],d=0;d<a.length;d++){var c=this.view.getState(a[d]),f=c!=null?c.getVisibleTerminal(!0):this.view.getVisibleTerminal(a[d],!0),C=c!=null?c.getVisibleTerminal(!1):this.view.getVisibleTerminal(a[d],!1);(s&&f==C||f!=C&&(i&&C==e&&(t==null||this.isValidAncestor(f,t,l))||n&&f==e&&(t==null||this.isValidAncestor(C,t,l))))&&g.push(a[d])}return g}isValidAncestor(e,t,i){return i?this.model.isAncestor(t,e):this.model.getParent(e)==t}getOpposites(e,t,i,n){i=i??!0,n=n??!0;var s=[],l=new mxDictionary;if(e!=null)for(var a=0;a<e.length;a++){var o=this.view.getState(e[a]),h=o!=null?o.getVisibleTerminal(!0):this.view.getVisibleTerminal(e[a],!0),d=o!=null?o.getVisibleTerminal(!1):this.view.getVisibleTerminal(e[a],!1);h==t&&d!=null&&d!=t&&n?l.get(d)||(l.put(d,!0),s.push(d)):d==t&&h!=null&&h!=t&&i&&(l.get(h)||(l.put(h,!0),s.push(h)))}return s}getEdgesBetween(e,t,i){i=i??!1;for(var n=this.getEdges(e),s=[],l=0;l<n.length;l++){var a=this.view.getState(n[l]),o=a!=null?a.getVisibleTerminal(!0):this.view.getVisibleTerminal(n[l],!0),h=a!=null?a.getVisibleTerminal(!1):this.view.getVisibleTerminal(n[l],!1);(o==e&&h==t||!i&&o==t&&h==e)&&s.push(n[l])}return s}getPointForEvent(e,t){var i=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e)),n=this.view.scale,s=this.view.translate,l=t!=!1?this.gridSize/2:0;return i.x=this.snap(i.x/n-s.x-l),i.y=this.snap(i.y/n-s.y-l),i}getCells(e,t,i,n,s,l){if(l=l??[],i>0||n>0){var a=this.getModel(),o=e+i,h=t+n;if(s==null&&(s=this.getCurrentRoot(),s==null&&(s=a.getRoot())),s!=null)for(var d=a.getChildCount(s),m=0;m<d;m++){var g=a.getChildAt(s,m),c=this.view.getState(g);if(c!=null&&this.isCellVisible(g)){var f=mxUtils$1.getValue(c.style,mxConstants$1.STYLE_ROTATION)||0,C=c;f!=0&&(C=mxUtils$1.getBoundingBox(C,f)),(a.isEdge(g)||a.isVertex(g))&&C.x>=e&&C.y+C.height<=h&&C.y>=t&&C.x+C.width<=o?l.push(g):this.getCells(e,t,i,n,g,l)}}}return l}getCellsBeyond(e,t,i,n,s){var l=[];if((n||s)&&(i==null&&(i=this.getDefaultParent()),i!=null))for(var a=this.model.getChildCount(i),o=0;o<a;o++){var h=this.model.getChildAt(i,o),d=this.view.getState(h);this.isCellVisible(h)&&d!=null&&(!n||d.x>=e)&&(!s||d.y>=t)&&l.push(h)}return l}findTreeRoots(e,t,i){t=t??!1,i=i??!1;var n=[];if(e!=null){for(var s=this.getModel(),l=s.getChildCount(e),a=null,o=0,h=0;h<l;h++){var d=s.getChildAt(e,h);if(this.model.isVertex(d)&&this.isCellVisible(d)){for(var m=this.getConnections(d,t?e:null),g=0,c=0,f=0;f<m.length;f++){var C=this.view.getVisibleTerminal(m[f],!0);C==d?g++:c++}(i&&g==0&&c>0||!i&&c==0&&g>0)&&n.push(d);var v=i?c-g:g-c;v>o&&(o=v,a=d)}}n.length==0&&a!=null&&n.push(a)}return n}traverse(e,t,i,n,s,l){if(i!=null&&e!=null&&(t=t??!0,l=l??!1,s=s||new mxDictionary,!s.get(e))){s.put(e,!0);var a=i(e,n);if(a==null||a){var o=this.model.getEdgeCount(e);if(o>0)for(var h=0;h<o;h++){var d=this.model.getEdgeAt(e,h),m=this.model.getTerminal(d,!0)==e;if(!t||!l==m){var g=this.model.getTerminal(d,!m);this.traverse(g,t,i,d,s,l)}}}}}isCellSelected(e){return this.getSelectionModel().isSelected(e)}isSelectionEmpty(){return this.getSelectionModel().isEmpty()}clearSelection(){return this.getSelectionModel().clear()}getSelectionCount(){return this.getSelectionModel().cells.length}getSelectionCell(){return this.getSelectionModel().cells[0]}getSelectionCells(){return this.getSelectionModel().cells.slice()}setSelectionCell(e){this.getSelectionModel().setCell(e)}setSelectionCells(e){this.getSelectionModel().setCells(e)}addSelectionCell(e){this.getSelectionModel().addCell(e)}addSelectionCells(e){this.getSelectionModel().addCells(e)}removeSelectionCell(e){this.getSelectionModel().removeCell(e)}removeSelectionCells(e){this.getSelectionModel().removeCells(e)}selectRegion(e,t){var i=this.getCells(e.x,e.y,e.width,e.height);return this.selectCellsForEvent(i,t),i}selectNextCell(){this.selectCell(!0)}selectPreviousCell(){this.selectCell()}selectParentCell(){this.selectCell(!1,!0)}selectChildCell(){this.selectCell(!1,!1,!0)}selectCell(e,t,i){var n=this.selectionModel,s=n.cells.length>0?n.cells[0]:null;n.cells.length>1&&n.clear();var l=s!=null?this.model.getParent(s):this.getDefaultParent(),a=this.model.getChildCount(l);if(s==null&&a>0){var o=this.model.getChildAt(l,0);this.setSelectionCell(o)}else if((s==null||t)&&this.view.getState(l)!=null&&this.model.getGeometry(l)!=null)this.getCurrentRoot()!=l&&this.setSelectionCell(l);else if(s!=null&&i){var h=this.model.getChildCount(s);if(h>0){var o=this.model.getChildAt(s,0);this.setSelectionCell(o)}}else if(a>0){var d=l.getIndex(s);if(e){d++;var o=this.model.getChildAt(l,d%a);this.setSelectionCell(o)}else{d--;var m=d<0?a-1:d,o=this.model.getChildAt(l,m);this.setSelectionCell(o)}}}selectAll(e,t){e=e||this.getDefaultParent();var i=t?this.model.filterDescendants(n=>n!=e&&this.view.getState(n)!=null,e):this.model.getChildren(e);i!=null&&this.setSelectionCells(i)}selectVertices(e,t){this.selectCells(!0,!1,e,t)}selectEdges(e){this.selectCells(!1,!0,e)}selectCells(e,t,i,n){i=i||this.getDefaultParent();var s=a=>this.view.getState(a)!=null&&((n||this.model.getChildCount(a)==0)&&this.model.isVertex(a)&&e&&!this.model.isEdge(this.model.getParent(a))||this.model.isEdge(a)&&t),l=this.model.filterDescendants(s,i);l!=null&&this.setSelectionCells(l)}selectCellForEvent(e,t){var i=this.isCellSelected(e);this.isToggleEvent(t)?i?this.removeSelectionCell(e):this.addSelectionCell(e):(!i||this.getSelectionCount()!=1)&&this.setSelectionCell(e)}selectCellsForEvent(e,t){this.isToggleEvent(t)?this.addSelectionCells(e):this.setSelectionCells(e)}createHandler(e){var t=null;if(e!=null)if(this.model.isEdge(e.cell)){var i=e.getVisibleTerminalState(!0),n=e.getVisibleTerminalState(!1),s=this.getCellGeometry(e.cell),l=this.view.getEdgeStyle(e,s!=null?s.points:null,i,n);t=this.createEdgeHandler(e,l)}else t=this.createVertexHandler(e);return t}createVertexHandler(e){return new mxVertexHandler(e)}createEdgeHandler(e,t){var i=null;return t==mxEdgeStyle.Loop||t==mxEdgeStyle.ElbowConnector||t==mxEdgeStyle.SideToSide||t==mxEdgeStyle.TopToBottom?i=this.createElbowEdgeHandler(e):t==mxEdgeStyle.SegmentConnector||t==mxEdgeStyle.OrthConnector?i=this.createEdgeSegmentHandler(e):i=new mxEdgeHandler(e),i}createEdgeSegmentHandler(e){return new mxEdgeSegmentHandler(e)}createElbowEdgeHandler(e){return new mxElbowEdgeHandler$1(e)}addMouseListener(e){this.mouseListeners==null&&(this.mouseListeners=[]),this.mouseListeners.push(e)}removeMouseListener(e){if(this.mouseListeners!=null){for(var t=0;t<this.mouseListeners.length;t++)if(this.mouseListeners[t]==e){this.mouseListeners.splice(t,1);break}}}updateMouseEvent(e,t){if(e.graphX==null||e.graphY==null){var i=mxUtils$1.convertPoint(this.container,e.getX(),e.getY());e.graphX=i.x-this.panDx,e.graphY=i.y-this.panDy,e.getCell()==null&&this.isMouseDown&&t==mxEvent$1.MOUSE_MOVE&&(e.state=this.view.getState(this.getCellAt(i.x,i.y,null,null,null,function(n){return n.shape==null||n.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||mxUtils$1.getValue(n.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"||n.shape.fill!=null&&n.shape.fill!=mxConstants$1.NONE})))}return e}getStateForTouchEvent(e){var t=mxEvent$1.getClientX(e),i=mxEvent$1.getClientY(e),n=mxUtils$1.convertPoint(this.container,t,i);return this.view.getState(this.getCellAt(n.x,n.y))}isEventIgnored(e,t,i){var n=mxEvent$1.isMouseEvent(t.getEvent()),s=!1;return t.getEvent()==this.lastEvent?s=!0:this.lastEvent=t.getEvent(),this.eventSource!=null&&e!=mxEvent$1.MOUSE_MOVE?(mxEvent$1.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null):!mxClient.IS_GC&&this.eventSource!=null&&t.getSource()!=this.eventSource?s=!0:mxClient.IS_TOUCH&&e==mxEvent$1.MOUSE_DOWN&&!n&&!mxEvent$1.isPenEvent(t.getEvent())&&(this.eventSource=t.getSource(),this.mouseMoveRedirect=l=>{this.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(l,this.getStateForTouchEvent(l)))},this.mouseUpRedirect=l=>{this.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(l,this.getStateForTouchEvent(l)))},mxEvent$1.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)),this.isSyntheticEventIgnored(e,t,i)&&(s=!0),!mxEvent$1.isPopupTrigger(this.lastEvent)&&e!=mxEvent$1.MOUSE_MOVE&&this.lastEvent.detail==2?!0:(e==mxEvent$1.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:e==mxEvent$1.MOUSE_DOWN&&!this.isMouseDown?(this.isMouseDown=!0,this.isMouseTrigger=n):!s&&((!mxClient.IS_FF||e!=mxEvent$1.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=n||e==mxEvent$1.MOUSE_DOWN&&this.isMouseDown||e==mxEvent$1.MOUSE_UP&&!this.isMouseDown)&&(s=!0),!s&&e==mxEvent$1.MOUSE_DOWN&&(this.lastMouseX=t.getX(),this.lastMouseY=t.getY()),s)}isSyntheticEventIgnored(e,t,i){var n=!1,s=mxEvent$1.isMouseEvent(t.getEvent());return this.ignoreMouseEvents&&s&&e!=mxEvent$1.MOUSE_MOVE?(this.ignoreMouseEvents=e!=mxEvent$1.MOUSE_UP,n=!0):mxClient.IS_FF&&!s&&e==mxEvent$1.MOUSE_UP&&(this.ignoreMouseEvents=!0),n}isEventSourceIgnored(e,t){var i=t.getSource(),n=i.nodeName!=null?i.nodeName.toLowerCase():"",s=!mxEvent$1.isMouseEvent(t.getEvent())||mxEvent$1.isLeftMouseButton(t.getEvent());return e==mxEvent$1.MOUSE_DOWN&&s&&(n=="select"||n=="option"||n=="input"&&i.type!="checkbox"&&i.type!="radio"&&i.type!="button"&&i.type!="submit"&&i.type!="file")}getEventState(e){return e}fireMouseEvent(e,t,i){if(this.isEventSourceIgnored(e,t)){this.tooltipHandler!=null&&this.tooltipHandler.hide();return}if(i==null&&(i=this),t=this.updateMouseEvent(t,e),!this.nativeDblClickEnabled&&!mxEvent$1.isPopupTrigger(t.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent$1.isTouchEvent(t.getEvent())||mxEvent$1.isPenEvent(t.getEvent()))){var n=new Date().getTime();if(!mxClient.IS_QUIRKS&&e==mxEvent$1.MOUSE_DOWN||mxClient.IS_QUIRKS&&e==mxEvent$1.MOUSE_UP&&!this.fireDoubleClick)if(this.lastTouchEvent!=null&&this.lastTouchEvent!=t.getEvent()&&n-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var s=!1;if(e==mxEvent$1.MOUSE_UP){if(t.getCell()==this.lastTouchCell&&this.lastTouchCell!=null){this.lastTouchTime=0;var l=this.lastTouchCell;this.lastTouchCell=null,mxClient.IS_QUIRKS&&t.getSource().fireEvent("ondblclick"),this.dblClick(t.getEvent(),l),s=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(!mxClient.IS_QUIRKS||s){mxEvent$1.consume(t.getEvent());return}}else(this.lastTouchEvent==null||this.lastTouchEvent!=t.getEvent())&&(this.lastTouchCell=t.getCell(),this.lastTouchX=t.getX(),this.lastTouchY=t.getY(),this.lastTouchTime=n,this.lastTouchEvent=t.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||e==mxEvent$1.MOUSE_UP)&&this.fireDoubleClick){this.fireDoubleClick=!1;var l=this.lastTouchCell;this.lastTouchCell=null,this.isMouseDown=!1;var a=l!=null||(mxEvent$1.isTouchEvent(t.getEvent())||mxEvent$1.isPenEvent(t.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF);a&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance?this.dblClick(t.getEvent(),l):mxEvent$1.consume(t.getEvent());return}}if(!this.isEventIgnored(e,t,i)){if(t.state=this.getEventState(t.getState()),this.fireEvent(new mxEventObject$1(mxEvent$1.FIRE_MOUSE_EVENT,"eventName",e,"event",t)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||t.getEvent().target!=this.container){if(e==mxEvent$1.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent$1.isMultiTouchEvent(t.getEvent))this.scrollPointToVisible(t.getGraphX(),t.getGraphY(),this.autoExtend);else if(e==mxEvent$1.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(this.container.scrollLeft!=0||this.container.scrollTop!=0)){var o=this.view.scale,h=this.view.translate;this.view.setTranslate(h.x-this.container.scrollLeft/o,h.y-this.container.scrollTop/o),this.container.scrollLeft=0,this.container.scrollTop=0}if(this.mouseListeners!=null){var d=[i,t];t.getEvent().preventDefault||(t.getEvent().returnValue=!0);for(var m=0;m<this.mouseListeners.length;m++){var g=this.mouseListeners[m];e==mxEvent$1.MOUSE_DOWN?g.mouseDown.apply(g,d):e==mxEvent$1.MOUSE_MOVE?g.mouseMove.apply(g,d):e==mxEvent$1.MOUSE_UP&&g.mouseUp.apply(g,d)}}e==mxEvent$1.MOUSE_UP&&this.click(t)}if((mxEvent$1.isTouchEvent(t.getEvent())||mxEvent$1.isPenEvent(t.getEvent()))&&e==mxEvent$1.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress){this.tapAndHoldInProgress=!0,this.initialTouchX=t.getGraphX(),this.initialTouchY=t.getGraphY();var c=function(){this.tapAndHoldValid&&this.tapAndHold(t),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1};this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils$1.bind(this,c),this.tapAndHoldDelay),this.tapAndHoldValid=!0}else e==mxEvent$1.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-t.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-t.getGraphY())<this.tolerance);e==mxEvent$1.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(t.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(e,t,i)}}consumeMouseEvent(e,t,i){e==mxEvent$1.MOUSE_DOWN&&mxEvent$1.isTouchEvent(t.getEvent())&&t.consume(!1)}fireGestureEvent(e,t){this.lastTouchTime=0,this.fireEvent(new mxEventObject$1(mxEvent$1.GESTURE,"event",e,"cell",t))}destroy(){this.destroyed||(this.destroyed=!0,this.tooltipHandler!=null&&this.tooltipHandler.destroy(),this.selectionCellsHandler!=null&&this.selectionCellsHandler.destroy(),this.panningHandler!=null&&this.panningHandler.destroy(),this.popupMenuHandler!=null&&this.popupMenuHandler.destroy(),this.connectionHandler!=null&&this.connectionHandler.destroy(),this.graphHandler!=null&&this.graphHandler.destroy(),this.cellEditor!=null&&this.cellEditor.destroy(),this.view!=null&&this.view.destroy(),this.model!=null&&this.graphModelChangeListener!=null&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)}}class mxOutline{constructor(e,t){u(this,"outline",null),u(this,"graphRenderHint",mxConstants$1.RENDERING_HINT_FASTER),u(this,"enabled",!0),u(this,"showViewport",!0),u(this,"border",10),u(this,"sizerSize",8),u(this,"labelsVisible",!1),u(this,"updateOnPan",!1),u(this,"sizerImage",null),u(this,"minScale",1e-4),u(this,"suspended",!1),u(this,"forceVmlHandles",document.documentMode==8),this.source=e,t!=null&&this.init(t)}createGraph(e){var t=new mxGraph(e,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet());return t.foldingEnabled=!1,t.autoScroll=!1,t}init(e){this.outline=this.createGraph(e);var t=this.outline.graphModelChanged;if(this.outline.graphModelChanged=l=>{!this.suspended&&this.outline!=null&&t.apply(this.outline,arguments)},mxClient.IS_SVG){var i=this.outline.getView().getCanvas().parentNode;i.setAttribute("shape-rendering","optimizeSpeed"),i.setAttribute("image-rendering","optimizeSpeed")}this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=(l,a)=>{!this.suspended&&!this.active&&this.update()},this.source.getModel().addListener(mxEvent$1.CHANGE,this.updateHandler),this.outline.addMouseListener(this);var n=this.source.getView();n.addListener(mxEvent$1.SCALE,this.updateHandler),n.addListener(mxEvent$1.TRANSLATE,this.updateHandler),n.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.updateHandler),n.addListener(mxEvent$1.DOWN,this.updateHandler),n.addListener(mxEvent$1.UP,this.updateHandler),mxEvent$1.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=l=>{this.updateOnPan&&this.updateHandler.apply(this,arguments)},this.source.addListener(mxEvent$1.PAN,this.panHandler),this.refreshHandler=l=>{this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()},this.source.addListener(mxEvent$1.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants$1.OUTLINE_COLOR,mxConstants$1.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.forceVmlHandles&&(this.selectionBorder.isHtmlAllowed=function(){return!1}),this.selectionBorder.init(this.outline.getView().getOverlayPane());var s=l=>{var a=mxEvent$1.getSource(l),o=d=>{this.outline.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(d))},h=d=>{mxEvent$1.removeGestureListeners(a,null,o,h),this.outline.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(d))};mxEvent$1.addGestureListeners(a,null,o,h),this.outline.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(l))};mxEvent$1.addGestureListeners(this.selectionBorder.node,s),this.sizer=this.createSizer(),this.forceVmlHandles&&(this.sizer.isHtmlAllowed=function(){return!1}),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent$1.addGestureListeners(this.sizer.node,s),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}setZoomEnabled(e){this.sizer.node.style.visibility=e?"visible":"hidden"}refresh(){this.update(!0)}createSizer(){if(this.sizerImage!=null){var e=new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src);return e.dialect=this.outline.dialect,e}else{var e=new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants$1.OUTLINE_HANDLE_FILLCOLOR,mxConstants$1.OUTLINE_HANDLE_STROKECOLOR);return e.dialect=this.outline.dialect,e}}getSourceContainerSize(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)}getOutlineOffset(e){return null}getSourceGraphBounds(){return this.source.getGraphBounds()}update(e){if(this.source!=null&&this.source.container!=null&&this.outline!=null&&this.outline.container!=null){var t=this.source.view.scale,i=this.getSourceGraphBounds(),n=new mxRectangle(i.x/t+this.source.panDx,i.y/t+this.source.panDy,i.width/t,i.height/t),s=new mxRectangle(0,0,this.source.container.clientWidth/t,this.source.container.clientHeight/t),l=n.clone();l.add(s);var a=this.getSourceContainerSize(),o=Math.max(a.width/t,l.width),h=Math.max(a.height/t,l.height),d=Math.max(0,this.outline.container.clientWidth-this.border),m=Math.max(0,this.outline.container.clientHeight-this.border),g=Math.min(d/o,m/h),c=isNaN(g)?this.minScale:Math.max(this.minScale,g);if(c>0){this.outline.getView().scale!=c&&(this.outline.getView().scale=c,e=!0);var f=this.outline.getView();f.currentRoot!=this.source.getView().currentRoot&&f.setCurrentRoot(this.source.getView().currentRoot);var C=this.source.view.translate,v=C.x+this.source.panDx,w=C.y+this.source.panDy,S=this.getOutlineOffset(c);S!=null&&(v+=S.x,w+=S.y),n.x<0&&(v=v-n.x),n.y<0&&(w=w-n.y),(f.translate.x!=v||f.translate.y!=w)&&(f.translate.x=v,f.translate.y=w,e=!0);var T=f.translate;c=this.source.getView().scale;var P=c/f.scale,L=1/f.scale,k=this.source.container;this.bounds=new mxRectangle((T.x-C.x-this.source.panDx)/L,(T.y-C.y-this.source.panDy)/L,k.clientWidth/P,k.clientHeight/P),this.bounds.x+=this.source.container.scrollLeft*f.scale/c,this.bounds.y+=this.source.container.scrollTop*f.scale/c;var G=this.selectionBorder.bounds;(G.x!=this.bounds.x||G.y!=this.bounds.y||G.width!=this.bounds.width||G.height!=this.bounds.height)&&(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw());var G=this.sizer.bounds,Y=new mxRectangle(this.bounds.x+this.bounds.width-G.width/2,this.bounds.y+this.bounds.height-G.height/2,G.width,G.height);(G.x!=Y.x||G.y!=Y.y||G.width!=Y.width||G.height!=Y.height)&&(this.sizer.bounds=Y,this.sizer.node.style.visibility!="hidden"&&this.sizer.redraw()),e&&this.outline.view.revalidate()}}}mouseDown(e,t){if(this.enabled&&this.showViewport){var i=mxEvent$1.isMouseEvent(t.getEvent())?0:this.source.tolerance,n=this.source.allowHandleBoundsCheck&&i>0?new mxRectangle(t.getGraphX()-i,t.getGraphY()-i,2*i,2*i):null;this.zoom=t.isSource(this.sizer)||n!=null&&mxUtils$1.intersects(shape.bounds,n),this.startX=t.getX(),this.startY=t.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils$1.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):(this.dx0=0,this.dy0=0)}t.consume()}mouseMove(e,t){if(this.active){this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display;var i=this.getTranslateForEvent(t),n=i.x,s=i.y,l=null;if(this.zoom){var a=this.source.container,o=a.clientWidth/a.clientHeight;s=n/o,l=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+n),Math.max(1,this.bounds.height+s)),this.selectionBorder.bounds=l,this.selectionBorder.redraw()}else{var h=this.outline.getView().scale;l=new mxRectangle(this.bounds.x+n,this.bounds.y+s,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=l,this.selectionBorder.redraw(),n/=h,n*=this.source.getView().scale,s/=h,s*=this.source.getView().scale,this.source.panGraph(-n-this.dx0,-s-this.dy0)}var d=this.sizer.bounds;this.sizer.bounds=new mxRectangle(l.x+l.width-d.width/2,l.y+l.height-d.height/2,d.width,d.height),this.sizer.node.style.visibility!="hidden"&&this.sizer.redraw(),t.consume()}}getTranslateForEvent(e){return new mxPoint(e.getX()-this.startX,e.getY()-this.startY)}mouseUp(e,t){if(this.active){var i=this.getTranslateForEvent(t),n=i.x,s=i.y;if(Math.abs(n)>0||Math.abs(s)>0){if(this.zoom){var l=this.selectionBorder.bounds.width,a=this.source.getView().scale;this.source.zoomTo(Math.max(this.minScale,a-n*a/l),!1)}else if(!this.source.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.source.container)){this.source.panGraph(0,0),n/=this.outline.getView().scale,s/=this.outline.getView().scale;var o=this.source.getView().translate;this.source.getView().setTranslate(o.x-n,o.y-s)}this.update(),t.consume()}this.index=null,this.active=!1}}destroy(){this.source!=null&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent$1.removeListener(this.source.container,"scroll",this.updateHandler),this.source=null),this.outline!=null&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),this.selectionBorder!=null&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.sizer!=null&&(this.sizer.destroy(),this.sizer=null)}}class mxForm{constructor(e){this.table=document.createElement("table"),this.table.className=e,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}getTable(){return this.table}addButtons(e,t){var i=document.createElement("tr"),n=document.createElement("td");i.appendChild(n),n=document.createElement("td");var s=document.createElement("button");mxUtils$1.write(s,mxResources$1.get("ok")||"OK"),n.appendChild(s),mxEvent$1.addListener(s,"click",function(){e()}),s=document.createElement("button"),mxUtils$1.write(s,mxResources$1.get("cancel")||"Cancel"),n.appendChild(s),mxEvent$1.addListener(s,"click",function(){t()}),i.appendChild(n),this.body.appendChild(i)}addText(e,t,i){var n=document.createElement("input");return n.setAttribute("type",i||"text"),n.value=t,this.addField(e,n)}addCheckbox(e,t){var i=document.createElement("input");return i.setAttribute("type","checkbox"),this.addField(e,i),t&&(i.checked=!0),i}addTextarea(e,t,i){var n=document.createElement("textarea");return mxClient.IS_NS&&i--,n.setAttribute("rows",i||2),n.value=t,this.addField(e,n)}addCombo(e,t,i){var n=document.createElement("select");return i!=null&&n.setAttribute("size",i),t&&n.setAttribute("multiple","true"),this.addField(e,n)}addOption(e,t,i,n){var s=document.createElement("option");mxUtils$1.writeln(s,t),s.setAttribute("value",i),n&&s.setAttribute("selected",n),e.appendChild(s)}addField(e,t){var i=document.createElement("tr"),n=document.createElement("td");return mxUtils$1.write(n,e),i.appendChild(n),n=document.createElement("td"),n.appendChild(t),i.appendChild(n),this.body.appendChild(i),t}}class mxGraphLayout{constructor(e){u(this,"useBoundingBox",!0),u(this,"parent",null),this.graph=e}moveCell(e,t,i){}resizeCell(e,t){}execute(e){}getGraph(){return this.graph}getConstraint(e,t,i,n){return this.graph.getCurrentCellStyle(t)[e]}static traverse(e,t,i,n,s){if(i!=null&&e!=null&&(t=t??!0,s=s||new mxDictionary,!s.get(e))){s.put(e,!0);var l=i(e,n);if(l==null||l){var a=this.graph.model.getEdgeCount(e);if(a>0)for(var o=0;o<a;o++){var h=this.graph.model.getEdgeAt(e,o),d=this.graph.model.getTerminal(h,!0)==e;if(!t||d){var m=this.graph.view.getVisibleTerminal(h,!d);this.traverse(m,t,i,h,s)}}}}}isAncestor(e,t,i){if(!i)return this.graph.model.getParent(t)==e;if(t==e)return!1;for(;t!=null&&t!=e;)t=this.graph.model.getParent(t);return t==e}isVertexMovable(e){return this.graph.isCellMovable(e)}isVertexIgnored(e){return!this.graph.getModel().isVertex(e)||!this.graph.isCellVisible(e)}isEdgeIgnored(e){var t=this.graph.getModel();return!t.isEdge(e)||!this.graph.isCellVisible(e)||t.getTerminal(e,!0)==null||t.getTerminal(e,!1)==null}setEdgeStyleEnabled(e,t){this.graph.setCellStyles(mxConstants$1.STYLE_NOEDGESTYLE,t?"0":"1",[e])}setOrthogonalEdge(e,t){this.graph.setCellStyles(mxConstants$1.STYLE_ORTHOGONAL,t?"1":"0",[e])}getParentOffset(e){var t=new mxPoint;if(e!=null&&e!=this.parent){var i=this.graph.getModel();if(i.isAncestor(this.parent,e))for(var n=i.getGeometry(e);e!=this.parent;)t.x=t.x+n.x,t.y=t.y+n.y,e=i.getParent(e),n=i.getGeometry(e)}return t}setEdgePoints(e,t){if(e!=null){var i=this.graph.model,n=i.getGeometry(e);if(n==null?(n=new mxGeometry,n.setRelative(!0)):n=n.clone(),this.parent!=null&&t!=null)for(var s=i.getParent(e),l=this.getParentOffset(s),a=0;a<t.length;a++)t[a].x=t[a].x-l.x,t[a].y=t[a].y-l.y;n.points=t,i.setGeometry(e,n)}}setVertexLocation(e,t,i){var n=this.graph.getModel(),s=n.getGeometry(e),l=null;if(s!=null){if(l=new mxRectangle(t,i,s.width,s.height),this.useBoundingBox){var a=this.graph.getView().getState(e);if(a!=null&&a.text!=null&&a.text.boundingBox!=null){var o=this.graph.getView().scale,h=a.text.boundingBox;a.text.boundingBox.x<a.x&&(t+=(a.x-h.x)/o,l.width=h.width),a.text.boundingBox.y<a.y&&(i+=(a.y-h.y)/o,l.height=h.height)}}if(this.parent!=null){var d=n.getParent(e);if(d!=null&&d!=this.parent){var m=this.getParentOffset(d);t=t-m.x,i=i-m.y}}(s.x!=t||s.y!=i)&&(s=s.clone(),s.x=t,s.y=i,n.setGeometry(e,s))}return l}getVertexBounds(e){var t=this.graph.getModel().getGeometry(e);if(this.useBoundingBox){var i=this.graph.getView().getState(e);if(i!=null&&i.text!=null&&i.text.boundingBox!=null){var n=this.graph.getView().scale,s=i.text.boundingBox,l=Math.max(i.x-s.x,0)/n,a=Math.max(i.y-s.y,0)/n,o=Math.max(s.x+s.width-(i.x+i.width),0)/n,h=Math.max(s.y+s.height-(i.y+i.height),0)/n;t=new mxRectangle(t.x-l,t.y-a,t.width+l+o,t.height+a+h)}}if(this.parent!=null){var d=this.graph.getModel().getParent(e);if(t=t.clone(),d!=null&&d!=this.parent){var m=this.getParentOffset(d);t.x=t.x+m.x,t.y=t.y+m.y}}return new mxRectangle(t.x,t.y,t.width,t.height)}arrangeGroups(e,t,i,n,s,l){return this.graph.updateGroupBounds(e,t,!0,i,n,s,l)}}class WeightedCellSorter{constructor(e,t){u(this,"nudge",!1),u(this,"visited",!1),u(this,"rankIndex",null),this.cell=e,this.weightedValue=t}static compare(e,t){return e!=null&&t!=null?t.weightedValue>e.weightedValue?-1:t.weightedValue<e.weightedValue?1:t.nudge?-1:1:0}}class mxCompactTreeLayout extends mxGraphLayout{constructor(e,t,i){super(e),u(this,"resizeParent",!0),u(this,"maintainParentLocation",!1),u(this,"groupPadding",10),u(this,"groupPaddingTop",0),u(this,"groupPaddingRight",0),u(this,"groupPaddingBottom",0),u(this,"groupPaddingLeft",0),u(this,"parentsChanged",null),u(this,"moveTree",!1),u(this,"visited",null),u(this,"levelDistance",10),u(this,"nodeDistance",20),u(this,"resetEdges",!0),u(this,"prefHozEdgeSep",5),u(this,"prefVertEdgeOff",4),u(this,"minEdgeJetty",8),u(this,"channelBuffer",4),u(this,"edgeRouting",!0),u(this,"sortEdges",!1),u(this,"alignRanks",!1),u(this,"maxRankHeight",null),u(this,"root",null),u(this,"node",null),this.horizontal=t??!0,this.invert=i??!1}isVertexIgnored(e){return super.isVertexIgnored(e)||this.graph.getConnections(e).length==0}isHorizontal(){return this.horizontal}execute(e,t){this.parent=e;var i=this.graph.getModel();if(t==null)if(this.graph.getEdges(e,i.getParent(e),this.invert,!this.invert,!1).length>0)this.root=e;else{var n=this.graph.findTreeRoots(e,!0,this.invert);if(n.length>0){for(var s=0;s<n.length;s++)if(!this.isVertexIgnored(n[s])&&this.graph.getEdges(n[s],null,this.invert,!this.invert,!1).length>0){this.root=n[s];break}}}else this.root=t;if(this.root!=null){if(this.resizeParent?this.parentsChanged=new Object:this.parentsChanged=null,this.parentX=null,this.parentY=null,e!=this.root&&i.isVertex(e)!=null&&this.maintainParentLocation){var l=this.graph.getCellGeometry(e);l!=null&&(this.parentX=l.x,this.parentY=l.y)}i.beginUpdate();try{if(this.visited=new Object,this.node=this.dfs(this.root,e),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),this.node!=null){this.layout(this.node);var a=this.graph.gridSize,o=a;if(!this.moveTree){var h=this.getVertexBounds(this.root);h!=null&&(a=h.x,o=h.y)}var d=null;if(this.isHorizontal()?d=this.horizontalLayout(this.node,a,o):d=this.verticalLayout(this.node,null,a,o),d!=null){var m=0,g=0;d.x<0&&(m=Math.abs(a-d.x)),d.y<0&&(g=Math.abs(o-d.y)),(m!=0||g!=0)&&this.moveNode(this.node,m,g),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}if(this.parentX!=null&&this.parentY!=null){var l=this.graph.getCellGeometry(e);l!=null&&(l=l.clone(),l.x=this.parentX,l.y=this.parentY,i.setGeometry(e,l))}}}finally{i.endUpdate()}}}moveNode(e,t,i){e.x+=t,e.y+=i,this.apply(e);for(var n=e.child;n!=null;)this.moveNode(n,t,i),n=n.next}sortOutgoingEdges(e,t){var i=new mxDictionary;t.sort(function(n,s){var l=n.getTerminal(n.getTerminal(!1)==e),a=i.get(l);a==null&&(a=mxCellPath.create(l).split(mxCellPath.PATH_SEPARATOR),i.put(l,a));var o=s.getTerminal(s.getTerminal(!1)==e),h=i.get(o);return h==null&&(h=mxCellPath.create(o).split(mxCellPath.PATH_SEPARATOR),i.put(o,h)),mxCellPath.compare(a,h)})}findRankHeights(e,t){(this.maxRankHeight[t]==null||this.maxRankHeight[t]<e.height)&&(this.maxRankHeight[t]=e.height);for(var i=e.child;i!=null;)this.findRankHeights(i,t+1),i=i.next}setCellHeights(e,t){this.maxRankHeight[t]!=null&&this.maxRankHeight[t]>e.height&&(e.height=this.maxRankHeight[t]);for(var i=e.child;i!=null;)this.setCellHeights(i,t+1),i=i.next}dfs(e,t){var i=mxCellPath.create(e),n=null;if(e!=null&&this.visited[i]==null&&!this.isVertexIgnored(e)){this.visited[i]=e,n=this.createNode(e);var s=this.graph.getModel(),l=null,a=this.graph.getEdges(e,t,this.invert,!this.invert,!1,!0),o=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(e,a);for(var h=0;h<a.length;h++){var d=a[h];if(!this.isEdgeIgnored(d)){this.resetEdges&&this.setEdgePoints(d,null),this.edgeRouting&&(this.setEdgeStyleEnabled(d,!1),this.setEdgePoints(d,null));var m=o.getState(d),g=m!=null?m.getVisibleTerminal(this.invert):o.getVisibleTerminal(d,this.invert),c=this.dfs(g,t);c!=null&&s.getGeometry(g)!=null&&(l==null?n.child=c:l.next=c,l=c)}}}return n}layout(e){if(e!=null){for(var t=e.child;t!=null;)this.layout(t),t=t.next;e.child!=null?this.attachParent(e,this.join(e)):this.layoutLeaf(e)}}horizontalLayout(e,t,i,n){e.x+=t+e.offsetX,e.y+=i+e.offsetY,n=this.apply(e,n);var s=e.child;if(s!=null){n=this.horizontalLayout(s,e.x,e.y,n);for(var l=e.y+s.offsetY,a=s.next;a!=null;)n=this.horizontalLayout(a,e.x+s.offsetX,l,n),l+=a.offsetY,a=a.next}return n}verticalLayout(e,t,i,n,s){e.x+=i+e.offsetY,e.y+=n+e.offsetX,s=this.apply(e,s);var l=e.child;if(l!=null){s=this.verticalLayout(l,e,e.x,e.y,s);for(var a=e.x+l.offsetY,o=l.next;o!=null;)s=this.verticalLayout(o,e,a,e.y+l.offsetX,s),a+=o.offsetY,o=o.next}return s}attachParent(e,t){var i=this.nodeDistance+this.levelDistance,n=(t-e.width)/2-this.nodeDistance,s=n+e.width+2*this.nodeDistance-t;e.child.offsetX=i+e.height,e.child.offsetY=s,e.contour.upperHead=this.createLine(e.height,0,this.createLine(i,s,e.contour.upperHead)),e.contour.lowerHead=this.createLine(e.height,0,this.createLine(i,n,e.contour.lowerHead))}layoutLeaf(e){var t=2*this.nodeDistance;e.contour.upperTail=this.createLine(e.height+t,0),e.contour.upperHead=e.contour.upperTail,e.contour.lowerTail=this.createLine(0,-e.width-t),e.contour.lowerHead=this.createLine(e.height+t,0,e.contour.lowerTail)}join(e){var t=2*this.nodeDistance,i=e.child;e.contour=i.contour;var n=i.width+t,s=n;for(i=i.next;i!=null;){var l=this.merge(e.contour,i.contour);i.offsetY=l+n,i.offsetX=0,n=i.width+t,s+=l+n,i=i.next}return s}merge(e,t){for(var i=0,n=0,s=0,l=e.lowerHead,a=t.upperHead;a!=null&&l!=null;){var o=this.offset(i,n,a.dx,a.dy,l.dx,l.dy);n+=o,s+=o,i+a.dx<=l.dx?(i+=a.dx,n+=a.dy,a=a.next):(i-=l.dx,n-=l.dy,l=l.next)}if(a!=null){var h=this.bridge(e.upperTail,0,0,a,i,n);e.upperTail=h.next!=null?t.upperTail:h,e.lowerTail=t.lowerTail}else{var h=this.bridge(t.lowerTail,i,n,l,0,0);h.next==null&&(e.lowerTail=h)}return e.lowerHead=t.lowerHead,s}offset(e,t,i,n,s,l){var a=0;if(s<=e||e+i<=0)return 0;var o=s*n-i*l;if(o>0)if(e<0){var h=e*n;a=h/i-t}else if(e>0){var h=e*l;a=h/s-t}else a=-t;else if(s<e+i){var h=(s-e)*n;a=l-(t+h/i)}else if(s>e+i){var h=(i+e)*l;a=h/s-(t+n)}else a=l-(t+n);return a>0?a:0}bridge(e,t,i,n,s,l){var a=s+n.dx-t,o=0,h=0;n.dx==0?o=n.dy:(h=a*n.dy,o=h/n.dx);var d=this.createLine(a,o,n.next);return e.next=this.createLine(0,l+n.dy-o-i,d),d}createNode(e){var t=new Object;t.cell=e,t.x=0,t.y=0,t.width=0,t.height=0;var i=this.getVertexBounds(e);return i!=null&&(this.isHorizontal()?(t.width=i.height,t.height=i.width):(t.width=i.width,t.height=i.height)),t.offsetX=0,t.offsetY=0,t.contour=new Object,t}apply(e,t){var i=this.graph.getModel(),n=e.cell,s=i.getGeometry(n);if(n!=null&&s!=null){if(this.isVertexMovable(n)&&(s=this.setVertexLocation(n,e.x,e.y),this.resizeParent)){var l=i.getParent(n),a=mxCellPath.create(l);this.parentsChanged[a]==null&&(this.parentsChanged[a]=l)}t==null?t=new mxRectangle(s.x,s.y,s.width,s.height):t=new mxRectangle(Math.min(t.x,s.x),Math.min(t.y,s.y),Math.max(t.x+t.width,s.x+s.width),Math.max(t.y+t.height,s.y+s.height))}return t}createLine(e,t,i){var n=new Object;return n.dx=e,n.dy=t,n.next=i,n}adjustParents(){var e=[];for(var t in this.parentsChanged)e.push(this.parentsChanged[t]);this.arrangeGroups(mxUtils$1.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)}localEdgeProcessing(e){this.processNodeOutgoing(e);for(var t=e.child;t!=null;)this.localEdgeProcessing(t),t=t.next}processNodeOutgoing(e){for(var t=e.child,i=e.cell,n=0,s=[];t!=null;){n++;var l=t.x;this.horizontal&&(l=t.y),s.push(new WeightedCellSorter(t,l)),t=t.next}s.sort(WeightedCellSorter.compare);var a=e.width,o=(n+1)*this.prefHozEdgeSep;a>o+2*this.prefHozEdgeSep&&(a-=2*this.prefHozEdgeSep);var h=a/n,d=h/2;a>o+2*this.prefHozEdgeSep&&(d+=this.prefHozEdgeSep);var m=this.minEdgeJetty-this.prefVertEdgeOff,g=this.getVertexBounds(i);t=e.child;for(var c=0;c<s.length;c++){for(var f=s[c].cell.cell,C=this.getVertexBounds(f),v=this.graph.getEdgesBetween(i,f,!1),w=[],S=0,T=0,P=0;P<v.length;P++)this.horizontal?(S=g.x+g.width,T=g.y+d,w.push(new mxPoint(S,T)),S=g.x+g.width+m,w.push(new mxPoint(S,T)),T=C.y+C.height/2,w.push(new mxPoint(S,T)),this.setEdgePoints(v[P],w)):(S=g.x+d,T=g.y+g.height,w.push(new mxPoint(S,T)),T=g.y+g.height+m,w.push(new mxPoint(S,T)),S=C.x+C.width/2,w.push(new mxPoint(S,T)),this.setEdgePoints(v[P],w));c<n/2?m+=this.prefVertEdgeOff:c>n/2&&(m-=this.prefVertEdgeOff),d+=h}}}class mxStackLayout extends mxGraphLayout{constructor(e,t,i,n,s,l){super(e),u(this,"marginTop",0),u(this,"marginLeft",0),u(this,"marginRight",0),u(this,"marginBottom",0),u(this,"keepFirstLocation",!1),u(this,"fill",!1),u(this,"resizeParent",!1),u(this,"resizeParentMax",!1),u(this,"resizeLast",!1),u(this,"wrap",null),u(this,"borderCollapse",!0),u(this,"allowGaps",!1),u(this,"gridSize",0),this.horizontal=t??!0,this.spacing=i??0,this.x0=n??0,this.y0=s??0,this.border=l??0}isHorizontal(){return this.horizontal}moveCell(e,t,i){var n=this.graph.getModel(),s=n.getParent(e),l=this.isHorizontal();if(e!=null&&s!=null){var a=0,o=0,h=n.getChildCount(s),d=l?t:i,m=this.graph.getView().getState(s);for(m!=null&&(d-=l?m.x:m.y),d/=this.graph.view.scale,a=0;a<h;a++){var g=n.getChildAt(s,a);if(g!=e){var c=n.getGeometry(g);if(c!=null){var f=l?c.x+c.width/2:c.y+c.height/2;if(o<=d&&f>d)break;o=f}}}var C=s.getIndex(e);C=Math.max(0,a-(a>C?1:0)),n.add(s,e,C)}}getParentSize(e){var t=this.graph.getModel(),i=t.getGeometry(e);if(this.graph.container!=null&&(i==null&&t.isLayer(e)||e==this.graph.getView().currentRoot)){var n=this.graph.container.offsetWidth-1,s=this.graph.container.offsetHeight-1;i=new mxRectangle(0,0,n,s)}return i}getLayoutCells(e){for(var t=this.graph.getModel(),i=t.getChildCount(e),n=[],s=0;s<i;s++){var l=t.getChildAt(e,s);!this.isVertexIgnored(l)&&this.isVertexMovable(l)&&n.push(l)}return this.allowGaps&&n.sort((a,o)=>{var h=this.graph.getCellGeometry(a),d=this.graph.getCellGeometry(o);return h.y==d.y?0:h.y>d.y>0?1:-1}),n}snap(e){if(this.gridSize!=null&&this.gridSize>0&&(e=Math.max(e,this.gridSize),e/this.gridSize>1)){var t=e%this.gridSize;e+=t>this.gridSize/2?this.gridSize-t:-t}return e}execute(e){if(e!=null){var t=this.getParentSize(e),i=this.isHorizontal(),n=this.graph.getModel(),s=null;t!=null&&(s=i?t.height-this.marginTop-this.marginBottom:t.width-this.marginLeft-this.marginRight),s-=2*this.border;var l=this.x0+this.border+this.marginLeft,a=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(e)){var o=this.graph.getCellStyle(e),h=mxUtils$1.getNumber(o,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE),d=mxUtils$1.getValue(o,mxConstants$1.STYLE_HORIZONTAL,!0)==1;t!=null&&(d?h=Math.min(h,t.height):h=Math.min(h,t.width)),i==d&&(s-=h),d?a+=h:l+=h}n.beginUpdate();try{for(var m=0,g=null,c=0,f=null,C=this.getLayoutCells(e),v=0;v<C.length;v++){var w=C[v],S=n.getGeometry(w);if(S!=null){S=S.clone(),this.wrap!=null&&g!=null&&(i&&g.x+g.width+S.width+2*this.spacing>this.wrap||!i&&g.y+g.height+S.height+2*this.spacing>this.wrap)&&(g=null,i?a+=m+this.spacing:l+=m+this.spacing,m=0),m=Math.max(m,i?S.height:S.width);var T=0;if(!this.borderCollapse){var P=this.graph.getCellStyle(w);T=mxUtils$1.getNumber(P,mxConstants$1.STYLE_STROKEWIDTH,1)}if(g!=null){var L=c+this.spacing+Math.floor(T/2);i?S.x=this.snap((this.allowGaps?Math.max(L,S.x):L)-this.marginLeft)+this.marginLeft:S.y=this.snap((this.allowGaps?Math.max(L,S.y):L)-this.marginTop)+this.marginTop}else this.keepFirstLocation||(i?S.x=this.allowGaps&&S.x>l?Math.max(this.snap(S.x-this.marginLeft)+this.marginLeft,l):l:S.y=this.allowGaps&&S.y>a?Math.max(this.snap(S.y-this.marginTop)+this.marginTop,a):a);i?S.y=a:S.x=l,this.fill&&s!=null&&(i?S.height=s:S.width=s),i?S.width=this.snap(S.width):S.height=this.snap(S.height),this.setChildGeometry(w,S),f=w,g=S,i?c=g.x+g.width+Math.floor(T/2):c=g.y+g.height+Math.floor(T/2)}}this.resizeParent&&t!=null&&g!=null&&!this.graph.isCellCollapsed(e)?this.updateParentGeometry(e,t,g):this.resizeLast&&t!=null&&g!=null&&f!=null&&(i?g.width=t.width-g.x-this.spacing-this.marginRight-this.marginLeft:g.height=t.height-g.y-this.spacing-this.marginBottom,this.setChildGeometry(f,g))}finally{n.endUpdate()}}}setChildGeometry(e,t){var i=this.graph.getCellGeometry(e);(i==null||t.x!=i.x||t.y!=i.y||t.width!=i.width||t.height!=i.height)&&this.graph.getModel().setGeometry(e,t)}updateParentGeometry(e,t,i){var n=this.isHorizontal(),s=this.graph.getModel(),l=t.clone();if(n){var a=i.x+i.width+this.marginRight+this.border;this.resizeParentMax?l.width=Math.max(l.width,a):l.width=a}else{var a=i.y+i.height+this.marginBottom+this.border;this.resizeParentMax?l.height=Math.max(l.height,a):l.height=a}(t.x!=l.x||t.y!=l.y||t.width!=l.width||t.height!=l.height)&&s.setGeometry(e,l)}}class mxCellAttributeChange{constructor(e,t,i){this.cell=e,this.attribute=t,this.value=i,this.previous=i}execute(){if(this.cell!=null){var e=this.cell.getAttribute(this.attribute);this.previous==null?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=e}}}class mxDivResizer{constructor(e,t){if(u(this,"resizeWidth",!0),u(this,"resizeHeight",!0),u(this,"handlingResize",!1),e.nodeName.toLowerCase()=="div"){t==null&&(t=window),this.div=e;var i=mxUtils$1.getCurrentStyle(e);i!=null&&(this.resizeWidth=i.width=="auto",this.resizeHeight=i.height=="auto"),mxEvent$1.addListener(t,"resize",n=>{this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)}),this.resize()}}resize(){var e=this.getDocumentWidth(),t=this.getDocumentHeight(),i=parseInt(this.div.style.left),n=parseInt(this.div.style.right),s=parseInt(this.div.style.top),l=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(i)&&!isNaN(n)&&i>=0&&n>=0&&e-n-i>0&&(this.div.style.width=e-n-i+"px"),this.resizeHeight&&!isNaN(s)&&!isNaN(l)&&s>=0&&l>=0&&t-s-l>0&&(this.div.style.height=t-s-l+"px")}getDocumentWidth(){return document.body.clientWidth}getDocumentHeight(){return document.body.clientHeight}}class mxRubberband{constructor(e){u(this,"defaultOpacity",20),u(this,"enabled",!0),u(this,"div",null),u(this,"sharedDiv",null),u(this,"currentX",0),u(this,"currentY",0),u(this,"fadeOut",!1),e!=null&&(this.graph=e,this.graph.addMouseListener(this),this.forceRubberbandHandler=(t,i)=>{var n=i.getProperty("eventName"),s=i.getProperty("event");if(n==mxEvent$1.MOUSE_DOWN&&this.isForceRubberbandEvent(s)){var l=mxUtils$1.getOffset(this.graph.container),a=mxUtils$1.getScrollOrigin(this.graph.container);a.x-=l.x,a.y-=l.y,this.start(s.getX()+a.x,s.getY()+a.y),s.consume(!1)}},this.graph.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=()=>{this.repaint()},this.graph.addListener(mxEvent$1.PAN,this.panHandler),this.gestureHandler=(t,i)=>{this.first!=null&&this.reset()},this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isForceRubberbandEvent(e){return mxEvent$1.isAltDown(e.getEvent())}mouseDown(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&t.getState()==null&&!mxEvent$1.isMultiTouchEvent(t.getEvent())){var i=mxUtils$1.getOffset(this.graph.container),n=mxUtils$1.getScrollOrigin(this.graph.container);n.x-=i.x,n.y-=i.y,this.start(t.getX()+n.x,t.getY()+n.y),t.consume(!1)}}start(e,t){this.first=new mxPoint(e,t);var i=this.graph.container;function n(s){var l=new mxMouseEvent(s),a=mxUtils$1.convertPoint(i,l.getX(),l.getY());return l.graphX=a.x,l.graphY=a.y,l}this.dragHandler=s=>{this.mouseMove(this.graph,n(s))},this.dropHandler=s=>{this.mouseUp(this.graph,n(s))},mxClient.IS_FF&&mxEvent$1.addGestureListeners(document,null,this.dragHandler,this.dropHandler)}mouseMove(e,t){if(!t.isConsumed()&&this.first!=null){var i=mxUtils$1.getScrollOrigin(this.graph.container),n=mxUtils$1.getOffset(this.graph.container);i.x-=n.x,i.y-=n.y;var s=t.getX()+i.x,l=t.getY()+i.y,a=this.first.x-s,o=this.first.y-l,h=this.graph.tolerance;(this.div!=null||Math.abs(a)>h||Math.abs(o)>h)&&(this.div==null&&(this.div=this.createShape()),mxUtils$1.clearSelection(),this.update(s,l),t.consume())}}createShape(){this.sharedDiv==null&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils$1.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var e=this.sharedDiv;return mxClient.IS_SVG&&document.documentMode>=10&&this.fadeOut&&(this.sharedDiv=null),e}isActive(e,t){return this.div!=null&&this.div.style.display!="none"}mouseUp(e,t){var i=this.isActive();this.reset(),i&&(this.execute(t.getEvent()),t.consume())}execute(e){var t=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(t,e)}reset(){if(this.div!=null)if(mxClient.IS_SVG&&document.documentMode>=10&&this.fadeOut){var e=this.div;mxUtils$1.setPrefixedStyle(e.style,"transition","all 0.2s linear"),e.style.pointerEvents="none",e.style.opacity=0,window.setTimeout(function(){e.parentNode.removeChild(e)},200)}else this.div.parentNode.removeChild(this.div);mxEvent$1.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null}update(e,t){this.currentX=e,this.currentY=t,this.repaint()}repaint(){if(this.div!=null){var e=this.currentX-this.graph.panDx,t=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,e),this.y=Math.min(this.first.y,t),this.width=Math.max(this.first.x,e)-this.x,this.height=Math.max(this.first.y,t)-this.y;var i=0,n=0;this.div.style.left=this.x+i+"px",this.div.style.top=this.y+n+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}}destroy(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),this.sharedDiv!=null&&(this.sharedDiv=null))}}class mxLayoutManager extends mxEventSource{constructor(e){super(),u(this,"graph",null),u(this,"bubbling",!0),u(this,"enabled",!0),this.undoHandler=(t,i)=>{this.isEnabled()&&this.beforeUndo(i.getProperty("edit"))},this.moveHandler=(t,i)=>{this.isEnabled()&&this.cellsMoved(i.getProperty("cells"),i.getProperty("event"))},this.resizeHandler=(t,i)=>{this.isEnabled()&&this.cellsResized(i.getProperty("cells"),i.getProperty("bounds"),i.getProperty("previous"))},this.setGraph(e)}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isBubbling(){return this.bubbling}setBubbling(e){this.bubbling=e}getGraph(){return this.graph}setGraph(e){if(this.graph!=null){var t=this.graph.getModel();t.removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)}if(this.graph=e,this.graph!=null){var t=this.graph.getModel();t.addListener(mxEvent$1.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent$1.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent$1.RESIZE_CELLS,this.resizeHandler)}}hasLayout(e){return this.getLayout(e,mxEvent$1.LAYOUT_CELLS)}getLayout(e,t){return null}beforeUndo(e){this.executeLayoutForCells(this.getCellsForChanges(e.changes))}cellsMoved(e,t){if(e!=null&&t!=null)for(var i=mxUtils$1.convertPoint(this.getGraph().container,mxEvent$1.getClientX(t),mxEvent$1.getClientY(t)),n=0;n<e.length;n++){var s=this.getAncestorLayout(e[n],mxEvent$1.MOVE_CELLS);s?.moveCell(e[n],i.x,i.y)}}cellsResized(e,t,i){if(e!=null&&t!=null)for(var n=0;n<e.length;n++){var s=this.getAncestorLayout(e[n],mxEvent$1.RESIZE_CELLS);s?.resizeCell(e[n],t[n],i[n])}}getAncestorLayout(e,t){for(var i=this.getGraph().getModel();e!=null;){var n=this.getLayout(e,t);if(n!=null)return n;e=i.getParent(e)}return null}getCellsForChanges(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];if(n instanceof mxRootChange)return[];t=t.concat(this.getCellsForChange(n))}return t}getCellsForChange(e){return e instanceof mxChildChange?this.addCellsWithLayout(e.child,this.addCellsWithLayout(e.previous)):e instanceof mxTerminalChange||e instanceof mxGeometryChange?this.addCellsWithLayout(e.cell):e instanceof mxVisibleChange||e instanceof mxStyleChange?this.addCellsWithLayout(e.cell):[]}addCellsWithLayout(e,t){return this.addDescendantsWithLayout(e,this.addAncestorsWithLayout(e,t))}addAncestorsWithLayout(e,t){if(t=t??[],e!=null){var i=this.hasLayout(e);if(i!=null&&t.push(e),this.isBubbling()){var n=this.getGraph().getModel();this.addAncestorsWithLayout(n.getParent(e),t)}}return t}addDescendantsWithLayout(e,t){if(t=t??[],e!=null&&this.hasLayout(e))for(var i=this.getGraph().getModel(),n=0;n<i.getChildCount(e);n++){var s=i.getChildAt(e,n);this.hasLayout(s)&&(t.push(s),this.addDescendantsWithLayout(s,t))}return t}executeLayoutForCells(e){var t=mxUtils$1.sortCells(e,!1);this.layoutCells(t,!0),this.layoutCells(t.reverse(),!1)}layoutCells(e,t){if(e.length>0){var i=this.getGraph().getModel();i.beginUpdate();try{for(var n=null,s=0;s<e.length;s++)e[s]!=i.getRoot()&&e[s]!=n&&(this.executeLayout(e[s],t),n=e[s]);this.fireEvent(new mxEventObject$1(mxEvent$1.LAYOUT_CELLS,"cells",e))}finally{i.endUpdate()}}}executeLayout(e,t){var i=this.getLayout(e,t?mxEvent$1.BEGIN_UPDATE:mxEvent$1.END_UPDATE);i?.execute(e)}destroy(){this.setGraph(null)}}class mxSwimlaneManager extends mxEventSource{constructor(e,t,i,n){super(),u(this,"graph",null),u(this,"enabled",!0),this.horizontal=t??!0,this.addEnabled=i??!0,this.resizeEnabled=n??!0,this.addHandler=(s,l)=>{this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(l.getProperty("cells"))},this.resizeHandler=(s,l)=>{this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(l.getProperty("cells"))},this.setGraph(e)}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}isHorizontal(){return this.horizontal}setHorizontal(e){this.horizontal=e}isAddEnabled(){return this.addEnabled}setAddEnabled(e){this.addEnabled=e}isResizeEnabled(){return this.resizeEnabled}setResizeEnabled(e){this.resizeEnabled=e}getGraph(){return this.graph}setGraph(e){this.graph!=null&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=e,this.graph!=null&&(this.graph.addListener(mxEvent$1.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent$1.CELLS_RESIZED,this.resizeHandler))}isSwimlaneIgnored(e){return!this.getGraph().isSwimlane(e)}isCellHorizontal(e){if(this.graph.isSwimlane(e)){var t=this.graph.getCellStyle(e);return mxUtils$1.getValue(t,mxConstants$1.STYLE_HORIZONTAL,1)==1}return!this.isHorizontal()}cellsAdded(e){if(e!=null){var t=this.getGraph().getModel();t.beginUpdate();try{for(var i=0;i<e.length;i++)this.isSwimlaneIgnored(e[i])||this.swimlaneAdded(e[i])}finally{t.endUpdate()}}}swimlaneAdded(e){for(var t=this.getGraph().getModel(),i=t.getParent(e),n=t.getChildCount(i),s=null,l=0;l<n;l++){var a=t.getChildAt(i,l);if(a!=e&&!this.isSwimlaneIgnored(a)&&(s=t.getGeometry(a),s!=null))break}if(s!=null){var o=i!=null?this.isCellHorizontal(i):this.horizontal;this.resizeSwimlane(e,s.width,s.height,o)}}cellsResized(e){if(e!=null){var t=this.getGraph().getModel();t.beginUpdate();try{for(var i=0;i<e.length;i++)if(!this.isSwimlaneIgnored(e[i])){var n=t.getGeometry(e[i]);if(n!=null){for(var s=new mxRectangle(0,0,n.width,n.height),l=e[i],a=l;a!=null;){l=a,a=t.getParent(a);var o=this.graph.isSwimlane(a)?this.graph.getStartSize(a):new mxRectangle;s.width+=o.width,s.height+=o.height}var h=a!=null?this.isCellHorizontal(a):this.horizontal;this.resizeSwimlane(l,s.width,s.height,h)}}}finally{t.endUpdate()}}}resizeSwimlane(e,t,i,n){var s=this.getGraph().getModel();s.beginUpdate();try{var l=this.isCellHorizontal(e);if(!this.isSwimlaneIgnored(e)){var a=s.getGeometry(e);a!=null&&(n&&a.height!=i||!n&&a.width!=t)&&(a=a.clone(),n?a.height=i:a.width=t,s.setGeometry(e,a))}var o=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;t-=o.width,i-=o.height;for(var h=s.getChildCount(e),d=0;d<h;d++){var m=s.getChildAt(e,d);this.resizeSwimlane(m,t,i,l)}}finally{s.endUpdate()}}destroy(){this.setGraph(null)}}const J=class Lt{static setCells(e){Lt.cells=e}static getCells(){return Lt.cells}static isEmpty(){return Lt.getCells()==null}static cut(e,t){return t=Lt.copy(e,t),Lt.insertCount=0,Lt.removeCells(e,t),t}static removeCells(e,t){e.removeCells(t)}static copy(e,t){t=t||e.getSelectionCells();var i=e.getExportableCells(e.model.getTopmostCells(t));return Lt.insertCount=1,Lt.setCells(e.cloneCells(i)),i}static paste(e){var t=null;if(!Lt.isEmpty()){t=e.getImportableCells(Lt.getCells());var i=Lt.insertCount*Lt.STEPSIZE,n=e.getDefaultParent();t=e.importCells(t,i,i,n),Lt.insertCount++,e.setSelectionCells(t)}return t}};u(J,"STEPSIZE",10),u(J,"insertCount",1),u(J,"cells",null);let mxClipboard=J;class mxPrintPreview{constructor(e,t,i,n,s,l,a,o,h){u(this,"marginTop",0),u(this,"marginBottom",0),u(this,"autoOrigin",!0),u(this,"printOverlays",!1),u(this,"printControls",!1),u(this,"printBackgroundImage",!1),u(this,"backgroundColor","#ffffff"),u(this,"wnd",null),u(this,"targetWindow",null),u(this,"pageCount",0),u(this,"clipping",!0),this.graph=e,this.scale=t??1/e.pageScale,this.border=n??0,this.pageFormat=mxRectangle.fromRectangle(i??e.pageFormat),this.title=o??"Printer-friendly version",this.x0=s??0,this.y0=l??0,this.borderColor=a,this.pageSelector=h??!0}getWindow(){return this.wnd}getDoctype(){var e="";return document.documentMode==5?e='<meta http-equiv="X-UA-Compatible" content="IE=5">':document.documentMode==8?e='<meta http-equiv="X-UA-Compatible" content="IE=8">':document.documentMode>8&&(e='<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->'),e}appendGraph(e,t,i,n,s,l){this.graph=e,this.scale=t??1/e.pageScale,this.x0=i,this.y0=n,this.open(null,null,s,l)}open(e,t,i,n){var s=this.graph.cellRenderer.initializeOverlay,l=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(q,oe){oe.init(q.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(q,oe,le,Z){oe.dialect=q.view.graph.dialect,oe.init(q.view.getDrawPane())}),this.wnd=t??this.wnd;var a=!1;this.wnd==null&&(a=!0,this.wnd=window.open());var o=this.wnd.document;if(a){var h=this.getDoctype();h!=null&&h.length>0&&o.writeln(h),document.compatMode==="CSS1Compat"&&o.writeln("<!DOCTYPE html>"),o.writeln("<html>"),o.writeln("<head>"),this.writeHead(o,e),o.writeln("</head>"),o.writeln('<body class="mxPage">')}var d=this.graph.getGraphBounds().clone(),m=this.graph.getView().getScale(),g=m/this.scale,c=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=c.x*this.scale,this.y0-=c.y*this.scale,d.width+=d.x,d.height+=d.y,d.x=0,d.y=0,this.border=0);var f=this.pageFormat.width-this.border*2,C=this.pageFormat.height-this.border*2;this.pageFormat.height+=this.marginTop+this.marginBottom,d.width/=g,d.height/=g;var v=Math.max(1,Math.ceil((d.width+this.x0)/f)),w=Math.max(1,Math.ceil((d.height+this.y0)/C));this.pageCount=v*w;var S=()=>{if(this.pageSelector&&(w>1||v>1)){var q=this.createPageSelector(w,v);o.body.appendChild(q)}},T=(q,oe)=>{if(this.borderColor!=null&&(q.style.borderColor=this.borderColor,q.style.borderStyle="solid",q.style.borderWidth="1px"),q.style.background=this.backgroundColor,(i||oe)&&(q.style.pageBreakAfter="always"),a&&(document.documentMode>=11||mxClient.IS_EDGE))o.writeln(q.outerHTML),q.parentNode.removeChild(q);else if(document.documentMode>=11||mxClient.IS_EDGE){var le=o.createElement("div");le.innerHTML=q.outerHTML,le=le.getElementsByTagName("div")[0],o.body.appendChild(le),q.parentNode.removeChild(q)}else q.parentNode.removeChild(q),o.body.appendChild(q);(i||oe)&&this.addPageBreak(o)},P=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(P!=null)for(var L=0;L<P.length;L++)T(P[L],!0);for(var k=this.getAppendices(this.pageFormat.width,this.pageFormat.height),L=0;L<w;L++)for(var G=L*C/this.scale-this.y0/this.scale+(d.y-c.y*m)/m,Y=0;Y<v;Y++){if(this.wnd==null)return null;var te=Y*f/this.scale-this.x0/this.scale+(d.x-c.x*m)/m,ie=L*v+Y+1,ne=new mxRectangle(te,G,f,C);l=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,oe=>{this.addGraphFragment(-te,-G,this.scale,ie,oe,ne),this.printBackgroundImage&&this.insertBackgroundImage(oe,-te,-G)},ie),l.setAttribute("id","mxPage-"+ie),T(l,k!=null||L<w-1||Y<v-1)}if(k!=null)for(var L=0;L<k.length;L++)T(k[L],L<k.length-1);a&&!n&&(this.closeDocument(),S()),this.wnd.focus()}catch{l!=null&&l.parentNode!=null&&l.parentNode.removeChild(l)}finally{this.graph.cellRenderer.initializeOverlay=s}return this.wnd}addPageBreak(e){var t=e.createElement("hr");t.className="mxPageBreak",e.body.appendChild(t)}closeDocument(){try{if(this.wnd!=null&&this.wnd.document!=null){var e=this.wnd.document;this.writePostfix(e),e.writeln("</body>"),e.writeln("</html>"),e.close(),mxEvent$1.release(e.body)}}catch{}}writeHead(e,t){this.title!=null&&e.writeln("<title>"+this.title+"</title>"),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",e),e.writeln('<style type="text/css">'),e.writeln("@media print {"),e.writeln("  * { -webkit-print-color-adjust: exact; }"),e.writeln("  table.mxPageSelector { display: none; }"),e.writeln("  hr.mxPageBreak { display: none; }"),e.writeln("}"),e.writeln("@media screen {"),e.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),e.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),e.writeln("  body.mxPage { background: gray; }"),e.writeln("}"),t!=null&&e.writeln(t),e.writeln("</style>")}writePostfix(e){}createPageSelector(e,t){var i=this.wnd.document,n=i.createElement("table");n.className="mxPageSelector",n.setAttribute("border","0");for(var s=i.createElement("tbody"),l=0;l<e;l++){for(var a=i.createElement("tr"),o=0;o<t;o++){var h=l*t+o+1,d=i.createElement("td"),m=i.createElement("a");if(m.setAttribute("href","#mxPage-"+h),mxClient.IS_NS&&!mxClient.IS_SF&&!mxClient.IS_GC){var g="var page = document.getElementById('mxPage-"+h+"');page.scrollIntoView(true);event.preventDefault();";m.setAttribute("onclick",g)}mxUtils$1.write(m,h,i),d.appendChild(m),a.appendChild(d)}s.appendChild(a)}return n.appendChild(s),n}renderPage(e,t,i,n,s,l){var a=this.wnd.document,o=document.createElement("div"),h=null;try{if(i!=0||n!=0){o.style.position="relative",o.style.width=e+"px",o.style.height=t+"px",o.style.pageBreakInside="avoid";var d=document.createElement("div");d.style.position="relative",d.style.top=this.border+"px",d.style.left=this.border+"px",d.style.width=e-2*this.border+"px",d.style.height=t-2*this.border+"px",d.style.overflow="hidden";var m=document.createElement("div");m.style.position="relative",m.style.marginLeft=i+"px",m.style.marginTop=n+"px",a.documentMode==8&&(d.style.position="absolute",m.style.position="absolute"),a.documentMode==10&&(m.style.width="100%",m.style.height="100%"),d.appendChild(m),o.appendChild(d),document.body.appendChild(o),h=m}else{o.style.width=e+"px",o.style.height=t+"px",o.style.overflow="hidden",o.style.pageBreakInside="avoid",a.documentMode==8&&(o.style.position="relative");var d=document.createElement("div");d.style.width=e-2*this.border+"px",d.style.height=t-2*this.border+"px",d.style.overflow="hidden",d.style.top=this.border+"px",d.style.left=this.border+"px",this.graph.dialect==mxConstants$1.DIALECT_VML&&(d.style.position="absolute"),o.appendChild(d),document.body.appendChild(o),h=d}}catch(g){throw o.parentNode.removeChild(o),o=null,g}return s(h),o}getRoot(){var e=this.graph.view.currentRoot;return e==null&&(e=this.graph.getModel().getRoot()),e}addGraphFragment(e,t,i,n,s,l){var a=this.graph.getView(),o=this.graph.container;this.graph.container=s;var h=a.getCanvas(),d=a.getBackgroundPane(),m=a.getDrawPane(),g=a.getOverlayPane(),c=i;if(this.graph.dialect==mxConstants$1.DIALECT_SVG){if(a.createSvg(),!mxClient.NO_FO){var f=a.getDrawPane().parentNode;f.getAttribute("transform"),f.setAttribute("transformOrigin","0 0"),f.setAttribute("transform","scale("+i+","+i+")translate("+e+","+t+")"),i=1,e=0,t=0}}else this.graph.dialect==mxConstants$1.DIALECT_VML?a.createVml():a.createHtml();var C=a.isEventsEnabled();a.setEventsEnabled(!1);var v=this.graph.isEnabled();this.graph.setEnabled(!1);var w=a.getTranslate();a.translate=new mxPoint(e,t);var S=this.graph.cellRenderer.redraw,T=a.states,P=a.scale;if(this.clipping){var L=new mxRectangle((l.x+w.x)*P,(l.y+w.y)*P,l.width*P/c,l.height*P/c);this.graph.cellRenderer.redraw=function(q,oe,le){if(q!=null){var Z=T.get(q.cell);if(Z!=null){var B=a.getBoundingBox(Z,!1);if(B!=null&&B.width>0&&B.height>0&&!mxUtils$1.intersects(L,B))return}}S.apply(this,arguments)}}var k=null;try{var G=[this.getRoot()];k=new mxTemporaryCellStates(a,i,G,null,q=>this.getLinkForCellState(q))}finally{for(var Y=s.firstChild;Y!=null;){var te=Y.nextSibling,ie=Y.nodeName.toLowerCase();ie=="svg"?(Y.style.overflow="hidden",Y.style.position="relative",Y.style.top=this.marginTop+"px",Y.setAttribute("width",l.width),Y.setAttribute("height",l.height),Y.style.width="",Y.style.height=""):Y.style.cursor!="default"&&ie!="div"&&Y.parentNode.removeChild(Y),Y=te}if(this.printBackgroundImage){var ne=s.getElementsByTagName("svg");ne.length>0&&(ne[0].style.position="absolute")}a.overlayPane.parentNode.removeChild(a.overlayPane),this.graph.setEnabled(v),this.graph.container=o,this.graph.cellRenderer.redraw=S,a.canvas=h,a.backgroundPane=d,a.drawPane=m,a.overlayPane=g,a.translate=w,k.destroy(),a.setEventsEnabled(C)}}getLinkForCellState(e){return this.graph.getLinkForCell(e.cell)}insertBackgroundImage(e,t,i){var n=this.graph.backgroundImage;if(n!=null){var s=document.createElement("img");s.style.position="absolute",s.style.marginLeft=Math.round(t*this.scale)+"px",s.style.marginTop=Math.round(i*this.scale)+"px",s.setAttribute("width",Math.round(this.scale*n.width)),s.setAttribute("height",Math.round(this.scale*n.height)),s.src=n.src,e.insertBefore(s,e.firstChild)}}getCoverPages(){return null}getAppendices(){return null}print(e){var t=this.open(e);t?.print()}close(){this.wnd!=null&&(this.wnd.close(),this.wnd=null)}}class mxUndoManager extends mxEventSource{constructor(e){super(),u(this,"history",null),u(this,"indexOfNextAdd",0),this.size=e??100,this.clear()}isEmpty(){return this.history.length==0}clear(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject$1(mxEvent$1.CLEAR))}canUndo(){return this.indexOfNextAdd>0}undo(){for(;this.indexOfNextAdd>0;){var e=this.history[--this.indexOfNextAdd];if(e.undo(),e.isSignificant()){this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",e));break}}}canRedo(){return this.indexOfNextAdd<this.history.length}redo(){for(var e=this.history.length;this.indexOfNextAdd<e;){var t=this.history[this.indexOfNextAdd++];if(t.redo(),t.isSignificant()){this.fireEvent(new mxEventObject$1(mxEvent$1.REDO,"edit",t));break}}}undoableEditHappened(e){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(e),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject$1(mxEvent$1.ADD,"edit",e))}trim(){if(this.history.length>this.indexOfNextAdd)for(var e=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),t=0;t<e.length;t++)e[t].die()}}class mxEditor extends mxEventSource{constructor(e){super(),u(this,"askZoomResource",mxClient.language!="none"?"askZoom":""),u(this,"lastSavedResource",mxClient.language!="none"?"lastSaved":""),u(this,"currentFileResource",mxClient.language!="none"?"currentFile":""),u(this,"propertiesResource",mxClient.language!="none"?"properties":""),u(this,"tasksResource",mxClient.language!="none"?"tasks":""),u(this,"helpResource",mxClient.language!="none"?"help":""),u(this,"outlineResource",mxClient.language!="none"?"outline":""),u(this,"outline",null),u(this,"graph",null),u(this,"graphRenderHint",null),u(this,"toolbar",null),u(this,"status",null),u(this,"popupHandler",null),u(this,"undoManager",null),u(this,"keyHandler",null),u(this,"dblClickAction","edit"),u(this,"swimlaneRequired",!1),u(this,"disableContextMenu",!0),u(this,"insertFunction",null),u(this,"forcedInserting",!1),u(this,"templates",null),u(this,"defaultEdge",null),u(this,"defaultEdgeStyle",null),u(this,"defaultGroup",null),u(this,"groupBorderSize",null),u(this,"filename",null),u(this,"linefeed","&#xa;"),u(this,"postParameterName","xml"),u(this,"escapePostData",!0),u(this,"urlPost",null),u(this,"urlImage",null),u(this,"horizontalFlow",!1),u(this,"layoutDiagram",!1),u(this,"swimlaneSpacing",0),u(this,"maintainSwimlanes",!1),u(this,"layoutSwimlanes",!1),u(this,"cycleAttributeValues",null),u(this,"cycleAttributeIndex",0),u(this,"cycleAttributeName","fillColor"),u(this,"tasks",null),u(this,"tasksWindowImage",null),u(this,"tasksTop",20),u(this,"help",null),u(this,"helpWindowImage",null),u(this,"urlHelp",null),u(this,"helpWidth",300),u(this,"helpHeight",260),u(this,"propertiesWidth",240),u(this,"propertiesHeight",null),u(this,"movePropertiesDialog",!1),u(this,"validating",!1),u(this,"modified",!1),this.actions=[],this.addActions(),document.body!=null&&(this.cycleAttributeValues=[],this.popupHandler=new mxDefaultPopupMenu,this.undoManager=new mxUndoManager,this.graph=this.createGraph(),this.toolbar=this.createToolbar(),this.keyHandler=new mxDefaultKeyHandler(this),this.configure(e),this.graph.swimlaneIndicatorColorAttribute=this.cycleAttributeName,this.onInit!=null&&this.onInit())}isModified(){return this.modified}setModified(e){this.modified=e}addActions(){this.addAction("save",function(e){e.save()}),this.addAction("print",function(e){var t=new mxPrintPreview(e.graph,1);t.open()}),this.addAction("show",function(e){mxUtils$1.show(e.graph,null,10,10)}),this.addAction("exportImage",function(e){var t=e.getUrlImage();if(t==null||mxClient.IS_LOCAL)e.execute("show");else{var i=mxUtils$1.getViewXml(e.graph,1),n=mxUtils$1.getXml(i,`
`);mxUtils$1.submit(t,e.postParameterName+"="+encodeURIComponent(n),document,"_blank")}}),this.addAction("refresh",function(e){e.graph.refresh()}),this.addAction("cut",function(e){e.graph.isEnabled()&&mxClipboard.cut(e.graph)}),this.addAction("copy",function(e){e.graph.isEnabled()&&mxClipboard.copy(e.graph)}),this.addAction("paste",function(e){e.graph.isEnabled()&&mxClipboard.paste(e.graph)}),this.addAction("delete",function(e){e.graph.isEnabled()&&e.graph.removeCells()}),this.addAction("group",function(e){e.graph.isEnabled()&&e.graph.setSelectionCell(e.groupCells())}),this.addAction("ungroup",function(e){e.graph.isEnabled()&&e.graph.setSelectionCells(e.graph.ungroupCells())}),this.addAction("removeFromParent",function(e){e.graph.isEnabled()&&e.graph.removeCellsFromParent()}),this.addAction("undo",function(e){e.graph.isEnabled()&&e.undo()}),this.addAction("redo",function(e){e.graph.isEnabled()&&e.redo()}),this.addAction("zoomIn",function(e){e.graph.zoomIn()}),this.addAction("zoomOut",function(e){e.graph.zoomOut()}),this.addAction("actualSize",function(e){e.graph.zoomActual()}),this.addAction("fit",function(e){e.graph.fit()}),this.addAction("showProperties",function(e,t){e.showProperties(t)}),this.addAction("selectAll",function(e){e.graph.isEnabled()&&e.graph.selectAll()}),this.addAction("selectNone",function(e){e.graph.isEnabled()&&e.graph.clearSelection()}),this.addAction("selectVertices",function(e){e.graph.isEnabled()&&e.graph.selectVertices()}),this.addAction("selectEdges",function(e){e.graph.isEnabled()&&e.graph.selectEdges()}),this.addAction("edit",function(e,t){e.graph.isEnabled()&&e.graph.isCellEditable(t)&&e.graph.startEditingAtCell(t)}),this.addAction("toBack",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!0)}),this.addAction("toFront",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!1)}),this.addAction("enterGroup",function(e,t){e.graph.enterGroup(t)}),this.addAction("exitGroup",function(e){e.graph.exitGroup()}),this.addAction("home",function(e){e.graph.home()}),this.addAction("selectPrevious",function(e){e.graph.isEnabled()&&e.graph.selectPreviousCell()}),this.addAction("selectNext",function(e){e.graph.isEnabled()&&e.graph.selectNextCell()}),this.addAction("selectParent",function(e){e.graph.isEnabled()&&e.graph.selectParentCell()}),this.addAction("selectChild",function(e){e.graph.isEnabled()&&e.graph.selectChildCell()}),this.addAction("collapse",function(e){e.graph.isEnabled()&&e.graph.foldCells(!0)}),this.addAction("collapseAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!0,!1,t)}}),this.addAction("expand",function(e){e.graph.isEnabled()&&e.graph.foldCells(!1)}),this.addAction("expandAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!1,!1,t)}}),this.addAction("bold",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.FONT_BOLD)}),this.addAction("italic",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.FONT_ITALIC)}),this.addAction("underline",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.FONT_UNDERLINE)}),this.addAction("alignCellsLeft",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants$1.ALIGN_LEFT)}),this.addAction("alignCellsCenter",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants$1.ALIGN_CENTER)}),this.addAction("alignCellsRight",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants$1.ALIGN_RIGHT)}),this.addAction("alignCellsTop",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants$1.ALIGN_TOP)}),this.addAction("alignCellsMiddle",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants$1.ALIGN_MIDDLE)}),this.addAction("alignCellsBottom",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants$1.ALIGN_BOTTOM)}),this.addAction("alignFontLeft",function(e){e.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT)}),this.addAction("alignFontCenter",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER)}),this.addAction("alignFontRight",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_RIGHT)}),this.addAction("alignFontTop",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_TOP)}),this.addAction("alignFontMiddle",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE)}),this.addAction("alignFontBottom",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_BOTTOM)}),this.addAction("zoom",function(e){var t=e.graph.getView().scale*100,i=parseFloat(mxUtils$1.prompt(mxResources$1.get(e.askZoomResource)||e.askZoomResource,t))/100;isNaN(i)||e.graph.getView().setScale(i)}),this.addAction("toggleTasks",function(e){e.tasks!=null?e.tasks.setVisible(!e.tasks.isVisible()):e.showTasks()}),this.addAction("toggleHelp",function(e){e.help!=null?e.help.setVisible(!e.help.isVisible()):e.showHelp()}),this.addAction("toggleOutline",function(e){e.outline==null?e.showOutline():e.outline.setVisible(!e.outline.isVisible())}),this.addAction("toggleConsole",function(e){mxLog.setVisible(!mxLog.isVisible())})}configure(e){if(e!=null){var t=new mxCodec(e.ownerDocument);t.decode(e,this),this.resetHistory()}}resetFirstTime(){document.cookie="mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/"}resetHistory(){this.lastSnapshot=new Date().getTime(),this.undoManager.clear(),this.ignoredChanges=0,this.setModified(!1)}addAction(e,t){this.actions[e]=t}execute(e,t,i){var n=this.actions[e];if(n!=null)try{var s=arguments;s[0]=this,n.apply(this,s)}catch(l){throw mxUtils$1.error("Cannot execute "+e+": "+l.message,280,!0),l}else mxUtils$1.error("Cannot find action "+e,280,!0)}addTemplate(e,t){this.templates[e]=t}getTemplate(e){return this.templates[e]}createGraph(){var e=new mxGraph(null,null,this.graphRenderHint);return e.setTooltips(!0),e.setPanning(!0),this.installDblClickHandler(e),this.installUndoHandler(e),this.installDrillHandler(e),this.installChangeHandler(e),this.installInsertHandler(e),e.popupMenuHandler.factoryMethod=(t,i,n)=>this.createPopupMenu(t,i,n),e.connectionHandler.factoryMethod=(t,i)=>this.createEdge(t,i),this.createSwimlaneManager(e),this.createLayoutManager(e),e}createSwimlaneManager(e){var t=new mxSwimlaneManager(e,!1);return t.isHorizontal=()=>this.horizontalFlow,t.isEnabled=()=>this.maintainSwimlanes,t}createLayoutManager(e){var t=new mxLayoutManager(e),i=this;return t.getLayout=function(n){var s=null,l=i.graph.getModel();return l.getParent(n)!=null&&(i.layoutSwimlanes&&e.isSwimlane(n)?(i.swimlaneLayout==null&&(i.swimlaneLayout=i.createSwimlaneLayout()),s=i.swimlaneLayout):i.layoutDiagram&&(e.isValidRoot(n)||l.getParent(l.getParent(n))==null)&&(i.diagramLayout==null&&(i.diagramLayout=i.createDiagramLayout()),s=i.diagramLayout)),s},t}setGraphContainer(e){this.graph.container==null&&(this.graph.init(e),this.rubberband=new mxRubberband(this.graph),this.disableContextMenu&&mxEvent$1.disableContextMenu(e),mxClient.IS_QUIRKS&&new mxDivResizer(e))}installDblClickHandler(e){e.addListener(mxEvent$1.DOUBLE_CLICK,(t,i)=>{var n=i.getProperty("cell");n!=null&&e.isEnabled()&&this.dblClickAction!=null&&(this.execute(this.dblClickAction,n),i.consume())})}installUndoHandler(e){var t=(n,s)=>{var l=s.getProperty("edit");this.undoManager.undoableEditHappened(l)};e.getModel().addListener(mxEvent$1.UNDO,t),e.getView().addListener(mxEvent$1.UNDO,t);var i=function(n,s){var l=s.getProperty("edit").changes;e.setSelectionCells(e.getSelectionCellsForChanges(l))};this.undoManager.addListener(mxEvent$1.UNDO,i),this.undoManager.addListener(mxEvent$1.REDO,i)}installDrillHandler(e){var t=i=>{this.fireEvent(new mxEventObject$1(mxEvent$1.ROOT))};e.getView().addListener(mxEvent$1.DOWN,t),e.getView().addListener(mxEvent$1.UP,t)}installChangeHandler(e){var t=(i,n)=>{this.setModified(!0),this.validating==!0&&e.validateGraph();for(var s=n.getProperty("edit").changes,l=0;l<s.length;l++){var a=s[l];if(a instanceof mxRootChange||a instanceof mxValueChange&&a.cell==this.graph.model.root||a instanceof mxCellAttributeChange&&a.cell==this.graph.model.root){this.fireEvent(new mxEventObject$1(mxEvent$1.ROOT));break}}};e.getModel().addListener(mxEvent$1.CHANGE,t)}installInsertHandler(e){var t=this,i={mouseDown:function(n,s){t.insertFunction!=null&&!s.isPopupTrigger()&&(t.forcedInserting||s.getState()==null)&&(t.graph.clearSelection(),t.insertFunction(s.getEvent(),s.getCell()),this.isActive=!0,s.consume())},mouseMove:function(n,s){this.isActive&&s.consume()},mouseUp:function(n,s){this.isActive&&(this.isActive=!1,s.consume())}};e.addMouseListener(i)}createDiagramLayout(){var e=this.graph.gridSize,t=new mxStackLayout(this.graph,!this.horizontalFlow,this.swimlaneSpacing,2*e,2*e);return t.isVertexIgnored=function(i){return!t.graph.isSwimlane(i)},t}createSwimlaneLayout(){return new mxCompactTreeLayout(this.graph,this.horizontalFlow)}createToolbar(){return new mxDefaultToolbar(null,this)}setToolbarContainer(e){this.toolbar.init(e),mxClient.IS_QUIRKS&&new mxDivResizer(e)}setStatusContainer(e){this.status==null&&(this.status=e,this.addListener(mxEvent$1.SAVE,()=>{var t=new Date().toLocaleString();this.setStatus((mxResources$1.get(this.lastSavedResource)||this.lastSavedResource)+": "+t)}),this.addListener(mxEvent$1.OPEN,()=>{this.setStatus((mxResources$1.get(this.currentFileResource)||this.currentFileResource)+": "+this.filename)}),mxClient.IS_QUIRKS&&new mxDivResizer(e))}setStatus(e){this.status!=null&&e!=null&&(this.status.innerHTML=e)}setTitleContainer(e){this.addListener(mxEvent$1.ROOT,t=>{e.innerHTML=this.getTitle()}),mxClient.IS_QUIRKS&&new mxDivResizer(e)}treeLayout(e,t){if(e!=null){var i=new mxCompactTreeLayout(this.graph,t);i.execute(e)}}getTitle(){for(var e="",t=this.graph,i=t.getCurrentRoot();i!=null&&t.getModel().getParent(t.getModel().getParent(i))!=null;)t.isValidRoot(i)&&(e=" > "+t.convertValueToString(i)+e),i=t.getModel().getParent(i);var n=this.getRootTitle();return n+e}getRootTitle(){var e=this.graph.getModel().getRoot();return this.graph.convertValueToString(e)}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}groupCells(){var e=this.groupBorderSize!=null?this.groupBorderSize:this.graph.gridSize;return this.graph.groupCells(this.createGroup(),e)}createGroup(){var e=this.graph.getModel();return e.cloneCell(this.defaultGroup)}open(e){if(e!=null){var t=mxUtils$1.load(e).getXml();this.readGraphModel(t.documentElement),this.filename=e,this.fireEvent(new mxEventObject$1(mxEvent$1.OPEN,"filename",e))}}readGraphModel(e){var t=new mxCodec(e.ownerDocument);t.decode(e,this.graph.getModel()),this.resetHistory()}save(e,t){if(e=e||this.getUrlPost(),e!=null&&e.length>0){var i=this.writeGraphModel(t);this.postDiagram(e,i),this.setModified(!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.SAVE,"url",e))}postDiagram(e,t){this.escapePostData&&(t=encodeURIComponent(t)),mxUtils$1.post(e,this.postParameterName+"="+t,i=>{this.fireEvent(new mxEventObject$1(mxEvent$1.POST,"request",i,"url",e,"data",t))})}writeGraphModel(e){e=e??this.linefeed;var t=new mxCodec,i=t.encode(this.graph.getModel());return mxUtils$1.getXml(i,e)}getUrlPost(){return this.urlPost}getUrlImage(){return this.urlImage}swapStyles(e,t){var i=this.graph.getStylesheet().styles[t];this.graph.getView().getStylesheet().putCellStyle(t,this.graph.getStylesheet().styles[e]),this.graph.getStylesheet().putCellStyle(e,i),this.graph.refresh()}showProperties(e){if(e=e||this.graph.getSelectionCell(),e==null&&(e=this.graph.getCurrentRoot(),e==null&&(e=this.graph.getModel().getRoot())),e!=null){this.graph.stopEditing(!0);var t=mxUtils$1.getOffset(this.graph.container),i=t.x+10,n=t.y;if(this.properties!=null&&!this.movePropertiesDialog)i=this.properties.getX(),n=this.properties.getY();else{var s=this.graph.getCellBounds(e);s!=null&&(i+=s.x+Math.min(200,s.width),n+=s.y)}this.hideProperties();var l=this.createProperties(e);l!=null&&(this.properties=new mxWindow(mxResources$1.get(this.propertiesResource)||this.propertiesResource,l,i,n,this.propertiesWidth,this.propertiesHeight,!1),this.properties.setVisible(!0))}}isPropertiesVisible(){return this.properties!=null}createProperties(e){var t=this.graph.getModel(),i=t.getValue(e);if(mxUtils$1.isNode(i)){var n=new mxForm("properties"),s=n.addText("ID",e.getId());s.setAttribute("readonly","true");var l=null,a=null,o=null,h=null,d=null;t.isVertex(e)&&(l=t.getGeometry(e),l!=null&&(a=n.addText("top",l.y),o=n.addText("left",l.x),h=n.addText("width",l.width),d=n.addText("height",l.height)));for(var m=t.getStyle(e),g=n.addText("Style",m||""),c=i.attributes,f=[],C=0;C<c.length;C++){var v=c[C].value;f[C]=n.addTextarea(c[C].nodeName,v,c[C].nodeName=="label"?4:2)}var w=()=>{this.hideProperties(),t.beginUpdate();try{l!=null&&(l=l.clone(),l.x=parseFloat(o.value),l.y=parseFloat(a.value),l.width=parseFloat(h.value),l.height=parseFloat(d.value),t.setGeometry(e,l)),g.value.length>0?t.setStyle(e,g.value):t.setStyle(e,null);for(var T=0;T<c.length;T++){var P=new mxCellAttributeChange(e,c[T].nodeName,f[T].value);t.execute(P)}this.graph.isAutoSizeCell(e)&&this.graph.updateCellSize(e)}finally{t.endUpdate()}},S=()=>{this.hideProperties()};return n.addButtons(w,S),n.table}return null}hideProperties(){this.properties!=null&&(this.properties.destroy(),this.properties=null)}showTasks(){if(this.tasks==null){var e=document.createElement("div");e.style.padding="4px",e.style.paddingLeft="20px";var t=document.body.clientWidth,i=new mxWindow(mxResources$1.get(this.tasksResource)||this.tasksResource,e,t-220,this.tasksTop,200);i.setClosable(!0),i.destroyOnClose=!1;var n=s=>{mxEvent$1.release(e),e.innerHTML="",this.createTasks(e)};this.graph.getModel().addListener(mxEvent$1.CHANGE,n),this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,n),this.graph.addListener(mxEvent$1.ROOT,n),this.tasksWindowImage!=null&&i.setImage(this.tasksWindowImage),this.tasks=i,this.createTasks(e)}this.tasks.setVisible(!0)}refreshTasks(e){if(this.tasks!=null){var e=this.tasks.content;mxEvent$1.release(e),e.innerHTML="",this.createTasks(e)}}createTasks(e){}showHelp(e){if(this.help==null){var t=document.createElement("iframe");t.setAttribute("src",mxResources$1.get("urlHelp")||this.urlHelp),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("frameBorder","0"),t.style.backgroundColor="white";var i=document.body.clientWidth,n=document.body.clientHeight||document.documentElement.clientHeight,s=new mxWindow(mxResources$1.get(this.helpResource)||this.helpResource,t,(i-this.helpWidth)/2,(n-this.helpHeight)/3,this.helpWidth,this.helpHeight);if(s.setMaximizable(!0),s.setClosable(!0),s.destroyOnClose=!1,s.setResizable(!0),this.helpWindowImage!=null&&s.setImage(this.helpWindowImage),mxClient.IS_NS){var l=function(a){var o=s.div.offsetHeight;t.setAttribute("height",o-26+"px")};s.addListener(mxEvent$1.RESIZE_END,l),s.addListener(mxEvent$1.MAXIMIZE,l),s.addListener(mxEvent$1.NORMALIZE,l),s.addListener(mxEvent$1.SHOW,l)}this.help=s}this.help.setVisible(!0)}showOutline(){var e=this.outline==null;if(e){var t=document.createElement("div");t.style.overflow="hidden",t.style.position="relative",t.style.width="100%",t.style.height="100%",t.style.background="white",t.style.cursor="move",document.documentMode==8&&(t.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=100)");var i=new mxWindow(mxResources$1.get(this.outlineResource)||this.outlineResource,t,600,480,200,200,!1),n=new mxOutline(this.graph,t);i.setClosable(!0),i.setResizable(!0),i.destroyOnClose=!1,i.addListener(mxEvent$1.RESIZE_END,function(){n.update()}),this.outline=i,this.outline.outline=n}this.outline.setVisible(!0),this.outline.outline.update(!0)}setMode(e){e=="select"?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!1)):e=="connect"?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!0)):e=="pan"&&(this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.setConnectable(!1))}createPopupMenu(e,t,i){this.popupHandler.createMenu(this,e,t,i)}createEdge(e,t){var i=null;if(this.defaultEdge!=null){var n=this.graph.getModel();i=n.cloneCell(this.defaultEdge)}else{i=new mxCell(""),i.setEdge(!0);var s=new mxGeometry;s.relative=!0,i.setGeometry(s)}var l=this.getEdgeStyle();return l!=null&&i.setStyle(l),i}getEdgeStyle(){return this.defaultEdgeStyle}consumeCycleAttribute(e){return this.cycleAttributeValues!=null&&this.cycleAttributeValues.length>0&&this.graph.isSwimlane(e)?this.cycleAttributeValues[this.cycleAttributeIndex++%this.cycleAttributeValues.length]:null}cycleAttribute(e){if(this.cycleAttributeName!=null){var t=this.consumeCycleAttribute(e);t!=null&&e.setStyle(e.getStyle()+";"+this.cycleAttributeName+"="+t)}}addVertex(e,t,i,n){for(var s=this.graph.getModel();e!=null&&!this.graph.isValidDropTarget(e);)e=s.getParent(e);e=e??this.graph.getSwimlaneAt(i,n);var l=this.graph.getView().scale,a=s.getGeometry(t),o=s.getGeometry(e);if(this.graph.isSwimlane(t)&&!this.graph.swimlaneNesting)e=null;else{if(e==null&&this.swimlaneRequired)return null;if(e!=null&&o!=null){var h=this.graph.getView().getState(e);if(h!=null){if(i-=h.origin.x*l,n-=h.origin.y*l,this.graph.isConstrainedMoving){var d=a.width,m=a.height,g=h.x+h.width;i+d>g&&(i-=i+d-g),g=h.y+h.height,n+m>g&&(n-=n+m-g)}}else o!=null&&(i-=o.x*l,n-=o.y*l)}}a=Object.assign(Object.create(Object.getPrototypeOf(a)),a),a.x=this.graph.snap(i/l-this.graph.getView().translate.x-this.graph.gridSize/2),a.y=this.graph.snap(n/l-this.graph.getView().translate.y-this.graph.gridSize/2),t.setGeometry(a),e==null&&(e=this.graph.getDefaultParent()),this.cycleAttribute(t),this.fireEvent(new mxEventObject$1(mxEvent$1.BEFORE_ADD_VERTEX,"vertex",t,"parent",e)),s.beginUpdate();try{t=this.graph.addCell(t,e),t!=null&&(this.graph.constrainChild(t),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_VERTEX,"vertex",t)))}finally{s.endUpdate()}return t!=null&&(this.graph.setSelectionCell(t),this.graph.scrollCellToVisible(t),this.fireEvent(new mxEventObject$1(mxEvent$1.AFTER_ADD_VERTEX,"vertex",t))),t}destroy(){this.destroyed||(this.destroyed=!0,this.tasks!=null&&this.tasks.destroy(),this.outline!=null&&this.outline.destroy(),this.properties!=null&&this.properties.destroy(),this.keyHandler!=null&&this.keyHandler.destroy(),this.rubberband!=null&&this.rubberband.destroy(),this.toolbar!=null&&this.toolbar.destroy(),this.graph!=null&&this.graph.destroy(),this.status=null,this.templates=null)}}class mxEditorCodec extends mxObjectCodec{constructor(){super(new mxEditor,["modified","lastSnapshot","ignoredChanges","undoManager","graphContainer","toolbarContainer"])}afterDecode(e,t,i){var n=t.getAttribute("defaultEdge");n!=null&&(t.removeAttribute("defaultEdge"),i.defaultEdge=i.templates[n]);var s=t.getAttribute("defaultGroup");return s!=null&&(t.removeAttribute("defaultGroup"),i.defaultGroup=i.templates[s]),i}decodeChild(e,t,i){if(t.nodeName=="Array"){var n=t.getAttribute("as");if(n=="templates"){this.decodeTemplates(e,t,i);return}}else if(t.nodeName=="ui"){this.decodeUi(e,t,i);return}super.decodeChild(e,t,i)}decodeUi(e,t,i){for(var n=t.firstChild;n!=null;){if(n.nodeName=="add"){var s=n.getAttribute("as"),l=n.getAttribute("element"),a=n.getAttribute("style"),o=null;if(l!=null)o=document.getElementById(l),o!=null&&a!=null&&(o.style.cssText+=";"+a);else{var h=parseInt(n.getAttribute("x")),d=parseInt(n.getAttribute("y")),m=n.getAttribute("width"),g=n.getAttribute("height");o=document.createElement("div"),o.style.cssText=a;var c=new mxWindow(mxResources$1.get(s)||s,o,h,d,m,g,!1,!0);c.setVisible(!0)}s=="graph"?i.setGraphContainer(o):s=="toolbar"?i.setToolbarContainer(o):s=="title"?i.setTitleContainer(o):s=="status"?i.setStatusContainer(o):s=="map"&&i.setMapContainer(o)}else n.nodeName=="resource"?mxResources$1.add(n.getAttribute("basename")):n.nodeName=="stylesheet"&&mxClient.link("stylesheet",n.getAttribute("name"));n=n.nextSibling}}decodeTemplates(e,t,i){i.templates==null&&(i.templates=[]);for(var n=mxUtils$1.getChildNodes(t),s=0;s<n.length;s++){for(var l=n[s].getAttribute("as"),a=n[s].firstChild;a!=null&&a.nodeType!=1;)a=a.nextSibling;a!=null&&(i.templates[l]=e.decodeCell(a))}}}class mxGenericChangeCodec extends mxObjectCodec{constructor(e,t){super(e,["model","previous"],["cell"]),this.variable=t}afterDecode(e,t,i){return mxUtils$1.isNode(i.cell)&&(i.cell=e.decodeCell(i.cell,!1)),i.previous=i[this.variable],i}}class mxGraphCodec extends mxObjectCodec{constructor(){super(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])}}class mxGraphViewCodec extends mxObjectCodec{constructor(){super(new mxGraphView)}encode(e,t){return this.encodeCell(e,t,t.graph.getModel().getRoot())}encodeCell(e,t,i){var n=t.graph.getModel(),s=t.getState(i),l=n.getParent(i);if(l==null||s!=null){var a=n.getChildCount(i),o=t.graph.getCellGeometry(i),h=null;if(l==n.getRoot()?h="layer":l==null?h="graph":n.isEdge(i)?h="edge":a>0&&o!=null?h="group":n.isVertex(i)&&(h="vertex"),h!=null){var d=e.document.createElement(h),m=t.graph.getLabel(i);if(m!=null&&(d.setAttribute("label",t.graph.getLabel(i)),t.graph.isHtmlLabel(i)&&d.setAttribute("html",!0)),l==null){var g=t.getGraphBounds();g!=null&&(d.setAttribute("x",Math.round(g.x)),d.setAttribute("y",Math.round(g.y)),d.setAttribute("width",Math.round(g.width)),d.setAttribute("height",Math.round(g.height))),d.setAttribute("scale",t.scale)}else if(s!=null&&o!=null){for(var c in s.style){var f=s.style[c];typeof f=="function"&&typeof f=="object"&&(f=mxStyleRegistry.getName(f)),f!=null&&typeof f!="function"&&typeof f!="object"&&d.setAttribute(c,f)}var C=s.absolutePoints;if(C!=null&&C.length>0){for(var v=Math.round(C[0].x)+","+Math.round(C[0].y),c=1;c<C.length;c++)v+=" "+Math.round(C[c].x)+","+Math.round(C[c].y);d.setAttribute("points",v)}else d.setAttribute("x",Math.round(s.x)),d.setAttribute("y",Math.round(s.y)),d.setAttribute("width",Math.round(s.width)),d.setAttribute("height",Math.round(s.height));var w=s.absoluteOffset;w!=null&&(w.x!=0&&d.setAttribute("dx",Math.round(w.x)),w.y!=0&&d.setAttribute("dy",Math.round(w.y)))}for(var c=0;c<a;c++){var S=this.encodeCell(e,t,n.getChildAt(i,c));S!=null&&d.appendChild(S)}}}return d}}class mxModelCodec extends mxObjectCodec{constructor(){super(new mxGraphModel)}encodeObject(e,t,i){var n=e.document.createElement("root");e.encodeCell(t.getRoot(),n),i.appendChild(n)}decodeChild(e,t,i){t.nodeName=="root"?this.decodeRoot(e,t,i):super.decodeChild(e,t,i)}decodeRoot(e,t,i){for(var n=null,s=t.firstChild;s!=null;){var l=e.decodeCell(s);l!=null&&l.getParent()==null&&(n=l),s=s.nextSibling}n!=null&&i.setRoot(n)}}class mxRootChangeCodec extends mxObjectCodec{constructor(){super(new mxRootChange,["model","previous","root"])}afterEncode(e,t,i){return e.encodeCell(t.root,i),i}beforeDecode(e,t,i){if(t.firstChild!=null&&t.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT){t=t.cloneNode(!0);var n=t.firstChild;i.root=e.decodeCell(n,!1);var s=n.nextSibling;for(n.parentNode.removeChild(n),n=s;n!=null;)s=n.nextSibling,e.decodeCell(n),n.parentNode.removeChild(n),n=s}return t}afterDecode(e,t,i){return i.previous=i.root,i}}const Ot=class ri extends mxObjectCodec{constructor(){super(new mxStylesheet)}encode(e,t){var i=e.document.createElement(this.getName());for(var n in t.styles){var s=t.styles[n],l=e.document.createElement("add");if(n!=null){l.setAttribute("as",n);for(var a in s){var o=this.getStringValue(a,s[a]);if(o!=null){var h=e.document.createElement("add");h.setAttribute("value",o),h.setAttribute("as",a),l.appendChild(h)}}l.childNodes.length>0&&i.appendChild(l)}}return i}getStringValue(e,t){var i=typeof t;return i=="function"?t=mxStyleRegistry.getName(t):i=="object"&&(t=null),t}decode(e,t,i){var n=i||new this.template.constructor,s=t.getAttribute("id");for(s!=null&&(e.objects[s]=n),t=t.firstChild;t!=null;){if(!this.processInclude(e,t,n)&&t.nodeName=="add"){var l=t.getAttribute("as");if(l!=null){var a=t.getAttribute("extend"),o=a!=null?mxUtils$1.clone(n.styles[a]):null;o==null&&(a!=null&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+a+" not found to extend"),o=new Object);for(var h=t.firstChild;h!=null;){if(h.nodeType==mxConstants$1.NODETYPE_ELEMENT){var d=h.getAttribute("as");if(h.nodeName=="add"){var m=mxUtils$1.getTextContent(h),g=null;m!=null&&m.length>0&&ri.allowEval?g=mxUtils$1.eval(m):(g=h.getAttribute("value"),mxUtils$1.isNumeric(g)&&(g=parseFloat(g))),g!=null&&(o[d]=g)}else h.nodeName=="remove"&&delete o[d]}h=h.nextSibling}n.putCellStyle(l,o)}}t=t.nextSibling}return n}};u(Ot,"allowEval",!0);let mxStylesheetCodec=Ot;class mxTerminalChangeCodec extends mxObjectCodec{constructor(){super(new mxTerminalChange,["model","previous"],["cell","terminal"])}afterDecode(e,t,i){return i.previous=i.terminal,i}}class mxCylinder extends mxShape{constructor(e,t,i,n){super(),u(this,"maxHeight",40),u(this,"svgStrokeTolerance",0),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}paintVertexShape(e,t,i,n,s){e.translate(t,i),e.begin(),this.redrawPath(e,t,i,n,s,!1),e.fillAndStroke(),(!this.outline||this.style==null||mxUtils$1.getValue(this.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0)&&(e.setShadow(!1),e.begin(),this.redrawPath(e,t,i,n,s,!0),e.stroke())}getCylinderSize(e,t,i,n){return Math.min(this.maxHeight,Math.round(n/5))}redrawPath(e,t,i,n,s,l){var a=this.getCylinderSize(t,i,n,s);(l&&this.fill!=null||!l&&this.fill==null)&&(e.moveTo(0,a),e.curveTo(0,2*a,n,2*a,n,a),l||(e.stroke(),e.begin())),l||(e.moveTo(0,a),e.curveTo(0,-a/3,n,-a/3,n,a),e.lineTo(n,s-a),e.curveTo(n,s+a/3,0,s+a/3,0,s-a),e.close())}}class mxRhombus extends mxShape{constructor(e,t,i,n){super(),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}isRoundable(){return!0}paintVertexShape(e,t,i,n,s){var l=n/2,a=s/2,o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,[new mxPoint(t+l,i),new mxPoint(t+n,i+a),new mxPoint(t+l,i+s),new mxPoint(t,i+a)],this.isRounded,o,!0),e.fillAndStroke()}}class mxSwimlane extends mxShape{constructor(e,t,i,n){super(),u(this,"imageSize",16),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}isRoundable(e,t,i,n,s){return!0}getTitleSize(){return Math.max(0,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE))}getLabelBounds(e){var t=this.getTitleSize(),i=new mxRectangle(e.x,e.y,e.width,e.height),n=this.isHorizontal(),s=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,0)==1,l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,0)==1,a=this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH,o=n==!a,h=!o&&s!=(this.direction==mxConstants$1.DIRECTION_SOUTH||this.direction==mxConstants$1.DIRECTION_WEST),d=o&&l!=(this.direction==mxConstants$1.DIRECTION_SOUTH||this.direction==mxConstants$1.DIRECTION_WEST);if(a){var m=Math.min(i.width,t*this.scale);(h||d)&&(i.x+=i.width-m),i.width=m}else{var m=Math.min(i.height,t*this.scale);(h||d)&&(i.y+=i.height-m),i.height=m}return i}getGradientBounds(e,t,i,n,s){var l=this.getTitleSize();return this.isHorizontal()?(l=Math.min(l,s),new mxRectangle(t,i,n,l)):(l=Math.min(l,n),new mxRectangle(t,i,l,s))}getSwimlaneArcSize(e,t,i){if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")return Math.min(e/2,Math.min(t/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;return i*n*3}isHorizontal(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,1)==1}paintVertexShape(e,t,i,n,s){var l=this.getTitleSize(),a=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.NONE),o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_LINE,1)==1,h=0;this.isHorizontal()?l=Math.min(l,s):l=Math.min(l,n),e.translate(t,i),this.isRounded?(h=this.getSwimlaneArcSize(n,s,l),h=Math.min((this.isHorizontal()?s:n)-l,Math.min(l,h)),this.paintRoundedSwimlane(e,t,i,n,s,l,h,a,o)):this.paintSwimlane(e,t,i,n,s,l,a,o);var d=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SEPARATORCOLOR,mxConstants$1.NONE);if(this.paintSeparator(e,t,i,n,s,l,d),this.image!=null){var m=this.getImageBounds(t,i,n,s);e.image(m.x-t,m.y-i,m.width,m.height,this.image,!1,!1,!1)}this.glass&&(e.setShadow(!1),this.paintGlassEffect(e,0,0,n,l,h))}paintSwimlane(e,t,i,n,s,l,a,o){e.begin();var h=!0;this.style!=null&&(h=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),!h&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(e.pointerEvents=!1),this.isHorizontal()?(e.moveTo(0,l),e.lineTo(0,0),e.lineTo(n,0),e.lineTo(n,l),e.fillAndStroke(),l<s&&((a==mxConstants$1.NONE||!h)&&(e.pointerEvents=!1),a!=mxConstants$1.NONE&&e.setFillColor(a),e.begin(),e.moveTo(0,l),e.lineTo(0,s),e.lineTo(n,s),e.lineTo(n,l),a==mxConstants$1.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(l,0),e.lineTo(0,0),e.lineTo(0,s),e.lineTo(l,s),e.fillAndStroke(),l<n&&((a==mxConstants$1.NONE||!h)&&(e.pointerEvents=!1),a!=mxConstants$1.NONE&&e.setFillColor(a),e.begin(),e.moveTo(l,0),e.lineTo(n,0),e.lineTo(n,s),e.lineTo(l,s),a==mxConstants$1.NONE?e.stroke():e.fillAndStroke())),o&&this.paintDivider(e,t,i,n,s,l,a==mxConstants$1.NONE)}paintRoundedSwimlane(e,t,i,n,s,l,a,o,h){e.begin();var d=!0;this.style!=null&&(d=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),!d&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(e.pointerEvents=!1),this.isHorizontal()?(e.moveTo(n,l),e.lineTo(n,a),e.quadTo(n,0,n-Math.min(n/2,a),0),e.lineTo(Math.min(n/2,a),0),e.quadTo(0,0,0,a),e.lineTo(0,l),e.fillAndStroke(),l<s&&((o==mxConstants$1.NONE||!d)&&(e.pointerEvents=!1),o!=mxConstants$1.NONE&&e.setFillColor(o),e.begin(),e.moveTo(0,l),e.lineTo(0,s-a),e.quadTo(0,s,Math.min(n/2,a),s),e.lineTo(n-Math.min(n/2,a),s),e.quadTo(n,s,n,s-a),e.lineTo(n,l),o==mxConstants$1.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(l,0),e.lineTo(a,0),e.quadTo(0,0,0,Math.min(s/2,a)),e.lineTo(0,s-Math.min(s/2,a)),e.quadTo(0,s,a,s),e.lineTo(l,s),e.fillAndStroke(),l<n&&((o==mxConstants$1.NONE||!d)&&(e.pointerEvents=!1),o!=mxConstants$1.NONE&&e.setFillColor(o),e.begin(),e.moveTo(l,s),e.lineTo(n-a,s),e.quadTo(n,s,n,s-Math.min(s/2,a)),e.lineTo(n,Math.min(s/2,a)),e.quadTo(n,0,n-a,0),e.lineTo(l,0),o==mxConstants$1.NONE?e.stroke():e.fillAndStroke())),h&&this.paintDivider(e,t,i,n,s,l,o==mxConstants$1.NONE)}paintDivider(e,t,i,n,s,l,a){a||e.setShadow(!1),e.begin(),this.isHorizontal()?(e.moveTo(0,l),e.lineTo(n,l)):(e.moveTo(l,0),e.lineTo(l,s)),e.stroke()}paintSeparator(e,t,i,n,s,l,a){a!=mxConstants$1.NONE&&(e.setStrokeColor(a),e.setDashed(!0),e.begin(),this.isHorizontal()?(e.moveTo(n,l),e.lineTo(n,s)):(e.moveTo(l,0),e.lineTo(n,0)),e.stroke(),e.setDashed(!1))}getImageBounds(e,t,i,n){return this.isHorizontal()?new mxRectangle(e+i-this.imageSize,t,this.imageSize,this.imageSize):new mxRectangle(e,t,this.imageSize,this.imageSize)}}class mxDoubleEllipse extends mxShape{constructor(e,t,i,n){super(),u(this,"vmlScale",10),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}paintBackground(e,t,i,n,s){e.ellipse(t,i,n,s),e.fillAndStroke()}paintForeground(e,t,i,n,s){if(!this.outline){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(n/5,s/5)));t+=l,i+=l,n-=2*l,s-=2*l,n>0&&s>0&&e.ellipse(t,i,n,s),e.stroke()}}getLabelBounds(e){var t=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(e.width/5/this.scale,e.height/5/this.scale)))*this.scale;return new mxRectangle(e.x+t,e.y+t,e.width-2*t,e.height-2*t)}}class mxArrowConnector extends mxShape{constructor(e,t,i,n,s,l,a){super(),u(this,"useSvgBoundingBox",!0),this.points=e,this.fill=t,this.stroke=i,this.strokewidth=n??1,this.arrowWidth=s??mxConstants$1.ARROW_WIDTH,this.arrowSpacing=l??mxConstants$1.ARROW_SPACING,this.startSize=mxConstants$1.ARROW_SIZE/5,this.endSize=mxConstants$1.ARROW_SIZE/5}resetStyles(){super.resetStyles(),this.arrowSpacing=mxConstants$1.ARROW_SPACING}apply(e){super.apply(e),this.style!=null&&(this.startSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3,this.endSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3)}augmentBoundingBox(e){super.augmentBoundingBox(e);var t=this.getEdgeWidth();this.isMarkerStart()&&(t=Math.max(t,this.getStartArrowWidth())),this.isMarkerEnd()&&(t=Math.max(t,this.getEndArrowWidth())),e.grow((t/2+this.strokewidth)*this.scale)}paintEdgeShape(e,t){var i=this.strokewidth;this.outline&&(i=Math.max(1,mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STROKEWIDTH,this.strokewidth)));for(var n=this.getStartArrowWidth()+i,s=this.getEndArrowWidth()+i,l=this.outline?this.getEdgeWidth()+i:this.getEdgeWidth(),a=this.isOpenEnded(),o=this.isMarkerStart(),h=this.isMarkerEnd(),d=a?0:this.arrowSpacing+i/2,m=this.startSize+i,g=this.endSize+i,c=this.isArrowRounded(),f=t[t.length-1],C=1;C<t.length-1&&t[C].x==t[0].x&&t[C].y==t[0].y;)C++;var v=t[C].x-t[0].x,w=t[C].y-t[0].y,S=Math.sqrt(v*v+w*w);if(S!=0){var T=v/S,P,L=T,k=w/S,G,Y=k,te=l*k,ie=-l*T,ne=[];c?e.setLineJoin("round"):t.length>2&&e.setMiterLimit(1.42),e.begin();var q=T,oe=k;if(o&&!a)this.paintMarker(e,t[0].x,t[0].y,T,k,m,n,l,d,!0);else{var le=t[0].x+te/2+d*T,Z=t[0].y+ie/2+d*k,B=t[0].x-te/2+d*T,re=t[0].y-ie/2+d*k;a?(e.moveTo(le,Z),ne.push(function(){e.lineTo(B,re)})):(e.moveTo(B,re),e.lineTo(le,Z))}for(var se=0,ve=0,pe=0,Q=0;Q<t.length-2;Q++){var me=mxUtils$1.relativeCcw(t[Q].x,t[Q].y,t[Q+1].x,t[Q+1].y,t[Q+2].x,t[Q+2].y);if(se=t[Q+2].x-t[Q+1].x,ve=t[Q+2].y-t[Q+1].y,pe=Math.sqrt(se*se+ve*ve),pe!=0){L=se/pe,Y=ve/pe;var ce=T*L+k*Y,Le=Math.max(Math.sqrt((ce+1)/2),.04);P=T+L,G=k+Y;var Ie=Math.sqrt(P*P+G*G);if(Ie!=0){P=P/Ie,G=G/Ie;var Ge=Math.max(Le,Math.min(this.strokewidth/200+.04,.35)),fe=me!=0&&c?Math.max(.1,Ge):Math.max(Le,.06),Te=t[Q+1].x+G*l/2/fe,Ve=t[Q+1].y-P*l/2/fe,De=t[Q+1].x-G*l/2/fe,He=t[Q+1].y+P*l/2/fe;if(me==0||!c)e.lineTo(Te,Ve),function(et,Ze){ne.push(function(){e.lineTo(et,Ze)})}(De,He);else if(me==-1){var ue=De+k*l,be=He-T*l,Fe=De+Y*l,Pe=He-L*l;e.lineTo(ue,be),e.quadTo(Te,Ve,Fe,Pe),function(et,Ze){ne.push(function(){e.lineTo(et,Ze)})}(De,He)}else e.lineTo(Te,Ve),function(et,Ze){var Ke=Te-k*l,E=Ve+T*l,$=Te-Y*l,R=Ve+L*l;ne.push(function(){e.quadTo(et,Ze,Ke,E)}),ne.push(function(){e.lineTo($,R)})}(De,He);T=L,k=Y}}}if(te=l*Y,ie=-l*L,h&&!a)this.paintMarker(e,f.x,f.y,-T,-k,g,s,l,d,!1);else{e.lineTo(f.x-d*L+te/2,f.y-d*Y+ie/2);var je=f.x-d*L-te/2,Qe=f.y-d*Y-ie/2;a?(e.moveTo(je,Qe),ne.splice(0,0,function(){e.moveTo(je,Qe)})):e.lineTo(je,Qe)}for(var Q=ne.length-1;Q>=0;Q--)ne[Q]();a?(e.end(),e.stroke()):(e.close(),e.fillAndStroke()),e.setShadow(!1),e.setMiterLimit(4),c&&e.setLineJoin("flat"),t.length>2&&(e.setMiterLimit(4),o&&!a&&(e.begin(),this.paintMarker(e,t[0].x,t[0].y,q,oe,m,n,l,d,!0),e.stroke(),e.end()),h&&!a&&(e.begin(),this.paintMarker(e,f.x,f.y,-T,-k,g,s,l,d,!0),e.stroke(),e.end()))}}paintMarker(e,t,i,n,s,l,a,o,h,d){var m=o/a,g=o*s/2,c=-o*n/2,f=(h+l)*n,C=(h+l)*s;d?e.moveTo(t-g+f,i-c+C):e.lineTo(t-g+f,i-c+C),e.lineTo(t-g/m+f,i-c/m+C),e.lineTo(t+h*n,i+h*s),e.lineTo(t+g/m+f,i+c/m+C),e.lineTo(t+g+f,i+c+C)}isArrowRounded(){return this.isRounded}getStartArrowWidth(){return mxConstants$1.ARROW_WIDTH}getEndArrowWidth(){return mxConstants$1.ARROW_WIDTH}getEdgeWidth(){return mxConstants$1.ARROW_WIDTH/3}isOpenEnded(){return!1}isMarkerStart(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE}isMarkerEnd(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE}}class mxArrow extends mxShape{constructor(e,t,i,n,s,l,a){super(),this.points=e,this.fill=t,this.stroke=i,this.strokewidth=n??1,this.arrowWidth=s??mxConstants$1.ARROW_WIDTH,this.spacing=l??mxConstants$1.ARROW_SPACING,this.endSize=a??mxConstants$1.ARROW_SIZE}augmentBoundingBox(e){super.augmentBoundingBox(e);var t=Math.max(this.arrowWidth,this.endSize);e.grow((t/2+this.strokewidth)*this.scale)}paintEdgeShape(e,t){var i=mxConstants$1.ARROW_SPACING,n=mxConstants$1.ARROW_WIDTH,s=mxConstants$1.ARROW_SIZE,l=t[0],a=t[t.length-1],o=a.x-l.x,h=a.y-l.y,d=Math.sqrt(o*o+h*h),m=d-2*i-s,g=o/d,c=h/d,f=m*g,C=m*c,v=n*c/3,w=-n*g/3,S=l.x-v/2+i*g,T=l.y-w/2+i*c,P=S+v,L=T+w,k=P+f,G=L+C,Y=k+v,te=G+w,ie=Y-3*v,ne=te-3*w;e.begin(),e.moveTo(S,T),e.lineTo(P,L),e.lineTo(k,G),e.lineTo(Y,te),e.lineTo(a.x-i*g,a.y-i*c),e.lineTo(ie,ne),e.lineTo(ie+v,ne+w),e.close(),e.fillAndStroke()}}class mxLine extends mxShape{constructor(e,t,i,n){super(),this.bounds=e,this.stroke=t,this.strokewidth=i??1,this.vertical=n??this.vertical}paintVertexShape(e,t,i,n,s){if(e.begin(),this.vertical){var l=t+n/2;e.moveTo(l,i),e.lineTo(l,i+s)}else{var l=i+s/2;e.moveTo(t,l),e.lineTo(t+n,l)}e.stroke()}}class mxActor extends mxShape{constructor(e,t,i,n){super(),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}paintVertexShape(e,t,i,n,s){e.translate(t,i),e.begin(),this.redrawPath(e,t,i,n,s),e.fillAndStroke()}redrawPath(e,t,i,n,s){var l=n/3;e.moveTo(0,s),e.curveTo(0,3*s/5,0,2*s/5,n/2,2*s/5),e.curveTo(n/2-l,2*s/5,n/2-l,0,n/2,0),e.curveTo(n/2+l,0,n/2+l,2*s/5,n/2,2*s/5),e.curveTo(n,2*s/5,n,3*s/5,n,s),e.close()}}class mxCloud extends mxActor{constructor(e,t,i,n){super(),this.bounds=e,this.fill=t,this.stroke=i,this.strokewidth=n??1}redrawPath(e,t,i,n,s){e.moveTo(.25*n,.25*s),e.curveTo(.05*n,.25*s,0,.5*s,.16*n,.55*s),e.curveTo(0,.66*s,.18*n,.9*s,.31*n,.8*s),e.curveTo(.4*n,s,.7*n,s,.8*n,.8*s),e.curveTo(n,.8*s,n,.6*s,.875*n,.5*s),e.curveTo(n,.3*s,.8*n,.1*s,.625*n,.2*s),e.curveTo(.5*n,.05*s,.3*n,.05*s,.25*n,.25*s),e.close()}}class mxHexagon extends mxActor{constructor(){super()}redrawPath(e,t,i,n,s){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(.25*n,0),new mxPoint(.75*n,0),new mxPoint(n,.5*s),new mxPoint(.75*n,s),new mxPoint(.25*n,s),new mxPoint(0,.5*s)],this.isRounded,l,!0)}}class mxTriangle extends mxActor{constructor(){super()}isRoundable(){return!0}redrawPath(e,t,i,n,s){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,0),new mxPoint(n,.5*s),new mxPoint(0,s)],this.isRounded,l,!0)}}function bootstrap(){typeof window.mxLoadResources>"u"&&(window.mxLoadResources=!0),typeof window.mxForceIncludes>"u"&&(window.mxForceIncludes=!1),typeof window.mxResourceExtension>"u"&&(mxResources$1.extension=".txt"),typeof window.mxLoadStylesheets>"u"&&(window.mxLoadStylesheets=!0),typeof window.mxBasePath<"u"&&window.mxBasePath.length>0?(window.mxBasePath.substring(window.mxBasePath.length-1)=="/"&&(window.mxBasePath=window.mxBasePath.substring(0,window.mxBasePath.length-1)),mxClient.basePath=window.mxBasePath):mxClient.basePath=".",typeof window.mxImageBasePath<"u"&&window.mxImageBasePath.length>0?(window.mxImageBasePath.substring(window.mxImageBasePath.length-1)=="/"&&(window.mxImageBasePath=window.mxImageBasePath.substring(0,window.mxImageBasePath.length-1)),mxClient.imageBasePath=window.mxImageBasePath):mxClient.imageBasePath=mxClient.basePath+"/images",typeof window.mxLanguage<"u"&&window.mxLanguage!=null?mxClient.language=window.mxLanguage:mxClient.language=mxClient.IS_IE?navigator.userLanguage:navigator.language,typeof window.mxDefaultLanguage<"u"&&window.mxDefaultLanguage!=null?mxClient.defaultLanguage=window.mxDefaultLanguage:mxClient.defaultLanguage="en",window.mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/common.css"),typeof mxLanguages<"u"&&window.mxLanguages!=null&&(mxClient.languages=window.mxLanguages),mxClient.IS_VML&&(mxClient.IS_SVG?mxClient.IS_VML=!1:(document.namespaces!=null&&(document.documentMode==8?(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml","#default#VML"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office","#default#VML")):(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office"))),mxClient.IS_QUIRKS&&document.styleSheets.length>=30?function(){var r=document.createElement("style");r.type="text/css",r.styleSheet.cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",document.getElementsByTagName("head")[0].appendChild(r)}():document.createStyleSheet().cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",window.mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/explorer.css"))),window.mxLoadResources?mxResources$1.add(mxClient.basePath+"/resources/editor"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/editor"),window.mxLoadResources?mxResources$1.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxMarker.addMarker("classic",createArrow(2)),mxMarker.addMarker("classicThin",createArrow(3)),mxMarker.addMarker("block",createArrow(2)),mxMarker.addMarker("blockThin",createArrow(3)),mxMarker.addMarker("open",createOpenArrow(2)),mxMarker.addMarker("openThin",createOpenArrow(3)),mxMarker.addMarker("oval",oval),mxMarker.addMarker("diamond",diamond),mxMarker.addMarker("diamondThin",diamond),mxCellRenderer.registerShape(mxConstants$1.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants$1.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants$1.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants$1.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants$1.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants$1.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants$1.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants$1.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants$1.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants$1.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants$1.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants$1.SHAPE_LABEL,mxLabel),mxCodecRegistry.register(new mxChildChangeCodec),mxCodecRegistry.register(new mxCellCodec),mxCodecRegistry.register(new mxDefaultKeyHandlerCodec),mxCodecRegistry.register(new mxDefaultPopupMenuCodec),mxCodecRegistry.register(new mxDefaultToolbarCodec),mxCodecRegistry.register(new mxEditorCodec),mxCodecRegistry.register(new mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxCellAttributeChange,"value")),mxCodecRegistry.register(new mxGraphCodec),mxCodecRegistry.register(new mxGraphViewCodec),mxCodecRegistry.register(new mxModelCodec),mxCodecRegistry.register(new mxRootChangeCodec),mxCodecRegistry.register(new mxStylesheetCodec),mxCodecRegistry.register(new mxTerminalChangeCodec),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter)}class mxHandle{constructor(e,t,i,n){u(this,"ignoreGrid",!1),u(this,"cursor","default"),this.graph=e.view.graph,this.state=e,this.cursor=t??this.cursor,this.image=i??this.image,this.shape=n??null,this.init()}getPosition(e){}setPosition(e,t,i){}execute(e){}copyStyle(e){this.graph.setCellStyles(e,this.state.style[e],[this.state.cell])}processEvent(e){var t=this.graph.view.scale,i=this.graph.view.translate,n=new mxPoint(e.getGraphX()/t-i.x,e.getGraphY()/t-i.y);this.shape!=null&&this.shape.bounds!=null&&(n.x-=this.shape.bounds.width/t/4,n.y-=this.shape.bounds.height/t/4);var s=-mxUtils$1.toRadians(this.getRotation()),l=-mxUtils$1.toRadians(this.getTotalRotation())-s;n=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(n,s),this.ignoreGrid||!this.graph.isGridEnabledEvent(e.getEvent())),l)),this.setPosition(this.state.getPaintBounds(),n,e),this.redraw()}positionChanged(){this.state.text!=null&&this.state.text.apply(this.state),this.state.shape!=null&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)}getRotation(){return this.state.shape!=null?this.state.shape.getRotation():0}getTotalRotation(){return this.state.shape!=null?this.state.shape.getShapeRotation():0}init(){var e=this.isHtmlRequired();this.image!=null?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):this.shape==null&&(this.shape=this.createShape(e)),this.initShape(e)}createShape(e){var t=new mxRectangle(0,0,mxConstants$1.HANDLE_SIZE,mxConstants$1.HANDLE_SIZE);return new mxRectangleShape(t,mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}initShape(e){e&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants$1.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,this.cursor!=null&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor}redraw(){if(this.shape!=null&&this.state.shape!=null){var e=this.getPosition(this.state.getPaintBounds());if(e!=null){var t=mxUtils$1.toRadians(this.getTotalRotation());e=this.rotatePoint(this.flipPoint(e),t);var i=this.graph.view.scale,n=this.graph.view.translate;this.shape.bounds.x=Math.floor((e.x+n.x)*i-this.shape.bounds.width/2),isNaN(this.shape.bounds.x)&&console.log("#1 ************ NaN Err"),this.shape.bounds.y=Math.floor((e.y+n.y)*i-this.shape.bounds.height/2),this.shape.redraw()}}}isHtmlRequired(){return this.state.text!=null&&this.state.text.node.parentNode==this.graph.container}rotatePoint(e,t){var i=this.state.getCellBounds(),n=new mxPoint(i.getCenterX(),i.getCenterY()),s=Math.cos(t),l=Math.sin(t);return mxUtils$1.getRotatedPoint(e,s,l,n)}flipPoint(e){if(this.state.shape!=null){var t=this.state.getCellBounds();this.state.shape.flipH&&(e.x=2*t.x+t.width-e.x),this.state.shape.flipV&&(e.y=2*t.y+t.height-e.y)}return e}snapPoint(e,t){return t||(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e}setVisible(e){this.shape!=null&&this.shape.node!=null&&(this.shape.node.style.display=e?"":"none")}reset(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()}destroy(){this.shape!=null&&(this.shape.destroy(),this.shape=null)}}class mxCircleLayout extends mxGraphLayout{constructor(e,t){super(e),u(this,"moveCircle",!1),u(this,"x0",0),u(this,"y0",0),u(this,"resetEdges",!0),u(this,"disableEdgeStyle",!0),this.radius=t??100}execute(e){var t=this.graph.getModel();t.beginUpdate();try{for(var i=0,n=null,s=null,l=[],a=t.getChildCount(e),o=0;o<a;o++){var h=t.getChildAt(e,o);if(this.isVertexIgnored(h))this.isEdgeIgnored(h)||(this.resetEdges&&this.graph.resetEdge(h),this.disableEdgeStyle&&this.setEdgeStyleEnabled(h,!1));else{l.push(h);var d=this.getVertexBounds(h);n==null?n=d.y:n=Math.min(n,d.y),s==null?s=d.x:s=Math.min(s,d.x),i=Math.max(i,Math.max(d.width,d.height))}}var m=this.getRadius(l.length,i);this.moveCircle&&(s=this.x0,n=this.y0),this.circle(l,m,s,n)}finally{t.endUpdate()}}getRadius(e,t){return Math.max(e*t/Math.PI,this.radius)}circle(e,t,i,n){for(var s=e.length,l=2*Math.PI/s,a=0;a<s;a++)this.isVertexMovable(e[a])&&this.setVertexLocation(e[a],Math.round(i+t+t*Math.sin(a*l)),Math.round(n+t+t*Math.cos(a*l)))}}class mxFastOrganicLayout extends mxGraphLayout{constructor(e){super(e),u(this,"useInputOrigin",!0),u(this,"resetEdges",!0),u(this,"disableEdgeStyle",!0),u(this,"forceConstant",50),u(this,"forceConstantSquared",0),u(this,"minDistanceLimit",2),u(this,"maxDistanceLimit",500),u(this,"minDistanceLimitSquared",4),u(this,"initialTemp",200),u(this,"temperature",0),u(this,"maxIterations",0),u(this,"iteration",0),u(this,"vertexArray"),u(this,"dispX"),u(this,"dispY"),u(this,"cellLocation"),u(this,"radius"),u(this,"radiusSquared"),u(this,"isMoveable"),u(this,"neighbours"),u(this,"indices"),u(this,"allowedToRun",!0)}isVertexIgnored(e){return super.isVertexIgnored(e)||this.graph.getConnections(e).length==0}execute(e){var t=this.graph.getModel();this.vertexArray=[];for(var i=this.graph.getChildVertices(e),n=0;n<i.length;n++)this.isVertexIgnored(i[n])||this.vertexArray.push(i[n]);var s=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,l=this.vertexArray.length;this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant;for(var n=0;n<this.vertexArray.length;n++){var a=this.vertexArray[n];this.cellLocation[n]=[];var o=mxObjectIdentity.get(a);this.indices[o]=n;var h=this.getVertexBounds(a),d=h.width,m=h.height,g=h.x,c=h.y;this.cellLocation[n][0]=g+d/2,this.cellLocation[n][1]=c+m/2,this.radius[n]=Math.min(d,m),this.radiusSquared[n]=this.radius[n]*this.radius[n]}t.beginUpdate();try{for(var n=0;n<l;n++){this.dispX[n]=0,this.dispY[n]=0,this.isMoveable[n]=this.isVertexMovable(this.vertexArray[n]);var f=this.graph.getConnections(this.vertexArray[n],e),i=this.graph.getOpposites(f,this.vertexArray[n]);this.neighbours[n]=[];for(var C=0;C<i.length;C++){this.resetEdges&&this.graph.resetEdge(f[C]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(f[C],!1);var o=mxObjectIdentity.get(i[C]),v=this.indices[o];v!=null?this.neighbours[n][C]=v:this.neighbours[n][C]=n}}for(this.temperature=this.initialTemp,this.maxIterations==0&&(this.maxIterations=20*Math.sqrt(l)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}for(var w=null,S=null,n=0;n<this.vertexArray.length;n++){var a=this.vertexArray[n];if(this.isVertexMovable(a)){var h=this.getVertexBounds(a);if(h!=null){this.cellLocation[n][0]-=h.width/2,this.cellLocation[n][1]-=h.height/2;var g=this.graph.snap(Math.round(this.cellLocation[n][0])),c=this.graph.snap(Math.round(this.cellLocation[n][1]));this.setVertexLocation(a,g,c),w==null?w=g:w=Math.min(w,g),S==null?S=c:S=Math.min(S,c)}}}var T=-(w||0)+1,P=-(S||0)+1;s!=null&&(T+=s.x,P+=s.y),this.graph.moveCells(this.vertexArray,T,P)}finally{t.endUpdate()}}calcPositions(){for(var e=0;e<this.vertexArray.length;e++)if(this.isMoveable[e]){var t=Math.sqrt(this.dispX[e]*this.dispX[e]+this.dispY[e]*this.dispY[e]);t<.001&&(t=.001);var i=this.dispX[e]/t*Math.min(t,this.temperature),n=this.dispY[e]/t*Math.min(t,this.temperature);this.dispX[e]=0,this.dispY[e]=0,this.cellLocation[e][0]+=i,this.cellLocation[e][1]+=n}}calcAttraction(){for(var e=0;e<this.vertexArray.length;e++)for(var t=0;t<this.neighbours[e].length;t++){var i=this.neighbours[e][t];if(e!=i&&this.isMoveable[e]&&this.isMoveable[i]){var n=this.cellLocation[e][0]-this.cellLocation[i][0],s=this.cellLocation[e][1]-this.cellLocation[i][1],l=n*n+s*s-this.radiusSquared[e]-this.radiusSquared[i];l<this.minDistanceLimitSquared&&(l=this.minDistanceLimitSquared);var a=Math.sqrt(l),o=l/this.forceConstant,h=n/a*o,d=s/a*o;this.dispX[e]-=h,this.dispY[e]-=d,this.dispX[i]+=h,this.dispY[i]+=d}}}calcRepulsion(){for(var e=this.vertexArray.length,t=0;t<e;t++)for(var i=t;i<e;i++){if(!this.allowedToRun)return;if(i!=t&&this.isMoveable[t]&&this.isMoveable[i]){var n=this.cellLocation[t][0]-this.cellLocation[i][0],s=this.cellLocation[t][1]-this.cellLocation[i][1];n==0&&(n=.01+Math.random()),s==0&&(s=.01+Math.random());var l=Math.sqrt(n*n+s*s),a=l-this.radius[t]-this.radius[i];if(a>this.maxDistanceLimit)continue;a<this.minDistanceLimit&&(a=this.minDistanceLimit);var o=this.forceConstantSquared/a,h=n/l*o,d=s/l*o;this.dispX[t]+=h,this.dispY[t]+=d,this.dispX[i]-=h,this.dispY[i]-=d}}}reduceTemperature(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)}}class mxRadialTreeLayout extends mxCompactTreeLayout{constructor(e){super(e,!1),u(this,"angleOffset",.5),u(this,"rootx",0),u(this,"rooty",0),u(this,"levelDistance",120),u(this,"nodeDistance",10),u(this,"autoRadius",!1),u(this,"sortEdges",!1),u(this,"rowMinX",[]),u(this,"rowMaxX",[]),u(this,"rowMinCenX",[]),u(this,"rowMaxCenX",[]),u(this,"rowRadi",[]),u(this,"row",[])}isVertexIgnored(e){return super.isVertexIgnored(e)||this.graph.getConnections(e).length==0}execute(e,t){this.parent=e,this.useBoundingBox=!1,this.edgeRouting=!1,super.execute(e,t);var i=null,n=this.getVertexBounds(this.root);this.centerX=n.x+n.width/2,this.centerY=n.y+n.height/2;for(var s in this.visited){var l=this.getVertexBounds(this.visited[s]);i=i??l.clone(),i.add(l)}this.calcRowDims([this.node],0);for(var a=0,o=0,h=0;h<this.row.length;h++){var d=(this.centerX-this.rowMinX[h]-this.nodeDistance)/this.rowRadi[h],m=(this.rowMaxX[h]-this.centerX-this.nodeDistance)/this.rowRadi[h];a=Math.max(a,d),o=Math.max(o,m)}for(var h=0;h<this.row.length;h++)for(var g=this.centerX-this.nodeDistance-a*this.rowRadi[h],c=this.centerX+this.nodeDistance+o*this.rowRadi[h],f=c-g,C=0;C<this.row[h].length;C++){var v=this.row[h],w=v[C],l=this.getVertexBounds(w.cell),S=(l.x+l.width/2-g)/f,T=2*Math.PI*S;w.theta=T}for(var h=this.row.length-2;h>=0;h--)for(var v=this.row[h],C=0;C<v.length;C++){for(var w=v[C],P=w.child,L=0,k=0;P!=null;)k+=P.theta,L++,P=P.next;if(L>0){var G=k/L;if(G>w.theta&&C<v.length-1){var Y=v[C+1].theta;w.theta=Math.min(G,Y-Math.PI/10)}else if(G<w.theta&&C>0){var te=v[C-1].theta;w.theta=Math.max(G,te+Math.PI/10)}}}for(var h=0;h<this.row.length;h++)for(var C=0;C<this.row[h].length;C++){var v=this.row[h],w=v[C],l=this.getVertexBounds(w.cell);this.setVertexLocation(w.cell,this.centerX-l.width/2+this.rowRadi[h]*Math.cos(w.theta),this.centerY-l.height/2+this.rowRadi[h]*Math.sin(w.theta))}}calcRowDims(e,t){if(!(e==null||e.length==0)){this.rowMinX[t]=this.centerX,this.rowMaxX[t]=this.centerX,this.rowMinCenX[t]=this.centerX,this.rowMaxCenX[t]=this.centerX,this.row[t]=[];for(var i=!1,n=0;n<e.length;n++)for(var s=e[n]!=null?e[n].child:null;s!=null;){var l=s.cell,a=this.getVertexBounds(l);this.rowMinX[t]=Math.min(a.x,this.rowMinX[t]),this.rowMaxX[t]=Math.max(a.x+a.width,this.rowMaxX[t]),this.rowMinCenX[t]=Math.min(a.x+a.width/2,this.rowMinCenX[t]),this.rowMaxCenX[t]=Math.max(a.x+a.width/2,this.rowMaxCenX[t]),this.rowRadi[t]=a.y-this.getVertexBounds(this.root).y,s.child!=null&&(i=!0),this.row[t].push(s),s=s.next}i&&this.calcRowDims(this.row[t],t+1)}}}class mxHierarchicalEdgeStyle{}u(mxHierarchicalEdgeStyle,"ORTHOGONAL",1),u(mxHierarchicalEdgeStyle,"POLYLINE",2),u(mxHierarchicalEdgeStyle,"STRAIGHT",3),u(mxHierarchicalEdgeStyle,"CURVE",4);class mxHierarchicalLayoutStage{constructor(){}execute(e){}}class mxCoordinateAssignment extends mxHierarchicalLayoutStage{constructor(e,t,i,n,s,l){super(),u(this,"maxIterations",8),u(this,"prefHozEdgeSep",5),u(this,"prefVertEdgeOff",2),u(this,"minEdgeJetty",12),u(this,"channelBuffer",4),u(this,"jettyPositions",null),u(this,"limitX",null),u(this,"currentXDelta",null),u(this,"widestRank",null),u(this,"rankTopY",null),u(this,"rankBottomY",null),u(this,"widestRankValue",null),u(this,"rankWidths",null),u(this,"rankY",null),u(this,"fineTuning",!0),u(this,"nextLayerConnectedCache",null),u(this,"previousLayerConnectedCache",null),u(this,"groupPadding",10),this.layout=e,this.intraCellSpacing=t,this.interRankCellSpacing=i,this.orientation=n,this.initialX=s,this.parallelEdgeSpacing=l}printStatus(){var e=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var t=0;t<e.ranks.length;t++){mxLog.write("Rank ",t," : ");for(var i=e.ranks[t],n=0;n<i.length;n++){var s=i[n];mxLog.write(s.getGeneralPurposeVariable(t),"  ")}mxLog.writeln()}mxLog.writeln("====================================")}execute(e){this.jettyPositions=Object();var t=this.layout.getModel();this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),t),this.fineTuning&&this.minNode(t);var i=1e8;if(this.fineTuning)for(var n=0;n<this.maxIterations;n++){if(n!=0&&(this.medianPos(n,t),this.minNode(t)),this.currentXDelta<i){for(var s=0;s<t.ranks.length;s++)for(var l=t.ranks[s],a=0;a<l.length;a++){var o=l[a];o.setX(s,o.getGeneralPurposeVariable(s))}i=this.currentXDelta}else for(var s=0;s<t.ranks.length;s++)for(var l=t.ranks[s],a=0;a<l.length;a++){var o=l[a];o.setGeneralPurposeVariable(s,o.getX(s))}this.minPath(this.layout.getGraph(),t),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),t)}minNode(e){for(var t=[],i=new mxDictionary,n=[],s=0;s<=e.maxRank;s++){n[s]=e.ranks[s];for(var l=0;l<n[s].length;l++){var a=n[s][l],o=new WeightedCellSorter(a,s);o.rankIndex=l,o.visited=!0,t.push(o),i.put(a,o)}}for(var h=t.length*10,d=0,m=1;t.length>0&&d<=h;){var g=t.shift(),c=g.cell,f=g.weightedValue,C=parseInt(g.rankIndex),v=c.getNextLayerConnectedCells(f),w=c.getPreviousLayerConnectedCells(f),S=v.length,T=w.length,P=this.medianXValue(v,f+1),L=this.medianXValue(w,f-1),k=S+T,G=c.getGeneralPurposeVariable(f),Y=G;k>0&&(Y=(P*S+L*T)/k);var te=!1;if(Y<G-m)if(C==0)c.setGeneralPurposeVariable(f,Y),te=!0;else{var ie=n[f][C-1],ne=ie.getGeneralPurposeVariable(f);ne=ne+ie.width/2+this.intraCellSpacing+c.width/2,ne<Y?(c.setGeneralPurposeVariable(f,Y),te=!0):ne<c.getGeneralPurposeVariable(f)-m&&(c.setGeneralPurposeVariable(f,ne),te=!0)}else if(Y>G+m){var q=n[f].length;if(C==q-1)c.setGeneralPurposeVariable(f,Y),te=!0;else{var oe=n[f][C+1],le=oe.getGeneralPurposeVariable(f);le=le-oe.width/2-this.intraCellSpacing-c.width/2,le>Y?(c.setGeneralPurposeVariable(f,Y),te=!0):le>c.getGeneralPurposeVariable(f)+m&&(c.setGeneralPurposeVariable(f,le),te=!0)}}if(te){for(var s=0;s<v.length;s++){var Z=v[s],B=i.get(Z);B!=null&&B.visited==!1&&(B.visited=!0,t.push(B))}for(var s=0;s<w.length;s++){var Z=w[s],B=i.get(Z);B!=null&&B.visited==!1&&(B.visited=!0,t.push(B))}}g.visited=!1,d++}}medianPos(e,t){var i=e%2==0;if(i)for(var n=t.maxRank;n>0;n--)this.rankMedianPosition(n-1,t,n);else for(var n=0;n<t.maxRank-1;n++)this.rankMedianPosition(n+1,t,n)}rankMedianPosition(e,t,i){for(var n=t.ranks[e],s=[],l=new Object,a=0;a<n.length;a++){var o=n[a];s[a]=new WeightedCellSorter,s[a].cell=o,s[a].rankIndex=a,l[o.id]=s[a];var h=null;i<e?h=o.getPreviousLayerConnectedCells(e):h=o.getNextLayerConnectedCells(e),s[a].weightedValue=this.calculatedWeightedValue(o,h)}s.sort(WeightedCellSorter.compare);for(var a=0;a<s.length;a++){var d=0,m=s[a].cell,h=null,g=0;i<e?h=m.getPreviousLayerConnectedCells(e).slice():h=m.getNextLayerConnectedCells(e).slice(),h!=null&&(d=h.length,d>0?g=this.medianXValue(h,i):g=m.getGeneralPurposeVariable(e));for(var c=0,f=-1e8,C=s[a].rankIndex-1;C>=0;){var v=l[n[C].id];if(v!=null){var w=v.cell;v.visited?(f=w.getGeneralPurposeVariable(e)+w.width/2+this.intraCellSpacing+c+m.width/2,C=-1):(c+=w.width+this.intraCellSpacing,C--)}}for(var S=0,T=1e8,C=s[a].rankIndex+1;C<s.length;){var v=l[n[C].id];if(v!=null){var P=v.cell;v.visited?(T=P.getGeneralPurposeVariable(e)-P.width/2-this.intraCellSpacing-S-m.width/2,C=s.length):(S+=P.width+this.intraCellSpacing,C++)}}g>=f&&g<=T?m.setGeneralPurposeVariable(e,g):g<f?(m.setGeneralPurposeVariable(e,f),this.currentXDelta+=f-g):g>T&&(m.setGeneralPurposeVariable(e,T),this.currentXDelta+=g-T),s[a].visited=!0}}calculatedWeightedValue(e,t){for(var i=0,n=0;n<t.length;n++){var s=t[n];e.isVertex()&&s.isVertex()?i++:e.isEdge()&&s.isEdge()?i+=8:i+=2}return i}medianXValue(e,t){if(e.length==0)return 0;for(var i=[],n=0;n<e.length;n++)i[n]=e[n].getGeneralPurposeVariable(t);if(i.sort(function(o,h){return o-h}),e.length%2==1)return i[Math.floor(e.length/2)];var s=e.length/2,l=i[s-1],a=i[s];return(l+a)/2}initialCoords(e,t){this.calculateWidestRank(e,t);for(var i=this.widestRank;i>=0;i--)i<t.maxRank&&this.rankCoordinates(i,e,t);for(var i=this.widestRank+1;i<=t.maxRank;i++)i>0&&this.rankCoordinates(i,e,t)}rankCoordinates(e,t,i){for(var n=i.ranks[e],s=0,l=this.initialX+(this.widestRankValue-this.rankWidths[e])/2,a=!1,o=0;o<n.length;o++){var h=n[o];if(h.isVertex()){var d=this.layout.getVertexBounds(h.cell);d!=null?this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(h.width=d.width,h.height=d.height):(h.width=d.height,h.height=d.width):a=!0,s=Math.max(s,h.height)}else if(h.isEdge()){var m=1;h.edges!=null?m=h.edges.length:mxLog.warn("edge.edges is null"),h.width=(m-1)*this.parallelEdgeSpacing}l+=h.width/2,h.setX(e,l),h.setGeneralPurposeVariable(e,l),l+=h.width/2,l+=this.intraCellSpacing}a==!0&&mxLog.warn("At least one cell has no bounds")}calculateWidestRank(e,t){var i=-this.interRankCellSpacing,n=0;this.rankWidths=[],this.rankY=[];for(var s=t.maxRank;s>=0;s--){for(var l=0,a=t.ranks[s],o=this.initialX,h=!1,d=0;d<a.length;d++){var m=a[d];if(m.isVertex()){var g=this.layout.getVertexBounds(m.cell);g!=null?this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(m.width=g.width,m.height=g.height):(m.width=g.height,m.height=g.width):h=!0,l=Math.max(l,m.height)}else if(m.isEdge()){var c=1;m.edges!=null?c=m.edges.length:mxLog.warn("edge.edges is null"),m.width=(c-1)*this.parallelEdgeSpacing}o+=m.width/2,m.setX(s,o),m.setGeneralPurposeVariable(s,o),o+=m.width/2,o+=this.intraCellSpacing,o>this.widestRankValue&&(this.widestRankValue=o,this.widestRank=s),this.rankWidths[s]=o}h==!0&&mxLog.warn("At least one cell has no bounds"),this.rankY[s]=i;var f=l/2+n/2+this.interRankCellSpacing;n=l,this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_WEST?i+=f:i-=f;for(var d=0;d<a.length;d++){var C=a[d];C.setY(s,i)}}}minPath(e,t){for(var i=t.edgeMapper.getValues(),n=0;n<i.length;n++){var s=i[n];if(!(s.maxRank-s.minRank-1<1)){for(var l=s.getGeneralPurposeVariable(s.minRank+1),a=!0,o=0,h=s.minRank+2;h<s.maxRank;h++){var d=s.getGeneralPurposeVariable(h);l!=d?(a=!1,l=d):o++}if(!a){for(var m=0,g=0,c=[],f=[],C=s.getGeneralPurposeVariable(s.minRank+1),h=s.minRank+1;h<s.maxRank-1;h++){var v=s.getX(h+1);C==v||this.repositionValid(t,s,h+1,C)?(c[h-s.minRank-1]=C,m++):(c[h-s.minRank-1]=v,C=v)}C=s.getX(h);for(var h=s.maxRank-1;h>s.minRank+1;h--){var v=s.getX(h-1);C==v||this.repositionValid(t,s,h-1,C)?(f[h-s.minRank-2]=C,g++):(f[h-s.minRank-2]=s.getX(h-1),C=v)}if(g>o||m>o){if(g>=m)for(var h=s.maxRank-2;h>s.minRank;h--)s.setX(h,f[h-s.minRank-1]);else if(m>g)for(var h=s.minRank+2;h<s.maxRank;h++)s.setX(h,c[h-s.minRank-2])}}}}}repositionValid(e,t,i,n){for(var s=e.ranks[i],l=-1,a=0;a<s.length;a++)if(t==s[a]){l=a;break}if(l<0)return!1;var o=t.getGeneralPurposeVariable(i);if(n<o){if(l==0)return!0;var h=s[l-1],d=h.getGeneralPurposeVariable(i);return d=d+h.width/2+this.intraCellSpacing+t.width/2,d<=n}else if(n>o){if(l==s.length-1)return!0;var m=s[l+1],g=m.getGeneralPurposeVariable(i);return g=g-m.width/2-this.intraCellSpacing-t.width/2,g>=n}return!0}setCellLocations(e,t){this.rankTopY=[],this.rankBottomY=[];for(var i=0;i<t.ranks.length;i++)this.rankTopY[i]=Number.MAX_VALUE,this.rankBottomY[i]=-Number.MAX_VALUE;for(var n=t.vertexMapper.getValues(),i=0;i<n.length;i++)this.setVertexLocation(n[i]);(this.layout.edgeStyle==mxHierarchicalEdgeStyle.ORTHOGONAL||this.layout.edgeStyle==mxHierarchicalEdgeStyle.POLYLINE||this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE)&&this.localEdgeProcessing(t);for(var s=t.edgeMapper.getValues(),i=0;i<s.length;i++)this.setEdgePosition(s[i])}localEdgeProcessing(e){for(var t=0;t<e.ranks.length;t++)for(var i=e.ranks[t],n=0;n<i.length;n++){var s=i[n];if(s.isVertex())for(var l=s.getPreviousLayerConnectedCells(t),a=t-1,o=0;o<2;o++){if(a>-1&&a<e.ranks.length&&l!=null&&l.length>0){for(var h=[],d=0;d<l.length;d++){var m=new WeightedCellSorter(l[d],l[d].getX(a));h.push(m)}h.sort(WeightedCellSorter.compare);for(var g=s.x[0]-s.width/2,c=g+s.width,f=0,C=[],d=0;d<h.length;d++){var v=h[d].cell,w;if(v.isVertex()){o==0?w=s.connectsAsSource:w=s.connectsAsTarget;for(var S=0;S<w.length;S++)(w[S].source==v||w[S].target==v)&&(f+=w[S].edges.length,C.push(w[S]))}else f+=v.edges.length,C.push(v)}var T=(f+1)*this.prefHozEdgeSep;s.width>T+2*this.prefHozEdgeSep&&(g+=this.prefHozEdgeSep,c-=this.prefHozEdgeSep);for(var P=c-g,L=P/f,k=g+L/2,G=this.minEdgeJetty-this.prefVertEdgeOff,d=0;d<C.length;d++){var Y=C[d].edges.length,te=this.jettyPositions[C[d].ids[0]];te==null&&(te=[],this.jettyPositions[C[d].ids[0]]=te),d<f/2?G+=this.prefVertEdgeOff:d>f/2&&(G-=this.prefVertEdgeOff);for(var ie=0;ie<Y;ie++)te[ie*4+o*2]=k,k+=L,te[ie*4+o*2+1]=G}}l=s.getNextLayerConnectedCells(t),a=t+1}}}setEdgePosition(e){var t=0;if(e.temp[0]!=101207){var i=e.maxRank,n=e.minRank;i==n&&(i=e.source.maxRank,n=e.target.minRank);for(var s=0,l=this.jettyPositions[e.ids[0]],a=e.isReversed?e.target.cell:e.source.cell,o=this.layout.graph,h=this.orientation==mxConstants$1.DIRECTION_EAST||this.orientation==mxConstants$1.DIRECTION_SOUTH,d=0;d<e.edges.length;d++){var m=e.edges[d],g=this.layout.getVisibleTerminal(m,!0),c=[],f=e.isReversed;if(g!=a&&(f=!f),l!=null){var C=f?2:0,v=f?h?this.rankBottomY[n]:this.rankTopY[n]:h?this.rankTopY[i]:this.rankBottomY[i],w=l[s*4+1+C];f!=h&&(w=-w),v+=w;var S=l[s*4+C],T=o.model.getTerminal(m,!0);if(this.layout.isPort(T)&&o.model.getParent(T)==g){var P=o.view.getState(T);P!=null?S=P.x:S=g.geometry.x+e.source.width*T.geometry.x}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(c.push(new mxPoint(S,v)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint(S,v+w))):(c.push(new mxPoint(v,S)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint(v+w,S)))}var L=e.x.length-1,k=-1,G=-1,Y=e.maxRank-1;f&&(L=0,k=e.x.length,G=1,Y=e.minRank+1);for(var te=L;e.maxRank!=e.minRank&&te!=k;te+=G){var ie=e.x[te]+t,ne=(this.rankTopY[Y]+this.rankBottomY[Y+1])/2,q=(this.rankTopY[Y-1]+this.rankBottomY[Y])/2;if(f){var oe=ne;ne=q,q=oe}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(c.push(new mxPoint(ie,ne)),c.push(new mxPoint(ie,q))):(c.push(new mxPoint(ne,ie)),c.push(new mxPoint(q,ie))),this.limitX=Math.max(this.limitX,ie),Y+=G}if(l!=null){var C=f?2:0,le=f?h?this.rankTopY[i]:this.rankBottomY[i]:h?this.rankBottomY[n]:this.rankTopY[n],w=l[s*4+3-C];f!=h&&(w=-w);var v=le-w,S=l[s*4+2-C],Z=o.model.getTerminal(m,!1),B=this.layout.getVisibleTerminal(m,!1);if(this.layout.isPort(Z)&&o.model.getParent(Z)==B){var P=o.view.getState(Z);P!=null?S=P.x:S=B.geometry.x+e.target.width*Z.geometry.x}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint(S,v-w)),c.push(new mxPoint(S,v))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint(v-w,S)),c.push(new mxPoint(v,S)))}e.isReversed&&this.processReversedEdge(e,m),this.layout.setEdgePoints(m,c),t==0?t=this.parallelEdgeSpacing:t>0?t=-t:t=-t+this.parallelEdgeSpacing,s++}e.temp[0]=101207}}setVertexLocation(e){var t=e.cell,i=e.x[0]-e.width/2,n=e.y[0]-e.height/2;this.rankTopY[e.minRank]=Math.min(this.rankTopY[e.minRank],n),this.rankBottomY[e.minRank]=Math.max(this.rankBottomY[e.minRank],n+e.height),this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?this.layout.setVertexLocation(t,i,n):this.layout.setVertexLocation(t,n,i),this.limitX=Math.max(this.limitX,i+e.width)}processReversedEdge(e,t){}}class MedianCellSorter{constructor(){u(this,"medianValue",0),u(this,"cell",!1)}static compare(e,t){return e!=null&&t!=null?t.medianValue>e.medianValue?-1:t.medianValue<e.medianValue?1:0:0}}class mxMedianHybridCrossingReduction extends mxHierarchicalLayoutStage{constructor(e){super(),u(this,"maxIterations",24),u(this,"nestedBestRanks",null),u(this,"currentBestCrossings",0),u(this,"iterationsWithoutImprovement",0),u(this,"maxNoImprovementIterations",2),this.layout=e}execute(e){var t=this.layout.getModel();this.nestedBestRanks=[];for(var i=0;i<t.ranks.length;i++)this.nestedBestRanks[i]=t.ranks[i].slice();for(var n=0,s=this.calculateCrossings(t),i=0;i<this.maxIterations&&n<this.maxNoImprovementIterations;i++){this.weightedMedian(i,t),this.transpose(i,t);var l=this.calculateCrossings(t);if(l<s){s=l,n=0;for(var a=0;a<this.nestedBestRanks.length;a++)for(var o=t.ranks[a],h=0;h<o.length;h++){var d=o[h];this.nestedBestRanks[a][d.getGeneralPurposeVariable(a)]=d}}else{n++;for(var a=0;a<this.nestedBestRanks.length;a++)for(var o=t.ranks[a],h=0;h<o.length;h++){var d=o[h];d.setGeneralPurposeVariable(a,h)}}if(s==0)break}for(var m=[],g=[],i=0;i<t.maxRank+1;i++)g[i]=[],m[i]=g[i];for(var i=0;i<this.nestedBestRanks.length;i++)for(var a=0;a<this.nestedBestRanks[i].length;a++)g[i].push(this.nestedBestRanks[i][a]);t.ranks=m}calculateCrossings(e){for(var t=e.ranks.length,i=0,n=1;n<t;n++)i+=this.calculateRankCrossing(n,e);return i}calculateRankCrossing(e,t){for(var i=0,n=t.ranks[e],s=t.ranks[e-1],l=[],a=0;a<n.length;a++){for(var o=n[a],h=o.getGeneralPurposeVariable(e),d=o.getPreviousLayerConnectedCells(e),m=[],g=0;g<d.length;g++){var c=d[g],f=c.getGeneralPurposeVariable(e-1);m.push(f)}m.sort(function(L,k){return L-k}),l[h]=m}for(var C=[],a=0;a<l.length;a++)C=C.concat(l[a]);for(var v=1;v<s.length;)v<<=1;var w=2*v-1;v-=1;for(var S=[],a=0;a<w;++a)S[a]=0;for(var a=0;a<C.length;a++){var T=C[a],P=T+v;for(++S[P];P>0;)P%2&&(i+=S[P+1]),P=P-1>>1,++S[P]}return i}transpose(e,t){for(var i=!0,n=0,s=10;i&&n++<s;){var l=e%2==1&&n%2==1;i=!1;for(var a=0;a<t.ranks.length;a++){for(var o=t.ranks[a],h=[],d=0;d<o.length;d++){var m=o[d],g=m.getGeneralPurposeVariable(a);g<0&&(g=d),h[g]=m}for(var c=null,f=null,C=null,v=null,w=null,S=null,T=null,P=null,L=null,k=null,d=0;d<o.length-1;d++){if(d==0){L=h[d],c=L.getNextLayerConnectedCells(a),f=L.getPreviousLayerConnectedCells(a),w=[],S=[];for(var G=0;G<c.length;G++)w[G]=c[G].getGeneralPurposeVariable(a+1);for(var G=0;G<f.length;G++)S[G]=f[G].getGeneralPurposeVariable(a-1)}else c=C,f=v,w=T,S=P,L=k;k=h[d+1],C=k.getNextLayerConnectedCells(a),v=k.getPreviousLayerConnectedCells(a),T=[],P=[];for(var G=0;G<C.length;G++)T[G]=C[G].getGeneralPurposeVariable(a+1);for(var G=0;G<v.length;G++)P[G]=v[G].getGeneralPurposeVariable(a-1);for(var Y=0,te=0,G=0;G<w.length;G++)for(var ie=0;ie<T.length;ie++)w[G]>T[ie]&&Y++,w[G]<T[ie]&&te++;for(var G=0;G<S.length;G++)for(var ie=0;ie<P.length;ie++)S[G]>P[ie]&&Y++,S[G]<P[ie]&&te++;if(te<Y||te==Y&&l){var ne=L.getGeneralPurposeVariable(a);L.setGeneralPurposeVariable(a,k.getGeneralPurposeVariable(a)),k.setGeneralPurposeVariable(a,ne),C=c,v=f,T=w,P=S,k=L,l||(i=!0)}}}}}weightedMedian(e,t){var i=e%2==0;if(i)for(var n=t.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(var n=1;n<t.maxRank;n++)this.medianRank(n,i)}medianRank(e,t){for(var i=this.nestedBestRanks[e].length,n=[],s=[],l=0;l<i;l++){var a=this.nestedBestRanks[e][l],o=new MedianCellSorter;o.cell=a;var h;t?h=a.getNextLayerConnectedCells(e):h=a.getPreviousLayerConnectedCells(e);var d;t?d=e+1:d=e-1,h!=null&&h.length!=0?(o.medianValue=this.medianValue(h,d),n.push(o)):s[a.getGeneralPurposeVariable(e)]=!0}n.sort(MedianCellSorter.compare);for(var l=0;l<i;l++)if(s[l]==null){var a=n.shift().cell;a.setGeneralPurposeVariable(e,l)}}medianValue(e,t){for(var i=[],n=0,s=0;s<e.length;s++){var l=e[s];i[n++]=l.getGeneralPurposeVariable(t)}if(i.sort(function(d,m){return d-m}),n%2==1)return i[Math.floor(n/2)];if(n==2)return(i[0]+i[1])/2;var a=n/2,o=i[a-1]-i[0],h=i[n-1]-i[a];return(i[a-1]*h+i[a]*o)/(o+h)}}class mxMinimumCycleRemover extends mxHierarchicalLayoutStage{constructor(e){super(),this.layout=e}execute(e){for(var t=this.layout.getModel(),i=new Object,n=t.vertexMapper.getValues(),s=new Object,l=0;l<n.length;l++)s[n[l].id]=n[l];var a=null;if(t.roots!=null){var o=t.roots;a=[];for(var l=0;l<o.length;l++)a[l]=t.vertexMapper.get(o[l])}t.visit(function(d,m,g,c,f){m.isAncestor(d)&&(g.invert(),mxUtils$1.remove(g,d.connectsAsSource),d.connectsAsTarget.push(g),mxUtils$1.remove(g,m.connectsAsTarget),m.connectsAsSource.push(g)),i[m.id]=m,delete s[m.id]},a,!0,null);var h=mxUtils$1.clone(i,null,!0);t.visit(function(d,m,g,c,f){m.isAncestor(d)&&(g.invert(),mxUtils$1.remove(g,d.connectsAsSource),m.connectsAsSource.push(g),d.connectsAsTarget.push(g),mxUtils$1.remove(g,m.connectsAsTarget)),i[m.id]=m,delete s[m.id]},s,!0,h)}}class mxGraphAbstractHierarchyCell{constructor(){u(this,"maxRank",-1),u(this,"minRank",-1),u(this,"width",0),u(this,"height",0),u(this,"nextLayerConnectedCells",null),u(this,"previousLayerConnectedCells",null),this.x=[],this.y=[],this.temp=[]}getNextLayerConnectedCells(e){return null}getPreviousLayerConnectedCells(e){return null}isEdge(){return!1}isVertex(){return!1}getGeneralPurposeVariable(e){return null}setGeneralPurposeVariable(e,t){return null}setX(e,t){this.isVertex()?this.x[0]=t:this.isEdge()&&(this.x[e-this.minRank-1]=t)}getX(e){return this.isVertex()?this.x[0]:this.isEdge()?this.x[e-this.minRank-1]:0}setY(e,t){this.isVertex()?this.y[0]=t:this.isEdge()&&(this.y[e-this.minRank-1]=t)}}class mxGraphHierarchyEdge extends mxGraphAbstractHierarchyCell{constructor(e){super(e),u(this,"source",null),u(this,"target",null),u(this,"isReversed",!1),this.edges=e,this.ids=[];for(var t=0;t<e.length;t++)this.ids.push(mxObjectIdentity.get(e[t]))}invert(e){var t=this.source;this.source=this.target,this.target=t,this.isReversed=!this.isReversed}getNextLayerConnectedCells(e){if(this.nextLayerConnectedCells==null){this.nextLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.nextLayerConnectedCells[t]=[],t==this.temp.length-1?this.nextLayerConnectedCells[t].push(this.source):this.nextLayerConnectedCells[t].push(this)}return this.nextLayerConnectedCells[e-this.minRank-1]}getPreviousLayerConnectedCells(e){if(this.previousLayerConnectedCells==null){this.previousLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.previousLayerConnectedCells[t]=[],t==0?this.previousLayerConnectedCells[t].push(this.target):this.previousLayerConnectedCells[t].push(this)}return this.previousLayerConnectedCells[e-this.minRank-1]}isEdge(){return!0}getGeneralPurposeVariable(e){return this.temp[e-this.minRank-1]}setGeneralPurposeVariable(e,t){this.temp[e-this.minRank-1]=t}getCoreCell(){return this.edges!=null&&this.edges.length>0?this.edges[0]:null}}class mxGraphHierarchyNode extends mxGraphAbstractHierarchyCell{constructor(e){super(e),u(this,"hashCode",!1),this.cell=e,this.id=mxObjectIdentity.get(e),this.connectsAsTarget=[],this.connectsAsSource=[]}getRankValue(e){return this.maxRank}getNextLayerConnectedCells(e){if(this.nextLayerConnectedCells==null){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsTarget.length;t++){var i=this.connectsAsTarget[t];i.maxRank==-1||i.maxRank==e+1?this.nextLayerConnectedCells[0].push(i.source):this.nextLayerConnectedCells[0].push(i)}}return this.nextLayerConnectedCells[0]}getPreviousLayerConnectedCells(e){if(this.previousLayerConnectedCells==null){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsSource.length;t++){var i=this.connectsAsSource[t];i.minRank==-1||i.minRank==e-1?this.previousLayerConnectedCells[0].push(i.target):this.previousLayerConnectedCells[0].push(i)}}return this.previousLayerConnectedCells[0]}isVertex(){return!0}getGeneralPurposeVariable(e){return this.temp[0]}setGeneralPurposeVariable(e,t){this.temp[0]=t}isAncestor(e){if(e!=null&&this.hashCode!=null&&e.hashCode!=null&&this.hashCode.length<e.hashCode.length){if(this.hashCode==e.hashCode)return!0;if(this.hashCode==null||this.hashCode==null)return!1;for(var t=0;t<this.hashCode.length;t++)if(this.hashCode[t]!=e.hashCode[t])return!1;return!0}return!1}getCoreCell(){return this.cell}}class mxGraphHierarchyModel{constructor(e,t,i,n,s){u(this,"ranks",null),u(this,"dfsCount",0),u(this,"SOURCESCANSTARTRANK",1e8),e.getGraph(),this.tightenToSource=s,this.roots=i,this.parent=n,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var l=[];t==null&&(t=this.graph.getChildVertices(n)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,t,l);for(var a=0;a<t.length;a++){for(var o=l[a].connectsAsSource,h=0;h<o.length;h++){var d=o[h],m=d.edges;if(m!=null&&m.length>0){var g=m[0],c=e.getVisibleTerminal(g,!1),f=this.vertexMapper.get(c);l[a]==f&&(c=e.getVisibleTerminal(g,!0),f=this.vertexMapper.get(c)),f!=null&&l[a]!=f&&(d.target=f,f.connectsAsTarget.length==0&&(f.connectsAsTarget=[]),mxUtils$1.indexOf(f.connectsAsTarget,d)<0&&f.connectsAsTarget.push(d))}}l[a].temp[0]=1}}createInternalCells(e,t,i){for(var n=e.getGraph(),s=0;s<t.length;s++){i[s]=new mxGraphHierarchyNode(t[s]),this.vertexMapper.put(t[s],i[s]);var l=e.getEdges(t[s]);i[s].connectsAsSource=[];for(var a=0;a<l.length;a++){var o=e.getVisibleTerminal(l[a],!1);if(o!=t[s]&&e.graph.model.isVertex(o)&&!e.isVertexIgnored(o)){var h=e.getEdgesBetween(t[s],o,!1),d=e.getEdgesBetween(t[s],o,!0);if(h!=null&&h.length>0&&this.edgeMapper.get(h[0])==null&&d.length*2>=h.length){for(var m=new mxGraphHierarchyEdge(h),g=0;g<h.length;g++){var c=h[g];this.edgeMapper.put(c,m),n.resetEdge(c),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(c,!1),e.setOrthogonalEdge(c,!0))}m.source=i[s],mxUtils$1.indexOf(i[s].connectsAsSource,m)<0&&i[s].connectsAsSource.push(m)}}}i[s].temp[0]=0}}initialRank(){var e=[];if(this.roots!=null)for(var t=0;t<this.roots.length;t++){var i=this.vertexMapper.get(this.roots[t]);i!=null&&e.push(i)}for(var n=this.vertexMapper.getValues(),t=0;t<n.length;t++)n[t].temp[0]=-1;for(var s=e.slice();e.length>0;){var i=e[0],l,a;l=i.connectsAsTarget,a=i.connectsAsSource;for(var o=!0,h=this.SOURCESCANSTARTRANK,t=0;t<l.length;t++){var d=l[t];if(d.temp[0]==5270620){var m=d.source;h=Math.min(h,m.temp[0]-1)}else{o=!1;break}}if(o){if(i.temp[0]=h,this.maxRank=Math.min(this.maxRank,h),a!=null)for(var t=0;t<a.length;t++){var d=a[t];d.temp[0]=5270620;var m=d.target;m.temp[0]==-1&&(e.push(m),m.temp[0]=-2)}e.shift()}else{var g=e.shift();if(e.push(i),g==i&&e.length==1)break}}for(var t=0;t<n.length;t++)n[t].temp[0]-=this.maxRank;for(var t=0;t<s.length;t++)for(var i=s[t],c=0,l=i.connectsAsSource,f=0;f<l.length;f++){var d=l[f],m=d.target;i.temp[0]=Math.max(c,m.temp[0]+1),c=i.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank}fixRanks(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var i=null;if(this.roots!=null){var n=this.roots;i=[];for(var t=0;t<n.length;t++){var s=n[t],l=this.vertexMapper.get(s);i[t]=l}}this.visit(function(a,o,h,d,m){if(m==0&&o.maxRank<0&&o.minRank<0&&(e[o.temp[0]].push(o),o.maxRank=o.temp[0],o.minRank=o.temp[0],o.temp[0]=e[o.maxRank].length-1),a!=null&&h!=null){var g=a.maxRank-o.maxRank;if(g>1){h.maxRank=a.maxRank,h.minRank=o.maxRank,h.temp=[],h.x=[],h.y=[];for(var c=h.minRank+1;c<h.maxRank;c++)e[c].push(h),h.setGeneralPurposeVariable(c,e[c].length-1)}}},i,!1,null)}visit(e,t,i,n){if(t!=null){for(var s=0;s<t.length;s++){var l=t[s];l!=null&&(n==null&&(n=new Object),i?(l.hashCode=[],l.hashCode[0]=this.dfsCount,l.hashCode[1]=s,this.extendedDfs(null,l,null,e,n,l.hashCode,s,0)):this.dfs(null,l,null,e,n,0))}this.dfsCount++}}dfs(e,t,i,n,s,l){if(t!=null){var a=t.id;if(s[a]==null){s[a]=t,n(e,t,i,l,0);for(var o=t.connectsAsSource.slice(),h=0;h<o.length;h++){var d=o[h],m=d.target;this.dfs(t,m,d,n,s,l+1)}}else n(e,t,i,l,1)}}extendedDfs(e,t,i,n,s,l,a,o){if(t!=null){if(e!=null&&(t.hashCode==null||t.hashCode[0]!=e.hashCode[0])){var h=e.hashCode.length+1;t.hashCode=e.hashCode.slice(),t.hashCode[h-1]=a}var d=t.id;if(s[d]==null){s[d]=t,n(e,t,i,o,0);for(var m=t.connectsAsSource.slice(),g=0;g<m.length;g++){var c=m[g],f=c.target;this.extendedDfs(t,f,c,n,s,t.hashCode,g,o+1)}}else n(e,t,i,o,1)}}}class mxHierarchicalLayout extends mxGraphLayout{constructor(e,t,i){super(e),u(this,"roots",null),u(this,"resizeParent",!1),u(this,"maintainParentLocation",!1),u(this,"moveParent",!1),u(this,"parentBorder",0),u(this,"intraCellSpacing",30),u(this,"interRankCellSpacing",100),u(this,"interHierarchySpacing",60),u(this,"parallelEdgeSpacing",10),u(this,"fineTuning",!0),u(this,"tightenToSource",!0),u(this,"disableEdgeStyle",!0),u(this,"traverseAncestors",!0),u(this,"model",null),u(this,"edgesCache",null),u(this,"edgeSourceTermCache",null),u(this,"edgesTargetTermCache",null),u(this,"edgeStyle",mxHierarchicalEdgeStyle.POLYLINE),this.orientation=t??mxConstants$1.DIRECTION_NORTH,this.deterministic=i??!0}getModel(){return this.model}execute(e,t){this.parent=e;var i=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,t!=null&&!(t instanceof Array)&&(t=[t]),!(t==null&&e==null)){if(this.parentX=null,this.parentY=null,e!=this.root&&i.isVertex(e)!=null&&this.maintainParentLocation){var n=this.graph.getCellGeometry(e);n!=null&&(this.parentX=n.x,this.parentY=n.y)}if(t!=null){for(var s=[],l=0;l<t.length;l++){var a=e!=null?i.isAncestor(e,t[l]):!0;a&&i.isVertex(t[l])&&s.push(t[l])}this.roots=s}i.beginUpdate();try{if(this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),this.parentX!=null&&this.parentY!=null){var n=this.graph.getCellGeometry(e);n!=null&&(n=n.clone(),n.x=this.parentX,n.y=this.parentY,i.setGeometry(e,n))}}finally{i.endUpdate()}}}findRoots(e,t){var i=[];if(e!=null&&t!=null){var n=this.graph.model,s=null,l=-1e5;for(var a in t){var o=t[a];if(n.isVertex(o)&&this.graph.isCellVisible(o)){for(var h=this.getEdges(o),d=0,m=0,g=0;g<h.length;g++){var c=this.getVisibleTerminal(h[g],!0);c==o?d++:m++}m==0&&d>0&&i.push(o);var f=d-m;f>l&&(l=f,s=o)}}i.length==0&&s!=null&&i.push(s)}return i}getEdges(e){var t=this.edgesCache.get(e);if(t!=null)return t;for(var i=this.graph.model,n=[],s=this.graph.isCellCollapsed(e),l=i.getChildCount(e),a=0;a<l;a++){var o=i.getChildAt(e,a);(this.isPort(o)||s||!this.graph.isCellVisible(o))&&(n=n.concat(i.getEdges(o,!0,!0)))}n=n.concat(i.getEdges(e,!0,!0));for(var h=[],a=0;a<n.length;a++){var d=this.getVisibleTerminal(n[a],!0),m=this.getVisibleTerminal(n[a],!1);(d==m||d!=m&&(m==e&&(this.parent==null||this.isAncestor(this.parent,d,this.traverseAncestors))||d==e&&(this.parent==null||this.isAncestor(this.parent,m,this.traverseAncestors))))&&h.push(n[a])}return this.edgesCache.put(e,h),h}getVisibleTerminal(e,t){var i=this.edgesTargetTermCache;t&&(i=this.edgeSourceTermCache);var n=i.get(e);if(n!=null)return n;var s=this.graph.view.getState(e),l=s!=null?s.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t);return l==null&&(l=s!=null?s.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t)),l!=null&&(this.isPort(l)&&(l=this.graph.model.getParent(l)),i.put(e,l)),l}run(e){var t=[],i=[];if(this.roots==null&&e!=null){var n=Object();this.filterDescendants(e,n),this.roots=[];var s=!0;for(var l in n)if(n[l]!=null){s=!1;break}for(;!s;){for(var a=this.findRoots(e,n),o=0;o<a.length;o++){var h=Object();t.push(h),this.traverse(a[o],!0,null,i,h,t,n)}for(var o=0;o<a.length;o++)this.roots.push(a[o]);s=!0;for(var l in n)if(n[l]!=null){s=!1;break}}}else for(var o=0;o<this.roots.length;o++){var h=Object();t.push(h),this.traverse(this.roots[o],!0,null,i,h,t,null)}for(var d=0,o=0;o<t.length;o++){var h=t[o],m=[];for(var l in h)m.push(h[l]);this.model=new mxGraphHierarchyModel(this,m,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),d=this.placementStage(d,e)}}filterDescendants(e,t){var i=this.graph.model;if(i.isVertex(e)&&e!=this.parent&&this.graph.isCellVisible(e)&&(t[mxObjectIdentity.get(e)]=e),this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var n=i.getChildCount(e),s=0;s<n;s++){var l=i.getChildAt(e,s);this.isPort(l)||this.filterDescendants(l,t)}}isPort(e){return e!=null&&e.geometry!=null?e.geometry.relative:!1}getEdgesBetween(e,t,i){i=i??!1;for(var n=this.getEdges(e),s=[],l=0;l<n.length;l++){var a=this.getVisibleTerminal(n[l],!0),o=this.getVisibleTerminal(n[l],!1);(a==e&&o==t||!i&&a==t&&o==e)&&s.push(n[l])}return s}traverse(e,t,i,n,s,l,a){if(e!=null&&n!=null){var o=mxObjectIdentity.get(e);if(n[o]==null&&(a==null||a[o]!=null)){s[o]==null&&(s[o]=e),n[o]==null&&(n[o]=e),a!==null&&delete a[o];for(var h=this.getEdges(e),d=[],m=0;m<h.length;m++)d[m]=this.getVisibleTerminal(h[m],!0)==e;for(var m=0;m<h.length;m++)if(!t||d[m]){for(var g=this.getVisibleTerminal(h[m],!d[m]),c=1,f=0;f<h.length;f++)if(f!=m){var C=d[f],v=this.getVisibleTerminal(h[f],!C);v==g&&(C?c++:c--)}c>=0&&(s=this.traverse(g,t,h[m],n,s,l,a))}}else if(s[o]==null)for(var m=0;m<l.length;m++){var w=l[m];if(w[o]!=null){for(var S in w)s[S]=w[S];return l.splice(m,1),s}}}return s}cycleStage(e){var t=new mxMinimumCycleRemover(this);t.execute(e)}layeringStage(){this.model.initialRank(),this.model.fixRanks()}crossingStage(e){var t=new mxMedianHybridCrossingReduction(this);t.execute(e)}placementStage(e,t){var i=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return i.fineTuning=this.fineTuning,i.execute(t),i.limitX+this.interHierarchySpacing}}const Ct=class ti{constructor(e){u(this,"constraints",null),u(this,"aspect",null),u(this,"w0",null),u(this,"h0",null),u(this,"bgNode",null),u(this,"fgNode",null),u(this,"strokewidth",null),this.desc=e,this.parseDescription(),this.parseConstraints()}parseDescription(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var e=this.desc.getAttribute("aspect");this.aspect=e??"variable";var t=this.desc.getAttribute("strokewidth");this.strokewidth=t??"1"}parseConstraints(){var e=this.desc.getElementsByTagName("connections")[0];if(e!=null){var t=mxUtils$1.getChildNodes(e);if(t!=null&&t.length>0){this.constraints=[];for(var i=0;i<t.length;i++)this.constraints.push(this.parseConstraint(t[i]))}}}parseConstraint(e){var t=Number(e.getAttribute("x")),i=Number(e.getAttribute("y")),n=e.getAttribute("perimeter")=="1",s=e.getAttribute("name");return new mxConnectionConstraint(new mxPoint(t,i),n,s)}evaluateTextAttribute(e,t,i){var n=this.evaluateAttribute(e,t,i),s=e.getAttribute("localized");return(ti.defaultLocalized&&s==null||s=="1")&&(n=mxResources$1.get(n)),n}evaluateAttribute(e,t,i){var n=e.getAttribute(t);if(n==null){var s=mxUtils$1.getTextContent(e);if(s!=null&&ti.allowEval){var l=mxUtils$1.eval(s);typeof l=="function"&&(n=l(i))}}return n}drawShape(e,t,i,n,s,l){var a=e.states.slice(),o=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_DIRECTION,null),h=this.computeAspect(t.style,i,n,s,l,o),d=Math.min(h.width,h.height),m=this.strokewidth=="inherit"?Number(mxUtils$1.getNumber(t.style,mxConstants$1.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*d;e.setStrokeWidth(m),t.style!=null&&mxUtils$1.getValue(t.style,mxConstants$1.STYLE_POINTER_EVENTS,"0")=="1"&&(e.setStrokeColor(mxConstants$1.NONE),e.rect(i,n,s,l),e.stroke(),e.setStrokeColor(t.stroke)),this.drawChildren(e,t,i,n,s,l,this.bgNode,h,!1,!0),this.drawChildren(e,t,i,n,s,l,this.fgNode,h,!0,!t.outline||t.style==null||mxUtils$1.getValue(t.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0),e.states.length!=a.length&&(e.states=a)}drawChildren(e,t,i,n,s,l,a,o,h,d){if(a!=null&&s>0&&l>0)for(var m=a.firstChild;m!=null;)m.nodeType==mxConstants$1.NODETYPE_ELEMENT&&this.drawNode(e,t,m,o,h,d),m=m.nextSibling}computeAspect(e,t,i,n,s,l){var a=t,o=i,h=n/this.w0,d=s/this.h0,m=l==mxConstants$1.DIRECTION_NORTH||l==mxConstants$1.DIRECTION_SOUTH;if(m){d=n/this.h0,h=s/this.w0;var g=(n-s)/2;a+=g,o-=g}return this.aspect=="fixed"&&(d=Math.min(h,d),h=d,m?(a+=(s-this.w0*h)/2,o+=(n-this.h0*d)/2):(a+=(n-this.w0*h)/2,o+=(s-this.h0*d)/2)),new mxRectangle(a,o,h,d)}drawNode(e,t,i,n,s,l){var a=i.nodeName,o=n.x,h=n.y,d=n.width,m=n.height,g=Math.min(d,m);if(a=="save")e.save();else if(a=="restore")e.restore();else if(l){if(a=="path"){e.begin();var c=!0;if(i.getAttribute("rounded")=="1"){c=!1;for(var f=Number(i.getAttribute("arcSize")),C=0,v=[],w=i.firstChild;w!=null;){if(w.nodeType==mxConstants$1.NODETYPE_ELEMENT){var S=w.nodeName;if(S=="move"||S=="line")(S=="move"||v.length==0)&&v.push([]),v[v.length-1].push(new mxPoint(o+Number(w.getAttribute("x"))*d,h+Number(w.getAttribute("y"))*m)),C++;else{c=!0;break}}w=w.nextSibling}if(!c&&C>0)for(var T=0;T<v.length;T++){var P=!1,L=v[T][0],k=v[T][v[T].length-1];L.x==k.x&&L.y==k.y&&(v[T].pop(),P=!0),this.addPoints(e,v[T],!0,f,P)}else c=!0}if(c)for(var w=i.firstChild;w!=null;)w.nodeType==mxConstants$1.NODETYPE_ELEMENT&&this.drawNode(e,t,w,n,s,l),w=w.nextSibling}else if(a=="close")e.close();else if(a=="move")e.moveTo(o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m);else if(a=="line")e.lineTo(o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m);else if(a=="quad")e.quadTo(o+Number(i.getAttribute("x1"))*d,h+Number(i.getAttribute("y1"))*m,o+Number(i.getAttribute("x2"))*d,h+Number(i.getAttribute("y2"))*m);else if(a=="curve")e.curveTo(o+Number(i.getAttribute("x1"))*d,h+Number(i.getAttribute("y1"))*m,o+Number(i.getAttribute("x2"))*d,h+Number(i.getAttribute("y2"))*m,o+Number(i.getAttribute("x3"))*d,h+Number(i.getAttribute("y3"))*m);else if(a=="arc")e.arcTo(Number(i.getAttribute("rx"))*d,Number(i.getAttribute("ry"))*m,Number(i.getAttribute("x-axis-rotation")),Number(i.getAttribute("large-arc-flag")),Number(i.getAttribute("sweep-flag")),o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m);else if(a=="rect")e.rect(o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m,Number(i.getAttribute("w"))*d,Number(i.getAttribute("h"))*m);else if(a=="roundrect"){var G=Number(i.getAttribute("arcsize"));G==0&&(G=mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100);var Y=Number(i.getAttribute("w"))*d,te=Number(i.getAttribute("h"))*m,ie=Number(G)/100,ne=Math.min(Y*ie,te*ie);e.roundrect(o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m,Y,te,ne,ne)}else if(a=="ellipse")e.ellipse(o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m,Number(i.getAttribute("w"))*d,Number(i.getAttribute("h"))*m);else if(a=="image"){if(!t.outline){var q=this.evaluateAttribute(i,"src",t);e.image(o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m,Number(i.getAttribute("w"))*d,Number(i.getAttribute("h"))*m,q,!1,i.getAttribute("flipH")=="1",i.getAttribute("flipV")=="1")}}else if(a=="text"){if(!t.outline){var oe=this.evaluateTextAttribute(i,"str",t),le=i.getAttribute("vertical")=="1"?-90:0;if(i.getAttribute("align-shape")=="0"){var Z=t.rotation,B=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPH,0)==1,re=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPV,0)==1;B&&re?le-=Z:B||re?le+=Z:le-=Z}le-=i.getAttribute("rotation"),e.text(o+Number(i.getAttribute("x"))*d,h+Number(i.getAttribute("y"))*m,0,0,oe,i.getAttribute("align")||"left",i.getAttribute("valign")||"top",!1,"",null,!1,le)}}else if(a=="include-shape"){var se=mxStencilRegistry.getStencil(i.getAttribute("name"));if(se!=null){var ve=o+Number(i.getAttribute("x"))*d,pe=h+Number(i.getAttribute("y"))*m,Y=Number(i.getAttribute("w"))*d,te=Number(i.getAttribute("h"))*m;se.drawShape(e,t,ve,pe,Y,te)}}else if(a=="fillstroke")e.fillAndStroke();else if(a=="fill")e.fill();else if(a=="stroke")e.stroke();else if(a=="strokewidth"){var Q=i.getAttribute("fixed")=="1"?1:g;e.setStrokeWidth(Number(i.getAttribute("width"))*Q)}else if(a=="dashed")e.setDashed(i.getAttribute("dashed")=="1");else if(a=="dashpattern"){var me=i.getAttribute("pattern");if(me!=null){for(var ce=me.split(" "),Le=[],T=0;T<ce.length;T++)ce[T].length>0&&Le.push(Number(ce[T])*g);me=Le.join(" "),e.setDashPattern(me)}}else a=="strokecolor"?e.setStrokeColor(i.getAttribute("color")):a=="linecap"?e.setLineCap(i.getAttribute("cap")):a=="linejoin"?e.setLineJoin(i.getAttribute("join")):a=="miterlimit"?e.setMiterLimit(Number(i.getAttribute("limit"))):a=="fillcolor"?e.setFillColor(i.getAttribute("color")):a=="alpha"||a=="fillalpha"||a=="strokealpha"?e.setAlpha(i.getAttribute("alpha")):a=="fontcolor"?e.setFontColor(i.getAttribute("color")):a=="fontstyle"?e.setFontStyle(i.getAttribute("style")):a=="fontfamily"?e.setFontFamily(i.getAttribute("family")):a=="fontsize"&&e.setFontSize(Number(i.getAttribute("size"))*g);s&&(a=="fillstroke"||a=="fill"||a=="stroke")&&(s=!1,e.setShadow(!1))}}};u(Ct,"defaultLocalized",!1),u(Ct,"allowEval",!1);let mxStencil=Ct;class mxAnimation extends mxEventSource{constructor(e){super(),u(this,"thread",null),this.delay=e??20}isRunning(){return this.thread!=null}startAnimation(){this.thread==null&&(this.thread=window.setInterval(mxUtils$1.bind(this,this.updateAnimation),this.delay))}updateAnimation(){this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTE))}stopAnimation(){this.thread!=null&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject$1(mxEvent$1.DONE)))}}class mxImageExport{constructor(){u(this,"includeOverlays",!1)}drawState(e,t){e!=null&&(this.visitStatesRecursive(e,t,()=>{this.drawCellState.apply(this,arguments)}),this.includeOverlays&&this.visitStatesRecursive(e,t,()=>{this.drawOverlays.apply(this,arguments)}))}visitStatesRecursive(e,t,i){if(e!=null){i(e,t);for(var n=e.view.graph,s=n.model.getChildCount(e.cell),l=0;l<s;l++){var a=n.view.getState(n.model.getChildAt(e.cell,l));this.visitStatesRecursive(a,t,i)}}}getLinkForCellState(e,t){return null}drawCellState(e,t){var i=this.getLinkForCellState(e,t);i!=null&&t.setLink(i),this.drawShape(e,t),this.drawText(e,t),i!=null&&t.setLink(null)}drawShape(e,t){e.shape instanceof mxShape&&e.shape.checkBounds()&&(t.save(),e.shape.paint(t),t.restore())}drawText(e,t){e.text!=null&&e.text.checkBounds()&&(t.save(),e.text.paint(t),t.restore())}drawOverlays(e,t){e.overlays!=null&&e.overlays.visit(function(i,n){n instanceof mxShape&&n.paint(t)})}}class mxCellStatePreview{constructor(e){u(this,"count",0),this.deltas=new mxDictionary,this.graph=e}isEmpty(){return this.count==0}moveState(e,t,i,n,s){n=n??!0,s=s??!0;var l=this.deltas.get(e.cell);return l==null?(l={point:new mxPoint(t,i),state:e},this.deltas.put(e.cell,l),this.count++):n?(l.point.x+=t,l.point.y+=i):(l.point.x=t,l.point.y=i),s&&this.addEdges(e),l.point}show(e){this.deltas.visit((t,i)=>{this.translateState(i.state,i.point.x,i.point.y)}),this.deltas.visit((t,i)=>{this.revalidateState(i.state,i.point.x,i.point.y,e)})}translateState(e,t,i){if(e!=null){var n=this.graph.getModel();if(n.isVertex(e.cell)){e.view.updateCellState(e);var s=n.getGeometry(e.cell);(t!=0||i!=0)&&s!=null&&(!s.relative||this.deltas.get(e.cell)!=null)&&(e.x+=t,e.y+=i)}for(var l=n.getChildCount(e.cell),a=0;a<l;a++)this.translateState(e.view.getState(n.getChildAt(e.cell,a)),t,i)}}revalidateState(e,t,i,n){if(e!=null){var s=this.graph.getModel();s.isEdge(e.cell)&&e.view.updateCellState(e);var l=this.graph.getCellGeometry(e.cell),a=e.view.getState(s.getParent(e.cell));(t!=0||i!=0)&&l!=null&&l.relative&&s.isVertex(e.cell)&&(a==null||s.isVertex(a.cell)||this.deltas.get(e.cell)!=null)&&(e.x+=t,e.y+=i),this.graph.cellRenderer.redraw(e),n?.(e);for(var o=s.getChildCount(e.cell),h=0;h<o;h++)this.revalidateState(this.graph.view.getState(s.getChildAt(e.cell,h)),t,i,n)}}addEdges(e){for(var t=this.graph.getModel(),i=t.getEdgeCount(e.cell),n=0;n<i;n++){var s=e.view.getState(t.getEdgeAt(e.cell,n));s!=null&&this.moveState(s,0,0)}}}class mxMorphing extends mxAnimation{constructor(e,t,i,n){super(n),u(this,"step",0),u(this,"cells",null),this.graph=e,this.steps=t??6,this.ease=i??1.5}updateAnimation(){super.updateAnimation();var e=new mxCellStatePreview(this.graph);if(this.cells!=null)for(var t=0;t<this.cells.length;t++)this.animateCell(this.cells[t],e,!1);else this.animateCell(this.graph.getModel().getRoot(),e,!0);this.show(e),(e.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()}show(e){e.show()}animateCell(e,t,i){var n=this.graph.getView().getState(e),s=null;if(n!=null&&(s=this.getDelta(n),this.graph.getModel().isVertex(e)&&(s.x!=0||s.y!=0))){var l=this.graph.view.getTranslate(),a=this.graph.view.getScale();s.x+=l.x*a,s.y+=l.y*a,t.moveState(n,-s.x/this.ease,-s.y/this.ease)}if(i&&!this.stopRecursion(n,s))for(var o=this.graph.getModel().getChildCount(e),h=0;h<o;h++)this.animateCell(this.graph.getModel().getChildAt(e,h),t,i)}stopRecursion(e,t){return t!=null&&(t.x!=0||t.y!=0)}getDelta(e){var t=this.getOriginForCell(e.cell),i=this.graph.getView().getTranslate(),n=this.graph.getView().getScale(),s=e.x/n-i.x,l=e.y/n-i.y;return new mxPoint((t.x-s)*n,(t.y-l)*n)}getOriginForCell(e){var t=null;if(e!=null){var i=this.graph.getModel().getParent(e),n=this.graph.getCellGeometry(e);if(t=this.getOriginForCell(i),n!=null)if(n.relative){var s=this.graph.getCellGeometry(i);s!=null&&(t.x+=n.x*s.width,t.y+=n.y*s.height)}else t.x+=n.x,t.y+=n.y}if(t==null){var l=this.graph.view.getTranslate();t=new mxPoint(-l.x,-l.y)}return t}}bootstrap();class Sidebar{constructor(e,t){this.editorUi=e,this.container=t,this.palettes=new Object,this.taglist=new Object,this.showTooltips=!0,this.graph=e.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.foldingEnabled=!1,document.body.appendChild(this.graph.container),this.pointerUpHandler=mxUtils$1.bind(this,function(){this.showTooltips=!0}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerDownHandler=mxUtils$1.bind(this,function(){this.showTooltips=!1,this.hideTooltip()}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerMoveHandler=mxUtils$1.bind(this,function(i){for(var n=mxEvent$1.getSource(i);n!=null;){if(n==this.currentElt)return;n=n.parentNode}this.hideTooltip()}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerOutHandler=mxUtils$1.bind(this,function(i){i.toElement==null&&i.relatedTarget==null&&this.hideTooltip()}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),mxEvent$1.addListener(t,"scroll",mxUtils$1.bind(this,function(){this.showTooltips=!0,this.hideTooltip()})),this.init()}}Sidebar.prototype.init=function(){var r=STENCIL_PATH;this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(r),this.setCurrentSearchEntryLibrary("arrows"),this.addStencilPalette("arrows",mxResources$1.get("arrows"),r+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.addUmlPalette(!1),this.addBpmnPalette(r,!1),this.setCurrentSearchEntryLibrary("flowchart"),this.addStencilPalette("flowchart","Flowchart",r+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.setCurrentSearchEntryLibrary("clipart"),this.addImagePalette("clipart",mxResources$1.get("clipart"),r+"/clipart/","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"}),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.collapsedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7":IMAGE_PATH+"/collapsed.gif";Sidebar.prototype.expandedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/expanded.gif";Sidebar.prototype.searchImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAEaSURBVHjabNGxS5VxFIfxz71XaWuQUJCG/gCHhgTD9VpEETg4aMOlQRp0EoezObgcd220KQiXmpretTAHQRBdojlQEJyukPdt+b1ywfvAGc7wnHP4nlZd1yKijQW8xzNc4Su+ZOYfQ3T6/f4YNvEJYzjELXp4VVXVz263+7cR2niBxAFeZ2YPi3iHR/gYERPDwhpOsd6sz8x/mfkNG3iOlWFhFj8y89J9KvzGXER0GuEaD42mgwHqUtoljbcRsTBCeINpfM/MgZLKPpaxFxGbOCqDXmILN7hoJrTKH+axhxmcYRxP0MIDnOBDZv5q1XUNIuJxifJp+UNV7t7BFM6xeic0RMQ4Bpl5W/ol7GISx/eEUUTECrbx+f8A8xhiZht9zsgAAAAASUVORK5CYII=":IMAGE_PATH+"/search.png";Sidebar.prototype.dragPreviewBorder="1px dashed black";Sidebar.prototype.enableTooltips=!0;Sidebar.prototype.tooltipBorder=16;Sidebar.prototype.tooltipDelay=300;Sidebar.prototype.dropTargetDelay=200;Sidebar.prototype.gearImage=STENCIL_PATH+"/clipart/Gear_128x128.png";Sidebar.prototype.thumbWidth=42;Sidebar.prototype.thumbHeight=42;Sidebar.prototype.minThumbStrokeWidth=1;Sidebar.prototype.thumbAntiAlias=!1;Sidebar.prototype.thumbPadding=document.documentMode>=5?2:3;Sidebar.prototype.thumbBorder=2;urlParams["sidebar-entries"]!="large"&&(Sidebar.prototype.thumbPadding=document.documentMode>=5?0:1,Sidebar.prototype.thumbBorder=1,Sidebar.prototype.thumbWidth=32,Sidebar.prototype.thumbHeight=30,Sidebar.prototype.minThumbStrokeWidth=1.3,Sidebar.prototype.thumbAntiAlias=!0);Sidebar.prototype.sidebarTitleSize=9;Sidebar.prototype.sidebarTitles=!1;Sidebar.prototype.tooltipTitles=!0;Sidebar.prototype.maxTooltipWidth=400;Sidebar.prototype.maxTooltipHeight=400;Sidebar.prototype.addStencilsToIndex=!0;Sidebar.prototype.defaultImageWidth=80;Sidebar.prototype.defaultImageHeight=80;Sidebar.prototype.getTooltipOffset=function(){return new mxPoint(0,0)};Sidebar.prototype.showTooltip=function(r,e,t,i,n,s){if(this.enableTooltips&&this.showTooltips&&this.currentElt!=r){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null);var l=mxUtils$1.bind(this,function(){this.tooltip==null&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=mxPopupMenu.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new Graph$1(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1),mxClient.IS_SVG||(this.graph2.view.canvas.style.position="relative")),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),t>this.maxTooltipWidth||i>this.maxTooltipHeight?this.graph2.view.scale=Math.round(Math.min(this.maxTooltipWidth/t,this.maxTooltipHeight/i)*100)/100:this.graph2.view.scale=1,this.tooltip.style.display="block",this.graph2.labelsVisible=s==null||s;var a=mxClient.NO_FO;mxClient.NO_FO=Editor$1.prototype.originalNoForeignObject;var o=this.graph2.cloneCells(e);this.editorUi.insertHandler(o,null,this.graph2.model),this.graph2.addCells(o),mxClient.NO_FO=a;var h=this.graph2.getGraphBounds(),d=h.width+2*this.tooltipBorder+4,m=h.height+2*this.tooltipBorder;mxClient.IS_QUIRKS?(m+=4,this.tooltip.style.overflow="hidden"):this.tooltip.style.overflow="visible",this.tooltip.style.width=d+"px";var g=d;if(this.tooltipTitles&&n!=null&&n.length>0){this.tooltipTitle==null?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",mxUtils$1.write(this.tooltipTitle,n),g=Math.min(this.maxTooltipWidth,Math.max(d,this.tooltipTitle.scrollWidth+4));var c=this.tooltipTitle.offsetHeight+10;m+=c,mxClient.IS_SVG?this.tooltipTitle.style.marginTop=2-c+"px":(m-=6,this.tooltipTitle.style.top=m-c+"px")}else this.tooltipTitle!=null&&this.tooltipTitle.parentNode!=null&&(this.tooltipTitle.style.display="none");g>d&&(this.tooltip.style.width=g+"px"),this.tooltip.style.height=m+"px";var f=-Math.round(h.x-this.tooltipBorder)+(g>d?(g-d)/2:0),C=-Math.round(h.y-this.tooltipBorder),v=document.body,w=document.documentElement,S=this.getTooltipOffset(),T=Math.max(v.clientHeight||0,w.clientHeight),P=this.container.clientWidth+this.editorUi.splitSize+3+this.editorUi.container.offsetLeft+S.x,L=Math.min(T-m-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+r.offsetTop-this.container.scrollTop-m/2+16))+S.y;mxClient.IS_SVG?f!=0||C!=0?this.graph2.view.canvas.setAttribute("transform","translate("+f+","+C+")"):this.graph2.view.canvas.removeAttribute("transform"):(this.graph2.view.drawPane.style.left=f+"px",this.graph2.view.drawPane.style.top=C+"px"),this.tooltip.style.position="absolute",this.tooltip.style.left=P+"px",this.tooltip.style.top=L+"px"});this.tooltip!=null&&this.tooltip.style.display!="none"?l():this.thread=window.setTimeout(l,this.tooltipDelay),this.currentElt=r}};Sidebar.prototype.hideTooltip=function(){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null),this.tooltip!=null&&(this.tooltip.style.display="none",this.currentElt=null)};Sidebar.prototype.addDataEntry=function(r,e,t,i,n){return this.addEntry(r,mxUtils$1.bind(this,function(){return this.createVertexTemplateFromData(n,e,t,i)}))};Sidebar.prototype.addEntries=function(r){for(var e=0;e<r.length;e++)mxUtils$1.bind(this,function(t){var i=t.data,n=t.title!=null?t.title:"";t.tags!=null&&(n+=" "+t.tags),i!=null&&n.length>0?this.addEntry(n,mxUtils$1.bind(this,function(){i=this.editorUi.convertDataUri(i);var s="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return t.aspect=="fixed"&&(s+="aspect=fixed;"),this.createVertexTemplate(s+"image="+i,t.w,t.h,"",t.title||"",!1,!1,!0)})):t.xml!=null&&n.length>0&&this.addEntry(n,mxUtils$1.bind(this,function(){var s=this.editorUi.stringToCells(Graph$1.decompress(t.xml));return this.createVertexTemplateFromCells(s,t.w,t.h,t.title||"",!0,!1,!0)}))})(r[e])};Sidebar.prototype.setCurrentSearchEntryLibrary=function(r,e){this.currentSearchEntryLibrary=r!=null?{id:r,lib:e}:null};Sidebar.prototype.addEntry=function(r,e){if(this.taglist!=null&&r!=null&&r.length>0){this.currentSearchEntryLibrary!=null&&(e.parentLibraries=[this.currentSearchEntryLibrary]);for(var t=r.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),i=[],n={},s=0;s<t.length;s++){n[t[s]]==null&&(n[t[s]]=!0,i.push(t[s]));var l=t[s].replace(/\.*\d*$/,"");l!=t[s]&&n[l]==null&&(n[l]=!0,i.push(l))}for(var s=0;s<i.length;s++)this.addEntryForTag(i[s],e)}return e};Sidebar.prototype.addEntryForTag=function(r,e){if(r!=null&&r.length>1){var t=this.taglist[r];typeof t!="object"&&(t={entries:[]},this.taglist[r]=t),t.entries.push(e)}};Sidebar.prototype.searchEntries=function(r,e,t,i,n){if(this.taglist!=null&&r!=null){for(var s=r.toLowerCase().split(" "),l=new mxDictionary,a=(t+1)*e,o=[],h=0,d=0;d<s.length;d++)if(s[d].length>0){var m=this.taglist[s[d]],g=new mxDictionary;if(m!=null){var c=m.entries;o=[];for(var f=0;f<c.length;f++){var m=c[f];if(h==0==(l.get(m)==null)&&(g.put(m,m),o.push(m),d==s.length-1&&o.length==a)){i(o.slice(t*e,a),a,!0,s);return}}}else o=[];l=g,h++}var C=o.length;i(o.slice(t*e,(t+1)*e),C,!1,s)}else i([],null,null,s)};Sidebar.prototype.filterTags=function(r){if(r!=null){for(var e=r.split(" "),t=[],i={},n=0;n<e.length;n++)i[e[n]]==null&&(i[e[n]]="1",t.push(e[n]));return t.join(" ")}return null};Sidebar.prototype.cloneCell=function(r,e){var t=r.clone();return e!=null&&(t.value=e),t};Sidebar.prototype.showPopupMenuForEntry=function(r,e,t){};Sidebar.prototype.addSearchPalette=function(r){var e=document.createElement("div");e.style.visibility="hidden",this.container.appendChild(e);var t=document.createElement("div");t.className="geSidebar",t.style.boxSizing="border-box",t.style.overflow="hidden",t.style.width="100%",t.style.padding="8px",t.style.paddingTop="14px",t.style.paddingBottom="0px",r||(t.style.display="none");var i=document.createElement("div");i.style.whiteSpace="nowrap",i.style.textOverflow="clip",i.style.paddingBottom="8px",i.style.cursor="default";var n=document.createElement("input");n.setAttribute("placeholder",mxResources$1.get("searchShapes")),n.setAttribute("type","text"),n.style.fontSize="12px",n.style.overflow="hidden",n.style.boxSizing="border-box",n.style.border="solid 1px #d5d5d5",n.style.borderRadius="4px",n.style.width="100%",n.style.outline="none",n.style.padding="6px",n.style.paddingRight="20px",i.appendChild(n);var s=document.createElement("img");s.setAttribute("src",Sidebar.prototype.searchImage),s.setAttribute("title",mxResources$1.get("search")),s.style.position="relative",s.style.left="-18px",mxClient.IS_QUIRKS?(n.style.height="28px",s.style.top="-4px"):s.style.top="1px",s.style.background="url('"+this.editorUi.editor.transparentImage+"')";var l;i.appendChild(s),t.appendChild(i);var a=document.createElement("center"),o=mxUtils$1.button(mxResources$1.get("moreResults"),function(){l()});o.style.display="none",o.style.lineHeight="normal",o.style.fontSize="12px",o.style.padding="6px 12px 6px 12px",o.style.marginTop="4px",o.style.marginBottom="8px",a.style.paddingTop="4px",a.style.paddingBottom="4px",a.appendChild(o),t.appendChild(a);var h="",d=!1,m=!1,g=0,c=new Object,f=12,C=mxUtils$1.bind(this,function(){d=!1,this.currentSearch=null;for(var w=t.firstChild;w!=null;){var S=w.nextSibling;w!=i&&w!=a&&w.parentNode.removeChild(w),w=S}});mxEvent$1.addListener(s,"click",function(){s.getAttribute("src")==Dialog.prototype.closeImage&&(s.setAttribute("src",Sidebar.prototype.searchImage),s.setAttribute("title",mxResources$1.get("search")),o.style.display="none",n.value="",h="",C()),n.focus()}),l=mxUtils$1.bind(this,function(){if(f=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),n.value!=""){if(a.parentNode!=null&&(h!=n.value&&(C(),h=n.value,c=new Object,m=!1,g=0),!d&&!m)){o.setAttribute("disabled","true"),o.style.display="",o.style.cursor="wait",o.innerHTML=mxResources$1.get("loading")+"...",d=!0;var w=new Object;this.currentSearch=w,this.searchEntries(h,f,g,mxUtils$1.bind(this,function(S,T,P,L){if(this.currentSearch==w){S=S??[],d=!1,g++,this.insertSearchHint(t,h,f,g,S,T,P,L),S.length==0&&g==1&&(h=""),a.parentNode!=null&&a.parentNode.removeChild(a);for(var k=0;k<S.length;k++)mxUtils$1.bind(this,function(G){try{var Y=G();c[Y.innerHTML]==null?(c[Y.innerHTML]=G.parentLibraries!=null?G.parentLibraries.slice():[],t.appendChild(Y)):G.parentLibraries!=null&&(c[Y.innerHTML]=c[Y.innerHTML].concat(G.parentLibraries)),mxEvent$1.addGestureListeners(Y,null,null,mxUtils$1.bind(this,function(te){var ie=c[Y.innerHTML];mxEvent$1.isPopupTrigger(te)&&this.showPopupMenuForEntry(Y,ie,te)})),mxEvent$1.disableContextMenu(Y)}catch{}})(S[k]);P?(o.removeAttribute("disabled"),o.innerHTML=mxResources$1.get("moreResults")):(o.innerHTML=mxResources$1.get("reset"),o.style.display="none",m=!0),o.style.cursor="",t.appendChild(a)}}),mxUtils$1.bind(this,function(){o.style.cursor=""}))}}else C(),n.value="",h="",c=new Object,o.style.display="none",m=!1,n.focus()}),mxEvent$1.addListener(n,"keydown",mxUtils$1.bind(this,function(w){w.keyCode==13&&(l(),mxEvent$1.consume(w))})),mxEvent$1.addListener(n,"keyup",mxUtils$1.bind(this,function(w){n.value==""?(s.setAttribute("src",Sidebar.prototype.searchImage),s.setAttribute("title",mxResources$1.get("search"))):(s.setAttribute("src",Dialog.prototype.closeImage),s.setAttribute("title",mxResources$1.get("reset"))),n.value==""?(m=!0,o.style.display="none"):n.value!=h?(o.style.display="none",m=!1):d||(m?o.style.display="none":o.style.display="")})),mxEvent$1.addListener(n,"mousedown",function(w){w.stopPropagation&&w.stopPropagation(),w.cancelBubble=!0}),mxEvent$1.addListener(n,"selectstart",function(w){w.stopPropagation&&w.stopPropagation(),w.cancelBubble=!0});var v=document.createElement("div");v.appendChild(t),this.container.appendChild(v),this.palettes.search=[e,v]};Sidebar.prototype.insertSearchHint=function(r,e,t,i,n,s,l,a){if(n.length==0&&i==1){var o=document.createElement("div");o.className="geTitle",o.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important",mxUtils$1.write(o,mxResources$1.get("noResultsFor",[e])),r.appendChild(o)}};Sidebar.prototype.addGeneralPalette=function(r){var e="line lines connector connectors connection connections arrow arrows ";this.setCurrentSearchEntryLibrary("general","general");var t=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("shape=roundedRectangle;rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;",100,80,"","Data Storage"),this.addEntry("curve",mxUtils$1.bind(this,function(){var i=new mxCell("",new mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");return i.geometry.setTerminalPoint(new mxPoint(0,50),!0),i.geometry.setTerminalPoint(new mxPoint(50,0),!1),i.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)],i.geometry.relative=!0,i.edge=!0,this.createEdgeTemplateFromCells([i],i.geometry.width,i.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Arrow",null,e+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,e+"directional directed"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,e+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;",50,50,"","Dotted Line",null,e+"dotted undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,e+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,e+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,e+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,e+"link"),this.addEntry(e+"edge title",mxUtils$1.bind(this,function(){var i=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");i.geometry.setTerminalPoint(new mxPoint(0,0),!0),i.geometry.setTerminalPoint(new mxPoint(100,0),!1),i.geometry.relative=!0,i.edge=!0;var n=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");return n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,i.insert(n),this.createEdgeTemplateFromCells([i],100,0,"Connector with Label")})),this.addEntry(e+"edge title multiplicity",mxUtils$1.bind(this,function(){var i=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");i.geometry.setTerminalPoint(new mxPoint(0,0),!0),i.geometry.setTerminalPoint(new mxPoint(160,0),!1),i.geometry.relative=!0,i.edge=!0;var n=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,i.insert(n);var s=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");return s.geometry.relative=!0,s.setConnectable(!1),s.vertex=!0,i.insert(s),this.createEdgeTemplateFromCells([i],160,0,"Connector with 2 Labels")})),this.addEntry(e+"edge title multiplicity",mxUtils$1.bind(this,function(){var i=new mxCell("Label",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");i.geometry.setTerminalPoint(new mxPoint(0,0),!0),i.geometry.setTerminalPoint(new mxPoint(160,0),!1),i.geometry.relative=!0,i.edge=!0;var n=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,i.insert(n);var s=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");s.geometry.relative=!0,s.setConnectable(!1),s.vertex=!0,i.insert(s);var l=new mxCell("Target",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;");return l.geometry.relative=!0,l.setConnectable(!1),l.vertex=!0,i.insert(l),this.createEdgeTemplateFromCells([i],160,0,"Connector with 3 Labels")})),this.addEntry(e+"edge shape symbol message mail email",mxUtils$1.bind(this,function(){var i=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");i.geometry.setTerminalPoint(new mxPoint(0,0),!0),i.geometry.setTerminalPoint(new mxPoint(100,0),!1),i.geometry.relative=!0,i.edge=!0;var n=new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return n.geometry.relative=!0,n.vertex=!0,n.geometry.offset=new mxPoint(-10,-7),i.insert(n),this.createEdgeTemplateFromCells([i],100,0,"Connector with Symbol")}))];this.addPaletteFunctions("general",mxResources$1.get("general"),r??!0,t),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addMiscPalette=function(r){var e=this,t="line lines connector connectors connection connections arrow arrows ";this.setCurrentSearchEntryLibrary("general","misc");var i=[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.addDataEntry("table",180,120,"Table 1","7ZjJTsMwEIafJleUhZZybVgucAFewDTT2pLjiewpaXl6xolLVQFqWBJArZRKns2xv5H7y4myvFxdW1HJWyxAR9lllOUWkdpRucpB6yiNVRFlF1GaxvyL0qsPokkTjSthwVCXgrQteBJ6Ca2ndTha6+BwUlR+SOLRu6aSSl7mRcLDWiqC+0rMfLzmTbDPkbB0r569K2Z7hoaEMmBDzQy1FpVTzWRthlS6uBFrXNLmNRtrGpYHlmD14RYbV9jfNWAJZNecUquCZMiYtBhiCWohN2WBTSxc61i81m6J8SBAex9g1h0gL5mU0HcwI2EWXVi+ZVVYrB6EXQAFR4XKENjLJ6bhgm+utM5Ro0du0PgXEVYhqGG+qX1EIiyDYQOY10kbKKMpP4wpj09G0Yh3k7OdbG1+fLqlHI0jy432c4BwVIPr3MD0aw08/YH+nfbbP2N89rZ/324NMsq5xppNqYoCTFfG2V7G454Qjw4c8WoX7wDEx0fiO3/wAyA/O+pAbzqw3m3TELIwOZQTdPZrsnB+4IiHl4UkPiIfWheS5CgMfQvDZEBhSD5xY/7fZyjZf63u7dD0fKv++5B/QRwO5ia8h3mP6sDm9tNeE9v58vcC"),this.addDataEntry("table",180,120,"Table 2","7ZjBbqMwEIafhmuFISTptbTbS/eyrfbuBie2ZDzITEqyT79jMMlGWVTUBlqVSkTyjGeM+SbDLxPEab67t7yQPyETOojvgji1ANiM8l0qtA6iUGVBfBtEUUi/IPrRMcvq2bDgVhjskxA1CS9cb0XjaRwl7rV3lJIXboj82bluJOa0zVtGw0oqFI8FX7n5ih6CfCVyi4/qj3OFZK/AIFdGWJ+zAq15Uap6sSZCKp098D1ssb1Na7nobW4eKL/00Raqf02/f2FR7DoZ1C4P4F5ALtDuKaRSGUofsWw4hVKojWzTPLyQl41jc8g9IqWBp/p/wnF/wrRlVFz/EivkZtMH9jnMzELxxO1GoHcUoAwKe/dCNFpoa6V1ChpcTQwYdyOEwk9qsW5znwER8ha8B3NYtIaS3NBFmNLwKgkSepqUbHa06XLhFlMwJVr6J7g1BC+xEiX2LWD0tgLOLlC/2Vn9ftfDKGQXLaQxLvpYyHfXCIjpWkNFplRZJkxf2PGrsOcDsU46WV+2aT49690p5xHQzzvRx5NEf3j3j8B+8S0Rg0nE/rRMYyjGsrOVZl+0lRYfphjXnayTabEeXzFY2Ml+Pkn2Y0oGY9+aMbRmLEfUDHZ+EG+bafFFm4m9fiofrHvOD+Ut7eXEaH+AbnSfqK+nCX9A4SDz+DGxnjv51vgX"),this.addDataEntry("table title",180,120,"Table with Title 1","7ZhRb6MwDMc/Da8nAmPdvZbu9nJ7WfcFMnAhUohR4o12n34OpKumrmqlDXa6VqJS/Lcdkp8bWSFK82Z9Z2Vb32MJOkpvozS3iDSMmnUOWkdJrMooXURJEvMvSv4c8IreG7fSgqFTEpIh4UXqZxiUR/mkYVAdbXRQXS1bP6Tem85ranitC8HDrlYEy1YW3t/xTlhzJC0t1auX0piFAg1JZcCGpAK1lq1T/WyLPqJWuvwrN/hM2/dsrfmKs5dhMT5balUZHhe8Sz/lPOwCLMH6IIleChjuABsgu+GQTpVUh4ibgVZcg6rqbVoWROkGoXrP3YHlQWD7Oed0j/NBxLxkUlI/QEHSVKfQ3odZWmwfpa2AgtCi8qhuX5iGC9pKaZ2jRl8Tg8a/iLANTg2rbe4TEmETDBvAvE/aQ8nm/DCmPP6VRRnvJmdb7Gx+fLilHI0jy/8EPwdIRx04OrWAyecF3ATEoUzH6nn1DeW8GrecxvjoXTm/XClksiuNHZu1KkswpyJPj56Z65EQZ2eOeP0R7wTEry/E+4RkOuSzS1sYuy3MJmwLN+dygmY/1hZ+nzni6duCiC/Ip+4LQlwaw9iNQYgJO4PYv2j/p4dIHL9mj3ZqRr5l//uQf6A7nM1V+AjzEdsDm7svgr3vwwfDNw=="),this.addDataEntry("table title",180,150,"Table with Title 2","7Zhdb5swFIZ/DbcTHyVrbiFdb7Kbptq9Cw5YMj7IPi1kv37HYJK1FDWbQoOmSUSyz4dt3id+L/CitGrvNavL75Bz6UV3XpRqAOxHVZtyKb3QF7kXbbww9Onnhd8mskGX9WumucJzGsK+4YXJZ95HHtmT5H3U4EG6qClZbYfYZaOkxIrOuglo2JQC+a5mmc039CYUM8g07sRPG4p8CmSgkAnFtWvKQEpWG9GttukqSiHzLTvAMw77DLNkL1qeP0BjXLeGZkuLGde6p8V37qw2zaQoFI0zEsHumLiX5Bp5OylUF3Iq3XOoOOoDlTQix9JV3PZi+iUXRTm0xS7ITB8ojr0n3WngpH8fQzTCMEmAjoyCyQeeIVPFOTDGWuca6kemC44uUIOwUt29kBpHVYWUKUiwyBQouxFC7ZKS74feJ0CEaiDjhDku2okSJ/SQTKn/JfZiepuU5sFpTo8t15iCMqjpj2LX4Mxgww2eCzB8H+DBSewwfcQzugDOmxHO4KI8lbLVJ55/jMp/gwpI2r2EhqalyHOuztU8+vDS3MykcTzS+Ec3DP2Faz24U1+bGNpQqGLbd65mgNG+BvH7BZgLzupf8LO34JblZ6tP9LOvI5yX5bkcP1tdzc9uJ/1s4VrP52cTMK7gZ+v/fja3n60/0c8Cf8QzWvYl++s7tL6aoQXBpKMtXOz5HG2CxvyORtPTR4Uu9+qbwy8="),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"HTML Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=none;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 2"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 3"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",160,140,`<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1
Section 1.2
Section 1.3</td></tr><tr><td align="center">Section 2.1
Section 2.2
Section 2.3</td></tr></table>`,"HTML Table 4"),this.addEntry("link hyperlink",mxUtils$1.bind(this,function(){var n=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return n.vertex=!0,this.graph.setLinkForCell(n,"https://www.draw.io"),this.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Link")})),this.addEntry("timestamp date time text label",mxUtils$1.bind(this,function(){var n=new mxCell("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return n.vertex=!0,this.graph.setAttributeForCell(n,"placeholders","1"),this.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Timestamp")})),this.addEntry("variable placeholder metadata hello world text label",mxUtils$1.bind(this,function(){var n=new mxCell("%name% Text",new mxGeometry(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return n.vertex=!0,this.graph.setAttributeForCell(n,"placeholders","1"),this.graph.setAttributeForCell(n,"name","Variable"),this.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Variable")})),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;fillColor=#1ba1e2;sketch=1;",120,60,"","Rectangle Sketch",!0,null,"rectangle rect box text sketch comic retro"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillColor=#990000;fillStyle=dots;sketch=1;",120,60,"","Ellipse Sketch",!0,null,"ellipse oval sketch comic retro"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=-1;hachureGap=8;fillStyle=cross-hatch;fillColor=#006600;sketch=1;",120,60,"","Diamond Sketch",!0,null,"diamond sketch comic retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;shape=isoCube2;backgroundOutline=1;isoAngle=15;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",function(){var n=new mxCell("Label",new mxGeometry(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(20,20,20,30),"triangle;html=1;whiteSpace=wrap;");return s.vertex=!0,n.insert(s),e.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Shape Group")}),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line",null,t+"manual"),this.createEdgeTemplateEntry("shape=filledEdge;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow",null,t+"elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow",null,t+"elbow vertical")];this.addPaletteFunctions("misc",mxResources$1.get("misc"),r??!0,i),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addAdvancedPalette=function(r){this.setCurrentSearchEntryLibrary("general","advanced"),this.addPaletteFunctions("advanced",mxResources$1.get("advanced"),r??!1,this.createAdvancedShapes()),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addBasicPalette=function(r){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources$1.get("basic"),r+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.createAdvancedShapes=function(){var r=this,e=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return e.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return r.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var t=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(r.cloneCell(e,"Item 1")),t.insert(r.cloneCell(e,"Item 2")),t.insert(r.cloneCell(e,"Item 3")),r.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return r.createVertexTemplateFromCells([r.cloneCell(e,"List Item")],e.geometry.width,e.geometry.height,"List Item")})]};Sidebar.prototype.addUmlPalette=function(r){var e=this,t=new mxCell("+ field: type",new mxGeometry(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");t.vertex=!0;var i=new mxCell("",new mxGeometry(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");i.vertex=!0;var n="uml static class ";this.setCurrentSearchEntryLibrary("uml");var s=[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,n+"object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,n+"interface object instance annotated annotation"),this.addEntry(n+"object instance",function(){var l=new mxCell("Classname",new mxGeometry(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return l.vertex=!0,l.insert(t.clone()),l.insert(i.clone()),l.insert(e.cloneCell(t,"+ method(type): type")),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Class")}),this.addEntry(n+"section subsection",function(){var l=new mxCell("Classname",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return l.vertex=!0,l.insert(t.clone()),l.insert(t.clone()),l.insert(t.clone()),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Class 2")}),this.addEntry(n+"item member method function variable field attribute label",function(){return e.createVertexTemplateFromCells([e.cloneCell(t,"+ item: attribute")],t.geometry.width,t.geometry.height,"Item 1")}),this.addEntry(n+"item member method function variable field attribute label",function(){var l=new mxCell("item: attribute",new mxGeometry(0,0,120,t.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+e.gearImage);return l.vertex=!0,e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Item 2")}),this.addEntry(n+"divider hline line separator",function(){return e.createVertexTemplateFromCells([i.clone()],i.geometry.width,i.geometry.height,"Divider")}),this.addEntry(n+"spacer space gap separator",function(){var l=new mxCell("",new mxGeometry(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return l.vertex=!0,e.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Spacer")}),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,n+"title label"),this.addEntry(n+"component",function(){var l=new mxCell("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry(0,0,180,90),"html=1;dropTarget=0;");l.vertex=!0;var a=new mxCell("",new mxGeometry(1,0,20,20),"shape=module;jettyWidth=8;jettyHeight=4;");return a.vertex=!0,a.geometry.relative=!0,a.geometry.offset=new mxPoint(-27,7),l.insert(a),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Component")}),this.addEntry(n+"component",function(){var l=new mxCell('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;");l.vertex=!0;var a=new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return a.vertex=!0,a.geometry.relative=!0,a.geometry.offset=new mxPoint(-24,4),l.insert(a),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Component with Attributes")}),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,n+"block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;",100,50,"Module","Module",null,null,n+"module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,n+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,n+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,e.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Class 3")}),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,e.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Class 4")}),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,e.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Class 5")}),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,e.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Interface 2")}),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addEntry("uml lollipop notation provided required interface",function(){return e.createVertexTemplateFromData("zVTBrptADPyavVYEkt4b0uQd3pMq5dD2uAUD27dgZJwE8vX1spsQlETtpVWRIjFjex3PmFVJWvc70m31hjlYlXxWSUqI7N/qPgVrVRyZXCUbFceR/FS8fRJdjNGo1QQN/0lB7AuO2h7AM57oeLCBIDw0Obj8SCVrJK6wxEbbV8RWyIWQP4F52Juzq9AHRqEqrm2IQpN/IsKTwAYb8MzWWBuO9B0hL2E2BGsqIQyxvJ9rzApD7QBrYBokhcBqNsf5UbrzsLzmXUu/oJET42jwGat5QYcHyiDkTDLKy03TiRrFfSx08m+FrrQtUkOZvZdbFKThmwMfVhf4fQ43/W3uZriiPPT+KKhjwnf4anKuQv//wsg+NPJ7/9d9Xf7eVykwbeeMOFWGYd/qzEVO8tHP/Suw4a2ujXV/+gXsEdhkOgSC8os44BQt0tggicZHeG1N2QiXibhAV48epRayEDd8MT7Ct06TUaXVWq027tCuhcx5VZjebeeaoDNn/WMcb/p+j0AM/dNr6InLl4Lgzylsk6OCgRWYsuI592gNZh5OhgmcblPv7+1l+ws=",40,10,"Lollipop Notation")}),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",function(){var l=new mxCell("",new mxGeometry(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;");l.vertex=!0;var a=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return a.geometry.setTerminalPoint(new mxPoint(15,90),!1),a.geometry.relative=!0,a.edge=!0,l.insertEdge(a,!0),e.createVertexTemplateFromCells([l,a],30,90,"Start")}),this.addEntry("uml activity state",function(){var l=new mxCell("Activity",new mxGeometry(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;");l.vertex=!0;var a=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return a.geometry.setTerminalPoint(new mxPoint(60,100),!1),a.geometry.relative=!0,a.edge=!0,l.insertEdge(a,!0),e.createVertexTemplateFromCells([l,a],120,100,"Activity")}),this.addEntry("uml activity composite state",function(){var l=new mxCell("Composite State",new mxGeometry(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;");l.vertex=!0;var a=new mxCell("Subtitle",new mxGeometry(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;");a.vertex=!0,l.insert(a);var o=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return o.geometry.setTerminalPoint(new mxPoint(80,120),!1),o.geometry.relative=!0,o.edge=!0,l.insertEdge(o,!0),e.createVertexTemplateFromCells([l,o],160,120,"Composite State")}),this.addEntry("uml activity condition",function(){var l=new mxCell("Condition",new mxGeometry(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;");l.vertex=!0;var a=new mxCell("no",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");a.geometry.setTerminalPoint(new mxPoint(180,20),!1),a.geometry.relative=!0,a.geometry.x=-1,a.edge=!0,l.insertEdge(a,!0);var o=new mxCell("yes",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;");return o.geometry.setTerminalPoint(new mxPoint(40,100),!1),o.geometry.relative=!0,o.geometry.x=-1,o.edge=!0,l.insertEdge(o,!0),e.createVertexTemplateFromCells([l,a,o],180,100,"Condition")}),this.addEntry("uml activity fork join",function(){var l=new mxCell("",new mxGeometry(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;");l.vertex=!0;var a=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return a.geometry.setTerminalPoint(new mxPoint(100,80),!1),a.geometry.relative=!0,a.edge=!0,l.insertEdge(a,!0),e.createVertexTemplateFromCells([l,a],200,80,"Fork/Join")}),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.addEntry("uml sequence invoke invocation call activation",function(){var l=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");l.vertex=!0;var a=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;");return a.geometry.setTerminalPoint(new mxPoint(-60,0),!0),a.geometry.relative=!0,a.edge=!0,l.insertEdge(a,!1),e.createVertexTemplateFromCells([l,a],10,80,"Found Message")}),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",function(){var l=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");l.vertex=!0;var a=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;");a.geometry.setTerminalPoint(new mxPoint(-70,0),!0),a.geometry.relative=!0,a.edge=!0,l.insertEdge(a,!1);var o=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;");return o.geometry.setTerminalPoint(new mxPoint(-70,76),!1),o.geometry.relative=!0,o.edge=!0,l.insertEdge(o,!0),e.createVertexTemplateFromCells([l,a,o],10,80,"Synchronous Invocation")}),this.addEntry("uml sequence self call recursion delegation activation",function(){var l=new mxCell("",new mxGeometry(0,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;");l.vertex=!0;var a=new mxCell("self call",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;");return a.geometry.setTerminalPoint(new mxPoint(5,0),!0),a.geometry.points=[new mxPoint(30,0)],a.geometry.relative=!0,a.edge=!0,l.insertEdge(a,!1),e.createVertexTemplateFromCells([l,a],10,60,"Self Call")}),this.addEntry("uml sequence invoke call delegation callback activation",function(){return e.createVertexTemplateFromData("xZRNT8MwDIZ/Ta6oaymD47rBTkiTuMAxW6wmIm0q19s6fj1OE3V0Y2iCA4dK8euP2I+riGxedUuUjX52CqzIHkU2R+conKpuDtaKNDFKZAuRpgl/In264J303qSRCDVdk5CGhJ20WwhKEFo62ChoqritxURkReNMTa2X80LkC68AmgoIkEWHpF3pamlXR7WIFwASdBeb7KXY4RIc5+KBQ/ZGkY4RYY5Egyl1zLqLmmyDXQ6Zx4n5EIf+HkB2BmAjrV3LzftPIPw4hgNn1pQ1a2tH5Cp2QK1miG7vNeu4iJe4pdeY2BtvbCQDGlAljMCQxBJotJ8rWCFYSWY3LvUdmZi68rvkkLiU6QnL1m1xAzHoBOdw61WEb88II9AW67/ydQ2wq1Cy1aAGvOrFfPh6997qDA3g+dxzv3nIL6MPU/8T+kMw8+m4QPgdfrEJNo8PSQj/+s58Ag==",10,60,"Callback")}),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createVertexTemplateEntry("shape=partialRectangle;html=1;top=1;align=left;dashed=1;",200,20,"Template1 signature","Template signature",null,null,"template signature"),this.createVertexTemplateEntry("shape=partialRectangle;html=1;top=1;align=left;dashed=1;",200,50,`Template parameter 1
Template parameter 2`,"Template signature",null,null,"template signature"),this.createVertexTemplateEntry("shape=note2;boundedLbl=1;whiteSpace=wrap;html=1;size=25;verticalAlign=top;align=center;",120,60,"Comment1 body","Note",null,null,"uml note"),this.addEntry("uml sequence self call recursion delegation activation",function(){var l=new mxCell("Constraint1 specification",new mxGeometry(0,0,160,60),"shape=note2;boundedLbl=1;whiteSpace=wrap;html=1;size=25;verticalAlign=top;align=center;");l.vertex=!0;var a=new mxCell("<<keyword>>",new mxGeometry(0,0,l.geometry.width,25),"resizeWidth=1;part=1;strokeColor=none;fillColor=none;align=left;spacingLeft=5;");return a.geometry.relative=!0,a.vertex=!0,l.insert(a),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Note")}),this.addEntry(n+"classifier",function(){var l=new mxCell("&lt;&lt;keyword&gt;&gt;<br><b>Classifier1</b><br>{abstract}",new mxGeometry(0,0,140,183),"swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=55;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var a=new mxCell("attributes",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");a.vertex=!0,l.insert(a);var o=new mxCell("attribute1",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");o.vertex=!0,l.insert(o);var h=new mxCell("inherited attribute2",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontColor=#808080;");h.vertex=!0,l.insert(h);var d=new mxCell("...",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");d.vertex=!0,l.insert(d),l.insert(i.clone());var m=new mxCell("operations",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");m.vertex=!0,l.insert(m);var g=new mxCell("operation1",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return g.vertex=!0,l.insert(g),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("shape=process;fixedSize=1;size=5;fontStyle=1;",140,40,"Classifier1","Classifier",null,null,"classifier"),this.addEntry(n+"classifier",function(){var l=new mxCell("Classifier1",new mxGeometry(0,0,140,183),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var a=new mxCell("internal structure",new mxGeometry(0,0,140,30),"html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");a.vertex=!0,l.insert(a);var o=new mxCell("",new mxGeometry(0,0,140,140),"strokeColor=none;fillColor=none;");o.vertex=!0,l.insert(o);var h=new mxCell("property1",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");h.geometry.relative=!0,h.geometry.offset=new mxPoint(20,20),h.vertex=!0,o.insert(h);var d=new mxCell("property2",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");d.geometry.relative=!0,d.geometry.offset=new mxPoint(20,90),d.vertex=!0,o.insert(d);var m=new mxCell("connector1",new mxGeometry(0,0,0,0),"edgeStyle=none;endArrow=none;verticalAlign=middle;labelBackgroundColor=none;endSize=12;html=1;align=left;endFill=0;exitX=0.15;exitY=1;entryX=0.15;entryY=0;spacingLeft=4;");return m.geometry.relative=!0,m.edge=!0,h.insertEdge(m,!0),d.insertEdge(m,!1),o.insert(m),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("fontStyle=1;",140,30,"Association1","Association",null,null,"association"),this.addEntry(n+"classifier",function(){var l=new mxCell("Instance1",new mxGeometry(0,0,140,138),"swimlane;fontStyle=4;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var a=new mxCell("slot1",new mxGeometry(0,0,140,30),"html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");a.vertex=!0,l.insert(a),l.insert(i.clone());var o=new mxCell("internal structure",new mxGeometry(0,0,140,20),"html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");o.vertex=!0,l.insert(o);var h=new mxCell("",new mxGeometry(0,0,140,50),"strokeColor=none;fillColor=none;");h.vertex=!0,l.insert(h);var d=new mxCell("instance2",new mxGeometry(0,0,80,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");return d.geometry.relative=!0,d.geometry.offset=new mxPoint(30,10),d.vertex=!0,h.insert(d),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("fontStyle=0;",120,40,"Instance1 value","Instance",null,null,"instance"),this.addEntry(n+"classifier",function(){var l=new mxCell("&lt;&lt;enumeration&gt;&gt;<br><b>Enum1</b>",new mxGeometry(0,0,140,70),"swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var a=new mxCell("literal1",new mxGeometry(0,0,140,30),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return a.vertex=!0,l.insert(a),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.addEntry(n+"classifier",function(){var l=new mxCell("0..1",new mxGeometry(0,0,120,50),"align=right;verticalAlign=top;spacingRight=2;");l.vertex=!0;var a=new mxCell("Property1",new mxGeometry(0,1,120,30),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;resizeWidth=1;");return a.geometry.relative=!0,a.geometry.offset=new mxPoint(0,-30),a.vertex=!0,l.insert(a),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("fontStyle=0;dashed=1;",140,30,"Property1","Property",null,null,"property"),this.createVertexTemplateEntry("fontStyle=0;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;spacingLeft=2;",30,30,"port1","Port",null,null,"port"),this.addEntry(n+"component",function(){var l=new mxCell("",new mxGeometry(0,0,140,200),"fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;marginBottom=0;");l.vertex=!0;var a=new mxCell("Component",new mxGeometry(0,0,140,40),"html=1;align=left;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");a.vertex=!0,l.insert(a);var o=new mxCell("",new mxGeometry(1,0,16,20),"shape=module;jettyWidth=10;jettyHeight=4;");o.vertex=!0,o.geometry.relative=!0,o.geometry.offset=new mxPoint(-25,9),a.insert(o),l.insert(i.clone());var h=new mxCell("provided interfaces",new mxGeometry(0,0,140,25),"html=1;align=center;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");h.vertex=!0,l.insert(h);var d=new mxCell("Interface1",new mxGeometry(0,0,140,25),"html=1;align=left;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");d.vertex=!0,l.insert(d),l.insert(i.clone());var m=new mxCell("required interfaces",new mxGeometry(0,0,140,25),"html=1;align=center;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");m.vertex=!0,l.insert(m);var g=new mxCell("Interface2",new mxGeometry(0,0,140,30),"html=1;align=left;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");return g.vertex=!0,l.insert(g),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Component")}),this.addEntry(n+"classifier",function(){var l=new mxCell("",new mxGeometry(0,0,270,230),"shape=ellipse;container=1;horizontal=1;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;html=1;dashed=1;collapsible=0;");l.vertex=!0;var a=new mxCell("Collaboration1",new mxGeometry(0,0,270,30),"html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");a.vertex=!0,l.insert(a);var o=new mxCell("",new mxGeometry(.145,0,192,8),"line;strokeWidth=1;fillColor=none;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;dashed=1;resizeWidth=1;");o.geometry.relative=!0,o.geometry.offset=new mxPoint(0,30),o.vertex=!0,l.insert(o);var h=new mxCell("Classifier1",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");h.geometry.relative=!0,h.geometry.offset=new mxPoint(85,50),h.vertex=!0,l.insert(h);var d=new mxCell("Collaboration use 1",new mxGeometry(0,0,140,30),"shape=ellipse;html=1;align=center;verticalAlign=middle;rotatable=0;dashed=1;");d.geometry.relative=!0,d.geometry.offset=new mxPoint(65,110),d.vertex=!0,l.insert(d);var m=new mxCell("property1",new mxGeometry(0,0,0,0),"edgeStyle=none;endArrow=none;verticalAlign=middle;labelBackgroundColor=none;endSize=12;html=1;align=left;endFill=0;spacingLeft=4;");m.geometry.relative=!0,m.edge=!0,h.insertEdge(m,!0),d.insertEdge(m,!1),l.insert(m);var g=new mxCell("Classifier2",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");g.geometry.relative=!0,g.geometry.offset=new mxPoint(85,170),g.vertex=!0,l.insert(g);var c=new mxCell("property1",new mxGeometry(0,0,0,0),"edgeStyle=none;endArrow=none;verticalAlign=middle;labelBackgroundColor=none;endSize=12;html=1;align=left;endFill=0;spacingLeft=4;");return c.geometry.relative=!0,c.edge=!0,d.insertEdge(c,!0),g.insertEdge(c,!1),l.insert(c),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("shape=folder;fontStyle=1;tabWidth=80;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;",150,80,"Package1","Package",null,null,n+"package"),this.addEntry(n+"package",function(){var l=new mxCell("Package1",new mxGeometry(0,0,150,100),"shape=folder;fontStyle=1;tabWidth=110;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;labelInHeader=1;");l.vertex=!0;var a=new mxCell("Packaged element1",new mxGeometry(0,0,110,30),"html=1;");return a.geometry.relative=!0,a.geometry.offset=new mxPoint(20,50),a.vertex=!0,l.insert(a),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.addEntry(n+"package",function(){var l=new mxCell("Model1",new mxGeometry(0,0,150,80),"shape=folder;fontStyle=1;tabWidth=110;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;folderSymbol=triangle;");return l.vertex=!0,e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Package")}),this.addEntry(n+"stereotype",function(){var l=new mxCell("",new mxGeometry(0,0,160,75),"shape=note2;size=25;childLayout=stackLayout;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;container=1;");l.vertex=!0;var a=new mxCell("&lt;&lt;stereotype1&gt;&gt;",new mxGeometry(0,0,160,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");a.vertex=!0,l.insert(a);var o=new mxCell("stereotype property 1",new mxGeometry(0,0,160,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");o.vertex=!0,l.insert(o);var h=new mxCell("stereotype property 2",new mxGeometry(0,0,160,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return h.vertex=!0,l.insert(h),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Stereotype")}),this.addEntry(n+"class",function(){var l=new mxCell("Class1",new mxGeometry(0,0,140,79),"swimlane;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=29;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var a=new mxCell("&lt;&lt;stereotype1&gt;&gt;",new mxGeometry(0,0,140,25),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");a.vertex=!0,l.insert(a);var o=new mxCell("stereotype property 1",new mxGeometry(0,0,140,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return o.vertex=!0,l.insert(o),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Class")}),this.createVertexTemplateEntry("text;html=1;align=center;",200,25,"&lt;&lt;stereotype1, stereotype2...&gt;&gt;","Label",null,null,n+"label"),this.createVertexTemplateEntry("ellipse;",50,25,"icon","Icon",null,null,n+"icon"),this.addEntry(n+"region",function(){var l=new mxCell("",new mxGeometry(60,0,10,100),"line;strokeWidth=1;direction=south;html=1;dashed=1;dashPattern=20 20;");l.vertex=!0;var a=new mxCell("Region 1",new mxGeometry(0,40,60,20),"text;align=right;");a.vertex=!0;var o=new mxCell("Region 2",new mxGeometry(70,40,60,20),"text;align=left;");return o.vertex=!0,e.createVertexTemplateFromCells([l,a,o],130,l.geometry.height,"Region")}),this.addEntry(n+"State",function(){var l=new mxCell("State1<br>[invariant1]<br>&lt;&lt;extended/final&gt;&gt;",new mxGeometry(0,0,140,176),"swimlane;fontStyle=4;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=60;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;rounded=1;absoluteArcSize=1;arcSize=50;");l.vertex=!0;var a=new mxCell("",new mxGeometry(0,0,140,50),"fillColor=none;strokeColor=none;container=1;collapsible=0;");a.vertex=!0,l.insert(a);var o=new mxCell("State2",new mxGeometry(30,10,80,30),"html=1;align=center;verticalAlign=middle;rounded=1;absoluteArcSize=1;arcSize=10;");o.vertex=!0,a.insert(o),l.insert(i.clone());var h=new mxCell("behavior1",new mxGeometry(0,0,140,25),"fillColor=none;strokeColor=none;align=left;verticalAlign=middle;spacingLeft=5;");h.vertex=!0,l.insert(h),l.insert(i.clone());var d=new mxCell("transition1",new mxGeometry(0,0,140,25),"fillColor=none;strokeColor=none;align=left;verticalAlign=middle;spacingLeft=5;");return d.vertex=!0,l.insert(d),e.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"State")}),this.createVertexTemplateEntry("html=1;align=center;verticalAlign=top;rounded=1;absoluteArcSize=1;arcSize=10;dashed=1;",140,40,"State1","State",null,null,n+"state"),this.createVertexTemplateEntry("html=1;align=center;verticalAlign=top;rounded=1;absoluteArcSize=1;arcSize=10;dashed=0;",140,40,"State","State",null,null,n+"state"),this.createVertexTemplateEntry("shape=folder;align=center;verticalAlign=middle;fontStyle=0;tabWidth=100;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;labelInHeader=1;rounded=1;absoluteArcSize=1;arcSize=10;",140,90,"State1","State",null,null,n+"state"),this.createVertexTemplateEntry("html=1;align=center;verticalAlign=top;rounded=1;absoluteArcSize=1;arcSize=10;dashed=0;",140,40,"State1, State2, ...","State",null,null,n+"state"),this.createVertexTemplateEntry("shape=umlState;rounded=1;verticalAlign=top;spacingTop=5;umlStateSymbol=collapseState;absoluteArcSize=1;arcSize=10;",140,60,"State1","State",null,null,n+"state"),this.addEntry(n+"State",function(){var l=new mxCell("State1",new mxGeometry(40,0,140,50),"shape=umlState;rounded=1;verticalAlign=middle;align=center;absoluteArcSize=1;arcSize=10;umlStateConnection=connPointRefEntry;boundedLbl=1;");l.vertex=!0;var a=new mxCell("Entry1",new mxGeometry(0,40,50,20),"text;verticalAlign=middle;align=center;");return a.vertex=!0,l.insert(a),e.createVertexTemplateFromCells([l,a],180,60,"State")}),this.addEntry(n+"State",function(){var l=new mxCell("State1",new mxGeometry(40,0,140,50),"shape=umlState;rounded=1;verticalAlign=middle;spacingTop=0;absoluteArcSize=1;arcSize=10;umlStateConnection=connPointRefExit;boundedLbl=1;");l.vertex=!0;var a=new mxCell("Exit1",new mxGeometry(0,40,50,20),"text;verticalAlign=middle;align=center;");return a.vertex=!0,l.insert(a),e.createVertexTemplateFromCells([l,a],180,60,"State")}),this.createVertexTemplateEntry("ellipse;fillColor=#000000;strokeColor=none;",30,30,"","Initial state",null,null,n+"initial state"),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#000000;",30,30,"","Final state",null,null,n+"final state"),this.createVertexTemplateEntry("ellipse;fillColor=#ffffff;strokeColor=#000000;",30,30,"H","Shallow History",null,null,n+"shallow history"),this.createVertexTemplateEntry("ellipse;fillColor=#ffffff;strokeColor=#000000;",30,30,"H*","Deep History",null,null,n+"deep history"),this.createVertexTemplateEntry("ellipse;fillColor=#ffffff;strokeColor=#000000;",30,30,"","Entry Point",null,null,n+"entry point"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",30,30,"","Exit Point",null,null,n+"exit point"),this.createVertexTemplateEntry("ellipse;fillColor=#000000;strokeColor=none;",20,20,"","Junction",null,null,n+"junction"),this.createVertexTemplateEntry("rhombus;",30,30,"","Choice",null,null,n+"choice"),this.createVertexTemplateEntry("shape=umlDestroy;",30,30,"","Terminate",null,null,n+"terminate"),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;fillColor=#000000;strokeColor=none;",5,80,"","Join/Fork",null,null,n+"join fork"),this.createVertexTemplateEntry("text;align=center;verticalAlign=middle;dashed=0;fillColor=#ffffff;strokeColor=#000000;",140,40,"OpaqueAction1 spec.","Opaque Action",null,null,n+"opaque action"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",function(){var l=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");return l.geometry.setTerminalPoint(new mxPoint(80,0),!0),l.geometry.setTerminalPoint(new mxPoint(0,0),!1),l.geometry.relative=!0,l.edge=!0,e.createEdgeTemplateFromCells([l],80,0,"Return")}),this.addEntry("uml relation",function(){var l=new mxCell("name",new mxGeometry(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;");l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.geometry.x=-1,l.edge=!0;var a=new mxCell("1",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");return a.geometry.relative=!0,a.setConnectable(!1),a.vertex=!0,l.insert(a),e.createEdgeTemplateFromCells([l],160,0,"Relation 1")}),this.addEntry("uml association",function(){var l=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.edge=!0;var a=new mxCell("parent",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");a.geometry.relative=!0,a.setConnectable(!1),a.vertex=!0,l.insert(a);var o=new mxCell("child",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;");return o.geometry.relative=!0,o.setConnectable(!1),o.vertex=!0,l.insert(o),e.createEdgeTemplateFromCells([l],160,0,"Association 1")}),this.addEntry("uml aggregation",function(){var l=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.geometry.x=-1,l.geometry.y=3,l.edge=!0,e.createEdgeTemplateFromCells([l],160,0,"Aggregation 1")}),this.addEntry("uml composition",function(){var l=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.geometry.x=-1,l.geometry.y=3,l.edge=!0,e.createEdgeTemplateFromCells([l],160,0,"Composition 1")}),this.addEntry("uml relation",function(){var l=new mxCell("Relation",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.edge=!0;var a=new mxCell("0..n",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=top;");a.geometry.relative=!0,a.setConnectable(!1),a.vertex=!0,l.insert(a);var o=new mxCell("1",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=top;");return o.geometry.relative=!0,o.setConnectable(!1),o.vertex=!0,l.insert(o),e.createEdgeTemplateFromCells([l],160,0,"Relation 2")}),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")];this.addPaletteFunctions("uml",mxResources$1.get("uml"),r||!1,s),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addBpmnPalette=function(r,e){var t=this;this.setCurrentSearchEntryLibrary("bpmn");var i=[this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;",120,80,"Task","Process",null,null,"bpmn task process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;",120,80,"Transaction","Transaction",null,null,"bpmn transaction"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 4;",120,80,`Event
Sub-Process`,"Event Sub-Process",null,null,"bpmn event subprocess sub process sub-process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;strokeWidth=3;",120,80,"Call Activity","Call Activity",null,null,"bpmn call activity"),this.addEntry("bpmn subprocess sub process sub-process",function(){var n=new mxCell("Sub-Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-7,-14),n.insert(s),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Sub-Process")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","loop","subprocess sub process sub-process looped").join(" "),function(){var n=new mxCell(`Looped
Sub-Process`,new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=mxgraph.bpmn.loop;outlineConnect=0;");s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-15,-14),n.insert(s);var l=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;");return l.vertex=!0,l.geometry.relative=!0,l.geometry.offset=new mxPoint(1,-14),n.insert(l),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Looped Sub-Process")}),this.addEntry("bpmn receive task",function(){var n=new mxCell("Receive",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(0,0,20,14),"html=1;shape=message;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(7,7),n.insert(s),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Receive Task")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","user_task").join(" "),function(){var n=new mxCell("User",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=mxgraph.bpmn.user_task;outlineConnect=0;");s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(7,7),n.insert(s);var l=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return l.vertex=!0,l.geometry.relative=!0,l.geometry.offset=new mxPoint(-7,-14),n.insert(l),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"User Task")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),function(){var n=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(1,1,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;verticalLabelPosition=bottom;verticalAlign=top;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-40,-15),n.insert(s),t.createVertexTemplateFromCells([n],120,95,"Attached Timer Event 1")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),function(){var n=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(1,0,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;labelPosition=right;align=left;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-15,10),n.insert(s),t.createVertexTemplateFromCells([n],135,80,"Attached Timer Event 2")}),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;startSize=20;",320,240,"Pool","Pool",null,null,"bpmn pool"),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;swimlaneLine=0;",300,120,"Lane","Lane",null,null,"bpmn lane"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;rounded=0;",60,50,"","Conversation",null,null,"bpmn conversation"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;strokeWidth=4;rounded=0;",60,50,"","Call Conversation",null,null,"bpmn call conversation"),this.addEntry("bpmn subconversation sub conversation sub-conversation",function(){var n=new mxCell("",new mxGeometry(0,0,60,50),"shape=hexagon;whiteSpace=wrap;html=1;perimeter=hexagonPerimeter;rounded=0;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-7,-14),n.insert(s),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Sub-Conversation")}),this.addEntry("bpmn data object",function(){var n=new mxCell("",new mxGeometry(0,0,40,60),"shape=note;whiteSpace=wrap;size=16;html=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=singleArrow;arrowWidth=0.4;arrowSize=0.4;outlineConnect=0;");s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(2,2),n.insert(s);var l=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;whiteSpace=wrap;shape=parallelMarker;outlineConnect=0;");return l.vertex=!0,l.geometry.relative=!0,l.geometry.offset=new mxPoint(-7,-14),n.insert(l),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Data Object")}),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"bpmn data store"),this.createVertexTemplateEntry("shape=plus;html=1;outlineConnect=0;",14,14,"","Sub-Process Marker",null,null,"bpmn subprocess sub process sub-process marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.loop;html=1;outlineConnect=0;",14,14,"","Loop Marker",null,null,"bpmn loop marker"),this.createVertexTemplateEntry("shape=parallelMarker;html=1;outlineConnect=0;",14,14,"","Parallel MI Marker",null,null,"bpmn parallel mi marker"),this.createVertexTemplateEntry("shape=parallelMarker;direction=south;html=1;outlineConnect=0;",14,14,"","Sequential MI Marker",null,null,"bpmn sequential mi marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.ad_hoc;fillColor=#000000;html=1;outlineConnect=0;",14,14,"","Ad Hoc Marker",null,null,"bpmn ad hoc marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.compensation;html=1;outlineConnect=0;",14,14,"","Compensation Marker",null,null,"bpmn compensation marker"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;fillColor=#000000;strokeColor=#ffffff;strokeWidth=2;",40,30,"","Send Task",null,null,"bpmn send task"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;",40,30,"","Receive Task",null,null,"bpmn receive task"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.user_task;html=1;outlineConnect=0;",14,14,"","User Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.manual_task;html=1;outlineConnect=0;",14,14,"","Manual Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.business_rule_task;html=1;outlineConnect=0;",14,14,"","Business Rule Task",null,null,this.getTagsForStencil("mxgraph.bpmn","business_rule_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.service_task;html=1;outlineConnect=0;",14,14,"","Service Task",null,null,this.getTagsForStencil("mxgraph.bpmn","service_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.script_task;html=1;outlineConnect=0;",14,14,"","Script Task",null,null,this.getTagsForStencil("mxgraph.bpmn","script_task").join(" ")),this.createVertexTemplateEntry("html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;",50,100,"","Annotation",null,null,this.getTagsForStencil("bpmn","annotation_1","bpmn business process model ").join(" ")),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.addDataEntry("container swimlane pool horizontal",480,380,"Horizontal Pool 1","zZRLbsIwEIZP4709TlHXhJYNSEicwCIjbNWJkWNKwumZxA6IlrRUaisWlmb+eX8LM5mXzdyrnV66Ai2TL0zm3rkQrbLJ0VoG3BRMzhgAp8fgdSQq+ijfKY9VuKcAYsG7snuMyso5G8U6tDaJ9cGUVlXkTXUoacuZIHOjjS0WqnX7blYd1OZt8KYea3PE1bCI+CAtVUMq7/o5b46uCmroSn18WFMm+XCdse5GpLq0OPqAzejxvZQun6MrMfiWUg6mCDpmZM8RENdotjqVyUFUdRS259oLSzISztto5Se0i44gcHEn3i9A/IQB3GbQpmi69DskAn4BSTaGBB4Jicj+k8nTGBP5SExg8odMyL38eH3s6kM8AQ=="),this.addDataEntry("container swimlane pool horizontal",480,360,"Horizontal Pool 2","zZTBbsIwDIafJvfU6dDOlI0LSEg8QUQtEi1tUBJGy9PPbcJQWTsxaZs4VLJ//07sT1WYKKpm6eRBrW2JhokXJgpnbYhR1RRoDAOuSyYWDIDTx+B1opr1VX6QDutwTwPEhndpjhiVjbUmij60Jon+pCsja8rmKlQ05SKjcKe0KVeytcfuLh/k7u2SzR16fcbNZZDsRlrLhlTenWedPts6SJMEOseFLTkph6Fj212RbGlwdAGbyeV7KW2+RFthcC1ZTroMKjry5wiIK9R7ldrELInSR2H/2XtlSUHCOY5WfEG76ggCz+7E+w2InzCAcQapIf0fAySzESQZ/AKSfAoJPCKS9mbzf0H0NIVIPDAiyP8QEaXX97CvDZ7LDw=="),this.createVertexTemplateEntry("swimlane;startSize=20;horizontal=0;",320,120,"Lane","Horizontal Swimlane",null,null,"swimlane lane pool"),this.addDataEntry("container swimlane pool horizontal",360,480,"Vertical Pool 1","xZRBbsIwEEVP4709ThFrQssGJKSewCIjbNXGyDEl4fSdxKa0NJFQVTULSzP/e+T5b2EmS9esgjrqja/QMvnMZBm8j6lyTYnWMuCmYnLJADgdBi8jruhdflQBD/GRAUgD78qeMClb720S69jaLNZn46w6ULfQ0dGWS0HlThtbrVXrT91bdVS7t2u3CFibC26vi4g7aaMaUjmpNBbiKxnUQyfkjTBEbEZT9VKOtELvMIaWrpxNFXW6IWcpOddo9jqPFfMsqjoJ+8/ZGyQqMqdhZvIHs3WHBrh4kNvvIsNw5Da7OdgXAgKGCMz+gEAxRgCmINDcxZ2CyNMYETkhESj+jwi1t1+r9759ah8="),this.addDataEntry("container swimlane pool vertical",380,480,"Vertical Pool 2","xZTPbsIwDMafJvf86dDOlI0LSEg8QUQtEi1pUBJGy9PPbdJ1G1TqhXGoZH/219g/RSGitM3ay5PaugoMEW9ElN65mCLblGAM4VRXRKwI5xQ/wt8nqqyv0pP0UMc5Bp4Mn9KcISk750wSQ2xNFsNFWyNrzJYqWpxyxTA8KG2qjWzduTsrRHn4GLKlh6CvsBsGYX+krWxQpaiizcc9FjDnnaCc11dXR2lyxyjsuyPy3/Lg4CM0k8v3Ut58Dc5C9C22XHQVVeoQrwkQVaCPKtuKQZQhCcdv78gSg4zzPlpxg3bTEeSUzcR7Q2bWyvz+ytmQr8NPAow/ikAxRYA/kQAr/hPByxQC8cxLsHggAkzH56uv/XrdvgA="),this.createVertexTemplateEntry("swimlane;startSize=20;",120,320,"Lane","Vertical Swimlane",null,null,"swimlane lane pool"),this.createVertexTemplateEntry("rounded=1;arcSize=10;dashed=1;strokeColor=#000000;fillColor=none;gradientColor=none;dashPattern=8 3 1 3;strokeWidth=2;",200,200,"","Group",null,null,this.getTagsForStencil("bpmn","group","bpmn business process model ").join(" ")),this.createEdgeTemplateEntry("endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Sequence Flow",null,"bpmn sequence flow"),this.createEdgeTemplateEntry("startArrow=dash;startSize=8;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Default Flow",null,"bpmn default flow"),this.createEdgeTemplateEntry("startArrow=diamondThin;startFill=0;startSize=14;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Conditional Flow",null,"bpmn conditional flow"),this.createEdgeTemplateEntry("startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;",100,0,"","Message Flow 1",null,"bpmn message flow"),this.addEntry("bpmn message flow",function(){var n=new mxCell("",new mxGeometry(0,0,0,0),"startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;");n.geometry.setTerminalPoint(new mxPoint(0,0),!0),n.geometry.setTerminalPoint(new mxPoint(100,0),!1),n.geometry.relative=!0,n.edge=!0;var s=new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return s.geometry.relative=!0,s.vertex=!0,s.geometry.offset=new mxPoint(-10,-7),n.insert(s),t.createEdgeTemplateFromCells([n],100,0,"Message Flow 2")}),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"bpmn link")];this.addPaletteFunctions("bpmn","BPMN "+mxResources$1.get("general"),!1,i),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.createTitle=function(r){var e=document.createElement("a");return e.setAttribute("title",mxResources$1.get("sidebarTooltip")),e.className="geTitle",mxUtils$1.write(e,r),e};Sidebar.prototype.createThumb=function(r,e,t,i,n,s,l,a,o){this.graph.labelsVisible=s==null||s;var h=mxClient.NO_FO;mxClient.NO_FO=Editor$1.prototype.originalNoForeignObject,this.graph.view.scaleAndTranslate(1,0,0),this.graph.addCells(r);var d=this.graph.getGraphBounds(),m=Math.floor(Math.min((e-2*this.thumbBorder)/d.width,(t-2*this.thumbBorder)/d.height)*100)/100;this.graph.view.scaleAndTranslate(m,Math.floor((e-d.width*m)/2/m-d.x),Math.floor((t-d.height*m)/2/m-d.y));var g=null;if(this.graph.dialect==mxConstants$1.DIALECT_SVG&&!mxClient.NO_FO&&this.graph.view.getCanvas().ownerSVGElement!=null?g=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0):(g=this.graph.container.cloneNode(!1),g.innerHTML=this.graph.container.innerHTML,(mxClient.IS_QUIRKS||document.documentMode==8)&&(g.firstChild.style.overflow="visible")),this.graph.getModel().clear(),mxClient.NO_FO=h,mxClient.IS_IE6&&(i.style.backgroundImage="url("+this.editorUi.editor.transparentImage+")"),g.style.position="relative",g.style.overflow="hidden",g.style.left=this.thumbBorder+"px",g.style.top=this.thumbBorder+"px",g.style.width=e+"px",g.style.height=t+"px",g.style.visibility="",g.style.minWidth="",g.style.minHeight="",i.appendChild(g),this.sidebarTitles&&n!=null&&l!=!1){var c=mxClient.IS_QUIRKS?2*this.thumbPadding+2:0;i.style.height=this.thumbHeight+c+this.sidebarTitleSize+8+"px";var f=document.createElement("div");f.style.fontSize=this.sidebarTitleSize+"px",f.style.color="#303030",f.style.textAlign="center",f.style.whiteSpace="nowrap",mxClient.IS_IE&&(f.style.height=this.sidebarTitleSize+12+"px"),f.style.paddingTop="4px",mxUtils$1.write(f,n),i.appendChild(f)}return d};Sidebar.prototype.createItem=function(r,e,t,i,n,s,l){var a=document.createElement("a");a.className="geItem",a.style.overflow="hidden";var o=mxClient.IS_QUIRKS?8+2*this.thumbPadding:2*this.thumbBorder;a.style.width=this.thumbWidth+o+"px",a.style.height=this.thumbHeight+o+"px",a.style.padding=this.thumbPadding+"px",mxClient.IS_IE6&&(a.style.border="none"),mxEvent$1.addListener(a,"click",function(m){mxEvent$1.consume(m)}),this.createThumb(r,this.thumbWidth,this.thumbHeight,a,e,t,i,n,s);var h=new mxRectangle(0,0,n,s);if(r.length>1||r[0].vertex){var d=this.createDragSource(a,this.createDropHandler(r,!0,l,h),this.createDragPreview(n,s),r,h);this.addClickHandler(a,d,r),d.isGuidesEnabled=mxUtils$1.bind(this,function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled})}else if(r[0]!=null&&r[0].edge){var d=this.createDragSource(a,this.createDropHandler(r,!1,l,h),this.createDragPreview(n,s),r,h);this.addClickHandler(a,d,r)}return mxClient.IS_IOS||mxEvent$1.addGestureListeners(a,null,mxUtils$1.bind(this,function(m){mxEvent$1.isMouseEvent(m)&&this.showTooltip(a,r,h.width,h.height,e,t)})),a};Sidebar.prototype.updateShapes=function(r,e){var t=this.editorUi.editor.graph,i=t.getCellStyle(r),n=[];t.model.beginUpdate();try{for(var s=t.getModel().getStyle(r),l=["shadow","dashed","dashPattern","fontFamily","fontSize","fontColor","align","startFill","startSize","endFill","endSize","strokeColor","strokeWidth","fillColor","gradientColor","html","part","noEdgeStyle","edgeStyle","elbow","childLayout","recursiveResize","container","collapsible","connectable","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle"],a=0;a<e.length;a++){var o=e[a];if(t.getModel().isVertex(o)==t.getModel().isVertex(r)||t.getModel().isEdge(o)==t.getModel().isEdge(r)){var h=t.getCurrentCellStyle(e[a]);if(t.getModel().setStyle(o,s),mxUtils$1.getValue(h,"composite","0")=="1")for(var d=t.model.getChildCount(o),m=d;m>=0;m--)t.model.remove(t.model.getChildAt(o,m));h[mxConstants$1.STYLE_SHAPE]=="umlLifeline"&&i[mxConstants$1.STYLE_SHAPE]!="umlLifeline"&&(t.setCellStyles(mxConstants$1.STYLE_SHAPE,"umlLifeline",[o]),t.setCellStyles("participant",i[mxConstants$1.STYLE_SHAPE],[o]));for(var m=0;m<l.length;m++){var g=h[l[m]];g!=null&&t.setCellStyles(l[m],g,[o])}n.push(o)}}}finally{t.model.endUpdate()}return n};Sidebar.prototype.createDropHandler=function(r,e,t,i){return t=t??!0,mxUtils$1.bind(this,function(n,s,l,a,o,h){for(var d=h?null:mxEvent$1.isTouchEvent(s)||mxEvent$1.isPenEvent(s)?document.elementFromPoint(mxEvent$1.getClientX(s),mxEvent$1.getClientY(s)):mxEvent$1.getSource(s);d!=null&&d!=this.container;)d=d.parentNode;if(d==null&&n.isEnabled()){if(r=n.getImportableCells(r),r.length>0){n.stopEditing();var m=l!=null&&!mxEvent$1.isAltDown(s)?n.isValidDropTarget(l,r,s):!1,g=null;if(l!=null&&!m&&(l=null),!n.isCellLocked(l||n.getDefaultParent())){n.model.beginUpdate();try{if(a=Math.round(a),o=Math.round(o),e&&n.isSplitTarget(l,r,s)){var c=n.view.scale,f=n.view.translate,C=(a+f.x)*c,v=(o+f.y)*c,w=n.cloneCells(r);n.splitEdge(l,w,null,a-i.width/2,o-i.height/2,C,v),g=w}else r.length>0&&(g=n.importCells(r,a,o,l));if(n.layoutManager!=null){var S=n.layoutManager.getLayout(l);if(S!=null)for(var c=n.view.scale,f=n.view.translate,C=(a+f.x)*c,v=(o+f.y)*c,T=0;T<g.length;T++)S.moveCell(g[T],C,v)}t&&(s==null||!mxEvent$1.isShiftDown(s))&&n.fireEvent(new mxEventObject$1("cellsInserted","cells",g))}catch(P){this.editorUi.handleError(P)}finally{n.model.endUpdate()}g!=null&&g.length>0&&(n.scrollCellToVisible(g[0]),n.setSelectionCells(g)),n.editAfterInsert&&s!=null&&mxEvent$1.isMouseEvent(s)&&g!=null&&g.length==1&&window.setTimeout(function(){n.startEditing(g[0])},0)}}mxEvent$1.consume(s)}})};Sidebar.prototype.createDragPreview=function(r,e){var t=document.createElement("div");return t.style.border=this.dragPreviewBorder,t.style.width=r+"px",t.style.height=e+"px",t};Sidebar.prototype.dropAndConnect=function(r,e,t,i,n){var s=this.getDropAndConnectGeometry(r,e[i],t,e),l=[];if(s!=null){var a=this.editorUi.editor.graph,o=null;a.model.beginUpdate();try{var h=a.getCellGeometry(r),d=a.getCellGeometry(e[i]),m=a.model.getParent(r),g=!0;if(a.layoutManager!=null){var c=a.layoutManager.getLayout(m);c!=null&&c.constructor==mxStackLayout&&(g=!1)}var l=a.model.isEdge(r)?null:a.view.getState(m),f=0,C=0;if(l!=null){var v=l.origin;f=v.x,C=v.y;var w=s.getTerminalPoint(!1);w!=null&&(w.x+=v.x,w.y+=v.y)}var S=!a.isTableRow(r)&&!a.isTableCell(r)&&(a.model.isEdge(r)||h!=null&&!h.relative&&g),T=a.getCellAt((s.x+f+a.view.translate.x)*a.view.scale,(s.y+C+a.view.translate.y)*a.view.scale,null,null,null,function(G,Y,te){return!a.isContainer(G.cell)});if(T!=null&&T!=m){if(l=a.view.getState(T),l!=null){var v=l.origin;m=T,S=!0,a.model.isEdge(r)||(s.x-=v.x-f,s.y-=v.y-C)}}else(!g||a.isTableRow(r)||a.isTableCell(r))&&(s.x+=f,s.y+=C);if(f=d.x,C=d.y,a.model.isEdge(e[i])&&(f=0,C=0),e=a.importCells(e,s.x-(S?f:0),s.y-(S?C:0),S?m:null),l=e,a.model.isEdge(r))a.model.setTerminal(r,e[i],t==mxConstants$1.DIRECTION_NORTH);else if(a.model.isEdge(e[i])){a.model.setTerminal(e[i],r,!0);var P=a.getCellGeometry(e[i]);if(P.points=null,P.getTerminalPoint(!1)!=null)P.setTerminalPoint(s.getTerminalPoint(!1),!1);else if(S&&a.model.isVertex(m)){var L=a.view.getState(m),v=L.cell!=a.view.currentRoot?L.origin:new mxPoint(0,0);a.cellsMoved(e,v.x,v.y,null,null,!0)}}else d=a.getCellGeometry(e[i]),f=s.x-Math.round(d.x),C=s.y-Math.round(d.y),s.x=Math.round(d.x),s.y=Math.round(d.y),a.model.setGeometry(e[i],s),a.cellsMoved(e,f,C,null,null,!0),l=e.slice(),o=l.length==1?l[0]:null,e.push(a.insertEdge(null,null,"",r,e[i],a.createCurrentEdgeStyle()));(n==null||!mxEvent$1.isShiftDown(n))&&a.fireEvent(new mxEventObject$1("cellsInserted","cells",e))}catch(k){this.editorUi.handleError(k)}finally{a.model.endUpdate()}a.editAfterInsert&&n!=null&&mxEvent$1.isMouseEvent(n)&&o!=null&&window.setTimeout(function(){a.startEditing(o)},0)}return l};Sidebar.prototype.getDropAndConnectGeometry=function(r,e,t,i){var n=this.editorUi.editor.graph,s=n.view,l=i.length>1,a=n.getCellGeometry(r),o=n.getCellGeometry(e);if(a!=null&&o!=null)if(o=o.clone(),n.model.isEdge(r)){var h=n.view.getState(r),d=h.absolutePoints,m=d[0],g=d[d.length-1];t==mxConstants$1.DIRECTION_NORTH?(o.x=m.x/s.scale-s.translate.x-o.width/2,o.y=m.y/s.scale-s.translate.y-o.height/2):(o.x=g.x/s.scale-s.translate.x-o.width/2,o.y=g.y/s.scale-s.translate.y-o.height/2)}else{if(a.relative){var h=n.view.getState(r);a=a.clone(),a.x=(h.x-s.translate.x)/s.scale,a.y=(h.y-s.translate.y)/s.scale}var c=n.defaultEdgeLength;if(n.model.isEdge(e)&&o.getTerminalPoint(!0)!=null&&o.getTerminalPoint(!1)!=null){var m=o.getTerminalPoint(!0),g=o.getTerminalPoint(!1),f=g.x-m.x,C=g.y-m.y;c=Math.sqrt(f*f+C*C),o.x=a.getCenterX(),o.y=a.getCenterY(),o.width=1,o.height=1,t==mxConstants$1.DIRECTION_NORTH?(o.height=c,o.y=a.y-c,o.setTerminalPoint(new mxPoint(o.x,o.y),!1)):t==mxConstants$1.DIRECTION_EAST?(o.width=c,o.x=a.x+a.width,o.setTerminalPoint(new mxPoint(o.x+o.width,o.y),!1)):t==mxConstants$1.DIRECTION_SOUTH?(o.height=c,o.y=a.y+a.height,o.setTerminalPoint(new mxPoint(o.x,o.y+o.height),!1)):t==mxConstants$1.DIRECTION_WEST&&(o.width=c,o.x=a.x-c,o.setTerminalPoint(new mxPoint(o.x,o.y),!1))}else if(!l&&o.width>45&&o.height>45&&a.width>45&&a.height>45&&(o.width=o.width*(a.height/o.height),o.height=a.height),o.x=a.x+a.width/2-o.width/2,o.y=a.y+a.height/2-o.height/2,t==mxConstants$1.DIRECTION_NORTH?o.y=o.y-a.height/2-o.height/2-c:t==mxConstants$1.DIRECTION_EAST?o.x=o.x+a.width/2+o.width/2+c:t==mxConstants$1.DIRECTION_SOUTH?o.y=o.y+a.height/2+o.height/2+c:t==mxConstants$1.DIRECTION_WEST&&(o.x=o.x-a.width/2-o.width/2-c),n.model.isEdge(e)&&o.getTerminalPoint(!0)!=null&&e.getTerminal(!1)!=null){var v=n.getCellGeometry(e.getTerminal(!1));v!=null&&(t==mxConstants$1.DIRECTION_NORTH?(o.x-=v.getCenterX(),o.y-=v.getCenterY()+v.height/2):t==mxConstants$1.DIRECTION_EAST?(o.x-=v.getCenterX()-v.width/2,o.y-=v.getCenterY()):t==mxConstants$1.DIRECTION_SOUTH?(o.x-=v.getCenterX(),o.y-=v.getCenterY()-v.height/2):t==mxConstants$1.DIRECTION_WEST&&(o.x-=v.getCenterX()+v.width/2,o.y-=v.getCenterY()))}}return o};Sidebar.prototype.isDropStyleEnabled=function(r,e){var t=!0;if(e!=null&&r.length==1){var i=this.graph.getCellStyle(r[e]);i!=null&&(t=mxUtils$1.getValue(i,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(i,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE)}return t};Sidebar.prototype.isDropStyleTargetIgnored=function(r){return this.graph.isSwimlane(r.cell)||this.graph.isTableCell(r.cell)||this.graph.isTableRow(r.cell)||this.graph.isTable(r.cell)};Sidebar.prototype.createDragSource=function(r,e,t,i,n){for(var s=this.editorUi,l=s.editor.graph,a=null,o=null,h=this,d=0;d<i.length&&(o==null&&l.model.isVertex(i[d])?o=d:a==null&&l.model.isEdge(i[d])&&l.model.getTerminal(i[d],!0)==null&&(a=d),!(o!=null&&a!=null));d++);var m=this.isDropStyleEnabled(i,o),g=mxUtils$1.makeDraggable(r,l,mxUtils$1.bind(this,function(Q,me,ce,Le,Ie){if(this.updateThread!=null&&window.clearTimeout(this.updateThread),i!=null&&w!=null&&q==G){var Ge=Q.isCellSelected(w.cell)?Q.getSelectionCells():[w.cell],fe=this.updateShapes(Q.model.isEdge(w.cell)?i[0]:i[o],Ge);Q.setSelectionCells(fe)}else if(i!=null&&q!=null&&C!=null&&q!=G){var Te=Q.model.isEdge(C.cell)||a==null?o:a;Q.setSelectionCells(this.dropAndConnect(C.cell,i,ne,Te,me))}else e.apply(this,arguments);this.editorUi.hoverIcons!=null&&this.editorUi.hoverIcons.update(Q.view.getState(Q.getSelectionCell()))}),t,0,0,l.autoscroll,!0,!0);l.addListener(mxEvent$1.ESCAPE,function(Q,me){g.isActive()&&g.reset()});var c=g.mouseDown;g.mouseDown=function(Q){!mxEvent$1.isPopupTrigger(Q)&&!mxEvent$1.isMultiTouchEvent(Q)&&(l.stopEditing(),c.apply(this,arguments))};function f(Q,me){var ce=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"?(ce=document.createElement(mxClient.VML_PREFIX+":image"),ce.setAttribute("src",Q.src),ce.style.borderStyle="none"):(ce=document.createElement("div"),ce.style.backgroundImage="url("+Q.src+")",ce.style.backgroundPosition="center",ce.style.backgroundRepeat="no-repeat"),ce.style.width=Q.width+4+"px",ce.style.height=Q.height+4+"px",ce.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):(ce=mxUtils$1.createImage(Q.src),ce.style.width=Q.width+"px",ce.style.height=Q.height+"px"),me!=null&&ce.setAttribute("title",me),ce.style.position="absolute",ce.style.cursor="crosshair",ce}var C=null,v=null,w=null,S=!1,T=f(this.triangleUp,mxResources$1.get("connect")),P=f(this.triangleRight,mxResources$1.get("connect")),L=f(this.triangleDown,mxResources$1.get("connect")),k=f(this.triangleLeft,mxResources$1.get("connect")),G=f(this.refreshTarget,mxResources$1.get("replace")),Y=null,te=f(this.roundDrop),ie=f(this.roundDrop),ne=mxConstants$1.DIRECTION_NORTH,q=null;function oe(Q,me,ce,Le){return Le.parentNode!=null&&(mxUtils$1.contains(ce,Q,me)?(mxUtils$1.setOpacity(Le,100),q=Le):mxUtils$1.setOpacity(Le,Le==G?30:20)),ce}var le=g.createPreviewElement;g.createPreviewElement=function(Q){var me=le.apply(this,arguments);return mxClient.IS_SVG&&(me.style.pointerEvents="none"),this.previewElementWidth=me.style.width,this.previewElementHeight=me.style.height,me};var Z=g.dragEnter;g.dragEnter=function(Q,me){s.hoverIcons!=null&&s.hoverIcons.setDisplay("none"),Z.apply(this,arguments)};var B=g.dragExit;g.dragExit=function(Q,me){s.hoverIcons!=null&&s.hoverIcons.setDisplay(""),B.apply(this,arguments)},g.dragOver=function(Q,me){if(mxDragSource.prototype.dragOver.apply(this,arguments),this.currentGuide!=null&&q!=null&&this.currentGuide.hide(),this.previewElement!=null){var ce=Q.view;if(w!=null&&q==G)this.previewElement.style.display=Q.model.isEdge(w.cell)?"none":"",this.previewElement.style.left=w.x+"px",this.previewElement.style.top=w.y+"px",this.previewElement.style.width=w.width+"px",this.previewElement.style.height=w.height+"px";else if(C!=null&&q!=null){g.currentHighlight!=null&&g.currentHighlight.state!=null&&g.currentHighlight.hide();var Le=Q.model.isEdge(C.cell)||a==null?o:a,Ie=h.getDropAndConnectGeometry(C.cell,i[Le],ne,i),Ge=Q.model.isEdge(C.cell)?null:Q.getCellGeometry(C.cell),fe=Q.getCellGeometry(i[Le]),Te=Q.model.getParent(C.cell),Ve=ce.translate.x*ce.scale,De=ce.translate.y*ce.scale;if(Ge!=null&&!Ge.relative&&Q.model.isVertex(Te)&&Te!=ce.currentRoot){var He=ce.getState(Te);Ve=He.x,De=He.y}var ue=fe.x,be=fe.y;Q.model.isEdge(i[Le])&&(ue=0,be=0),this.previewElement.style.left=(Ie.x-ue)*ce.scale+Ve+"px",this.previewElement.style.top=(Ie.y-be)*ce.scale+De+"px",i.length==1&&(this.previewElement.style.width=Ie.width*ce.scale+"px",this.previewElement.style.height=Ie.height*ce.scale+"px"),this.previewElement.style.display=""}else g.currentHighlight.state!=null&&Q.model.isEdge(g.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-n.width*ce.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-n.height*ce.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display="")}};var re=new Date().getTime(),se=0,ve=null,pe=this.editorUi.editor.graph.getCellStyle(i[0]);return g.getDropTarget=mxUtils$1.bind(this,function(Q,me,ce,Le){var Ie=!mxEvent$1.isAltDown(Le)&&i!=null?Q.getCellAt(me,ce,null,null,null,function(E,$,R){return Q.isContainer(E.cell)}):null;if(Ie!=null&&!this.graph.isCellConnectable(Ie)&&!this.graph.model.isEdge(Ie)){var Ge=this.graph.getModel().getParent(Ie);this.graph.getModel().isVertex(Ge)&&this.graph.isCellConnectable(Ge)&&(Ie=Ge)}Q.isCellLocked(Ie)&&(Ie=null);var fe=Q.view.getState(Ie);q=null;var Te=null;if(ve!=fe?(re=new Date().getTime(),se=0,ve=fe,this.updateThread!=null&&window.clearTimeout(this.updateThread),fe!=null&&(this.updateThread=window.setTimeout(function(){q==null&&(ve=fe,g.getDropTarget(Q,me,ce,Le))},this.dropTargetDelay+10))):se=new Date().getTime()-re,m&&se<2500&&fe!=null&&!mxEvent$1.isShiftDown(Le)&&(mxUtils$1.getValue(fe.style,mxConstants$1.STYLE_SHAPE)!=mxUtils$1.getValue(pe,mxConstants$1.STYLE_SHAPE)&&(mxUtils$1.getValue(fe.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(fe.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(fe.style,mxConstants$1.STYLE_GRADIENTCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE)||mxUtils$1.getValue(pe,mxConstants$1.STYLE_SHAPE)=="image"||se>1500||Q.model.isEdge(fe.cell))&&se>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(fe)&&(Q.model.isVertex(fe.cell)&&o!=null||Q.model.isEdge(fe.cell)&&Q.model.isEdge(i[0]))){w=fe;var Ve=Q.model.isEdge(fe.cell)?Q.view.getPoint(fe):new mxPoint(fe.getCenterX(),fe.getCenterY());Ve=new mxRectangle(Ve.x-this.refreshTarget.width/2,Ve.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),G.style.left=Math.floor(Ve.x)+"px",G.style.top=Math.floor(Ve.y)+"px",Y==null&&(Q.container.appendChild(G),Y=G.parentNode),oe(me,ce,Ve,G)}else if(w==null||!mxUtils$1.contains(w,me,ce)||se>1500&&!mxEvent$1.isShiftDown(Le))w=null,Y!=null&&(G.parentNode.removeChild(G),Y=null);else if(w!=null&&Y!=null){var Ve=Q.model.isEdge(w.cell)?Q.view.getPoint(w):new mxPoint(w.getCenterX(),w.getCenterY());Ve=new mxRectangle(Ve.x-this.refreshTarget.width/2,Ve.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),oe(me,ce,Ve,G)}if(S&&C!=null&&!mxEvent$1.isAltDown(Le)&&q==null){if(Te=mxRectangle.fromRectangle(C),Q.model.isEdge(C.cell)){var De=C.absolutePoints;if(te.parentNode!=null){var He=De[0];Te.add(oe(me,ce,new mxRectangle(He.x-this.roundDrop.width/2,He.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),te))}if(ie.parentNode!=null){var ue=De[De.length-1];Te.add(oe(me,ce,new mxRectangle(ue.x-this.roundDrop.width/2,ue.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),ie))}}else{var be=mxRectangle.fromRectangle(C);C.shape!=null&&C.shape.boundingBox!=null&&(be=mxRectangle.fromRectangle(C.shape.boundingBox)),be.grow(this.graph.tolerance),be.grow(HoverIcons.prototype.arrowSpacing);var Fe=this.graph.selectionCellsHandler.getHandler(C.cell);Fe!=null&&(be.x-=Fe.horizontalOffset/2,be.y-=Fe.verticalOffset/2,be.width+=Fe.horizontalOffset,be.height+=Fe.verticalOffset,Fe.rotationShape!=null&&Fe.rotationShape.node!=null&&Fe.rotationShape.node.style.visibility!="hidden"&&Fe.rotationShape.node.style.display!="none"&&Fe.rotationShape.boundingBox!=null&&be.add(Fe.rotationShape.boundingBox)),Te.add(oe(me,ce,new mxRectangle(C.getCenterX()-this.triangleUp.width/2,be.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),T)),Te.add(oe(me,ce,new mxRectangle(be.x+be.width,C.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),P)),Te.add(oe(me,ce,new mxRectangle(C.getCenterX()-this.triangleDown.width/2,be.y+be.height,this.triangleDown.width,this.triangleDown.height),L)),Te.add(oe(me,ce,new mxRectangle(be.x-this.triangleLeft.width,C.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),k))}Te?.grow(10)}ne=mxConstants$1.DIRECTION_NORTH,q==P?ne=mxConstants$1.DIRECTION_EAST:q==L||q==ie?ne=mxConstants$1.DIRECTION_SOUTH:q==k&&(ne=mxConstants$1.DIRECTION_WEST),w!=null&&q==G&&(fe=w);var Pe=(o==null||Q.isCellConnectable(i[o]))&&(Q.model.isEdge(Ie)&&o!=null||Q.model.isVertex(Ie)&&Q.isCellConnectable(Ie));if(C!=null&&se>=5e3||C!=fe&&(Te==null||!mxUtils$1.contains(Te,me,ce)||se>500&&q==null&&Pe))if(S=!1,C=se<5e3&&se>this.dropTargetDelay||Q.model.isEdge(Ie)?fe:null,C!=null&&Pe){for(var je=[te,ie,T,P,L,k],Qe=0;Qe<je.length;Qe++)je[Qe].parentNode!=null&&je[Qe].parentNode.removeChild(je[Qe]);if(Q.model.isEdge(Ie)){var De=fe.absolutePoints;if(De!=null){var He=De[0],ue=De[De.length-1],et=Q.tolerance;new mxRectangle(me-et,ce-et,2*et,2*et),te.style.left=Math.floor(He.x-this.roundDrop.width/2)+"px",te.style.top=Math.floor(He.y-this.roundDrop.height/2)+"px",ie.style.left=Math.floor(ue.x-this.roundDrop.width/2)+"px",ie.style.top=Math.floor(ue.y-this.roundDrop.height/2)+"px",Q.model.getTerminal(Ie,!0)==null&&Q.container.appendChild(te),Q.model.getTerminal(Ie,!1)==null&&Q.container.appendChild(ie)}}else{var be=mxRectangle.fromRectangle(fe);fe.shape!=null&&fe.shape.boundingBox!=null&&(be=mxRectangle.fromRectangle(fe.shape.boundingBox)),be.grow(this.graph.tolerance),be.grow(HoverIcons.prototype.arrowSpacing);var Fe=this.graph.selectionCellsHandler.getHandler(fe.cell);Fe!=null&&(be.x-=Fe.horizontalOffset/2,be.y-=Fe.verticalOffset/2,be.width+=Fe.horizontalOffset,be.height+=Fe.verticalOffset,Fe.rotationShape!=null&&Fe.rotationShape.node!=null&&Fe.rotationShape.node.style.visibility!="hidden"&&Fe.rotationShape.node.style.display!="none"&&Fe.rotationShape.boundingBox!=null&&be.add(Fe.rotationShape.boundingBox)),T.style.left=Math.floor(fe.getCenterX()-this.triangleUp.width/2)+"px",T.style.top=Math.floor(be.y-this.triangleUp.height)+"px",P.style.left=Math.floor(be.x+be.width)+"px",P.style.top=Math.floor(fe.getCenterY()-this.triangleRight.height/2)+"px",L.style.left=T.style.left,L.style.top=Math.floor(be.y+be.height)+"px",k.style.left=Math.floor(be.x-this.triangleLeft.width)+"px",k.style.top=P.style.top,fe.style.portConstraint!="eastwest"&&(Q.container.appendChild(T),Q.container.appendChild(L)),Q.container.appendChild(P),Q.container.appendChild(k)}fe!=null&&(v=Q.selectionCellsHandler.getHandler(fe.cell),v!=null&&v.setHandlesVisible!=null&&v.setHandlesVisible(!1)),S=!0}else for(var je=[te,ie,T,P,L,k],Qe=0;Qe<je.length;Qe++)je[Qe].parentNode!=null&&je[Qe].parentNode.removeChild(je[Qe]);!S&&v!=null&&v.setHandlesVisible(!0);var Ze=(!mxEvent$1.isAltDown(Le)||mxEvent$1.isShiftDown(Le))&&!(w!=null&&q==G)?mxDragSource.prototype.getDropTarget.apply(this,arguments):null,Ke=Q.getModel();if(Ze!=null&&(q!=null||!Q.isSplitTarget(Ze,i,Le))){for(;Ze!=null&&!Q.isValidDropTarget(Ze,i,Le)&&Ke.isVertex(Ke.getParent(Ze));)Ze=Ke.getParent(Ze);Ze!=null&&(Q.view.currentRoot==Ze||!Q.isValidRoot(Ze)&&Q.getModel().getChildCount(Ze)==0||Q.isCellLocked(Ze)||Ke.isEdge(Ze)||!Q.isValidDropTarget(Ze,i,Le))&&(Ze=null)}return Ze}),g.stopDrag=function(){mxDragSource.prototype.stopDrag.apply(this,arguments);for(var Q=[te,ie,G,T,P,L,k],me=0;me<Q.length;me++)Q[me].parentNode!=null&&Q[me].parentNode.removeChild(Q[me]);C!=null&&v!=null&&v.reset(),v=null,C=null,w=null,Y=null,q=null},g};Sidebar.prototype.itemClicked=function(r,e,t,i){var n=this.editorUi.editor.graph;if(n.container.focus(),mxEvent$1.isAltDown(t)&&n.getSelectionCount()==1&&n.model.isVertex(n.getSelectionCell())){for(var s=null,l=0;l<r.length&&s==null;l++)n.model.isVertex(r[l])&&(s=l);s!=null&&(n.setSelectionCells(this.dropAndConnect(n.getSelectionCell(),r,mxEvent$1.isMetaDown(t)||mxEvent$1.isControlDown(t)?mxEvent$1.isShiftDown(t)?mxConstants$1.DIRECTION_WEST:mxConstants$1.DIRECTION_NORTH:mxEvent$1.isShiftDown(t)?mxConstants$1.DIRECTION_EAST:mxConstants$1.DIRECTION_SOUTH,s,t)),n.scrollCellToVisible(n.getSelectionCell()))}else if(mxEvent$1.isShiftDown(t)&&!n.isSelectionEmpty())this.updateShapes(r[0],n.getSelectionCells()),n.scrollCellToVisible(n.getSelectionCell());else{var a=mxEvent$1.isAltDown(t)?n.getFreeInsertPoint():n.getCenterInsertPoint(n.getBoundingBoxFromGeometry(r,!0));e.drop(n,t,null,a.x,a.y,!0)}};Sidebar.prototype.addClickHandler=function(r,e,t){var i=this.editorUi.editor.graph,n=e.mouseDown,s=e.mouseMove,l=e.mouseUp,a=i.tolerance,o=null,h=this;e.mouseDown=function(d){n.apply(this,arguments),o=new mxPoint(mxEvent$1.getClientX(d),mxEvent$1.getClientY(d)),this.dragElement!=null&&(this.dragElement.style.display="none",mxUtils$1.setOpacity(r,50))},e.mouseMove=function(d){this.dragElement!=null&&this.dragElement.style.display=="none"&&o!=null&&(Math.abs(o.x-mxEvent$1.getClientX(d))>a||Math.abs(o.y-mxEvent$1.getClientY(d))>a)&&(this.dragElement.style.display="",mxUtils$1.setOpacity(r,100)),s.apply(this,arguments)},e.mouseUp=function(d){try{!mxEvent$1.isPopupTrigger(d)&&this.currentGraph==null&&this.dragElement!=null&&this.dragElement.style.display=="none"&&h.itemClicked(t,e,d,r),l.apply(e,arguments),mxUtils$1.setOpacity(r,100),o=null,h.currentElt=r}catch(m){e.reset(),h.editorUi.handleError(m)}}};Sidebar.prototype.createVertexTemplateEntry=function(r,e,t,i,n,s,l,a){return a=a!=null&&a.length>0?a:n!=null?n.toLowerCase():"",this.addEntry(a,mxUtils$1.bind(this,function(){return this.createVertexTemplate(r,e,t,i,n,s,l)}))};Sidebar.prototype.createVertexTemplate=function(r,e,t,i,n,s,l,a){var o=[new mxCell(i??"",new mxGeometry(0,0,e,t),r)];return o[0].vertex=!0,this.createVertexTemplateFromCells(o,e,t,n,s,l,a)};Sidebar.prototype.createVertexTemplateFromData=function(r,e,t,i,n,s,l){var a=mxUtils$1.parseXml(Graph$1.decompress(r)),o=new mxCodec(a),h=new mxGraphModel;o.decode(a.documentElement,h);var d=this.graph.cloneCells(h.root.getChildAt(0).children);return this.createVertexTemplateFromCells(d,e,t,i,n,s,l)};Sidebar.prototype.createVertexTemplateFromCells=function(r,e,t,i,n,s,l){return this.createItem(r,i,n,s,e,t,l)};Sidebar.prototype.createEdgeTemplateEntry=function(r,e,t,i,n,s,l,a){return l=l!=null&&l.length>0?l:n.toLowerCase(),this.addEntry(l,mxUtils$1.bind(this,function(){return this.createEdgeTemplate(r,e,t,i,n,s,a)}))};Sidebar.prototype.createEdgeTemplate=function(r,e,t,i,n,s,l){var a=new mxCell(i??"",new mxGeometry(0,0,e,t),r);return a.geometry.setTerminalPoint(new mxPoint(0,t),!0),a.geometry.setTerminalPoint(new mxPoint(e,0),!1),a.geometry.relative=!0,a.edge=!0,this.createEdgeTemplateFromCells([a],e,t,n,s,l)};Sidebar.prototype.createEdgeTemplateFromCells=function(r,e,t,i,n,s){return this.createItem(r,i,n,!0,e,t,s)};Sidebar.prototype.addPaletteFunctions=function(r,e,t,i){this.addPalette(r,e,t,mxUtils$1.bind(this,function(n){for(var s=0;s<i.length;s++)n.appendChild(i[s](n))}))};Sidebar.prototype.addPalette=function(r,e,t,i){var n=this.createTitle(e);this.container.appendChild(n);var s=document.createElement("div");s.className="geSidebar",mxClient.IS_POINTER&&(s.style.touchAction="none"),t?(i(s),i=null):s.style.display="none",this.addFoldingHandler(n,s,i);var l=document.createElement("div");return l.appendChild(s),this.container.appendChild(l),r!=null&&(this.palettes[r]=[n,l]),s};Sidebar.prototype.addFoldingHandler=function(r,e,t){var i=!1;(!mxClient.IS_IE||document.documentMode>=8)&&(r.style.backgroundImage=e.style.display=="none"?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),r.style.backgroundRepeat="no-repeat",r.style.backgroundPosition="0% 50%",mxEvent$1.addListener(r,"click",mxUtils$1.bind(this,function(n){if(e.style.display=="none"){if(i)e.style.display="block";else if(i=!0,t!=null){r.style.cursor="wait";var s=r.innerHTML;r.innerHTML=mxResources$1.get("loading")+"...",window.setTimeout(function(){e.style.display="block",r.style.cursor="",r.innerHTML=s;var l=mxClient.NO_FO;mxClient.NO_FO=Editor$1.prototype.originalNoForeignObject,t(e,r),mxClient.NO_FO=l},mxClient.IS_FF?20:0)}else e.style.display="block";r.style.backgroundImage="url('"+this.expandedImage+"')"}else r.style.backgroundImage="url('"+this.collapsedImage+"')",e.style.display="none";mxEvent$1.consume(n)})),mxClient.IS_QUIRKS||mxEvent$1.addListener(r,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(n){n.preventDefault()}))};Sidebar.prototype.removePalette=function(r){var e=this.palettes[r];if(e!=null){this.palettes[r]=null;for(var t=0;t<e.length;t++)this.container.removeChild(e[t]);return!0}return!1};Sidebar.prototype.addImagePalette=function(r,e,t,i,n,s,l){for(var a=[],o=0;o<n.length;o++)mxUtils$1.bind(this,function(h,d,m){if(m==null){var g=h.lastIndexOf("/"),c=h.lastIndexOf(".");m=h.substring(g>=0?g+1:0,c>=0?c:h.length).replace(/[-_]/g," ")}a.push(this.createVertexTemplateEntry("image;html=1;image="+t+h+i,this.defaultImageWidth,this.defaultImageHeight,"",d,d!=null,null,this.filterTags(m)))})(n[o],s!=null?s[o]:null,l!=null?l[n[o]]:null);this.addPaletteFunctions(r,e,!1,a)};Sidebar.prototype.getTagsForStencil=function(r,e,t){for(var i=r.split("."),n=1;n<i.length;n++)i[n]=i[n].replace(/_/g," ");return i.push(e.replace(/_/g," ")),t!=null&&i.push(t),i.slice(1,i.length)};Sidebar.prototype.addStencilPalette=function(r,e,t,i,n,s,l,a,o,h){if(l=l??1,this.addStencilsToIndex){var d=[];if(o!=null)for(var m=0;m<o.length;m++)d.push(o[m]);mxStencilRegistry.loadStencilSet(t,mxUtils$1.bind(this,function(g,c,f,C,v){if(n==null||mxUtils$1.indexOf(n,c)<0){var w=this.getTagsForStencil(g,c),S=a!=null?a[c]:null;S!=null&&w.push(S),d.push(this.createVertexTemplateEntry("shape="+g+c.toLowerCase()+i,Math.round(C*l),Math.round(v*l),"",c.replace(/_/g," "),null,null,this.filterTags(w.join(" "))))}}),!0,!0),this.addPaletteFunctions(r,e,!1,d)}else this.addPalette(r,e,!1,mxUtils$1.bind(this,function(g){if(i==null&&(i=""),s?.call(this,g),o!=null)for(var c=0;c<o.length;c++)o[c](g);mxStencilRegistry.loadStencilSet(t,mxUtils$1.bind(this,function(f,C,v,w,S){(n==null||mxUtils$1.indexOf(n,C)<0)&&g.appendChild(this.createVertexTemplate("shape="+f+C.toLowerCase()+i,Math.round(w*l),Math.round(S*l),"",C.replace(/_/g," "),!0))}),!0)}))};Sidebar.prototype.destroy=function(){this.graph!=null&&(this.graph.container!=null&&this.graph.container.parentNode!=null&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),this.pointerUpHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),this.pointerDownHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),this.pointerMoveHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),this.pointerOutHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)};typeof html4<"u"&&(html4.ATTRIBS["a::target"]=0,html4.ATTRIBS["source::src"]=0,html4.ATTRIBS["video::src"]=0);(function(){var r=[["nbsp","160"],["shy","173"]],e=mxUtils$1.parseXml;mxUtils$1.parseXml=function(t){for(var i=0;i<r.length;i++)t=t.replace(new RegExp("&"+r[i][0]+";","g"),"&#"+r[i][1]+";");return e(t)}})();Date.prototype.toISOString||function(){function r(e){var t=String(e);return t.length===1&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();Date.now||(Date.now=function(){return new Date().getTime()});mxConstants$1.POINTS=1;mxConstants$1.MILLIMETERS=2;mxConstants$1.INCHES=3;mxConstants$1.PIXELS_PER_MM=3.937;mxConstants$1.PIXELS_PER_INCH=100;mxConstants$1.SHADOW_OPACITY=.25;mxConstants$1.SHADOWCOLOR="#000000";mxConstants$1.VML_SHADOWCOLOR="#d0d0d0";mxGraph.prototype.pageBreakColor="#c0c0c0";mxGraph.prototype.pageScale=1;(function(){try{if(navigator!=null&&navigator.language!=null){var r=navigator.language.toLowerCase();mxGraph.prototype.pageFormat=r==="en-us"||r==="en-ca"||r==="es-mx"?mxConstants$1.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants$1.PAGE_FORMAT_A4_PORTRAIT}}catch{}})();mxText.prototype.baseSpacingTop=5;mxText.prototype.baseSpacingBottom=1;mxGraphModel.prototype.ignoreRelativeEdgeParent=!1;mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif";mxGraphView.prototype.gridSteps=4;mxGraphView.prototype.minGridSize=4;mxGraphView.prototype.defaultGridColor="#d0d0d0";mxGraphView.prototype.gridColor=mxGraphView.prototype.defaultGridColor;mxGraphView.prototype.unit=mxConstants$1.POINTS;mxGraphView.prototype.setUnit=function(r){this.unit!=r&&(this.unit=r,this.fireEvent(new mxEventObject$1("unitChanged","unit",r)))};mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]";mxShape.prototype.getConstraints=function(r,e,t){return null};let Graph$1=class Zt extends mxGraph{touchStyle=mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.urlParams==null||urlParams.touch=="1";fileSupport=window.File!=null&&window.FileReader!=null&&window.FileList!=null&&(window.urlParams==null||urlParams.filesupport!="0");translateDiagram=urlParams["translate-diagram"]=="1";diagramLanguage=urlParams["diagram-language"]!=null?urlParams["diagram-language"]:mxClient.language;static lineJumpsEnabled=!0;static defaultJumpSize=6;minTableColumnWidth=20;minTableRowHeight=20;foreignObjectWarningText="Viewer does not support full SVG 1.1";foreignObjectWarningLink="https://desk.draw.io/support/solutions/articles/16000042487";pasteStyles=["rounded","shadow","dashed","dashPattern","fontFamily","fontSource","fontSize","fontColor","fontStyle","align","verticalAlign","strokeColor","strokeWidth","fillColor","gradientColor","swimlaneFillColor","textOpacity","gradientDirection","glass","labelBackgroundColor","labelBorderColor","opacity","spacing","spacingTop","spacingLeft","spacingBottom","spacingRight","endFill","endArrow","endSize","targetPerimeterSpacing","startFill","startArrow","startSize","sourcePerimeterSpacing","arcSize","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","comicStyle"];constructor(e,t,i,n,s,l){super(e,t,i,n),this.themes=s||this.defaultThemes,this.currentEdgeStyle=mxUtils$1.clone(this.defaultEdgeStyle),this.currentVertexStyle=mxUtils$1.clone(this.defaultVertexStyle),this.standalone=l??!1;var a=this.baseUrl,o=a.indexOf("//");if(this.domainUrl="",this.domainPathUrl="",o>0){var h=a.indexOf("/",o+2);h>0&&(this.domainUrl=a.substring(0,h)),h=a.lastIndexOf("/"),h>0&&(this.domainPathUrl=a.substring(0,h+1))}if(this.setup(),this.edgeMode){var d={point:null,event:null,state:null,handle:null,selected:!1};this.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(m,g){if(g.getProperty("eventName")=="mouseDown"&&this.isEnabled()){var c=g.getProperty("event"),f=c.getState();if(!mxEvent$1.isAltDown(c.getEvent())&&f!=null){if(this.model.isEdge(f.cell))if(d.point=new mxPoint(c.getGraphX(),c.getGraphY()),d.selected=this.isCellSelected(f.cell),d.state=f,d.event=c,f.text!=null&&f.text.boundingBox!=null&&mxUtils$1.contains(f.text.boundingBox,c.getGraphX(),c.getGraphY()))d.handle=mxEvent$1.LABEL_HANDLE;else{var C=this.selectionCellsHandler.getHandler(f.cell);C!=null&&C.bends!=null&&C.bends.length>0&&(d.handle=C.getHandleForEvent(c))}else if(!this.panningHandler.isActive()&&!mxEvent$1.isControlDown(c.getEvent())){var C=this.selectionCellsHandler.getHandler(f.cell);if(C==null||C.getHandleForEvent(c)==null){var v=new mxRectangle(c.getGraphX()-1,c.getGraphY()-1);if(v.grow(mxEvent$1.isTouchEvent(c.getEvent())?mxShape.prototype.svgStrokeTolerance-1:(mxShape.prototype.svgStrokeTolerance+1)/2),this.isTableCell(f.cell)&&!this.isCellSelected(f.cell)){var w=this.model.getParent(f.cell),S=this.model.getParent(w);if(!this.isCellSelected(S)&&(mxUtils$1.intersects(v,new mxRectangle(f.x,f.y-2,f.width,3))&&this.model.getChildAt(S,0)!=w||mxUtils$1.intersects(v,new mxRectangle(f.x,f.y+f.height-2,f.width,3))||mxUtils$1.intersects(v,new mxRectangle(f.x-2,f.y,2,f.height))&&this.model.getChildAt(w,0)!=f.cell||mxUtils$1.intersects(v,new mxRectangle(f.x+f.width-2,f.y,2,f.height)))){var T=this.selectionCellsHandler.isHandled(S);if(this.selectCellForEvent(S,c.getEvent()),C=this.selectionCellsHandler.getHandler(S),C!=null){var P=C.getHandleForEvent(c);P!=null&&(C.start(c.getGraphX(),c.getGraphY(),P),C.blockDelayedSelection=!T,c.consume())}}}for(var L=f;!c.isConsumed()&&L!=null&&(this.isTableCell(L.cell)||this.isTableRow(L.cell)||this.isTable(L.cell));){if(this.isSwimlane(L.cell)){var k=this.getActualStartSize(L.cell),G=this.view.scale;if(((k.x>0||k.width>0)&&mxUtils$1.intersects(v,new mxRectangle(L.x+(k.x-k.width-1)*G+(k.x==0?L.width:0),L.y,1,L.height))||(k.y>0||k.height>0)&&mxUtils$1.intersects(v,new mxRectangle(L.x,L.y+(k.y-k.height-1)*G+(k.y==0?L.height:0),L.width,1)))&&(this.selectCellForEvent(L.cell,c.getEvent()),C=this.selectionCellsHandler.getHandler(L.cell),C!=null)){var P=mxEvent$1.CUSTOM_HANDLE-C.customHandles.length+1;C.start(c.getGraphX(),c.getGraphY(),P),c.consume()}}L=this.view.getState(this.model.getParent(L.cell))}}}}}})),this.addMouseListener({mouseDown:function(m,g){},mouseMove:mxUtils$1.bind(this,function(m,g){var c=this.selectionCellsHandler.handlers.map;for(var f in c)if(c[f].index!=null)return;if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent$1.isAltDown(g.getEvent())){var C=this.tolerance;if(d.point!=null&&d.state!=null&&d.event!=null){var v=d.state;if(Math.abs(d.point.x-g.getGraphX())>C||Math.abs(d.point.y-g.getGraphY())>C){var w=this.selectionCellsHandler.getHandler(v.cell);if(w==null&&this.model.isEdge(v.cell)&&(w=this.createHandler(v)),w!=null&&w.bends!=null&&w.bends.length>0){var S=w.getHandleForEvent(d.event),T=this.view.getEdgeStyle(v),P=T==mxEdgeStyle.EntityRelation;if(!d.selected&&d.handle==mxEvent$1.LABEL_HANDLE&&(S=d.handle),!P||S==0||S==w.bends.length-1||S==mxEvent$1.LABEL_HANDLE){if(S==mxEvent$1.LABEL_HANDLE||S==0||v.visibleSourceState!=null||S==w.bends.length-1||v.visibleTargetState!=null){if(!P&&S!=mxEvent$1.LABEL_HANDLE){var L=v.absolutePoints;if(L!=null&&(T==null&&S==null||T==mxEdgeStyle.OrthConnector)&&(S=d.handle,S==null)){var k=new mxRectangle(d.point.x,d.point.y);if(k.grow(mxEdgeHandler.prototype.handleImage.width/2),mxUtils$1.contains(k,L[0].x,L[0].y))S=0;else if(mxUtils$1.contains(k,L[L.length-1].x,L[L.length-1].y))S=w.bends.length-1;else{var G=T!=null&&(L.length==2||L.length==3&&(Math.round(L[0].x-L[1].x)==0&&Math.round(L[1].x-L[2].x)==0||Math.round(L[0].y-L[1].y)==0&&Math.round(L[1].y-L[2].y)==0));G?S=2:(S=mxUtils$1.findNearestSegment(v,d.point.x,d.point.y),T==null?S=mxEvent$1.VIRTUAL_HANDLE-S:S+=1)}}S==null&&(S=mxEvent$1.VIRTUAL_HANDLE)}w.start(g.getGraphX(),g.getGraphX(),S),g.consume(),this.graphHandler.reset()}}else P&&(v.visibleSourceState!=null||v.visibleTargetState!=null)&&(this.graphHandler.reset(),g.consume())}w!=null&&(this.selectionCellsHandler.isHandlerActive(w)?this.isCellSelected(v.cell)||(this.selectionCellsHandler.handlers.put(v.cell,w),this.selectCellForEvent(v.cell,g.getEvent())):this.isCellSelected(v.cell)||w.destroy()),d.selected=!1,d.handle=null,d.state=null,d.event=null,d.point=null}}else{var v=g.getState();if(v!=null){var Y=null;if(this.model.isEdge(v.cell)){var k=new mxRectangle(g.getGraphX(),g.getGraphY());k.grow(mxEdgeHandler.prototype.handleImage.width/2);var L=v.absolutePoints;if(L!=null){if(v.text!=null&&v.text.boundingBox!=null&&mxUtils$1.contains(v.text.boundingBox,g.getGraphX(),g.getGraphY()))Y="move";else if(mxUtils$1.contains(k,L[0].x,L[0].y)||mxUtils$1.contains(k,L[L.length-1].x,L[L.length-1].y))Y="pointer";else if(v.visibleSourceState!=null||v.visibleTargetState!=null){var te=this.view.getEdgeStyle(v);if(Y="crosshair",te!=mxEdgeStyle.EntityRelation&&this.isOrthogonal(v)){var ie=mxUtils$1.findNearestSegment(v,g.getGraphX(),g.getGraphY());ie<L.length-1&&ie>=0&&(Y=Math.round(L[ie].x-L[ie+1].x)==0?"col-resize":"row-resize")}}}}else if(!mxEvent$1.isControlDown(g.getEvent())){var k=new mxRectangle(g.getGraphX()-1,g.getGraphY()-1);if(k.grow(mxShape.prototype.svgStrokeTolerance/2),this.isTableCell(v.cell)){var ne=this.model.getParent(v.cell),q=this.model.getParent(ne);this.isCellSelected(q)||(mxUtils$1.intersects(k,new mxRectangle(v.x-2,v.y,2,v.height))&&this.model.getChildAt(ne,0)!=v.cell||mxUtils$1.intersects(k,new mxRectangle(v.x+v.width-2,v.y,2,v.height))?Y="col-resize":(mxUtils$1.intersects(k,new mxRectangle(v.x,v.y-2,v.width,3))&&this.model.getChildAt(q,0)!=ne||mxUtils$1.intersects(k,new mxRectangle(v.x,v.y+v.height-2,v.width,3)))&&(Y="row-resize"))}for(var oe=v;Y==null&&oe!=null&&(this.isTableCell(oe.cell)||this.isTableRow(oe.cell)||this.isTable(oe.cell));){if(this.isSwimlane(oe.cell)){var le=this.getActualStartSize(oe.cell),Z=this.view.scale;(le.x>0||le.width>0)&&mxUtils$1.intersects(k,new mxRectangle(oe.x+(le.x-le.width-1)*Z+(le.x==0?oe.width*Z:0),oe.y,1,oe.height))?Y="col-resize":(le.y>0||le.height>0)&&mxUtils$1.intersects(k,new mxRectangle(oe.x,oe.y+(le.y-le.height-1)*Z+(le.y==0?oe.height:0),oe.width,1))&&(Y="row-resize")}oe=this.view.getState(this.model.getParent(oe.cell))}}Y!=null&&v.setCursor(Y)}}}}),mouseUp:mxUtils$1.bind(this,function(m,g){d.state=null,d.event=null,d.point=null,d.handle=null})})}}static createSvgImage(e,t,i,n,s){var l=unescape(encodeURIComponent('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+e+'px" height="'+t+'px" '+(n!=null&&s!=null?'viewBox="0 0 '+n+" "+s+'" ':"")+'version="1.1">'+i+"</svg>"));return new mxImage("data:image/svg+xml;base64,"+(window.btoa?btoa(l):Base64.encode(l,!0)),e,t)}static zapGremlins(e){for(var t=0,i=[],n=0;n<e.length;n++){var s=e.charCodeAt(n);(s>=32||s==9||s==10||s==13)&&s!=65535&&s!=65534||(i.push(e.substring(t,n)),t=n+1)}return t>0&&t<e.length&&i.push(e.substring(t)),i.length==0?e:i.join("")}stringToBytes(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}bytesToString(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=String.fromCharCode(e[i]);return t.join("")}ase64EncodeUnicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,i){return String.fromCharCode(parseInt(i,16))}))}ase64DecodeUnicode(e){return decodeURIComponent(Array.prototype.map.call(atob(e),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}compressNode(e,t){var i=mxUtils$1.getXml(e);return this.compress(t?i:this.zapGremlins(i))}compress(e,t){if(e==null||e.length==0||typeof pako>"u")return e;var i=t?pako.deflate(encodeURIComponent(e),{to:"string"}):pako.deflateRaw(encodeURIComponent(e),{to:"string"});return window.btoa?btoa(i):Base64.encode(i,!0)}static decompress(e,t,i){if(e==null||e.length==0||typeof pako>"u")return e;var n=window.atob?atob(e):Base64.decode(e,!0),s=decodeURIComponent(t?pako.inflate(n,{to:"string"}):pako.inflateRaw(n,{to:"string"}));return i?s:this.zapGremlins(s)}removePasteFormatting(e){for(;e!=null;)e.firstChild!=null&&Zt.removePasteFormatting(e.firstChild),e.nodeType==mxConstants$1.NODETYPE_ELEMENT&&e.style!=null&&(e.style.whiteSpace="",e.style.color=="#000000"&&(e.style.color="")),e=e.nextSibling}static sanitizeHtml(e,t){function i(s){return s!=null&&s.toString().toLowerCase().substring(0,11)!=="javascript:"?s:null}function n(s){return s}return html_sanitize(e,i,n)}tripQuotes(e){return e!=null&&(e.charAt(0)=="'"&&(e=e.substring(1)),e.charAt(e.length-1)=="'"&&(e=e.substring(0,e.length-1)),e.charAt(0)=='"'&&(e=e.substring(1)),e.charAt(e.length-1)=='"'&&(e=e.substring(0,e.length-1))),e}static stripQuotes(e){return e!=null&&(e.charAt(0)=="'"&&(e=e.substring(1)),e.charAt(e.length-1)=="'"&&(e=e.substring(0,e.length-1)),e.charAt(0)=='"'&&(e=e.substring(1)),e.charAt(e.length-1)=='"'&&(e=e.substring(0,e.length-1))),e}static isLink(e){return e!=null&&Zt.linkPattern.test(e)}setup(){if(this.cellRenderer.getLabelValue=function(S){var T=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return S.view.graph.isHtmlLabel(S.cell)&&(S.style.html!=1?T=mxUtils$1.htmlEntities(T,!1):T=S.view.graph.sanitizeHtml(T)),T},typeof mxVertexHandler<"u"){this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.resetEdgesOnConnect=!1,this.constrainChildren=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(S,T){return!1},this.alternateEdgeStyle="vertical",this.loadStylesheet();var e=this.graphHandler.getGuideStates;this.graphHandler.getGuideStates=function(){var S=e.apply(this,arguments);if(this.graph.pageVisible){for(var T=[],P=this.graph.pageFormat,L=this.graph.pageScale,k=P.width*L,G=P.height*L,Y=this.graph.view.translate,te=this.graph.view.scale,ie=this.graph.getPageLayout(),ne=0;ne<ie.width;ne++)T.push(new mxRectangle(((ie.x+ne)*k+Y.x)*te,(ie.y*G+Y.y)*te,k*te,G*te));for(var q=1;q<ie.height;q++)T.push(new mxRectangle((ie.x*k+Y.x)*te,((ie.y+q)*G+Y.y)*te,k*te,G*te));S=T.concat(S)}return S},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(S,T){return S.cell==null?"#ffa500":mxConstants$1.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(S){return this.previewColor=this.graph.background=="#000000"?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)};var t=this.graphHandler.getCells;this.graphHandler.getCells=function(S){for(var T=t.apply(this,arguments),P=new mxDictionary,L=[],k=0;k<T.length;k++){var G=this.graph.isTableCell(S)&&this.graph.isTableCell(T[k])&&this.graph.isCellSelected(T[k])?this.graph.model.getParent(T[k]):this.graph.isTableRow(S)&&this.graph.isTableRow(T[k])&&this.graph.isCellSelected(T[k])?T[k]:this.graph.getCompositeParent(T[k]);G!=null&&!P.get(G)&&(P.put(G,!0),L.push(G))}return L};var i=this.graphHandler.start;this.graphHandler.start=function(S,T,P,L){var k=!1;this.graph.isTableCell(S)&&(this.graph.isCellSelected(S)?k=!0:S=this.graph.model.getParent(S)),!k&&(!this.graph.isTableRow(S)||!this.graph.isCellSelected(S))&&(S=this.graph.getCompositeParent(S)),i.apply(this,arguments)},this.connectionHandler.createTargetVertex=function(S,T){return T=this.graph.getCompositeParent(T),mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)};var n=new mxRubberband(this);this.getRubberband=function(){return n};var s=new Date().getTime(),l=0,a=this.connectionHandler.mouseMove;this.connectionHandler.mouseMove=function(){var S=this.currentState;a.apply(this,arguments),S!=this.currentState?(s=new Date().getTime(),l=0):l=new Date().getTime()-s};var o=this.connectionHandler.isOutlineConnectEvent;this.connectionHandler.isOutlineConnectEvent=function(S){return this.currentState!=null&&S.getState()==this.currentState&&l>2e3||(this.currentState==null||mxUtils$1.getValue(this.currentState.style,"outlineConnect","1")!="0")&&o.apply(this,arguments)};var h=this.isToggleEvent;this.isToggleEvent=function(S){return h.apply(this,arguments)||!mxClient.IS_CHROMEOS&&mxEvent$1.isShiftDown(S)};var d=n.isForceRubberbandEvent;n.isForceRubberbandEvent=function(S){return d.apply(this,arguments)&&!mxEvent$1.isShiftDown(S.getEvent())&&!mxEvent$1.isControlDown(S.getEvent())||mxClient.IS_CHROMEOS&&mxEvent$1.isShiftDown(S.getEvent())||mxUtils$1.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&S.getState()==null&&mxEvent$1.isTouchEvent(S.getEvent())};var m=null;this.panningHandler.addListener(mxEvent$1.PAN_START,mxUtils$1.bind(this,function(){this.isEnabled()&&(m=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent$1.PAN_END,mxUtils$1.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=m)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(S){return mxEvent$1.isMouseEvent(S.getEvent())};var g=this.click;this.click=function(S){var T=S.state==null&&S.sourceState!=null&&this.isCellLocked(S.sourceState.cell);if((!this.isEnabled()||T)&&!S.isConsumed()){var P=T?S.sourceState.cell:S.getCell();if(P!=null){var L=this.getClickableLinkForCell(P);L!=null&&(this.isCustomLink(L)?this.customLinkClicked(L):this.openLink(L))}this.isEnabled()&&T&&this.clearSelection()}else return g.apply(this,arguments)},this.tooltipHandler.getStateForEvent=function(S){return S.sourceState};var c=this.tooltipHandler.show;this.tooltipHandler.show=function(){if(c.apply(this,arguments),this.div!=null)for(var S=this.div.getElementsByTagName("a"),T=0;T<S.length;T++)S[T].getAttribute("href")!=null&&S[T].getAttribute("target")==null&&S[T].setAttribute("target","_blank")},this.tooltipHandler.getStateForEvent=function(S){return S.sourceState},this.getCursorForMouseEvent,this.getCursorForMouseEvent=function(S){var T=S.state==null&&S.sourceState!=null&&this.isCellLocked(S.sourceState.cell);return this.getCursorForCell(T?S.sourceState.cell:S.getCell())};var f=this.getCursorForCell;this.getCursorForCell=function(S){if(!this.isEnabled()||this.isCellLocked(S)){var T=this.getClickableLinkForCell(S);if(T!=null)return"pointer";if(this.isCellLocked(S))return"default"}return f.apply(this,arguments)},this.selectRegion=function(S,T){var P=this.getCells(S.x,S.y,S.width,S.height,null,null,null,function(L){return mxUtils$1.getValue(L.style,"locked","0")=="1"},!0);return this.selectCellsForEvent(P,T),P};var C=this.graphHandler.shouldRemoveCellsFromParent;this.graphHandler.shouldRemoveCellsFromParent=function(S,T,P){return this.graph.isCellSelected(S)?!1:C.apply(this,arguments)},this.isCellLocked=function(S){for(var T=this.view.getState(S);T!=null;){if(mxUtils$1.getValue(T.style,"locked","0")=="1")return!0;T=this.view.getState(this.model.getParent(T.cell))}return!1};var v=null;this.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(S,T){if(T.getProperty("eventName")=="mouseDown"){var P=T.getProperty("event"),L=P.getState();L!=null&&!this.isSelectionEmpty()&&!this.isCellSelected(L.cell)?v=this.getSelectionCells():v=null}})),this.addListener(mxEvent$1.TAP_AND_HOLD,mxUtils$1.bind(this,function(S,T){if(!mxEvent$1.isMultiTouchEvent(T)){var P=T.getProperty("event"),L=T.getProperty("cell");if(L==null){var k=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(P),mxEvent$1.getClientY(P));n.start(k.x,k.y)}else v!=null?this.addSelectionCells(v):this.getSelectionCount()>1&&this.isCellSelected(L)&&this.removeSelectionCell(L);v=null,T.consume()}})),this.connectionHandler.selectCells=function(S,T){this.graph.setSelectionCell(T||S)},this.connectionHandler.constraintHandler.isStateIgnored=function(S,T){var P=S.view.graph;return T&&(P.isCellSelected(S.cell)||P.isTableRow(S.cell)&&P.selectionCellsHandler.isHandled(P.model.getParent(S.cell)))},this.selectionModel.addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){var S=this.connectionHandler.constraintHandler;S.currentFocus!=null&&S.isStateIgnored(S.currentFocus,!0)&&(S.currentFocus=null,S.constraints=null,S.destroyIcons()),S.destroyFocusHighlight()})),Zt.touchStyle&&this.initTouch();var w=this.updateMouseEvent;this.updateMouseEvent=function(S){return S=w.apply(this,arguments),S.state!=null&&this.isCellLocked(S.getCell())&&(S.state=null),S}}this.currentTranslate=new mxPoint(0,0)}};Graph$1.prototype.minFitScale=null;Graph$1.prototype.maxFitScale=null;Graph$1.prototype.linkPolicy=urlParams.target=="frame"?"blank":urlParams.target||"auto";Graph$1.prototype.linkTarget=urlParams.target=="frame"?"_self":"_blank";Graph$1.prototype.linkRelation="nofollow noopener noreferrer";Graph$1.prototype.defaultScrollbars=!mxClient.IS_IOS;Graph$1.prototype.defaultPageVisible=!0;Graph$1.prototype.lightbox=!1;Graph$1.prototype.defaultPageBackgroundColor="#ffffff";Graph$1.prototype.defaultPageBorderColor="#ffffff";Graph$1.prototype.scrollTileSize=new mxRectangle(0,0,400,400);Graph$1.prototype.transparentBackground=!0;Graph$1.prototype.selectParentAfterDelete=!1;Graph$1.prototype.defaultEdgeLength=80;Graph$1.prototype.edgeMode=!1;Graph$1.prototype.connectionArrowsEnabled=!0;Graph$1.prototype.placeholderPattern=new RegExp("%(date{.*}|[^%^{^}]+)%","g");Graph$1.prototype.absoluteUrlPattern=new RegExp("^(?:[a-z]+:)?//","i");Graph$1.prototype.defaultThemeName="default";Graph$1.prototype.defaultThemes={};Graph$1.prototype.baseUrl=urlParams.base!=null?decodeURIComponent(urlParams.base):(window!=window.top?document.referrer:document.location.toString()).split("#")[0];Graph$1.prototype.editAfterInsert=!1;Graph$1.prototype.builtInProperties=["label","tooltip","placeholders","placeholder"];Graph$1.prototype.standalone=!1;Graph$1.prototype.init=function(r){mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(e,t){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);var i=e.view.graph.tolerance,n=!0,s=null,l=mxUtils$1.bind(this,function(h){n=!0,s=new mxPoint(mxEvent$1.getClientX(h),mxEvent$1.getClientY(h))}),a=mxUtils$1.bind(this,function(h){n=n&&s!=null&&Math.abs(s.x-mxEvent$1.getClientX(h))<i&&Math.abs(s.y-mxEvent$1.getClientY(h))<i}),o=mxUtils$1.bind(this,function(h){if(n)for(var d=mxEvent$1.getSource(h);d!=null&&d!=t.node;){if(d.nodeName.toLowerCase()=="a"){e.view.graph.labelLinkClicked(e,d,h);break}d=d.parentNode}});mxEvent$1.addGestureListeners(t.node,l,a,o),mxEvent$1.addListener(t.node,"click",function(h){mxEvent$1.consume(h)})},this.initLayoutManager()};(function(){Graph$1.prototype.useCssTransforms=!1,Graph$1.prototype.currentScale=1,Graph$1.prototype.currentTranslate=new mxPoint(0,0),Graph$1.prototype.getVerticesAndEdges=function(s,l){s=s??!0,l=l??!0;var a=this.model;return a.filterDescendants(function(o){return s&&a.isVertex(o)||l&&a.isEdge(o)},a.getRoot())},Graph$1.prototype.getStartEditingCell=function(s,l){var a=this.getCellStyle(s),o=parseInt(mxUtils$1.getValue(a,mxConstants$1.STYLE_STARTSIZE,0));if(this.isTable(s)&&(!this.isSwimlane(s)||o==0)&&this.getLabel(s)==""&&this.model.getChildCount(s)>0&&(s=this.model.getChildAt(s,0),a=this.getCellStyle(s),o=parseInt(mxUtils$1.getValue(a,mxConstants$1.STYLE_STARTSIZE,0))),this.isTableRow(s)&&(!this.isSwimlane(s)||o==0)&&this.getLabel(s)==""&&this.model.getChildCount(s)>0)for(var h=0;h<this.model.getChildCount(s);h++){var d=this.model.getChildAt(s,h);if(this.isCellEditable(d)){s=d;break}}return s},Graph$1.prototype.copyStyle=function(s){var l=null;if(s!=null){l=mxUtils$1.clone(this.getCurrentCellStyle(s));for(var a=this.model.getStyle(s),o=a!=null?a.split(";"):[],h=0;h<o.length;h++){var d=o[h],m=d.indexOf("=");if(m>=0){var g=d.substring(0,m),c=d.substring(m+1);l[g]==null&&c==mxConstants$1.NONE&&(l[g]=mxConstants$1.NONE)}}}return l},Graph$1.prototype.pasteStyle=function(s,l,a){a=a??Graph$1.pasteStyles,this.model.beginUpdate();try{for(var o=0;o<l.length;o++)for(var h=this.getCurrentCellStyle(l[o]),d=0;d<a.length;d++){var m=h[a[d]],g=s[a[d]];m!=g&&(m!=null||g!=mxConstants$1.NONE)&&this.setCellStyles(a[d],g,[l[o]])}}finally{this.model.endUpdate()}},Graph$1.prototype.isFastZoomEnabled=function(){return urlParams.zoom!="nocss"&&!mxClient.NO_FO&&!mxClient.IS_EDGE&&!this.useCssTransforms&&this.isCssTransformsSupported()},Graph$1.prototype.isCssTransformsSupported=function(){return this.dialect==mxConstants$1.DIALECT_SVG&&!mxClient.NO_FO&&(!this.lightbox||!mxClient.IS_SF)},Graph$1.prototype.getCellAt=function(s,l,a,o,h,d){return this.useCssTransforms&&(s=s/this.currentScale-this.currentTranslate.x,l=l/this.currentScale-this.currentTranslate.y),this.getScaledCellAt.apply(this,arguments)},Graph$1.prototype.getScaledCellAt=function(s,l,a,o,h,d){if(o=o??!0,h=h??!0,a==null&&(a=this.getCurrentRoot(),a==null&&(a=this.getModel().getRoot())),a!=null)for(var m=this.model.getChildCount(a),g=m-1;g>=0;g--){var c=this.model.getChildAt(a,g),f=this.getScaledCellAt(s,l,c,o,h,d);if(f!=null)return f;if(this.isCellVisible(c)&&(h&&this.model.isEdge(c)||o&&this.model.isVertex(c))){var C=this.view.getState(c);if(C!=null&&(d==null||!d(C,s,l))&&this.intersects(C,s,l))return c}}return null},Graph$1.prototype.isRecursiveVertexResize=function(s){return!this.isSwimlane(s.cell)&&this.model.getChildCount(s.cell)>0&&!this.isCellCollapsed(s.cell)&&mxUtils$1.getValue(s.style,"recursiveResize","1")=="1"&&mxUtils$1.getValue(s.style,"childLayout",null)==null},Graph$1.prototype.isPart=function(s){return mxUtils$1.getValue(this.getCurrentCellStyle(s),"part","0")=="1"||this.isTableCell(s)||this.isTableRow(s)},Graph$1.prototype.getCompositeParent=function(s){for(;this.isPart(s);){var l=this.model.getParent(s);if(!this.model.isVertex(l))break;s=l}return s},mxCellHighlight.prototype.getStrokeWidth=function(s){var l=this.strokeWidth;return this.graph.useCssTransforms&&(l/=this.graph.currentScale),l},mxGraphView.prototype.getGraphBounds=function(){var s=this.graphBounds;if(this.graph.useCssTransforms){var l=this.graph.currentTranslate,a=this.graph.currentScale;s=new mxRectangle((s.x+l.x)*a,(s.y+l.y)*a,s.width*a,s.height*a)}return s},mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?(this.validate(),this.graph.sizeDidChange()):(this.revalidate(),this.graph.sizeDidChange())};var r=mxGraphView.prototype.validate;mxGraphView.prototype.validate=function(s){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0),r.apply(this,arguments),this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)};var e=mxGraph.prototype.getCellsForGroup;Graph$1.prototype.getCellsForGroup=function(s){s=e.apply(this,arguments);for(var l=[],a=0;a<s.length;a++)!this.isTableRow(s[a])&&!this.isTableCell(s[a])&&l.push(s[a]);return l};var t=mxGraph.prototype.getCellsForUngroup;Graph$1.prototype.getCellsForUngroup=function(s){s=t.apply(this,arguments);for(var l=[],a=0;a<s.length;a++)!this.isTable(s[a])&&!this.isTableRow(s[a])&&!this.isTableCell(s[a])&&l.push(s[a]);return l},Graph$1.prototype.updateCssTransform=function(){var s=this.view.getDrawPane();if(s!=null){var l=s.parentNode;if(!this.useCssTransforms)l.removeAttribute("transformOrigin"),l.removeAttribute("transform");else{var a=l.getAttribute("transform");l.setAttribute("transformOrigin","0 0");var o=Math.round(this.currentScale*100)/100,h=Math.round(this.currentTranslate.x*100)/100,d=Math.round(this.currentTranslate.y*100)/100;if(l.setAttribute("transform","scale("+o+","+o+")translate("+h+","+d+")"),a!=l.getAttribute("transform"))try{if(mxClient.IS_EDGE){var m=l.style.display;l.style.display="none",l.getBBox(),l.style.display=m}}catch{}}}};var i=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function(){var s=this.graph.useCssTransforms,l=this.scale,a=this.translate;s&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate),i.apply(this,arguments),s&&(this.scale=l,this.translate=a)};var n=mxGraph.prototype.updatePageBreaks;mxGraph.prototype.updatePageBreaks=function(s,l,a){var o=this.useCssTransforms,h=this.view.scale,d=this.view.translate;o&&(this.view.scale=1,this.view.translate=new mxPoint(0,0),this.useCssTransforms=!1),n.apply(this,arguments),o&&(this.view.scale=h,this.view.translate=d,this.useCssTransforms=!0)}})();Graph$1.prototype.isLightboxView=function(){return this.lightbox};Graph$1.prototype.isViewer=function(){return!1};Graph$1.prototype.labelLinkClicked=function(r,e,t){var i=e.getAttribute("href");if(i!=null&&!this.isCustomLink(i)&&(mxEvent$1.isLeftMouseButton(t)&&!mxEvent$1.isPopupTrigger(t)||mxEvent$1.isTouchEvent(t))){if(!this.isEnabled()||this.isCellLocked(r.cell)){var n=this.isBlankLink(i)?this.linkTarget:"_top";this.openLink(this.getAbsoluteUrl(i),n)}mxEvent$1.consume(t)}};Graph$1.prototype.openLink=function(r,e,t){var i=window;try{if(e=="_self"&&window!=window.top)window.location.href=r;else if(r.substring(0,this.baseUrl.length)==this.baseUrl&&r.charAt(this.baseUrl.length)=="#"&&e=="_top"&&window==window.top){var n=r.split("#")[1];window.location.hash=="#"+n&&(window.location.hash=""),window.location.hash=n}else i=window.open(r,e??"_blank"),i!=null&&!t&&(i.opener=null)}catch{}return i};Graph$1.prototype.getLinkTitle=function(r){return r.substring(r.lastIndexOf("/")+1)};Graph$1.prototype.isCustomLink=function(r){return r.substring(0,5)=="data:"};Graph$1.prototype.customLinkClicked=function(r){return!1};Graph$1.prototype.isExternalProtocol=function(r){return r.substring(0,7)==="mailto:"};Graph$1.prototype.isBlankLink=function(r){return!this.isExternalProtocol(r)&&(this.linkPolicy==="blank"||this.linkPolicy!=="self"&&!this.isRelativeUrl(r)&&r.substring(0,this.domainUrl.length)!==this.domainUrl)};Graph$1.prototype.isRelativeUrl=function(r){return r!=null&&!this.absoluteUrlPattern.test(r)&&r.substring(0,5)!=="data:"&&!this.isExternalProtocol(r)};Graph$1.prototype.getAbsoluteUrl=function(r){return r!=null&&this.isRelativeUrl(r)&&(r.charAt(0)=="#"?r=this.baseUrl+r:r.charAt(0)=="/"?r=this.domainUrl+r:r=this.domainPathUrl+r),r};Graph$1.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.hasLayout=function(r,e){return this.graph.getCellStyle(r).childLayout!=null},this.layoutManager.getLayout=function(r,e){var t=this.graph.model.getParent(r);if(e!=mxEvent$1.BEGIN_UPDATE||this.hasLayout(t,e)){var i=this.graph.getCellStyle(r);if(i.childLayout=="stackLayout"){var n=new mxStackLayout(this.graph,!0);return n.resizeParentMax=mxUtils$1.getValue(i,"resizeParentMax","1")=="1",n.horizontal=mxUtils$1.getValue(i,"horizontalStack","1")=="1",n.resizeParent=mxUtils$1.getValue(i,"resizeParent","1")=="1",n.resizeLast=mxUtils$1.getValue(i,"resizeLast","0")=="1",n.spacing=i.stackSpacing||n.spacing,n.border=i.stackBorder||n.border,n.marginLeft=i.marginLeft||0,n.marginRight=i.marginRight||0,n.marginTop=i.marginTop||0,n.marginBottom=i.marginBottom||0,n.allowGaps=i.allowGaps||0,n.fill=!0,n.allowGaps&&(n.gridSize=parseFloat(mxUtils$1.getValue(i,"stackUnitSize",20))),n}else if(i.childLayout=="treeLayout"){var s=new mxCompactTreeLayout(this.graph);return s.horizontal=mxUtils$1.getValue(i,"horizontalTree","1")=="1",s.resizeParent=mxUtils$1.getValue(i,"resizeParent","1")=="1",s.groupPadding=mxUtils$1.getValue(i,"parentPadding",20),s.levelDistance=mxUtils$1.getValue(i,"treeLevelDistance",30),s.maintainParentLocation=!0,s.edgeRouting=!1,s.resetEdges=!1,s}else if(i.childLayout=="flowLayout"){var l=new mxHierarchicalLayout(this.graph,mxUtils$1.getValue(i,"flowOrientation",mxConstants$1.DIRECTION_EAST));return l.resizeParent=mxUtils$1.getValue(i,"resizeParent","1")=="1",l.parentBorder=mxUtils$1.getValue(i,"parentPadding",20),l.maintainParentLocation=!0,l.intraCellSpacing=mxUtils$1.getValue(i,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),l.interRankCellSpacing=mxUtils$1.getValue(i,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),l.interHierarchySpacing=mxUtils$1.getValue(i,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),l.parallelEdgeSpacing=mxUtils$1.getValue(i,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),l}else{if(i.childLayout=="circleLayout")return new mxCircleLayout(this.graph);if(i.childLayout=="organicLayout")return new mxFastOrganicLayout(this.graph);if(i.childLayout=="tableLayout")return new TableLayout(this.graph)}}return null}};Graph$1.prototype.getPageSize=function(){return this.pageVisible?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize};Graph$1.prototype.getPageLayout=function(){var r=this.getPageSize(),e=this.getGraphBounds();if(e.width==0||e.height==0)return new mxRectangle(0,0,1,1);var t=Math.floor(Math.ceil(e.x/this.view.scale-this.view.translate.x)/r.width),i=Math.floor(Math.ceil(e.y/this.view.scale-this.view.translate.y)/r.height),n=Math.ceil((Math.floor((e.x+e.width)/this.view.scale)-this.view.translate.x)/r.width)-t,s=Math.ceil((Math.floor((e.y+e.height)/this.view.scale)-this.view.translate.y)/r.height)-i;return new mxRectangle(t,i,n,s)};Graph$1.prototype.sanitizeHtml=function(r,e){return Graph$1.sanitizeHtml(r,e)};Graph$1.prototype.updatePlaceholders=function(){this.model;var r=!1;for(var e in this.model.cells){var t=this.model.cells[e];this.isReplacePlaceholders(t)&&(this.view.invalidate(t,!1,!1),r=!0)}r&&this.view.validate()};Graph$1.prototype.isReplacePlaceholders=function(r){return r.value!=null&&typeof r.value=="object"&&r.value.getAttribute("placeholders")=="1"};Graph$1.prototype.isZoomWheelEvent=function(r){return mxEvent$1.isAltDown(r)||mxEvent$1.isMetaDown(r)&&mxClient.IS_MAC||mxEvent$1.isControlDown(r)};Graph$1.prototype.isScrollWheelEvent=function(r){return!this.isZoomWheelEvent(r)};Graph$1.prototype.isTransparentClickEvent=function(r){return mxEvent$1.isAltDown(r)||mxClient.IS_CHROMEOS&&mxEvent$1.isShiftDown(r)};Graph$1.prototype.isIgnoreTerminalEvent=function(r){return mxEvent$1.isShiftDown(r)&&mxEvent$1.isControlDown(r)};Graph$1.prototype.isSplitTarget=function(r,e,t){return!this.model.isEdge(e[0])&&!mxEvent$1.isAltDown(t)&&!mxEvent$1.isShiftDown(t)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)};Graph$1.prototype.getLabel=function(r){var e=mxGraph.prototype.getLabel.apply(this,arguments);return e!=null&&this.isReplacePlaceholders(r)&&r.getAttribute("placeholder")==null&&(e=this.replacePlaceholders(r,e)),e};Graph$1.prototype.isLabelMovable=function(r){var e=this.getCurrentCellStyle(r);return!this.isCellLocked(r)&&(this.model.isEdge(r)&&this.edgeLabelsMovable||this.model.isVertex(r)&&(this.vertexLabelsMovable||mxUtils$1.getValue(e,"labelMovable","0")=="1"))};Graph$1.prototype.setGridSize=function(r){this.gridSize=r,this.fireEvent(new mxEventObject$1("gridSizeChanged"))};Graph$1.prototype.setDefaultParent=function(r){this.defaultParent=r,this.fireEvent(new mxEventObject$1("defaultParentChanged"))};Graph$1.prototype.getClickableLinkForCell=function(r){do{var e=this.getLinkForCell(r);if(e!=null)return e;r=this.model.getParent(r)}while(r!=null);return null};Graph$1.prototype.getGlobalVariable=function(r){var e=null;if(r=="date")e=new Date().toLocaleDateString();else if(r=="time")e=new Date().toLocaleTimeString();else if(r=="timestamp")e=new Date().toLocaleString();else if(r.substring(0,5)=="date{"){var t=r.substring(5,r.length-1);e=this.formatDate(new Date,t)}return e};Graph$1.prototype.formatDate=function(r,e,t){this.dateFormatCache==null&&(this.dateFormatCache={i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});var i=this.dateFormatCache,n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,l=/[^-+\dA-Z]/g,a=function(T,P){for(T=String(T),P=P||2;T.length<P;)T="0"+T;return T};if(arguments.length==1&&Object.prototype.toString.call(r)=="[object String]"&&!/\d/.test(r)&&(e=r,r=void 0),r=r?new Date(r):new Date,isNaN(r))throw SyntaxError("invalid date");e=String(i.masks[e]||e||i.masks.default),e.slice(0,4)=="UTC:"&&(e=e.slice(4),t=!0);var o=t?"getUTC":"get",h=r[o+"Date"](),d=r[o+"Day"](),m=r[o+"Month"](),g=r[o+"FullYear"](),c=r[o+"Hours"](),f=r[o+"Minutes"](),C=r[o+"Seconds"](),v=r[o+"Milliseconds"](),w=t?0:r.getTimezoneOffset(),S={d:h,dd:a(h),ddd:i.i18n.dayNames[d],dddd:i.i18n.dayNames[d+7],m:m+1,mm:a(m+1),mmm:i.i18n.monthNames[m],mmmm:i.i18n.monthNames[m+12],yy:String(g).slice(2),yyyy:g,h:c%12||12,hh:a(c%12||12),H:c,HH:a(c),M:f,MM:a(f),s:C,ss:a(C),l:a(v,3),L:a(v>99?Math.round(v/10):v),t:c<12?"a":"p",tt:c<12?"am":"pm",T:c<12?"A":"P",TT:c<12?"AM":"PM",Z:t?"UTC":(String(r).match(s)||[""]).pop().replace(l,""),o:(w>0?"-":"+")+a(Math.floor(Math.abs(w)/60)*100+Math.abs(w)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10]};return e.replace(n,function(T){return T in S?S[T]:T.slice(1,T.length-1)})};Graph$1.prototype.createLayersDialog=function(){var r=document.createElement("div");r.style.position="absolute";for(var e=this.getModel(),t=e.getChildCount(e.root),i=0;i<t;i++)mxUtils$1.bind(this,function(n){var s=document.createElement("div");s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.style.padding="2px",s.style.whiteSpace="nowrap";var l=document.createElement("input");l.style.display="inline-block",l.setAttribute("type","checkbox"),e.isVisible(n)&&(l.setAttribute("checked","checked"),l.defaultChecked=!0),s.appendChild(l);var a=this.convertValueToString(n)||mxResources$1.get("background")||"Background";s.setAttribute("title",a),mxUtils$1.write(s,a),r.appendChild(s),mxEvent$1.addListener(l,"click",function(){l.getAttribute("checked")!=null?l.removeAttribute("checked"):l.setAttribute("checked","checked"),e.setVisible(n,l.checked)})})(e.getChildAt(e.root,i));return r};Graph$1.prototype.replacePlaceholders=function(r,e,t,i){var n=[];if(e!=null){for(var s=0,l=null;l=this.placeholderPattern.exec(e);){var a=l[0];if(a.length>2&&a!="%label%"&&a!="%tooltip%"){var o=null;if(l.index>s&&e.charAt(l.index-1)=="%")o=a.substring(1);else{var h=a.substring(1,a.length-1);if(h=="id")o=r.id;else if(h.indexOf("{")<0)for(var d=r;o==null&&d!=null;)d.value!=null&&typeof d.value=="object"&&(Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(o=d.getAttribute(h+"_"+Graph$1.diagramLanguage)),o==null&&(o=d.hasAttribute(h)?d.getAttribute(h)!=null?d.getAttribute(h):"":null)),d=this.model.getParent(d);o==null&&(o=this.getGlobalVariable(h)),o==null&&t!=null&&(o=t[h])}n.push(e.substring(s,l.index)+(o??a)),s=l.index+a.length}}n.push(e.substring(s))}return n.join("")};Graph$1.prototype.restoreSelection=function(r){if(r!=null&&r.length>0){for(var e=[],t=0;t<r.length;t++){var i=this.model.getCell(r[t].id);i!=null&&e.push(i)}this.setSelectionCells(e)}else this.clearSelection()};Graph$1.prototype.selectCellsForConnectVertex=function(r,e,t){r.length==2&&this.model.isVertex(r[1])?(this.setSelectionCell(r[1]),this.scrollCellToVisible(r[1]),t!=null&&(mxEvent$1.isTouchEvent(e)?t.update(t.getState(this.view.getState(r[1]))):t.reset())):this.setSelectionCells(r)};Graph$1.prototype.isCloneConnectSource=function(r){var e=null;return this.layoutManager!=null&&(e=this.layoutManager.getLayout(this.model.getParent(r))),this.isTableRow(r)||this.isTableCell(r)||e!=null&&e.constructor==mxStackLayout};Graph$1.prototype.connectVertex=function(r,e,t,i,n,s,l,a){if(s=s||!1,r.geometry.relative&&this.model.isEdge(r.parent))return[];for(;r.geometry.relative&&this.model.isVertex(r.parent);)r=r.parent;var o=this.isCloneConnectSource(r),h=o?r:this.getCompositeParent(r),d=r.geometry.relative&&r.parent.geometry!=null?new mxPoint(r.parent.geometry.width*r.geometry.x,r.parent.geometry.height*r.geometry.y):new mxPoint(h.geometry.x,h.geometry.y);e==mxConstants$1.DIRECTION_NORTH?(d.x+=h.geometry.width/2,d.y-=t):e==mxConstants$1.DIRECTION_SOUTH?(d.x+=h.geometry.width/2,d.y+=h.geometry.height+t):e==mxConstants$1.DIRECTION_WEST?(d.x-=t,d.y+=h.geometry.height/2):(d.x+=h.geometry.width+t,d.y+=h.geometry.height/2);var m=this.view.getState(this.model.getParent(r)),g=this.view.scale,c=this.view.translate,f=c.x*g,C=c.y*g;m!=null&&this.model.isVertex(m.cell)&&(f=m.x,C=m.y),this.model.isVertex(r.parent)&&r.geometry.relative&&(d.x+=r.parent.geometry.x,d.y+=r.parent.geometry.y);var v=s?null:new mxRectangle(f+d.x*g,C+d.y*g).grow(40),w=v!=null?this.getCells(0,0,0,0,null,null,v):null,S=w!=null&&w.length>0?w.reverse()[0]:null,T=!1;if(S!=null&&this.model.isAncestor(S,r)&&(T=!0,S=null),S==null){var P=this.getSwimlaneAt(f+d.x*g,C+d.y*g);P!=null&&(T=!1,S=P)}for(var P=S;P!=null;){if(this.isCellLocked(P)){S=null;break}P=this.model.getParent(P)}if(S!=null){var L=this.view.getState(r),k=this.view.getState(S);L!=null&&k!=null&&mxUtils$1.intersects(L,k)&&(S=null)}var G=!mxEvent$1.isShiftDown(i)||mxEvent$1.isControlDown(i)||n;if(G&&(e==mxConstants$1.DIRECTION_NORTH?d.y-=r.geometry.height/2:e==mxConstants$1.DIRECTION_SOUTH?d.y+=r.geometry.height/2:e==mxConstants$1.DIRECTION_WEST?d.x-=r.geometry.width/2:d.x+=r.geometry.width/2),S!=null&&!this.isCellConnectable(S)&&!this.isSwimlane(S)){var Y=this.getModel().getParent(S);this.getModel().isVertex(Y)&&this.isCellConnectable(Y)&&(S=Y)}(S==r||this.model.isEdge(S)||!this.isCellConnectable(S)&&!this.isSwimlane(S))&&(S=null);var te=[],ie=S!=null&&this.isSwimlane(S),ne=ie?null:S,q=mxUtils$1.bind(this,function(oe){if(l==null||oe!=null||S==null&&o){this.model.beginUpdate();try{if(ne==null&&G){for(var le=oe??r,Z=this.getCellGeometry(le);Z!=null&&Z.relative;)le=this.getModel().getParent(le),Z=this.getCellGeometry(le);le=o?r:this.getCompositeParent(le),ne=oe??this.duplicateCells([le],!1)[0],oe!=null&&this.addCells([ne],this.model.getParent(r),null,null,null,!0);var Z=this.getCellGeometry(ne);Z!=null&&(Z.x=d.x-Z.width/2,Z.y=d.y-Z.height/2),ie?(this.addCells([ne],S,null,null,null,!0),S=null):G&&S==null&&!T&&!o&&this.addCells([ne],this.getDefaultParent(),null,null,null,!0)}var B=mxEvent$1.isControlDown(i)&&mxEvent$1.isShiftDown(i)&&G||S==null&&o?null:this.insertEdge(this.model.getParent(r),null,"",r,ne,this.createCurrentEdgeStyle());if(B!=null&&this.connectionHandler.insertBeforeSource){for(var re=null,se=r;se.parent!=null&&se.geometry!=null&&se.geometry.relative&&se.parent!=B.parent;)se=this.model.getParent(se);if(se!=null&&se.parent!=null&&se.parent==B.parent){var re=se.parent.getIndex(se);this.model.add(se.parent,B,re)}}if(S==null&&ne!=null&&r.parent!=null&&o&&e==mxConstants$1.DIRECTION_WEST){var re=r.parent.getIndex(r);this.model.add(r.parent,ne,re)}B!=null&&te.push(B),S==null&&ne!=null&&te.push(ne),ne==null&&B!=null&&B.geometry.setTerminalPoint(d,!1),B!=null&&this.fireEvent(new mxEventObject$1("cellsInserted","cells",[B]))}finally{this.model.endUpdate()}}if(a!=null)a(te);else return te});if(l!=null&&ne==null&&G&&(S!=null||!o))l(f+d.x*g,C+d.y*g,q);else return q(ne)};Graph$1.prototype.getIndexableText=function(){var r=document.createElement("div"),e=[],t="";for(var i in this.model.cells){var n=this.model.cells[i];(this.model.isVertex(n)||this.model.isEdge(n))&&(this.isHtmlLabel(n)?(r.innerHTML=this.sanitizeHtml(this.getLabel(n)),t=mxUtils$1.extractTextWithWhitespace([r])):t=this.getLabel(n),t=mxUtils$1.trim(t.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")),t.length>0&&e.push(t))}return e.join(" ")};Graph$1.prototype.convertValueToString=function(r){var e=this.model.getValue(r);if(e!=null&&typeof e=="object"){var t=null;if(this.isReplacePlaceholders(r)&&r.getAttribute("placeholder")!=null)for(var i=r.getAttribute("placeholder"),n=r;t==null&&n!=null;)n.value!=null&&typeof n.value=="object"&&(t=n.hasAttribute(i)?n.getAttribute(i)!=null?n.getAttribute(i):"":null),n=this.model.getParent(n);else{var t=null;Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(t=e.getAttribute("label_"+Graph$1.diagramLanguage)),t==null&&(t=e.getAttribute("label")||"")}return t||""}return mxGraph.prototype.convertValueToString.apply(this,arguments)};Graph$1.prototype.getLinksForState=function(r){return r!=null&&r.text!=null&&r.text.node!=null?r.text.node.getElementsByTagName("a"):null};Graph$1.prototype.getLinkForCell=function(r){if(r.value!=null&&typeof r.value=="object"){var e=r.value.getAttribute("link");return e!=null&&e.toLowerCase().substring(0,11)==="javascript:"&&(e=e.substring(11)),e}return null};Graph$1.prototype.getCellStyle=function(r){var e=mxGraph.prototype.getCellStyle.apply(this,arguments);if(r!=null&&this.layoutManager!=null){var t=this.model.getParent(r);if(this.model.isVertex(t)&&this.isCellCollapsed(r)){var i=this.layoutManager.getLayout(t);i!=null&&i.constructor==mxStackLayout&&(e[mxConstants$1.STYLE_HORIZONTAL]=!i.horizontal)}}return e};Graph$1.prototype.updateAlternateBounds=function(r,e,t){if(r!=null&&e!=null&&this.layoutManager!=null&&e.alternateBounds!=null){var i=this.layoutManager.getLayout(this.model.getParent(r));i!=null&&i.constructor==mxStackLayout&&(i.horizontal?e.alternateBounds.height=0:e.alternateBounds.width=0)}mxGraph.prototype.updateAlternateBounds.apply(this,arguments)};Graph$1.prototype.isMoveCellsEvent=function(r,e){return mxEvent$1.isShiftDown(r)||mxUtils$1.getValue(e.style,"moveCells","0")=="1"};Graph$1.prototype.foldCells=function(r,e,t,i,n){if(e=e??!1,t==null&&(t=this.getFoldableCells(this.getSelectionCells(),r)),t!=null){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),this.layoutManager!=null)for(var s=0;s<t.length;s++){var l=this.view.getState(t[s]),a=this.getCellGeometry(t[s]);if(l!=null&&a!=null){var o=Math.round(a.width-l.width/this.view.scale),h=Math.round(a.height-l.height/this.view.scale);if(h!=0||o!=0){var d=this.model.getParent(t[s]),m=this.layoutManager.getLayout(d);m==null?n!=null&&this.isMoveCellsEvent(n,l)&&this.moveSiblings(l,d,o,h):(n==null||!mxEvent$1.isAltDown(n))&&m.constructor==mxStackLayout&&!m.resizeLast&&this.resizeParentStacks(d,m,o,h)}}}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(t)}};Graph$1.prototype.moveSiblings=function(r,e,t,i){this.model.beginUpdate();try{for(var n=this.getCellsBeyond(r.x,r.y,e,!0,!0),s=0;s<n.length;s++)if(n[s]!=r.cell){var l=this.view.getState(n[s]),a=this.getCellGeometry(n[s]);l!=null&&a!=null&&(a=a.clone(),a.translate(Math.round(t*Math.max(0,Math.min(1,(l.x-r.x)/r.width))),Math.round(i*Math.max(0,Math.min(1,(l.y-r.y)/r.height)))),this.model.setGeometry(n[s],a))}}finally{this.model.endUpdate()}};Graph$1.prototype.resizeParentStacks=function(r,e,t,i){if(this.layoutManager!=null&&e!=null&&e.constructor==mxStackLayout&&!e.resizeLast){this.model.beginUpdate();try{for(var n=e.horizontal;r!=null&&e!=null&&e.constructor==mxStackLayout&&e.horizontal==n&&!e.resizeLast;){var s=this.getCellGeometry(r),l=this.view.getState(r);l!=null&&s!=null&&(s=s.clone(),e.horizontal?s.width+=t+Math.min(0,l.width/this.view.scale-s.width):s.height+=i+Math.min(0,l.height/this.view.scale-s.height),this.model.setGeometry(r,s)),r=this.model.getParent(r),e=this.layoutManager.getLayout(r)}}finally{this.model.endUpdate()}}};Graph$1.prototype.isContainer=function(r){var e=this.getCurrentCellStyle(r);return this.isSwimlane(r)?e.container!="0":e.container=="1"};Graph$1.prototype.isCellConnectable=function(r){var e=this.getCurrentCellStyle(r);return e.connectable!=null?e.connectable!="0":mxGraph.prototype.isCellConnectable.apply(this,arguments)};Graph$1.prototype.isLabelMovable=function(r){var e=this.getCurrentCellStyle(r);return e.movableLabel!=null?e.movableLabel!="0":mxGraph.prototype.isLabelMovable.apply(this,arguments)};Graph$1.prototype.selectAll=function(r){r=r||this.getDefaultParent(),this.isCellLocked(r)||mxGraph.prototype.selectAll.apply(this,arguments)};Graph$1.prototype.selectCells=function(r,e,t){t=t||this.getDefaultParent(),this.isCellLocked(t)||mxGraph.prototype.selectCells.apply(this,arguments)};Graph$1.prototype.getSwimlaneAt=function(r,e,t){var i=mxGraph.prototype.getSwimlaneAt.apply(this,arguments);return this.isCellLocked(i)&&(i=null),i};Graph$1.prototype.isCellFoldable=function(r){var e=this.getCurrentCellStyle(r);return this.foldingEnabled&&(e.treeFolding=="1"||!this.isCellLocked(r)&&(this.isContainer(r)&&e.collapsible!="0"||!this.isContainer(r)&&e.collapsible=="1"))};Graph$1.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()};Graph$1.prototype.zoom=function(r,e){r=Math.max(.01,Math.min(this.view.scale*r,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)};Graph$1.prototype.zoomIn=function(){this.view.scale<.15?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)};Graph$1.prototype.zoomOut=function(){this.view.scale<=.15?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(this.view.scale*(1/this.zoomFactor)*20)/20/this.view.scale)};Graph$1.prototype.fitWindow=function(r,e){e=e??10;var t=this.container.clientWidth-e,i=this.container.clientHeight-e,n=Math.floor(20*Math.min(t/r.width,i/r.height))/20;if(this.zoomTo(n),mxUtils$1.hasScrollbars(this.container)){var s=this.view.translate;this.container.scrollTop=(r.y+s.y)*n-Math.max((i-r.height*n)/2+e/2,0),this.container.scrollLeft=(r.x+s.x)*n-Math.max((t-r.width*n)/2+e/2,0)}};Graph$1.prototype.getTooltipForCell=function(r){var e="";if(mxUtils$1.isNode(r.value)){var t=null;if(Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(t=r.value.getAttribute("tooltip_"+Graph$1.diagramLanguage)),t==null&&(t=r.value.getAttribute("tooltip")),t!=null)t!=null&&this.isReplacePlaceholders(r)&&(t=this.replacePlaceholders(r,t)),e=this.sanitizeHtml(t);else{var i=this.builtInProperties,n=r.value.attributes,s=[];this.isEnabled()&&i.push("link");for(var l=0;l<n.length;l++)mxUtils$1.indexOf(i,n[l].nodeName)<0&&n[l].nodeValue.length>0&&s.push({name:n[l].nodeName,value:n[l].nodeValue});s.sort(function(a,o){return a.name<o.name?-1:a.name>o.name?1:0});for(var l=0;l<s.length;l++)(s[l].name!="link"||!this.isCustomLink(s[l].value))&&(e+=(s[l].name!="link"?"<b>"+s[l].name+":</b> ":"")+mxUtils$1.htmlEntities(s[l].value)+`
`);e.length>0&&(e=e.substring(0,e.length-1),mxClient.IS_SVG&&(e='<div style="max-width:360px;">'+e+"</div>"))}}return e};Graph$1.prototype.stringToBytes=function(r){return Graph$1.stringToBytes(r)};Graph$1.prototype.bytesToString=function(r){return Graph$1.bytesToString(r)};Graph$1.prototype.compressNode=function(r){return Graph$1.compressNode(r)};Graph$1.prototype.compress=function(r,e){return Graph$1.compress(r,e)};Graph$1.prototype.decompress=function(r,e){return Graph$1.decompress(r,e)};Graph$1.prototype.zapGremlins=function(r){return Graph$1.zapGremlins(r)};function HoverIcons(r){this.graph=r,this.init()}HoverIcons.prototype.arrowSpacing=2;HoverIcons.prototype.updateDelay=500;HoverIcons.prototype.activationDelay=140;HoverIcons.prototype.currentState=null;HoverIcons.prototype.activeArrow=null;HoverIcons.prototype.inactiveOpacity=15;HoverIcons.prototype.cssCursor="copy";HoverIcons.prototype.checkCollisions=!0;HoverIcons.prototype.arrowFill="#29b6f2";HoverIcons.prototype.triangleUp=mxClient.IS_SVG?Graph$1.createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14);HoverIcons.prototype.triangleRight=mxClient.IS_SVG?Graph$1.createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26);HoverIcons.prototype.triangleDown=mxClient.IS_SVG?Graph$1.createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14);HoverIcons.prototype.triangleLeft=mxClient.IS_SVG?Graph$1.createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26);HoverIcons.prototype.roundDrop=mxClient.IS_SVG?Graph$1.createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26);HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCI+PGVsbGlwc2UgZmlsbD0iIzI5YjZmMiIgY3g9IjEyIiBjeT0iMTIiIHJ4PSIxMiIgcnk9IjEyIi8+PHBhdGggdHJhbnNmb3JtPSJzY2FsZSgwLjgpIHRyYW5zbGF0ZSgyLjQsIDIuNCkiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iI2ZmZiIgZD0iTTEyIDZ2M2w0LTQtNC00djNjLTQuNDIgMC04IDMuNTgtOCA4IDAgMS41Ny40NiAzLjAzIDEuMjQgNC4yNkw2LjcgMTQuOGMtLjQ1LS44My0uNy0xLjc5LS43LTIuOCAwLTMuMzEgMi42OS02IDYtNnptNi43NiAxLjc0TDE3LjMgOS4yYy40NC44NC43IDEuNzkuNyAyLjggMCAzLjMxLTIuNjkgNi02IDZ2LTNsLTQgNCA0IDR2LTNjNC40MiAwIDgtMy41OCA4LTggMC0xLjU3LS40Ni0zLjAzLTEuMjQtNC4yNnoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Cg==":IMAGE_PATH+"/refresh.png",38,38);HoverIcons.prototype.tolerance=mxClient.IS_TOUCH?6:0;HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources$1.get("plusTooltip")),this.arrowRight=this.createArrow(this.triangleRight,mxResources$1.get("plusTooltip")),this.arrowDown=this.createArrow(this.triangleDown,mxResources$1.get("plusTooltip")),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources$1.get("plusTooltip")),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.resetHandler=mxUtils$1.bind(this,function(){this.reset()}),this.repaintHandler=mxUtils$1.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent$1.CHANGE,this.resetHandler),this.graph.model.addListener(mxEvent$1.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent$1.UP,this.repaintHandler),this.graph.addListener(mxEvent$1.ROOT,this.repaintHandler),this.graph.addListener(mxEvent$1.ESCAPE,this.resetHandler),mxEvent$1.addListener(this.graph.container,"scroll",this.resetHandler),this.graph.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){this.mouseDownPoint=null})),mxEvent$1.addListener(this.graph.container,"mouseleave",mxUtils$1.bind(this,function(t){t.relatedTarget!=null&&mxEvent$1.getSource(t)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent$1.START_EDITING,mxUtils$1.bind(this,function(t){this.reset()}));var r=this.graph.click;this.graph.click=mxUtils$1.bind(this,function(t){r.apply(this.graph,arguments),this.currentState!=null&&!this.graph.isCellSelected(this.currentState.cell)&&mxEvent$1.isTouchEvent(t.getEvent())&&!this.graph.model.isVertex(t.getCell())&&this.reset()});var e=!1;this.graph.addMouseListener({mouseDown:mxUtils$1.bind(this,function(t,i){e=!1;var n=i.getEvent();if(this.isResetEvent(n))this.reset();else if(!this.isActive()){var s=this.getState(i.getState());(s!=null||!mxEvent$1.isTouchEvent(n))&&this.update(s)}this.setDisplay("none")}),mouseMove:mxUtils$1.bind(this,function(t,i){var n=i.getEvent();this.isResetEvent(n)?this.reset():!this.graph.isMouseDown&&!mxEvent$1.isTouchEvent(n)&&this.update(this.getState(i.getState()),i.getGraphX(),i.getGraphY()),this.graph.connectionHandler!=null&&this.graph.connectionHandler.shape!=null&&(e=!0)}),mouseUp:mxUtils$1.bind(this,function(t,i){var n=i.getEvent();mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(n),mxEvent$1.getClientY(n)),this.isResetEvent(n)?this.reset():this.isActive()&&!e&&this.mouseDownPoint!=null?this.click(this.currentState,this.getDirection(),i):this.isActive()?this.graph.getSelectionCount()!=1||!this.graph.model.isEdge(this.graph.getSelectionCell())?this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(i.getGraphX(),i.getGraphY())))):this.reset():mxEvent$1.isTouchEvent(n)||this.bbox!=null&&mxUtils$1.contains(this.bbox,i.getGraphX(),i.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent$1.isTouchEvent(n)||this.reset(),e=!1,this.resetActiveArrow()})})};HoverIcons.prototype.isResetEvent=function(r,e){return mxEvent$1.isAltDown(r)||this.activeArrow==null&&mxEvent$1.isShiftDown(r)||mxEvent$1.isPopupTrigger(r)&&!this.graph.isCloneEvent(r)};HoverIcons.prototype.createArrow=function(r,e){var t=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"?(t=document.createElement(mxClient.VML_PREFIX+":image"),t.setAttribute("src",r.src),t.style.borderStyle="none"):(t=document.createElement("div"),t.style.backgroundImage="url("+r.src+")",t.style.backgroundPosition="center",t.style.backgroundRepeat="no-repeat"),t.style.width=r.width+4+"px",t.style.height=r.height+4+"px",t.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):(t=mxUtils$1.createImage(r.src),t.style.width=r.width+"px",t.style.height=r.height+"px",t.style.padding=this.tolerance+"px"),e!=null&&t.setAttribute("title",e),t.style.position="absolute",t.style.cursor=this.cssCursor,mxEvent$1.addGestureListeners(t,mxUtils$1.bind(this,function(i){this.currentState!=null&&!this.isResetEvent(i)&&(this.mouseDownPoint=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(i),mxEvent$1.getClientY(i)),this.drag(i,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=t,this.setDisplay("none"),mxEvent$1.consume(i))})),mxEvent$1.redirectMouseEvents(t,this.graph,this.currentState),mxEvent$1.addListener(t,"mouseenter",mxUtils$1.bind(this,function(i){mxEvent$1.isMouseEvent(i)&&(this.activeArrow!=null&&this.activeArrow!=t&&mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils$1.setOpacity(t,100),this.activeArrow=t)})),mxEvent$1.addListener(t,"mouseleave",mxUtils$1.bind(this,function(i){this.graph.isMouseDown||this.resetActiveArrow()})),t};HoverIcons.prototype.resetActiveArrow=function(){this.activeArrow!=null&&(mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)};HoverIcons.prototype.getDirection=function(){var r=mxConstants$1.DIRECTION_EAST;return this.activeArrow==this.arrowUp?r=mxConstants$1.DIRECTION_NORTH:this.activeArrow==this.arrowDown?r=mxConstants$1.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(r=mxConstants$1.DIRECTION_WEST),r};HoverIcons.prototype.visitNodes=function(r){for(var e=0;e<this.elts.length;e++)this.elts[e]!=null&&r(this.elts[e])};HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(r){r.parentNode!=null&&r.parentNode.removeChild(r)})};HoverIcons.prototype.setDisplay=function(r){this.visitNodes(function(e){e.style.display=r})};HoverIcons.prototype.isActive=function(){return this.activeArrow!=null&&this.currentState!=null};HoverIcons.prototype.drag=function(r,e,t){if(this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),this.currentState!=null){this.graph.connectionHandler.start(this.currentState,e,t),this.graph.isMouseTrigger=mxEvent$1.isMouseEvent(r),this.graph.isMouseDown=!0;var i=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);i?.setHandlesVisible(!1);var n=this.graph.connectionHandler.edgeState;if(r!=null&&mxEvent$1.isShiftDown(r)&&mxEvent$1.isControlDown(r)&&n!=null&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_EDGE,null)==="orthogonalEdgeStyle"){var s=this.getDirection();n.cell.style=mxUtils$1.setStyle(n.cell.style,"sourcePortConstraint",s),n.style.sourcePortConstraint=s}}};HoverIcons.prototype.getStateAt=function(r,e,t){return this.graph.view.getState(this.graph.getCellAt(e,t))};HoverIcons.prototype.click=function(r,e,t){var i=t.getEvent(),n=t.getGraphX(),s=t.getGraphY(),l=this.getStateAt(r,n,s);l!=null&&this.graph.model.isEdge(l.cell)&&!this.graph.isCloneEvent(i)&&(l.getVisibleTerminalState(!0)==r||l.getVisibleTerminalState(!1)==r)?(this.graph.setSelectionCell(l.cell),this.reset()):r!=null&&this.execute(r,e,t),t.consume()};HoverIcons.prototype.execute=function(r,e,t){var i=t.getEvent();this.graph.selectCellsForConnectVertex(this.graph.connectVertex(r.cell,e,this.graph.defaultEdgeLength,i,this.graph.isCloneEvent(i),this.graph.isCloneEvent(i)),i,this)};HoverIcons.prototype.reset=function(r){r=r??!0,r&&this.updateThread!=null&&window.clearTimeout(this.updateThread),this.mouseDownPoint=null,this.currentState=null,this.activeArrow=null,this.removeNodes(),this.bbox=null};HoverIcons.prototype.repaint=function(){if(this.bbox=null,this.currentState!=null){if(this.currentState=this.getState(this.currentState),this.currentState!=null&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var r=mxRectangle.fromRectangle(this.currentState);this.currentState.shape!=null&&this.currentState.shape.boundingBox!=null&&(r=mxRectangle.fromRectangle(this.currentState.shape.boundingBox)),r.grow(this.graph.tolerance),r.grow(this.arrowSpacing);var e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);this.graph.isTableRow(this.currentState.cell)&&(e=this.graph.selectionCellsHandler.getHandler(this.graph.model.getParent(this.currentState.cell)));var t=null;e!=null&&(r.x-=e.horizontalOffset/2,r.y-=e.verticalOffset/2,r.width+=e.horizontalOffset,r.height+=e.verticalOffset,e.rotationShape!=null&&e.rotationShape.node!=null&&e.rotationShape.node.style.visibility!="hidden"&&e.rotationShape.node.style.display!="none"&&e.rotationShape.boundingBox!=null&&(t=e.rotationShape.boundingBox));var i=mxUtils$1.bind(this,function(d,m,g){if(t!=null){var c=new mxRectangle(m,g,d.clientWidth,d.clientHeight);mxUtils$1.intersects(c,t)&&(d==this.arrowUp?g-=c.y+c.height-t.y:d==this.arrowRight?m+=t.x+t.width-c.x:d==this.arrowDown?g+=t.y+t.height-c.y:d==this.arrowLeft&&(m-=c.x+c.width-t.x))}d.style.left=m+"px",d.style.top=g+"px",mxUtils$1.setOpacity(d,this.inactiveOpacity)});if(i(this.arrowUp,Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance),Math.round(r.y-this.triangleUp.height-this.tolerance)),i(this.arrowRight,Math.round(r.x+r.width-this.tolerance),Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)),i(this.arrowDown,parseInt(this.arrowUp.style.left),Math.round(r.y+r.height-this.tolerance)),i(this.arrowLeft,Math.round(r.x-this.triangleLeft.width-this.tolerance),parseInt(this.arrowRight.style.top)),this.checkCollisions){var n=this.graph.getCellAt(r.x+r.width+this.triangleRight.width/2,this.currentState.getCenterY()),s=this.graph.getCellAt(r.x-this.triangleLeft.width/2,this.currentState.getCenterY()),l=this.graph.getCellAt(this.currentState.getCenterX(),r.y-this.triangleUp.height/2),a=this.graph.getCellAt(this.currentState.getCenterX(),r.y+r.height+this.triangleDown.height/2);n!=null&&n==s&&s==l&&l==a&&(n=null,s=null,l=null,a=null);var o=this.graph.getCellGeometry(this.currentState.cell),h=mxUtils$1.bind(this,function(d,m){var g=this.graph.model.isVertex(d)&&this.graph.getCellGeometry(d);d!=null&&!this.graph.model.isAncestor(d,this.currentState.cell)&&!this.graph.isSwimlane(d)&&(g==null||o==null||g.height<3*o.height&&g.width<3*o.width)?m.style.visibility="hidden":m.style.visibility="visible"});h(n,this.arrowRight),h(s,this.arrowLeft),h(l,this.arrowUp),h(a,this.arrowDown)}else this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible";this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources$1.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))}else this.reset();this.currentState!=null&&(this.bbox=this.computeBoundingBox(),this.bbox!=null&&this.bbox.grow(10))}};HoverIcons.prototype.computeBoundingBox=function(){var r=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(e){if(e.parentNode!=null){var t=new mxRectangle(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);r==null?r=t:r.add(t)}}),r};HoverIcons.prototype.getState=function(r){if(r!=null){var e=r.cell;if(!this.graph.getModel().contains(e))r=null;else{if(this.graph.getModel().isVertex(e)&&!this.graph.isCellConnectable(e)){var t=this.graph.getModel().getParent(e);this.graph.getModel().isVertex(t)&&this.graph.isCellConnectable(t)&&(e=t)}(this.graph.isCellLocked(e)||this.graph.model.isEdge(e))&&(e=null),r=this.graph.view.getState(e),r!=null&&r.style==null&&(r=null)}}return r};HoverIcons.prototype.update=function(r,e,t){if(!this.graph.connectionArrowsEnabled||r!=null&&mxUtils$1.getValue(r.style,"allowArrows","1")=="0")this.reset();else{r!=null&&r.cell.geometry!=null&&r.cell.geometry.relative&&this.graph.model.isEdge(r.cell.parent)&&(r=null);var i=null;this.prev!=r||this.isActive()?(this.startTime=new Date().getTime(),this.prev=r,i=0,this.updateThread!=null&&window.clearTimeout(this.updateThread),r!=null&&(this.updateThread=window.setTimeout(mxUtils$1.bind(this,function(){!this.isActive()&&!this.graph.isMouseDown&&!this.graph.panningHandler.isActive()&&(this.prev=r,this.update(r,e,t))}),this.updateDelay+10))):this.startTime!=null&&(i=new Date().getTime()-this.startTime),this.setDisplay(""),this.currentState!=null&&this.currentState!=r&&i<this.activationDelay&&this.bbox!=null&&!mxUtils$1.contains(this.bbox,e,t)?this.reset(!1):(this.currentState!=null||i>this.activationDelay)&&this.currentState!=r&&(i>this.updateDelay&&r!=null||this.bbox==null||e==null||t==null||!mxUtils$1.contains(this.bbox,e,t))&&(r!=null&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(r),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=r&&this.graph.connectionHandler.constraintHandler.reset()):this.reset())}};HoverIcons.prototype.setCurrentState=function(r){r.style.portConstraint!="eastwest"&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=r};Graph$1.prototype.createParent=function(r,e,t,i,n){r=this.cloneCell(r);for(var s=0;s<t;s++){var l=this.cloneCell(e),a=this.getCellGeometry(l);a!=null&&(a.x+=s*i,a.y+=s*n),r.insert(l)}return r};Graph$1.prototype.createTable=function(r,e,t,i,n,s,l,a,o){return t=t??60,i=i??40,s=s??30,l=l??"shape=table;html=1;whiteSpace=wrap;startSize="+(n!=null?s:"0")+";container=1;collapsible=0;childLayout=tableLayout;",a=a??"shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",o=o??"shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;",this.createParent(this.createVertex(null,null,n??"",0,0,e*t,r*i+(n!=null?s:0),l),this.createParent(this.createVertex(null,null,"",0,0,e*t,i,a),this.createVertex(null,null,"",0,0,t,i,o),e,t,0),r,0,i)};Graph$1.prototype.setTableValues=function(r,e,t){for(var i=this.model.getChildCells(r,!0),n=0;n<i.length;n++)if(t!=null&&(i[n].value=t[n]),e!=null)for(var s=this.model.getChildCells(i[n],!0),l=0;l<s.length;l++)e[n][l]!=null&&(s[l].value=e[n][l]);return r};Graph$1.prototype.createCrossFunctionalSwimlane=function(r,e,t,i,n,s,l,a,o){t=t??120,i=i??120,n=n??40;var h="html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;";s=s??"shape=table;childLayout=tableLayout;rowLines=0;columnLines=0;startSize="+n+";"+h,l=l??"swimlane;horizontal=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;startSize="+n+";"+h,a=a??"swimlane;connectable=0;startSize=40;"+h,o=o??"swimlane;connectable=0;startSize=0;"+h;var d=this.createVertex(null,null,"",0,0,e*t,r*i,s),m=mxUtils$1.getValue(this.getCellStyle(d),mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE);d.geometry.width+=m,d.geometry.height+=m;var g=this.createVertex(null,null,"",0,m,e*t+m,i,l);return d.insert(this.createParent(g,this.createVertex(null,null,"",m,0,t,i,a),e,t,0)),r>1?(g.geometry.y=i+m,this.createParent(d,this.createParent(g,this.createVertex(null,null,"",m,0,t,i,o),e,t,0),r-1,0,i)):d};Graph$1.prototype.isTableCell=function(r){return this.model.isVertex(r)&&this.isTableRow(this.model.getParent(r))};Graph$1.prototype.isTableRow=function(r){return this.model.isVertex(r)&&this.isTable(this.model.getParent(r))};Graph$1.prototype.isTable=function(r){var e=this.getCellStyle(r);return e!=null&&e.childLayout=="tableLayout"};Graph$1.prototype.setTableRowHeight=function(r,e,t){t=t??!0;var i=this.getModel();i.beginUpdate();try{var n=this.getCellGeometry(r);if(n!=null){n=n.clone(),n.height+=e,i.setGeometry(r,n);var s=i.getParent(r),l=i.getChildCells(s,!0);if(!t){var a=mxUtils$1.indexOf(l,r);if(a<l.length-1){var o=l[a+1],h=this.getCellGeometry(o);h!=null&&(h=h.clone(),h.y+=e,h.height-=e,i.setGeometry(o,h))}}var d=this.getCellGeometry(s);d!=null&&(t||(t=r==l[l.length-1]),t&&(d=d.clone(),d.height+=e,i.setGeometry(s,d))),this.layoutManager!=null&&this.layoutManager.executeLayout(s,!0)}}finally{i.endUpdate()}};Graph$1.prototype.setTableColumnWidth=function(r,e,t){t=t??!1;var i=this.getModel(),n=i.getParent(r),s=i.getParent(n),l=i.getChildCells(n,!0),a=mxUtils$1.indexOf(l,r),o=a==l.length-1;i.beginUpdate();try{for(var h=i.getChildCells(s,!0),d=0;d<h.length;d++){n=h[d],l=i.getChildCells(n,!0);var m=l[a],g=this.getCellGeometry(m);if(g!=null&&(g=g.clone(),g.width+=e,i.setGeometry(m,g)),a<l.length-1){m=l[a+1];var g=this.getCellGeometry(m);g!=null&&(g=g.clone(),g.x+=e,t||(g.width-=e),i.setGeometry(m,g))}}if(o||t){var c=this.getCellGeometry(s);c!=null&&(c=c.clone(),c.width+=e,i.setGeometry(s,c))}this.layoutManager!=null&&this.layoutManager.executeLayout(s,!0)}finally{i.endUpdate()}};class TableLayout extends mxStackLayout{constructor(e){super(e)}}TableLayout.prototype.isHorizontal=function(){return!1};TableLayout.prototype.isVertexIgnored=function(r){return!this.graph.getModel().isVertex(r)||!this.graph.isCellVisible(r)};TableLayout.prototype.getSize=function(r,e){for(var t=0,i=0;i<r.length;i++)if(!this.isVertexIgnored(r[i])){var n=this.graph.getCellGeometry(r[i]);n!=null&&(t+=e?n.width:n.height)}return t};TableLayout.prototype.getRowLayout=function(r,e){for(var t=this.graph.model.getChildCells(r,!0),i=this.graph.getActualStartSize(r,!0),n=this.getSize(t,!0),s=e-i.x-i.width,l=[],a=i.x,o=0;o<t.length;o++){var h=this.graph.getCellGeometry(t[o]);h!=null&&(a+=h.width*s/n,l.push(Math.round(a)))}return l};TableLayout.prototype.layoutRow=function(r,e,t,i){var n=this.graph.getModel(),s=n.getChildCells(r,!0),l=this.graph.getActualStartSize(r,!0),a=l.x,o=0;e!=null&&(e=e.slice(),e.splice(0,0,l.x));for(var h=0;h<s.length;h++){var d=this.graph.getCellGeometry(s[h]);d!=null&&(d=d.clone(),d.y=l.y,d.height=t-l.y-l.height,e!=null?(d.x=e[h],d.width=e[h+1]-d.x,h==s.length-1&&h<e.length-2&&(d.width=i-d.x-l.x-l.width)):(d.x=a,a+=d.width,h==s.length-1?d.width=i-l.x-l.width-o:o+=d.width),n.setGeometry(s[h],d))}return o};TableLayout.prototype.execute=function(r){if(r!=null){var e=this.graph.getActualStartSize(r,!0),t=this.graph.getCellGeometry(r),i=this.graph.getCellStyle(r),n=mxUtils$1.getValue(i,"resizeLastRow","0")=="1",s=mxUtils$1.getValue(i,"resizeLast","0")=="1",l=mxUtils$1.getValue(i,"fixedRows","0")=="1",a=this.graph.getModel(),o=0;a.beginUpdate();try{var h=t.height-e.y-e.height,d=t.width-e.x-e.width,m=a.getChildCells(r,!0),g=this.getSize(m,!1);if(h>0&&d>0&&m.length>0&&g>0){if(n){var c=this.graph.getCellGeometry(m[m.length-1]);c!=null&&(c=c.clone(),c.height=h-g+c.height,a.setGeometry(m[m.length-1],c))}for(var f=s?null:this.getRowLayout(m[0],d),C=e.y,v=0;v<m.length;v++){var c=this.graph.getCellGeometry(m[v]);c!=null&&(c=c.clone(),c.x=e.x,c.width=d,c.y=Math.round(C),n||l?C+=c.height:C+=c.height/g*h,c.height=Math.round(C)-c.y,a.setGeometry(m[v],c)),o=Math.max(o,this.layoutRow(m[v],f,c.height,d))}l&&h<g&&(t=t.clone(),t.height=C+e.height,a.setGeometry(r,t)),s&&d<o+Graph$1.minTableColumnWidth&&(t=t.clone(),t.width=o+e.width+e.x+Graph$1.minTableColumnWidth,a.setGeometry(r,t))}}finally{a.endUpdate()}}};(function(){var r=mxGraphView.prototype.resetValidationState;mxGraphView.prototype.resetValidationState=function(){r.apply(this,arguments),this.validEdges=[]};var e=mxGraphView.prototype.validateCellState;mxGraphView.prototype.validateCellState=function(o,h){h=h??!0;var d=this.getState(o);return d!=null&&h&&this.graph.model.isEdge(d.cell)&&d.style!=null&&d.style[mxConstants$1.STYLE_CURVED]!=1&&!d.invalid&&this.updateLineJumps(d)&&this.graph.cellRenderer.redraw(d,!1,this.isRendering()),d=e.apply(this,arguments),d!=null&&h&&this.graph.model.isEdge(d.cell)&&d.style!=null&&d.style[mxConstants$1.STYLE_CURVED]!=1&&this.validEdges.push(d),d};var t=mxCellRenderer.prototype.isShapeInvalid;mxCellRenderer.prototype.isShapeInvalid=function(o,h){return t.apply(this,arguments)||o.routedPoints!=null&&h.routedPoints!=null&&!mxUtils$1.equalPoints(h.routedPoints,o.routedPoints)};var i=mxGraphView.prototype.updateCellState;mxGraphView.prototype.updateCellState=function(o){i.apply(this,arguments),this.graph.model.isEdge(o.cell)&&o.style[mxConstants$1.STYLE_CURVED]!=1&&this.updateLineJumps(o)},mxGraphView.prototype.updateLineJumps=function(o){var h=o.absolutePoints;if(Graph$1.lineJumpsEnabled){var d=o.routedPoints!=null,m=null;if(h!=null&&this.validEdges!=null&&mxUtils$1.getValue(o.style,"jumpStyle","none")!=="none"){let le=function(Z,B,re){var se=new mxPoint(B,re);se.type=Z,m.push(se);var ve=o.routedPoints!=null?o.routedPoints[m.length-1]:null;return ve==null||ve.type!=Z||ve.x!=B||ve.y!=re};var oe=le,g=.5*this.scale;d=!1,m=[];for(var c=0;c<h.length-1;c++){for(var f=h[c+1],C=h[c],v=[],w=h[c+2];c<h.length-2&&mxUtils$1.ptSegDistSq(C.x,C.y,w.x,w.y,f.x,f.y)<1*this.scale*this.scale;)f=w,c++,w=h[c+2];d=le(0,C.x,C.y)||d;for(var S=0;S<this.validEdges.length;S++){var T=this.validEdges[S],P=T.absolutePoints;if(P!=null&&mxUtils$1.intersects(o,T)&&T.style.noJump!="1")for(var L=0;L<P.length-1;L++){var k=P[L+1],G=P[L];for(w=P[L+2];L<P.length-2&&mxUtils$1.ptSegDistSq(G.x,G.y,w.x,w.y,k.x,k.y)<1*this.scale*this.scale;)k=w,L++,w=P[L+2];var q=mxUtils$1.intersection(C.x,C.y,f.x,f.y,G.x,G.y,k.x,k.y);if(q!=null&&(Math.abs(q.x-C.x)>g||Math.abs(q.y-C.y)>g)&&(Math.abs(q.x-f.x)>g||Math.abs(q.y-f.y)>g)&&(Math.abs(q.x-G.x)>g||Math.abs(q.y-G.y)>g)&&(Math.abs(q.x-k.x)>g||Math.abs(q.y-k.y)>g)){for(var Y=q.x-C.x,te=q.y-C.y,ie={distSq:Y*Y+te*te,x:q.x,y:q.y},ne=0;ne<v.length;ne++)if(v[ne].distSq>ie.distSq){v.splice(ne,0,ie),ie=null;break}ie!=null&&(v.length==0||v[v.length-1].x!==ie.x||v[v.length-1].y!==ie.y)&&v.push(ie)}}}for(var L=0;L<v.length;L++)d=le(1,v[L].x,v[L].y)||d}var q=h[h.length-1];d=le(0,q.x,q.y)||d}return o.routedPoints=m,d}else return!1};var n=mxConnector.prototype.paintLine;mxConnector.prototype.paintLine=function(o,h,d){if(this.routedPoints=this.state!=null?this.state.routedPoints:null,this.outline||this.state==null||this.style==null||this.state.routedPoints==null||this.state.routedPoints.length==0)n.apply(this,arguments);else{var m=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2,g=(parseInt(mxUtils$1.getValue(this.style,"jumpSize",Graph$1.defaultJumpSize))-2)/2+this.strokewidth,c=mxUtils$1.getValue(this.style,"jumpStyle","none"),f=!0,C=null,v=null,w=[],S=null;o.begin();for(var T=0;T<this.state.routedPoints.length;T++){var P=this.state.routedPoints[T],L=new mxPoint(P.x/this.scale,P.y/this.scale);T==0?L=h[0]:T==this.state.routedPoints.length-1&&(L=h[h.length-1]);var k=!1;if(C!=null&&P.type==1){var G=this.state.routedPoints[T+1],Y=G.x/this.scale-L.x,te=G.y/this.scale-L.y,ie=Y*Y+te*te;if(S==null&&(S=new mxPoint(L.x-C.x,L.y-C.y),v=Math.sqrt(S.x*S.x+S.y*S.y),v>0?(S.x=S.x*g/v,S.y=S.y*g/v):S=null),ie>g*g&&v>0){var Y=C.x-L.x,te=C.y-L.y,ie=Y*Y+te*te;if(ie>g*g){var ne=new mxPoint(L.x-S.x,L.y-S.y),q=new mxPoint(L.x+S.x,L.y+S.y);w.push(ne),this.addPoints(o,w,d,m,!1,null,f);var oe=Math.round(S.x)<0||Math.round(S.x)==0&&Math.round(S.y)<=0?1:-1;f=!1,c=="sharp"?(o.lineTo(ne.x-S.y*oe,ne.y+S.x*oe),o.lineTo(q.x-S.y*oe,q.y+S.x*oe),o.lineTo(q.x,q.y)):c=="arc"?(oe*=1.3,o.curveTo(ne.x-S.y*oe,ne.y+S.x*oe,q.x-S.y*oe,q.y+S.x*oe,q.x,q.y)):(o.moveTo(q.x,q.y),f=!0),w=[q],k=!0}}}else S=null;k||(w.push(L),C=L)}this.addPoints(o,w,d,m,!1,null,f),o.stroke()}};var s=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(o,h,d,m){if(h!=null&&o!=null&&(h.style.snapToPoint=="1"||o.style.snapToPoint=="1")){h=this.getTerminalPort(o,h,m);var g=this.getNextPoint(o,d,m),c=this.graph.isOrthogonal(o),f=mxUtils$1.toRadians(Number(h.style[mxConstants$1.STYLE_ROTATION]||"0")),C=new mxPoint(h.getCenterX(),h.getCenterY());if(f!=0){var v=Math.cos(-f),w=Math.sin(-f);g=mxUtils$1.getRotatedPoint(g,v,w,C)}var S=parseFloat(o.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0);S+=parseFloat(o.style[m?mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING:mxConstants$1.STYLE_TARGET_PERIMETER_SPACING]||0);var T=this.getPerimeterPoint(h,g,f==0&&c,S);if(f!=0){var v=Math.cos(f),w=Math.sin(f);T=mxUtils$1.getRotatedPoint(T,v,w,C)}o.setAbsoluteTerminalPoint(this.snapToAnchorPoint(o,h,d,m,T),m)}else s.apply(this,arguments)},mxGraphView.prototype.snapToAnchorPoint=function(o,h,d,m,g){if(h!=null&&o!=null){var c=this.graph.getAllConnectionConstraints(h),f=null,C=null;if(c!=null)for(var v=0;v<c.length;v++){var w=this.graph.getConnectionPoint(h,c[v]);if(w!=null){var S=(w.x-g.x)*(w.x-g.x)+(w.y-g.y)*(w.y-g.y);(C==null||S<C)&&(f=w,C=S)}}f!=null&&(g=f)}return g};var l=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(o,h,d){var m=l.apply(this,arguments),g=o.getAttribute("placeholders");return g=="1"&&d.state!=null&&(m=d.state.view.graph.replacePlaceholders(d.state.cell,m)),m};var a=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(o){if(o.style!=null&&typeof pako<"u"){var h=mxUtils$1.getValue(o.style,mxConstants$1.STYLE_SHAPE,null);if(h!=null&&typeof h=="string"&&h.substring(0,8)=="stencil(")try{var d=h.substring(8,h.length-1),m=mxUtils$1.parseXml(Graph$1.decompress(d));return new mxShape(new mxStencil(m.documentElement))}catch(g){window.console!=null&&console.log("Error in shape: "+g)}}return a.apply(this,arguments)}})();mxStencilRegistry.libraries={};mxStencilRegistry.dynamicLoading=!0;mxStencilRegistry.allowEval=!0;mxStencilRegistry.packages=[];mxStencilRegistry.getStencil=function(r){var e=mxStencilRegistry.stencils[r];if(e==null&&mxCellRenderer.defaultShapes[r]==null&&mxStencilRegistry.dynamicLoading){var t=mxStencilRegistry.getBasenameForStencil(r);if(t!=null){var i=mxStencilRegistry.libraries[t];if(i!=null){if(mxStencilRegistry.packages[t]==null){for(var n=0;n<i.length;n++){var s=i[n];if(s.toLowerCase().substring(s.length-4,s.length)==".xml")mxStencilRegistry.loadStencilSet(s,null);else if(s.toLowerCase().substring(s.length-3,s.length)==".js")try{if(mxStencilRegistry.allowEval){var l=mxUtils$1.load(s);l!=null&&l.getStatus()>=200&&l.getStatus()<=299&&eval.call(window,l.getText())}}catch(a){window.console!=null&&console.log("error in getStencil:",s,a)}}mxStencilRegistry.packages[t]=1}}else t=t.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+t+".xml",null);e=mxStencilRegistry.stencils[r]}}return e};mxStencilRegistry.getBasenameForStencil=function(r){var e=null;if(r!=null&&typeof r=="string"){var t=r.split(".");if(t.length>0&&t[0]=="mxgraph"){e=t[1];for(var i=2;i<t.length-1;i++)e+="/"+t[i]}}return e};mxStencilRegistry.loadStencilSet=function(r,e,t,i){t=t??!1;var n=mxStencilRegistry.packages[r];if(t||n==null){var s=!1;if(n==null)try{if(i){mxStencilRegistry.loadStencil(r,mxUtils$1.bind(this,function(l){l!=null&&l.documentElement!=null&&(mxStencilRegistry.packages[r]=l,s=!0,mxStencilRegistry.parseStencilSet(l.documentElement,e,s))}));return}else n=mxStencilRegistry.loadStencil(r),mxStencilRegistry.packages[r]=n,s=!0}catch(l){window.console!=null&&console.log("error in loadStencilSet:",r,l)}n!=null&&n.documentElement!=null&&mxStencilRegistry.parseStencilSet(n.documentElement,e,s)}};mxStencilRegistry.loadStencil=function(r,e){if(e!=null)mxUtils$1.get(r,mxUtils$1.bind(this,function(t){e(t.getStatus()>=200&&t.getStatus()<=299?t.getXml():null)}));else return mxUtils$1.load(r).getXml()};mxStencilRegistry.parseStencilSets=function(r){for(var e=0;e<r.length;e++)mxStencilRegistry.parseStencilSet(mxUtils$1.parseXml(r[e]).documentElement)};mxStencilRegistry.parseStencilSet=function(r,e,t){if(r.nodeName=="stencils")for(var i=r.firstChild;i!=null;)i.nodeName=="shapes"&&mxStencilRegistry.parseStencilSet(i,e,t),i=i.nextSibling;else{t=t??!0;var n=r.firstChild,s="",l=r.getAttribute("name");for(l!=null&&(s=l+".");n!=null;){if(n.nodeType==mxConstants$1.NODETYPE_ELEMENT&&(l=n.getAttribute("name"),l!=null)){s=s.toLowerCase();var a=l.replace(/ /g,"_");if(t&&mxStencilRegistry.addStencil(s+a.toLowerCase(),new mxStencil(n)),e!=null){var o=n.getAttribute("w"),h=n.getAttribute("h");o=o==null?80:parseInt(o,10),h=h==null?80:parseInt(h,10),e(s,a,l,o,h)}}n=n.nextSibling}}};typeof mxVertexHandler<"u"&&function(){mxConstants$1.HANDLE_FILLCOLOR="#29b6f2",mxConstants$1.HANDLE_STROKECOLOR="#0088cf",mxConstants$1.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants$1.OUTLINE_COLOR="#00a8ff",mxConstants$1.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants$1.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants$1.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants$1.EDGE_SELECTION_COLOR="#00a8ff",mxConstants$1.DEFAULT_VALID_COLOR="#00a8ff",mxConstants$1.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants$1.GUIDE_COLOR="#0088cf",mxConstants$1.HIGHLIGHT_OPACITY=30,mxConstants$1.HIGHLIGHT_SIZE=5,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGraphHandler.prototype.removeEmptyParents=!0,mxRubberband.prototype.fadeOut=!0,mxGuide.prototype.isEnabledForEvent=function(E){return!mxEvent$1.isAltDown(E)};var r=mxGraphLayout.prototype.isVertexIgnored;mxGraphLayout.prototype.isVertexIgnored=function(E){return r.apply(this,arguments)||this.graph.isTableRow(E)||this.graph.isTableCell(E)};var e=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(E){return this.graph.isCloneEvent(E)||e.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var E=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return E.opacity=mxConstants$1.HIGHLIGHT_OPACITY,E},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(E){var $=this.graph.createCurrentEdgeStyle(),R=this.graph.createEdge(null,null,null,null,null,$),U=new mxCellState(this.graph.view,R,this.graph.getCellStyle(R));for(var F in this.graph.currentEdgeStyle)U.style[F]=this.graph.currentEdgeStyle[F];return U};var t=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var E=t.apply(this,arguments);return E.isDashed=this.graph.currentEdgeStyle[mxConstants$1.STYLE_DASHED]=="1",E},mxConnectionHandler.prototype.updatePreview=function(E){};var i=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var E=i.apply(this,arguments),$=E.getCell;return E.getCell=mxUtils$1.bind(this,function(R){var U=$.apply(this,arguments);return this.error=null,U}),E},Graph$1.prototype.defaultVertexStyle={},Graph$1.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",jettySize:"auto",orthogonalLoop:"1"},Graph$1.prototype.createCurrentEdgeStyle=function(){for(var E="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";",$=["shape","curved","rounded","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","comicStyle","jumpStyle","jumpSize"],R=0;R<$.length;R++)this.currentEdgeStyle[$[R]]!=null&&(E+=$[R]+"="+this.currentEdgeStyle[$[R]]+";");return this.currentEdgeStyle.orthogonalLoop!=null?E+="orthogonalLoop="+this.currentEdgeStyle.orthogonalLoop+";":Graph$1.prototype.defaultEdgeStyle.orthogonalLoop!=null&&(E+="orthogonalLoop="+Graph$1.prototype.defaultEdgeStyle.orthogonalLoop+";"),this.currentEdgeStyle.jettySize!=null?E+="jettySize="+this.currentEdgeStyle.jettySize+";":Graph$1.prototype.defaultEdgeStyle.jettySize!=null&&(E+="jettySize="+Graph$1.prototype.defaultEdgeStyle.jettySize+";"),this.currentEdgeStyle.edgeStyle=="elbowEdgeStyle"&&this.currentEdgeStyle.elbow!=null&&(E+="elbow="+this.currentEdgeStyle.elbow+";"),this.currentEdgeStyle.html!=null?E+="html="+this.currentEdgeStyle.html+";":E+="html=1;",E},Graph$1.prototype.updateCellStyles=function(E,$,R){this.model.beginUpdate();try{for(var U=0;U<R.length;U++)if(this.model.isVertex(R[U])||this.model.isEdge(R[U])){this.setCellStyles(E,null,[R[U]]);var F=this.getCellStyle(R[U]),z=F[E];$!=(z??mxConstants$1.NONE)&&this.setCellStyles(E,$,[R[U]])}}finally{this.model.endUpdate()}},Graph$1.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph$1.prototype.loadStylesheet=function(){var E=this.themes!=null?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils$1.load(STYLE_PATH+"/default.xml").getDocumentElement():null;if(E!=null){var $=new mxCodec(E.ownerDocument);$.decode(E,this.getStylesheet())}},Graph$1.prototype.createCellLookup=function(E,$){$=$??new Object;for(var R=0;R<E.length;R++){var U=E[R];$[mxObjectIdentity.get(U)]=U.getId();for(var F=this.model.getChildCount(U),z=0;z<F;z++)this.createCellLookup([this.model.getChildAt(U,z)],$)}return $},Graph$1.prototype.createCellMapping=function(E,$,R){R=R??new Object;for(var U in E){var F=$[U];R[F]==null&&(R[F]=E[U].getId()||"")}return R},Graph$1.prototype.importGraphModel=function(E,$,R,U){$=$??0,R=R??0;var F=new mxCodec(E.ownerDocument),z=new mxGraphModel;F.decode(E,z);var K=[],ge=new Object,de=new Object,xe=z.getChildren(this.cloneCell(z.root,this.isCloneInvalidEdges(),ge));if(xe!=null){var Re=this.createCellLookup([z.root]);xe=xe.slice(),this.model.beginUpdate();try{if(xe.length==1&&!this.isCellLocked(this.getDefaultParent())){var we=z.getChildren(xe[0]);we!=null&&(K=this.moveCells(we,$,R,!1,this.getDefaultParent()),de[z.getChildAt(z.root,0).getId()]=this.getDefaultParent().getId())}else for(var _e=0;_e<xe.length;_e++){var we=this.model.getChildren(this.moveCells([xe[_e]],$,R,!1,this.model.getRoot())[0]);we!=null&&(K=K.concat(we))}if(K!=null&&(this.createCellMapping(ge,Re,de),this.updateCustomLinks(de,K),U)){this.isGridEnabled()&&($=this.snap($),R=this.snap(R));var Oe=this.getBoundingBoxFromGeometry(K,!0);Oe!=null&&this.moveCells(K,$-Oe.x,R-Oe.y)}}finally{this.model.endUpdate()}}return K},Graph$1.prototype.encodeCells=function(E){for(var $=new Object,R=this.cloneCells(E,null,$),U=new mxDictionary,F=0;F<E.length;F++)U.put(E[F],!0);for(var z=new mxCodec,K=new mxGraphModel,ge=K.getChildAt(K.getRoot(),0),F=0;F<R.length;F++){K.add(ge,R[F]);var de=this.view.getState(E[F]);if(de!=null){var xe=this.getCellGeometry(R[F]);xe!=null&&xe.relative&&!this.model.isEdge(E[F])&&U.get(this.model.getParent(E[F]))==null&&(xe.offset=null,xe.relative=!1,xe.x=de.x/de.view.scale-de.view.translate.x,xe.y=de.y/de.view.scale-de.view.translate.y)}}return this.updateCustomLinks(this.createCellMapping($,this.createCellLookup(E)),R),z.encode(K)},Graph$1.prototype.isSwimlane=function(E,$){if(E!=null&&this.model.getParent(E)!=this.model.getRoot()&&!this.model.isEdge(E)){var R=this.getCurrentCellStyle(E,$)[mxConstants$1.STYLE_SHAPE];return R==mxConstants$1.SHAPE_SWIMLANE||R=="table"}return!1};var n=Graph$1.prototype.isExtendParent;Graph$1.prototype.isExtendParent=function(E){var $=this.model.getParent(E);if($!=null){var R=this.getCurrentCellStyle($);if(R.expand!=null)return R.expand!="0"}return n.apply(this,arguments)&&($==null||!this.isTable($))};var s=Graph$1.prototype.splitEdge;Graph$1.prototype.splitEdge=function(E,$,R,U,F,z,K,ge){ge==null&&(ge=this.model.getParent(E),(this.isTable(ge)||this.isTableRow(ge))&&(ge=this.getCellAt(z,K,null,!0,!1))),s.apply(this,[E,$,R,U,F,z,K,ge])};var l=Graph$1.prototype.selectCell;Graph$1.prototype.selectCell=function(E,$,R){if($||R)l.apply(this,arguments);else{var U=this.getSelectionCell(),F=null,z=[],K=mxUtils$1.bind(this,function(ge){if(this.view.getState(ge)!=null&&(this.model.isVertex(ge)||this.model.isEdge(ge))){if(z.push(ge),ge==U)F=z.length-1;else if(E&&U==null&&z.length>0||F!=null&&E&&z.length>F||!E&&F>0)return}for(var de=0;de<this.model.getChildCount(ge);de++)K(this.model.getChildAt(ge,de))});K(this.model.root),z.length>0&&(F!=null?F=mxUtils$1.mod(F+(E?1:-1),z.length):F=0,this.setSelectionCell(z[F]))}};var a=Graph$1.prototype.moveCells;Graph$1.prototype.moveCells=function(E,$,R,U,F,z,K){if(K=K??new Object,this.isTable(F)){for(var ge=[],de=0;de<E.length;de++)this.isTable(E[de])?ge=ge.concat(this.model.getChildCells(E[de],!0).reverse()):ge.push(E[de]);E=ge}this.model.beginUpdate();try{for(var xe=[],de=0;de<E.length;de++)if(F!=null&&this.isTableRow(E[de])){var Re=this.model.getParent(E[de]),we=this.getCellGeometry(E[de]);if(this.isTable(Re)&&xe.push(Re),Re!=null&&we!=null&&this.isTable(Re)&&this.isTable(F)&&(U||Re!=F)){if(!U){var _e=this.getCellGeometry(Re);_e!=null&&(_e=_e.clone(),_e.height-=we.height,this.model.setGeometry(Re,_e))}var _e=this.getCellGeometry(F);_e!=null&&(_e=_e.clone(),_e.height+=we.height,this.model.setGeometry(F,_e));var Oe=this.model.getChildCells(F,!0);if(Oe.length>0){var Ye=U?this.cloneCell(E[de]):E[de],tt=this.model.getChildCells(Ye,!0),nt=this.model.getChildCells(Oe[0],!0),dt=nt.length-tt.length;if(dt>0)for(var qe=0;qe<dt;qe++){var lt=this.cloneCell(tt[tt.length-1]);lt!=null&&(lt.value="",this.model.add(Ye,lt))}else if(dt<0)for(var qe=0;qe>dt;qe--)this.model.remove(tt[tt.length+qe-1]);tt=this.model.getChildCells(Ye,!0);for(var qe=0;qe<nt.length;qe++){var xt=this.getCellGeometry(nt[qe]),mt=this.getCellGeometry(tt[qe]);xt!=null&&mt!=null&&(mt=mt.clone(),mt.width=xt.width,this.model.setGeometry(tt[qe],mt))}}}}for(var Je=a.apply(this,arguments),de=0;de<xe.length;de++)!U&&this.model.contains(xe[de])&&this.model.getChildCount(xe[de])==0&&this.model.remove(xe[de]);U&&this.updateCustomLinks(this.createCellMapping(K,this.createCellLookup(E)),Je)}finally{this.model.endUpdate()}return Je};var o=Graph$1.prototype.removeCells;Graph$1.prototype.removeCells=function(E,$){var R=[];this.model.beginUpdate();try{for(var U=0;U<E.length;U++)if(this.isTableCell(E[U])){var F=this.model.getParent(E[U]),z=this.model.getParent(F);this.model.getChildCount(F)==1&&this.model.getChildCount(z)==1?mxUtils$1.indexOf(E,z)<0&&mxUtils$1.indexOf(R,z)<0&&R.push(z):this.labelChanged(E[U],"")}else{if(this.isTableRow(E[U])){var z=this.model.getParent(E[U]);if(mxUtils$1.indexOf(E,z)<0&&mxUtils$1.indexOf(R,z)<0){for(var K=this.model.getChildCells(z,!0),ge=0,de=0;de<K.length;de++)mxUtils$1.indexOf(E,K[de])>=0&&ge++;ge==K.length&&R.push(z)}}R.push(E[U])}R=o.apply(this,[R,$])}finally{this.model.endUpdate()}return R},Graph$1.prototype.updateCustomLinks=function(E,$){for(var R=0;R<$.length;R++)$[R]!=null&&this.updateCustomLinksForCell(E,$[R])},Graph$1.prototype.updateCustomLinksForCell=function(E,$){},Graph$1.prototype.getAllConnectionConstraints=function(E,$){if(E!=null){var R=mxUtils$1.getValue(E.style,"points",null);if(R!=null){var U=[];try{for(var F=JSON.parse(R),z=0;z<F.length;z++){var K=F[z];U.push(new mxConnectionConstraint(new mxPoint(K[0],K[1]),K.length>2?K[2]!="0":!0,null,K.length>3?K[3]:0,K.length>4?K[4]:0))}}catch{}return U}else if(E.shape!=null&&E.shape.bounds!=null){var ge=E.shape.direction,de=E.shape.bounds,xe=E.shape.scale,Re=de.width/xe,we=de.height/xe;if(ge==mxConstants$1.DIRECTION_NORTH||ge==mxConstants$1.DIRECTION_SOUTH){var K=Re;Re=we,we=K}if(R=E.shape.getConstraints(E.style,Re,we),R!=null)return R;if(E.shape.stencil!=null&&E.shape.stencil.constraints!=null)return E.shape.stencil.constraints;if(E.shape.constraints!=null)return E.shape.constraints}}return null},Graph$1.prototype.flipEdge=function(E){if(E!=null){var $=this.getCurrentCellStyle(E),R=mxUtils$1.getValue($,mxConstants$1.STYLE_ELBOW,mxConstants$1.ELBOW_HORIZONTAL),U=R==mxConstants$1.ELBOW_HORIZONTAL?mxConstants$1.ELBOW_VERTICAL:mxConstants$1.ELBOW_HORIZONTAL;this.setCellStyles(mxConstants$1.STYLE_ELBOW,U,[E])}},Graph$1.prototype.isValidRoot=function(E){for(var $=this.model.getChildCount(E),R=0,U=0;U<$;U++){var F=this.model.getChildAt(E,U);if(this.model.isVertex(F)){var z=this.getCellGeometry(F);z!=null&&!z.relative&&R++}}return R>0||this.isContainer(E)},Graph$1.prototype.isValidDropTarget=function(E,$,R){for(var U=this.getCurrentCellStyle(E),F=!0,z=!0,K=0;K<$.length&&z;K++)F=F&&this.isTable($[K]),z=z&&this.isTableRow($[K]);return(mxUtils$1.getValue(U,"part","0")!="1"||this.isContainer(E))&&mxUtils$1.getValue(U,"dropTarget","1")!="0"&&(mxGraph.prototype.isValidDropTarget.apply(this,arguments)||this.isContainer(E))&&!this.isTableRow(E)&&(!this.isTable(E)||z||F)},Graph$1.prototype.createGroupCell=function(){var E=mxGraph.prototype.createGroupCell.apply(this,arguments);return E.setStyle("group"),E},Graph$1.prototype.isExtendParentsOnAdd=function(E){var $=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);if($&&E!=null&&this.layoutManager!=null){var R=this.model.getParent(E);if(R!=null){var U=this.layoutManager.getLayout(R);U!=null&&U.constructor==mxStackLayout&&($=!1)}}return $},Graph$1.prototype.getPreferredSizeForCell=function(E){var $=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return $!=null&&($.width+=10,$.height+=4,this.gridEnabled&&($.width=this.snap($.width),$.height=this.snap($.height))),$},Graph$1.prototype.turnShapes=function(E,$){var R=this.getModel(),U=[];R.beginUpdate();try{for(var F=0;F<E.length;F++){var z=E[F];if(R.isEdge(z)){var K=R.getTerminal(z,!0),ge=R.getTerminal(z,!1);R.setTerminal(z,ge,!0),R.setTerminal(z,K,!1);var de=R.getGeometry(z);if(de!=null){de=de.clone(),de.points!=null&&de.points.reverse();var xe=de.getTerminalPoint(!0),Re=de.getTerminalPoint(!1);de.setTerminalPoint(xe,!1),de.setTerminalPoint(Re,!0),R.setGeometry(z,de);var we=this.view.getState(z),_e=this.view.getState(K),Oe=this.view.getState(ge);if(we!=null){var Ye=_e!=null?this.getConnectionConstraint(we,_e,!0):null,tt=Oe!=null?this.getConnectionConstraint(we,Oe,!1):null;this.setConnectionConstraint(z,K,!0,tt),this.setConnectionConstraint(z,ge,!1,Ye)}U.push(z)}}else if(R.isVertex(z)){var de=this.getCellGeometry(z);if(de!=null){if(!this.isTable(z)&&!this.isTableRow(z)&&!this.isTableCell(z)&&!this.isSwimlane(z)){de=de.clone(),de.x+=de.width/2-de.height/2,de.y+=de.height/2-de.width/2;var nt=de.width;de.width=de.height,de.height=nt,R.setGeometry(z,de)}var dt=this.view.getState(z);if(dt!=null){var qe=[mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST,mxConstants$1.DIRECTION_NORTH],lt=mxUtils$1.getValue(dt.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST);this.setCellStyles(mxConstants$1.STYLE_DIRECTION,qe[mxUtils$1.mod(mxUtils$1.indexOf(qe,lt)+($?-1:1),qe.length)],[z])}U.push(z)}}}}finally{R.endUpdate()}return U},Graph$1.prototype.stencilHasPlaceholders=function(E){if(E!=null&&E.fgNode!=null)for(var $=E.fgNode.firstChild;$!=null;){if($.nodeName=="text"&&$.getAttribute("placeholders")=="1")return!0;$=$.nextSibling}return!1};var h=Graph$1.prototype.processChange;Graph$1.prototype.processChange=function(E){if(E instanceof mxGeometryChange&&(this.isTableCell(E.cell)||this.isTableRow(E.cell))&&(E.previous==null&&E.geometry!=null||E.previous!=null&&!E.previous.equals(E.geometry))){var $=E.cell;this.isTableCell($)&&($=this.model.getParent($)),this.isTableRow($)&&($=this.model.getParent($));var R=this.view.getState($);R!=null&&R.shape!=null&&(this.view.invalidate($),R.shape.bounds=null)}h.apply(this,arguments),E instanceof mxValueChange&&E.cell!=null&&E.cell.value!=null&&typeof E.cell.value=="object"&&this.invalidateDescendantsWithPlaceholders(E.cell)},Graph$1.prototype.invalidateDescendantsWithPlaceholders=function(E){var $=this.model.getDescendants(E);if($.length>0)for(var R=0;R<$.length;R++){var U=this.view.getState($[R]);U!=null&&U.shape!=null&&U.shape.stencil!=null&&this.stencilHasPlaceholders(U.shape.stencil)?this.removeStateForCell($[R]):this.isReplacePlaceholders($[R])&&this.view.invalidate($[R],!1,!1)}},Graph$1.prototype.replaceElement=function(E,$){for(var R=E.ownerDocument.createElement($??"span"),U=Array.prototype.slice.call(E.attributes);attr=U.pop();)R.setAttribute(attr.nodeName,attr.nodeValue);R.innerHTML=E.innerHTML,E.parentNode.replaceChild(R,E)},Graph$1.prototype.processElements=function(E,$){if(E!=null)for(var R=E.getElementsByTagName("*"),U=0;U<R.length;U++)$(R[U])},Graph$1.prototype.updateLabelElements=function(E,$,R){E=E??this.getSelectionCells();for(var U=document.createElement("div"),F=0;F<E.length;F++)if(this.isHtmlLabel(E[F])){var z=this.convertValueToString(E[F]);if(z!=null&&z.length>0){U.innerHTML=z;for(var K=U.getElementsByTagName(R??"*"),ge=0;ge<K.length;ge++)$(K[ge]);U.innerHTML!=z&&this.cellLabelChanged(E[F],U.innerHTML)}}},Graph$1.prototype.cellLabelChanged=function(E,$,R){$=Graph$1.zapGremlins($),this.model.beginUpdate();try{if(E.value!=null&&typeof E.value=="object"){if(this.isReplacePlaceholders(E)&&E.getAttribute("placeholder")!=null)for(var U=E.getAttribute("placeholder"),F=E;F!=null;){if(F==this.model.getRoot()||F.value!=null&&typeof F.value=="object"&&F.hasAttribute(U)){this.setAttributeForCell(F,U,$);break}F=this.model.getParent(F)}var z=E.value.cloneNode(!0);Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&z.hasAttribute("label_"+Graph$1.diagramLanguage)?z.setAttribute("label_"+Graph$1.diagramLanguage,$):z.setAttribute("label",$),$=z}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph$1.prototype.cellsRemoved=function(E){if(E!=null){for(var $=new mxDictionary,R=0;R<E.length;R++)$.put(E[R],!0);for(var U=[],R=0;R<E.length;R++){var F=this.model.getParent(E[R]);F!=null&&!$.get(F)&&($.put(F,!0),U.push(F))}for(var R=0;R<U.length;R++){var z=this.view.getState(U[R]);if(z!=null&&(this.model.isEdge(z.cell)||this.model.isVertex(z.cell))&&this.isCellDeletable(z.cell)&&this.isTransparentState(z)){for(var K=!0,ge=0;ge<this.model.getChildCount(z.cell)&&K;ge++)$.get(this.model.getChildAt(z.cell,ge))||(K=!1);K&&E.push(z.cell)}}}mxGraph.prototype.cellsRemoved.apply(this,arguments)},Graph$1.prototype.removeCellsAfterUngroup=function(E){for(var $=[],R=0;R<E.length;R++)this.isCellDeletable(E[R])&&this.isTransparentState(this.view.getState(E[R]))&&$.push(E[R]);E=$,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph$1.prototype.setLinkForCell=function(E,$){this.setAttributeForCell(E,"link",$)},Graph$1.prototype.setTooltipForCell=function(E,$){var R="tooltip";Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&mxUtils$1.isNode(E.value)&&E.value.hasAttribute("tooltip_"+Graph$1.diagramLanguage)&&(R="tooltip_"+Graph$1.diagramLanguage),this.setAttributeForCell(E,R,$)},Graph$1.prototype.getAttributeForCell=function(E,$,R){var U=E.value!=null&&typeof E.value=="object"?E.value.getAttribute($):null;return U??R},Graph$1.prototype.setAttributeForCell=function(E,$,R){var U=null;if(E.value!=null&&typeof E.value=="object")U=E.value.cloneNode(!0);else{var F=mxUtils$1.createXmlDocument();U=F.createElement("UserObject"),U.setAttribute("label",E.value||"")}R!=null?U.setAttribute($,R):U.removeAttribute($),this.model.setValue(E,U)};var d=Graph$1.prototype.getDropTarget;Graph$1.prototype.getDropTarget=function(E,$,R,U){if(this.getModel(),mxEvent$1.isAltDown($))return null;for(var F=0;F<E.length;F++)if(this.model.isEdge(this.model.getParent(E[F])))return null;for(var z=d.apply(this,arguments),K=!0,F=0;F<E.length&&K;F++)K=K&&this.isTableRow(E[F]);return K&&(this.isTableCell(z)&&(z=this.model.getParent(z)),this.isTableRow(z)&&(z=this.model.getParent(z)),this.isTable(z)||(z=null)),z},Graph$1.prototype.click=function(E){mxGraph.prototype.click.call(this,E),this.firstClickState=E.getState(),this.firstClickSource=E.getSource()},Graph$1.prototype.dblClick=function(E,$){this.isEnabled()&&($=this.insertTextForEvent(E,$),mxGraph.prototype.dblClick.call(this,E,$))},Graph$1.prototype.insertTextForEvent=function(E,$){var R=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(E),mxEvent$1.getClientY(E));if(E!=null&&!this.model.isVertex($)){var U=this.model.isEdge($)?this.view.getState($):null,F=mxEvent$1.getSource(E);this.firstClickState==U&&this.firstClickSource==F&&(U==null||U.text==null||U.text.node==null||U.text.boundingBox==null||!mxUtils$1.contains(U.text.boundingBox,R.x,R.y)&&!mxUtils$1.isAncestorNode(U.text.node,mxEvent$1.getSource(E)))&&(U==null&&!this.isCellLocked(this.getDefaultParent())||U!=null&&!this.isCellLocked(U.cell))&&(U!=null||mxClient.IS_VML&&F==this.view.getCanvas()||mxClient.IS_SVG&&F==this.view.getCanvas().ownerSVGElement)&&(U==null&&(U=this.view.getState(this.getCellAt(R.x,R.y))),$=this.addText(R.x,R.y,U))}return $},Graph$1.prototype.getInsertPoint=function(){var E=this.getGridSize(),$=this.container.scrollLeft/this.view.scale-this.view.translate.x,R=this.container.scrollTop/this.view.scale-this.view.translate.y;if(this.pageVisible){var U=this.getPageLayout(),F=this.getPageSize();$=Math.max($,U.x*F.width),R=Math.max(R,U.y*F.height)}return new mxPoint(this.snap($+E),this.snap(R+E))},Graph$1.prototype.getFreeInsertPoint=function(){var E=this.view,$=this.getGraphBounds(),R=this.getInsertPoint(),U=this.snap(Math.round(Math.max(R.x,$.x/E.scale-E.translate.x+($.width==0?2*this.gridSize:0)))),F=this.snap(Math.round(Math.max(R.y,($.y+$.height)/E.scale-E.translate.y+2*this.gridSize)));return new mxPoint(U,F)},Graph$1.prototype.getCenterInsertPoint=function(E){return E=E??new mxRectangle,mxUtils$1.hasScrollbars(this.container)?new mxPoint(this.snap(Math.round((this.container.scrollLeft+this.container.clientWidth/2)/this.view.scale-this.view.translate.x-E.width/2)),this.snap(Math.round((this.container.scrollTop+this.container.clientHeight/2)/this.view.scale-this.view.translate.y-E.height/2))):new mxPoint(this.snap(Math.round(this.container.clientWidth/2/this.view.scale-this.view.translate.x-E.width/2)),this.snap(Math.round(this.container.clientHeight/2/this.view.scale-this.view.translate.y-E.height/2)))},Graph$1.prototype.isMouseInsertPoint=function(){return!1},Graph$1.prototype.addText=function(E,$,R){var U=new mxCell;U.value="Text",U.geometry=new mxGeometry(0,0,0,0),U.vertex=!0;var F="html=1;align=center;verticalAlign=middle;resizable=0;points=[];";if(R!=null&&this.model.isEdge(R.cell)){U.style="edgeLabel;"+F,U.geometry.relative=!0,U.connectable=!1;var z=this.view.getRelativePoint(R,E,$);U.geometry.x=Math.round(z.x*1e4)/1e4,U.geometry.y=Math.round(z.y),U.geometry.offset=new mxPoint(0,0),z=this.view.getPoint(R,U.geometry);var K=this.view.scale;U.geometry.offset=new mxPoint(Math.round((E-z.x)/K),Math.round(($-z.y)/K))}else{var ge=this.view.translate;U.style="text;"+F,U.geometry.width=40,U.geometry.height=20,U.geometry.x=Math.round(E/this.view.scale)-ge.x-(R!=null?R.origin.x:0),U.geometry.y=Math.round($/this.view.scale)-ge.y-(R!=null?R.origin.y:0),U.style+="autosize=1;"}this.getModel().beginUpdate();try{this.addCells([U],R!=null?R.cell:null),this.fireEvent(new mxEventObject$1("textInserted","cells",[U])),this.autoSizeCell(U)}finally{this.getModel().endUpdate()}return U},Graph$1.prototype.addClickHandler=function(E,$,R){var U=mxUtils$1.bind(this,function(){var de=this.container.getElementsByTagName("a");if(de!=null)for(var xe=0;xe<de.length;xe++){var Re=this.getAbsoluteUrl(de[xe].getAttribute("href"));Re!=null&&(de[xe].setAttribute("rel",this.linkRelation),de[xe].setAttribute("href",Re),$!=null&&mxEvent$1.addGestureListeners(de[xe],null,null,$))}});this.model.addListener(mxEvent$1.CHANGE,U),U();var F=this.container.style.cursor,z=this.getTolerance(),K=this,ge={currentState:null,currentLink:null,highlight:E!=null&&E!=""&&E!=mxConstants$1.NONE?new mxCellHighlight(K,E,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(de){var xe=de.sourceState;if(xe==null||K.getLinkForCell(xe.cell)==null){var Re=K.getCellAt(de.getGraphX(),de.getGraphY(),null,null,null,function(we,_e,Oe){return K.getLinkForCell(we.cell)==null});xe=K.view.getState(Re)}xe!=this.currentState&&(this.currentState!=null&&this.clear(),this.currentState=xe,this.currentState!=null&&this.activate(this.currentState))},mouseDown:function(de,xe){this.startX=xe.getGraphX(),this.startY=xe.getGraphY(),this.scrollLeft=K.container.scrollLeft,this.scrollTop=K.container.scrollTop,this.currentLink==null&&K.container.style.overflow=="auto"&&(K.container.style.cursor="move"),this.updateCurrentState(xe)},mouseMove:function(de,xe){if(K.isMouseDown){if(this.currentLink!=null){var Re=Math.abs(this.startX-xe.getGraphX()),we=Math.abs(this.startY-xe.getGraphY());(Re>z||we>z)&&this.clear()}}else{for(var _e=xe.getSource();_e!=null&&_e.nodeName.toLowerCase()!="a";)_e=_e.parentNode;if(_e!=null)this.clear();else{if(K.tooltipHandler!=null&&this.currentLink!=null&&this.currentState!=null&&K.tooltipHandler.reset(xe,!0,this.currentState),this.currentState!=null&&(xe.getState()==this.currentState||xe.sourceState==null)&&K.intersects(this.currentState,xe.getGraphX(),xe.getGraphY()))return;this.updateCurrentState(xe)}}},mouseUp:function(de,xe){for(var Re=xe.getSource(),we=xe.getEvent(),_e=Re;_e!=null&&_e.nodeName.toLowerCase()!="a";)_e=_e.parentNode;if(_e==null&&Math.abs(this.scrollLeft-K.container.scrollLeft)<z&&Math.abs(this.scrollTop-K.container.scrollTop)<z&&(xe.sourceState==null||!xe.isSource(xe.sourceState.control))&&((mxEvent$1.isLeftMouseButton(we)||mxEvent$1.isMiddleMouseButton(we))&&!mxEvent$1.isPopupTrigger(we)||mxEvent$1.isTouchEvent(we)))if(this.currentLink!=null){var Oe=K.isBlankLink(this.currentLink);if((this.currentLink.substring(0,5)==="data:"||!Oe)&&$!=null&&$(we,this.currentLink),!mxEvent$1.isConsumed(we)){var Ye=mxEvent$1.isMiddleMouseButton(we)?"_blank":Oe?K.linkTarget:"_top";K.openLink(this.currentLink,Ye),xe.consume()}}else R!=null&&!xe.isConsumed()&&Math.abs(this.scrollLeft-K.container.scrollLeft)<z&&Math.abs(this.scrollTop-K.container.scrollTop)<z&&Math.abs(this.startX-xe.getGraphX())<z&&Math.abs(this.startY-xe.getGraphY())<z&&R(xe.getEvent());this.clear()},activate:function(de){this.currentLink=K.getAbsoluteUrl(K.getLinkForCell(de.cell)),this.currentLink!=null&&(K.container.style.cursor="pointer",this.highlight!=null&&this.highlight.highlight(de))},clear:function(){K.container!=null&&(K.container.style.cursor=F),this.currentState=null,this.currentLink=null,this.highlight!=null&&this.highlight.hide(),K.tooltipHandler!=null&&K.tooltipHandler.hide()}};K.click=function(de){},K.addMouseListener(ge),mxEvent$1.addListener(document,"mouseleave",function(de){ge.clear()})},Graph$1.prototype.duplicateCells=function(E,$){E=E??this.getSelectionCells(),$=$??!0;for(var R=0;R<E.length;R++)this.isTableCell(E[R])&&(E[R]=this.model.getParent(E[R]));E=this.model.getTopmostCells(E);var U=this.getModel(),F=this.gridSize,z=[];U.beginUpdate();try{for(var K=this.cloneCells(E,!1,null,!0),R=0;R<E.length;R++){var ge=U.getParent(E[R]),de=this.moveCells([K[R]],F,F,!1)[0];if(z.push(de),$)U.add(ge,K[R]);else{var xe=ge.getIndex(E[R]);U.add(ge,K[R],xe+1)}if(this.isTable(ge)){var Re=this.getCellGeometry(K[R]),we=this.getCellGeometry(ge);Re!=null&&we!=null&&(we=we.clone(),we.height+=Re.height,U.setGeometry(ge,we))}}}finally{U.endUpdate()}return z},Graph$1.prototype.insertImage=function(E,$,R){if(E!=null&&this.cellEditor.textarea!=null){for(var U=this.cellEditor.textarea.getElementsByTagName("img"),F=[],z=0;z<U.length;z++)F.push(U[z]);document.execCommand("insertimage",!1,E);var K=this.cellEditor.textarea.getElementsByTagName("img");if(K.length==F.length+1){for(var z=K.length-1;z>=0;z--)if(z==0||K[z]!=F[z-1]){K[z].setAttribute("width",$),K[z].setAttribute("height",R);break}}}},Graph$1.prototype.insertLink=function(E){if(this.cellEditor.textarea!=null)if(E.length==0)document.execCommand("unlink",!1);else if(mxClient.IS_FF){for(var $=this.cellEditor.textarea.getElementsByTagName("a"),R=[],U=0;U<$.length;U++)R.push($[U]);document.execCommand("createlink",!1,mxUtils$1.trim(E));var F=this.cellEditor.textarea.getElementsByTagName("a");if(F.length==R.length+1){for(var U=F.length-1;U>=0;U--)if(F[U]!=R[U-1]){for(var $=F[U].getElementsByTagName("a");$.length>0;){for(var z=$[0].parentNode;$[0].firstChild!=null;)z.insertBefore($[0].firstChild,$[0]);z.removeChild($[0])}break}}}else document.execCommand("createlink",!1,mxUtils$1.trim(E))},Graph$1.prototype.isCellResizable=function(E){var $=mxGraph.prototype.isCellResizable.apply(this,arguments),R=this.getCurrentCellStyle(E);return!this.isTableCell(E)&&!this.isTableRow(E)&&($||mxUtils$1.getValue(R,mxConstants$1.STYLE_RESIZABLE,"1")!="0"&&R[mxConstants$1.STYLE_WHITE_SPACE]=="wrap")},Graph$1.prototype.distributeCells=function(E,$){if($==null&&($=this.getSelectionCells()),$!=null&&$.length>1){for(var R=[],U=null,F=null,z=0;z<$.length;z++)if(this.getModel().isVertex($[z])){var K=this.view.getState($[z]);if(K!=null){var ge=E?K.getCenterX():K.getCenterY();U=U!=null?Math.max(U,ge):ge,F=F!=null?Math.min(F,ge):ge,R.push(K)}}if(R.length>2){R.sort(function(Ye,tt){return E?Ye.x-tt.x:Ye.y-tt.y});var de=this.view.translate,xe=this.view.scale;F=F/xe-(E?de.x:de.y),U=U/xe-(E?de.x:de.y),this.getModel().beginUpdate();try{for(var Re=(U-F)/(R.length-1),we=F,z=1;z<R.length-1;z++){var _e=this.view.getState(this.model.getParent(R[z].cell)),Oe=this.getCellGeometry(R[z].cell);we+=Re,Oe!=null&&_e!=null&&(Oe=Oe.clone(),E?Oe.x=Math.round(we-Oe.width/2)-_e.origin.x:Oe.y=Math.round(we-Oe.height/2)-_e.origin.y,this.getModel().setGeometry(R[z].cell,Oe))}}finally{this.getModel().endUpdate()}}}return $},Graph$1.prototype.isCloneEvent=function(E){return mxClient.IS_MAC&&mxEvent$1.isMetaDown(E)||mxEvent$1.isControlDown(E)},Graph$1.prototype.createSvgImageExport=function(){var E=new mxImageExport;return E.getLinkForCellState=mxUtils$1.bind(this,function($,R){return this.getLinkForCell($.cell)}),E},Graph$1.prototype.getSvg=function(E,$,R,U,F,z,K,ge,de,xe){var Re=this.useCssTransforms;Re&&(this.useCssTransforms=!1,this.view.revalidate(),this.sizeDidChange());try{$=$??1,R=R??0,F=F??!0,z=z??!0,K=K??!0;var we=z||U?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(we==null)throw Error(mxResources$1.get("drawingEmpty"));var _e=this.view.scale,Oe=mxUtils$1.createXmlDocument(),Ye=Oe.createElementNS!=null?Oe.createElementNS(mxConstants$1.NS_SVG,"svg"):Oe.createElement("svg");E!=null&&(Ye.style!=null?Ye.style.backgroundColor=E:Ye.setAttribute("style","background-color:"+E)),Oe.createElementNS==null?(Ye.setAttribute("xmlns",mxConstants$1.NS_SVG),Ye.setAttribute("xmlns:xlink",mxConstants$1.NS_XLINK)):Ye.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants$1.NS_XLINK);var tt=$/_e,nt=Math.max(1,Math.ceil(we.width*tt)+2*R)+(xe?5:0),dt=Math.max(1,Math.ceil(we.height*tt)+2*R)+(xe?5:0);Ye.setAttribute("version","1.1"),Ye.setAttribute("width",nt+"px"),Ye.setAttribute("height",dt+"px"),Ye.setAttribute("viewBox",(F?"-0.5 -0.5":"0 0")+" "+nt+" "+dt),Oe.appendChild(Ye);var qe=Oe.createElementNS!=null?Oe.createElementNS(mxConstants$1.NS_SVG,"g"):Oe.createElement("g");Ye.appendChild(qe);var lt=this.createSvgCanvas(qe);lt.foOffset=F?-.5:0,lt.textOffset=F?-.5:0,lt.imageOffset=F?-.5:0,lt.translate(Math.floor((R/$-we.x)/_e),Math.floor((R/$-we.y)/_e));var xt=document.createElement("div"),mt=lt.getAlternateText;lt.getAlternateText=function(We,ze,$e,st,ht,ot,ft,gt,Dt,Gt,ii,ni,si){if(ot!=null&&this.state.fontSize>0)try{mxUtils$1.isNode(ot)?ot=ot.innerText:(xt.innerHTML=ot,ot=mxUtils$1.extractTextWithWhitespace(xt.childNodes));for(var jt=Math.ceil(2*st/this.state.fontSize),Ht=[],_t=0,At=0;(jt==0||_t<jt)&&At<ot.length;){var Mt=ot.charCodeAt(At);if(Mt==10||Mt==13){if(_t>0)break}else Ht.push(ot.charAt(At)),Mt<255&&_t++;At++}return Ht.length<ot.length&&ot.length-Ht.length>1&&(ot=mxUtils$1.trim(Ht.join(""))+"..."),ot}catch{return mt.apply(this,arguments)}else return mt.apply(this,arguments)};var Je=this.backgroundImage;if(Je!=null){var St=_e/$,Ut=this.view.translate,Rt=new mxRectangle(Ut.x*St,Ut.y*St,Je.width*St,Je.height*St);mxUtils$1.intersects(we,Rt)&&lt.image(Ut.x,Ut.y,Je.width,Je.height,Je.src,!0)}lt.scale(tt),lt.textEnabled=K,ge=ge??this.createSvgImageExport();var Be=ge.drawCellState,Ae=ge.getLinkForCellState;return ge.getLinkForCellState=function(We,ze){var $e=Ae.apply(this,arguments);return $e!=null&&!We.view.graph.isCustomLink($e)?$e:null},ge.drawCellState=function(We,ze){for(var $e=We.view.graph,st=$e.isCellSelected(We.cell),ht=$e.model.getParent(We.cell);!z&&!st&&ht!=null;)st=$e.isCellSelected(ht),ht=$e.model.getParent(ht);(z||st)&&Be.apply(this,arguments)},ge.drawState(this.getView().getState(this.model.root),lt),this.updateSvgLinks(Ye,de,!0),this.addForeignObjectWarning(lt,Ye),Ye}finally{Re&&(this.useCssTransforms=!0,this.view.revalidate(),this.sizeDidChange())}},Graph$1.prototype.addForeignObjectWarning=function(E,$){if($.getElementsByTagName("foreignObject").length>0){var R=E.createElement("switch"),U=E.createElement("g");U.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var F=E.createElement("a");F.setAttribute("transform","translate(0,-5)"),F.setAttributeNS==null||$.ownerDocument!=document&&document.documentMode==null?(F.setAttribute("xlink:href",Graph$1.foreignObjectWarningLink),F.setAttribute("target","_blank")):(F.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",Graph$1.foreignObjectWarningLink),F.setAttributeNS(mxConstants$1.NS_XLINK,"target","_blank"));var z=E.createElement("text");z.setAttribute("text-anchor","middle"),z.setAttribute("font-size","10px"),z.setAttribute("x","50%"),z.setAttribute("y","100%"),mxUtils$1.write(z,Graph$1.foreignObjectWarningText),R.appendChild(U),F.appendChild(z),R.appendChild(F),$.appendChild(R)}},Graph$1.prototype.updateSvgLinks=function(E,$,R){for(var U=E.getElementsByTagName("a"),F=0;F<U.length;F++){var z=U[F].getAttribute("href");z==null&&(z=U[F].getAttribute("xlink:href")),z!=null&&($!=null&&/^https?:\/\//.test(z)?U[F].setAttribute("target",$):R&&this.isCustomLink(z)&&U[F].setAttribute("href","javascript:void(0);"))}},Graph$1.prototype.createSvgCanvas=function(E){var $=new mxSvgCanvas2D(E);return $.pointerEvents=!0,$},Graph$1.prototype.getSelectedElement=function(){var E=null;if(window.getSelection){var $=window.getSelection();if($.getRangeAt&&$.rangeCount){var R=$.getRangeAt(0);E=R.commonAncestorContainer}}else document.selection&&(E=document.selection.createRange().parentElement());return E},Graph$1.prototype.getSelectedEditingElement=function(){for(var E=this.getSelectedElement();E!=null&&E.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)E=E.parentNode;return E!=null&&E==this.cellEditor.textarea&&this.cellEditor.textarea.children.length==1&&this.cellEditor.textarea.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT&&(E=this.cellEditor.textarea.firstChild),E},Graph$1.prototype.getParentByName=function(E,$,R){for(;E!=null;){if(E.nodeName==$)return E;if(E==R)return null;E=E.parentNode}return E},Graph$1.prototype.getParentByNames=function(E,$,R){for(;E!=null;){if(mxUtils$1.indexOf($,E.nodeName)>=0)return E;if(E==R)return null;E=E.parentNode}return E},Graph$1.prototype.selectNode=function(E){var $=null;if(window.getSelection){if($=window.getSelection(),$.getRangeAt&&$.rangeCount){var R=document.createRange();R.selectNode(E),$.removeAllRanges(),$.addRange(R)}}else if(($=document.selection)&&$.type!="Control"){var U=$.createRange();U.collapse(!0);var R=$.createRange();R.setEndPoint("StartToStart",U),R.select()}},Graph$1.prototype.deleteCells=function(E,$){var R=null;if(E!=null&&E.length>0){this.model.beginUpdate();try{for(var U=0;U<E.length;U++){var F=this.model.getParent(E[U]);if(this.isTable(F)){var z=this.getCellGeometry(E[U]),K=this.getCellGeometry(F);z!=null&&K!=null&&(K=K.clone(),K.height-=z.height,this.model.setGeometry(F,K))}}var ge=this.selectParentAfterDelete?this.model.getParents(E):null;this.removeCells(E,$)}finally{this.model.endUpdate()}if(ge!=null){R=[];for(var U=0;U<ge.length;U++)this.model.contains(ge[U])&&(this.model.isVertex(ge[U])||this.model.isEdge(ge[U]))&&R.push(ge[U])}}return R},Graph$1.prototype.insertTableColumn=function(E,$){var R=this.getModel();R.beginUpdate();try{var U=E,F=0;if(this.isTableCell(E)){var z=R.getParent(E);U=R.getParent(z),F=mxUtils$1.indexOf(R.getChildCells(z,!0),E)}else this.isTableRow(E)?U=R.getParent(E):E=R.getChildCells(U,!0)[0],$||(F=R.getChildCells(E,!0).length-1);for(var K=R.getChildCells(U,!0),ge=Graph$1.minTableColumnWidth,de=0;de<K.length;de++){var xe=R.getChildCells(K[de],!0)[F],Re=R.cloneCell(xe,!1),we=this.getCellGeometry(Re);if(Re.value=null,we!=null){ge=we.width;var _e=this.getCellGeometry(K[de]);_e!=null&&(we.height=_e.height)}R.add(K[de],Re,F+($?0:1))}var Oe=this.getCellGeometry(U);Oe!=null&&(Oe=Oe.clone(),Oe.width+=ge,R.setGeometry(U,Oe))}finally{R.endUpdate()}},Graph$1.prototype.insertTableRow=function(E,$){var R=this.getModel();R.beginUpdate();try{var U=E,F=E;if(this.isTableCell(E))F=R.getParent(E),U=R.getParent(F);else if(this.isTableRow(E))U=R.getParent(E);else{var z=R.getChildCells(U,!0);F=z[$?0:z.length-1]}var K=R.getChildCells(F,!0),ge=U.getIndex(F);F=R.cloneCell(F,!1),F.value=null;var de=this.getCellGeometry(F);if(de!=null){for(var xe=0;xe<K.length;xe++){var E=R.cloneCell(K[xe],!1);F.insert(E),E.value=null;var Re=this.getCellGeometry(E);Re!=null&&(Re.height=de.height)}R.add(U,F,ge+($?0:1));var we=this.getCellGeometry(U);we!=null&&(we=we.clone(),we.height+=de.height,R.setGeometry(U,we))}}finally{R.endUpdate()}},Graph$1.prototype.deleteTableColumn=function(E){var $=this.getModel();$.beginUpdate();try{var R=E,U=E;this.isTableCell(E)&&(U=$.getParent(E)),this.isTableRow(U)&&(R=$.getParent(U));var F=$.getChildCells(R,!0);if(F.length==0)$.remove(R);else{this.isTableRow(U)||(U=F[0]);var z=$.getChildCells(U,!0);if(z.length<=1)$.remove(R);else{var K=z.length-1;this.isTableCell(E)&&(K=mxUtils$1.indexOf(z,E));for(var ge=0,de=0;de<F.length;de++){var xe=$.getChildCells(F[de],!0)[K];$.remove(xe);var Re=this.getCellGeometry(xe);Re!=null&&(ge=Math.max(ge,Re.width))}var we=this.getCellGeometry(R);we!=null&&(we=we.clone(),we.width-=ge,$.setGeometry(R,we))}}}finally{$.endUpdate()}},Graph$1.prototype.deleteTableRow=function(E){var $=this.getModel();$.beginUpdate();try{var R=E,U=E;this.isTableCell(E)&&(U=$.getParent(E),E=U),this.isTableRow(E)&&(R=$.getParent(U));var F=$.getChildCells(R,!0);if(F.length<=1)$.remove(R);else{this.isTableRow(U)||(U=F[F.length-1]),$.remove(U);var z=0,K=this.getCellGeometry(U);K!=null&&(z=K.height);var ge=this.getCellGeometry(R);ge!=null&&(ge=ge.clone(),ge.height-=z,$.setGeometry(R,ge))}}finally{$.endUpdate()}},Graph$1.prototype.insertRow=function(E,$){for(var R=E.tBodies[0],U=R.rows[0].cells,F=0,z=0;z<U.length;z++){var K=U[z].getAttribute("colspan");F+=K!=null?parseInt(K):1}for(var ge=R.insertRow($),z=0;z<F;z++)mxUtils$1.br(ge.insertCell(-1));return ge.cells[0]},Graph$1.prototype.deleteRow=function(E,$){E.tBodies[0].deleteRow($)},Graph$1.prototype.insertColumn=function(E,$){var R=E.tHead;if(R!=null)for(var U=0;U<R.rows.length;U++){var F=document.createElement("th");R.rows[U].appendChild(F),mxUtils$1.br(F)}for(var z=E.tBodies[0],K=0;K<z.rows.length;K++){var ge=z.rows[K].insertCell($);mxUtils$1.br(ge)}return z.rows[0].cells[$>=0?$:z.rows[0].cells.length-1]},Graph$1.prototype.deleteColumn=function(E,$){if($>=0)for(var R=E.tBodies[0],U=R.rows,F=0;F<U.length;F++)U[F].cells.length>$&&U[F].deleteCell($)},Graph$1.prototype.pasteHtmlAtCaret=function(E){var $,R;if(window.getSelection){if($=window.getSelection(),$.getRangeAt&&$.rangeCount){R=$.getRangeAt(0),R.deleteContents();var U=document.createElement("div");U.innerHTML=E;for(var F=document.createDocumentFragment(),z;z=U.firstChild;)lastNode=F.appendChild(z);R.insertNode(F)}}else($=document.selection)&&$.type!="Control"&&$.createRange().pasteHTML(E)},Graph$1.prototype.createLinkForHint=function(E,$){E=E??"javascript:void(0);",($==null||$.length==0)&&(this.isCustomLink(E)?$=this.getLinkTitle(E):$=E);function R(F,z){return F.length>z&&(F=F.substring(0,Math.round(z/2))+"..."+F.substring(F.length-Math.round(z/4))),F}var U=document.createElement("a");return U.setAttribute("rel",this.linkRelation),U.setAttribute("href",this.getAbsoluteUrl(E)),U.setAttribute("title",R(this.isCustomLink(E)?this.getLinkTitle(E):E,80)),this.linkTarget!=null&&U.setAttribute("target",this.linkTarget),mxUtils$1.write(U,R($,40)),this.isCustomLink(E)&&mxEvent$1.addListener(U,"click",mxUtils$1.bind(this,function(F){this.customLinkClicked(E),mxEvent$1.consume(F)})),U},Graph$1.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return this.graph.connectionHandler.first!=null},this.addListener(mxEvent$1.START_EDITING,function(z,K){this.popupMenuHandler.hideMenu()});var E=this.updateMouseEvent;this.updateMouseEvent=function(z){if(z=E.apply(this,arguments),mxEvent$1.isTouchEvent(z.getEvent())&&z.getState()==null){var K=this.getCellAt(z.graphX,z.graphY);K!=null&&this.isSwimlane(K)&&this.hitsSwimlaneContent(K,z.graphX,z.graphY)?K=null:(z.state=this.view.getState(K),z.state!=null&&z.state.shape!=null&&(this.container.style.cursor=z.state.shape.node.style.cursor))}return z.getState()==null&&this.isEnabled()&&(this.container.style.cursor="default"),z};var $=!1,R=!1,U=!1,F=this.fireMouseEvent;this.fireMouseEvent=function(z,K,ge){z==mxEvent$1.MOUSE_DOWN&&(K=this.updateMouseEvent(K),$=this.isCellSelected(K.getCell()),R=this.isSelectionEmpty(),U=this.popupMenuHandler.isMenuShowing()),F.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils$1.bind(this,function(z,K){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(K.getState()==null||!K.isSource(K.getState().control))&&(this.popupMenuHandler.popupTrigger||!U&&!mxEvent$1.isMouseEvent(K.getEvent())&&(R&&K.getCell()==null&&this.isSelectionEmpty()||$&&this.isCellSelected(K.getCell()))),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})},mxCellEditor.prototype.isContentEditing=function(){var E=this.graph.view.getState(this.editingCell);return E!=null&&E.style.html==1},mxCellEditor.prototype.isTableSelected=function(){return this.graph.getParentByName(this.graph.getSelectedElement(),"TABLE",this.textarea)!=null},mxCellEditor.prototype.alignText=function(E,$){var R=$!=null&&mxEvent$1.isShiftDown($);if(R||window.getSelection!=null&&window.getSelection().containsNode!=null){var U=!0;this.graph.processElements(this.textarea,function(F){R||window.getSelection().containsNode(F,!0)?(F.removeAttribute("align"),F.style.textAlign=null):U=!1}),U&&this.graph.cellEditor.setAlign(E)}document.execCommand("justify"+E.toLowerCase(),!1,null)},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){var E=window.getSelection();if(E.getRangeAt&&E.rangeCount){for(var $=[],R=0,U=E.rangeCount;R<U;++R)$.push(E.getRangeAt(R));return $}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(E){try{if(E)if(window.getSelection){sel=window.getSelection(),sel.removeAllRanges();for(var $=0,R=E.length;$<R;++$)sel.addRange(E[$])}else document.selection&&E.select&&E.select()}catch{}};var m=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(E){E.text!=null&&(E.text.replaceLinefeeds=mxUtils$1.getValue(E.style,"nl2Br","1")!="0"),m.apply(this,arguments)};var g=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(E,$){this.isKeepFocusEvent(E)||!mxEvent$1.isAltDown(E.getEvent())?g.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(E){var $=new mxPolyline([],mxConstants$1.GUIDE_COLOR,mxConstants$1.GUIDE_STROKEWIDTH);return $},mxCellEditor.prototype.escapeCancelsEditing=!1;var c=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(E,$){E=this.graph.getStartEditingCell(E,$),c.apply(this,arguments);var R=this.graph.view.getState(E);R!=null&&R.style.html==1?this.textarea.className="mxCellEditor geContentEditable":this.textarea.className="mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(E);var U=this.graph.getModel().getParent(E),F=this.graph.getCellGeometry(E);this.graph.getModel().isEdge(U)&&F!=null&&F.relative||this.graph.getModel().isEdge(E)?mxClient.IS_QUIRKS?this.textarea.style.border="gray dotted 1px":mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_FF&&mxClient.IS_WIN?this.textarea.style.outline="gray dotted 1px":this.textarea.style.outline="":mxClient.IS_QUIRKS&&(this.textarea.style.outline="none",this.textarea.style.border="")};var f=mxCellEditor.prototype.installListeners;mxCellEditor.prototype.installListeners=function(E){f.apply(this,arguments);function $(F,z){z.originalNode=F,F=F.firstChild;for(var K=z.firstChild;F!=null&&K!=null;)$(F,K),F=F.nextSibling,K=K.nextSibling;return z}function R(F,z){if(F!=null)if(z.originalNode!=F)U(F);else for(F=F.firstChild,z=z.firstChild;F!=null;){var K=F.nextSibling;z==null?U(F):(R(F,z),z=z.nextSibling),F=K}}function U(F){for(var z=F.firstChild;z!=null;){var K=z.nextSibling;U(z),z=K}(F.nodeType!=1||F.nodeName!=="BR"&&F.firstChild==null)&&(F.nodeType!=3||mxUtils$1.trim(mxUtils$1.getTextContent(F)).length==0)?F.parentNode.removeChild(F):(F.nodeType==3&&mxUtils$1.setTextContent(F,mxUtils$1.getTextContent(F).replace(/\n|\r/g,"")),F.nodeType==1&&(F.removeAttribute("style"),F.removeAttribute("class"),F.removeAttribute("width"),F.removeAttribute("cellpadding"),F.removeAttribute("cellspacing"),F.removeAttribute("border")))}!mxClient.IS_QUIRKS&&document.documentMode!==7&&document.documentMode!==8&&mxEvent$1.addListener(this.textarea,"paste",mxUtils$1.bind(this,function(F){var z=$(this.textarea,this.textarea.cloneNode(!0));window.setTimeout(mxUtils$1.bind(this,function(){this.textarea!=null&&(this.textarea.innerHTML.indexOf("<o:OfficeDocumentSettings>")>=0||this.textarea.innerHTML.indexOf("<!--[if !mso]>")>=0?R(this.textarea,z):Graph$1.removePasteFormatting(this.textarea))}),0)}))},mxCellEditor.prototype.toggleViewMode=function(){var E=this.graph.view.getState(this.editingCell);if(E!=null){var $=E!=null&&mxUtils$1.getValue(E.style,"nl2Br","1")!="0",R=this.saveSelection();if(this.codeViewMode){var U=mxUtils$1.extractTextWithWhitespace(this.textarea.childNodes);U.length>0&&U.charAt(U.length-1)==`
`&&(U=U.substring(0,U.length-1)),U=this.graph.sanitizeHtml($?U.replace(/\n/g,"<br/>"):U,!0),this.textarea.className="mxCellEditor geContentEditable";var F=mxUtils$1.getValue(E.style,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE),z=mxUtils$1.getValue(E.style,mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY),K=mxUtils$1.getValue(E.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT),ge=(mxUtils$1.getValue(E.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD,de=(mxUtils$1.getValue(E.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC,xe=[];(mxUtils$1.getValue(E.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&xe.push("underline"),(mxUtils$1.getValue(E.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&xe.push("line-through"),this.textarea.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?Math.round(F*mxConstants$1.LINE_HEIGHT)+"px":mxConstants$1.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(F)+"px",this.textarea.style.textDecoration=xe.join(" "),this.textarea.style.fontWeight=ge?"bold":"normal",this.textarea.style.fontStyle=de?"italic":"",this.textarea.style.fontFamily=z,this.textarea.style.textAlign=K,this.textarea.style.padding="0px",this.textarea.innerHTML!=U&&(this.textarea.innerHTML=U,this.textarea.innerHTML.length==0&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0)),this.codeViewMode=!1}else{this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerHTML="");var U=mxUtils$1.htmlEntities(this.textarea.innerHTML);!mxClient.IS_QUIRKS&&document.documentMode!=8&&(U=mxUtils$1.replaceTrailingNewlines(U,"<div><br></div>")),U=this.graph.sanitizeHtml($?U.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):U,!0),this.textarea.className="mxCellEditor mxPlainTextEditor";var F=mxConstants$1.DEFAULT_FONTSIZE;this.textarea.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?Math.round(F*mxConstants$1.LINE_HEIGHT)+"px":mxConstants$1.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(F)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants$1.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.padding="2px",this.textarea.innerHTML!=U&&(this.textarea.innerHTML=U),this.codeViewMode=!0}this.textarea.focus(),this.switchSelectionState!=null&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=R,this.resize()}};var C=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(E,$){if(this.textarea!=null){var E=this.graph.getView().getState(this.editingCell);if(this.codeViewMode&&E!=null){var R=E.view.scale;if(this.bounds=U.mxRectangle.fromRectangle(E),this.bounds.width==0&&this.bounds.height==0){this.bounds.width=160*R,this.bounds.height=60*R;var U=E.text!=null?E.text.margin:null;U==null&&(U=U.mxUtils.getAlignmentAsPoint(U.mxUtils.getValue(E.style,U.mxConstants.STYLE_ALIGN,U.mxConstants.ALIGN_CENTER),U.mxUtils.getValue(E.style,U.mxConstants.STYLE_VERTICAL_ALIGN,U.mxConstants.ALIGN_MIDDLE))),this.bounds.x+=U.x*this.bounds.width,this.bounds.y+=U.y*this.bounds.height}this.textarea.style.width=Math.round((this.bounds.width-4)/R)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/R)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/R)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*R),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/R)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*R),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",U.mxClient.IS_VML?this.textarea.style.zoom=R:U.mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+R+","+R+")")}else this.textarea.style.height="",this.textarea.style.overflow="",C.apply(this,arguments)}};var v=mxCellEditor.prototype.getInitialValue;mxCellEditor.prototype.getInitialValue=function(E,$){if(mxUtils$1.getValue(E.style,"html","0")=="0")return v.apply(this,arguments);var R=this.graph.getEditingValue(E.cell,$);return mxUtils$1.getValue(E.style,"nl2Br","1")=="1"&&(R=R.replace(/\n/g,"<br/>")),R=this.graph.sanitizeHtml(R,!0),R};var w=mxCellEditor.prototype.getCurrentValue;mxCellEditor.prototype.getCurrentValue=function(E){if(mxUtils$1.getValue(E.style,"html","0")=="0")return w.apply(this,arguments);var $=this.graph.sanitizeHtml(this.textarea.innerHTML,!0);return mxUtils$1.getValue(E.style,"nl2Br","1")=="1"?$=$.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"):$=$.replace(/\r\n/g,"").replace(/\n/g,""),$};var S=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(E){this.codeViewMode&&this.toggleViewMode(),S.apply(this,arguments),this.focusContainer()},mxCellEditor.prototype.focusContainer=function(){try{this.graph.container.focus()}catch{}};var T=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(E,$){this.graph.getModel().beginUpdate();try{T.apply(this,arguments),$==""&&this.graph.isCellDeletable(E.cell)&&this.graph.model.getChildCount(E.cell)==0&&this.graph.isTransparentState(E)&&this.graph.removeCells([E.cell],!1)}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(E){var $=mxUtils$1.getValue(E.style,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,null);return($==null||$==mxConstants$1.NONE)&&E.cell.geometry!=null&&E.cell.geometry.width>0&&(mxUtils$1.getValue(E.style,mxConstants$1.STYLE_ROTATION,0)!=0||mxUtils$1.getValue(E.style,mxConstants$1.STYLE_HORIZONTAL,1)==0)&&($=mxUtils$1.getValue(E.style,mxConstants$1.STYLE_FILLCOLOR,null)),$==mxConstants$1.NONE&&($=null),$},mxCellEditor.prototype.getMinimumSize=function(E){var $=this.graph.getView().scale;return new mxRectangle(0,0,E.text==null?30:E.text.size*$+20,30)};var P=mxGraphHandler.prototype.isValidDropTarget;mxGraphHandler.prototype.isValidDropTarget=function(E,$){return P.apply(this,arguments)&&!mxEvent$1.isAltDown($.getEvent)};function L(){var E=document.createElement("div");return E.className="geHint",E.style.whiteSpace="nowrap",E.style.position="absolute",E}function k(E,$){switch($){case mxConstants$1.POINTS:return E;case mxConstants$1.MILLIMETERS:return(E/mxConstants$1.PIXELS_PER_MM).toFixed(1);case mxConstants.INCHES:return(E/mxConstants$1.PIXELS_PER_INCH).toFixed(2)}}mxGraphView.prototype.formatUnitText=function(E){return E&&k(E,this.unit)},mxGraphHandler.prototype.updateHint=function(E){if(this.pBounds!=null&&(this.shape!=null||this.livePreviewActive)){this.hint==null&&(this.hint=L(),this.graph.container.appendChild(this.hint));var $=this.graph.view.translate,R=this.graph.view.scale,U=this.roundLength((this.bounds.x+this.currentDx)/R-$.x),F=this.roundLength((this.bounds.y+this.currentDy)/R-$.y),z=this.graph.view.unit;this.hint.innerHTML=k(U,z)+", "+k(F,z),this.hint.style.left=this.pBounds.x+this.currentDx+Math.round((this.pBounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.pBounds.y+this.currentDy+this.pBounds.height+Editor$1.hintOffset+"px"}},mxGraphHandler.prototype.removeHint=function(){this.hint!=null&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)};var G=mxStackLayout.prototype.resizeCell;mxStackLayout.prototype.resizeCell=function(E,$){G.apply(this,arguments);var R=this.graph.getCellStyle(E);if(R.childLayout==null){var U=this.graph.model.getParent(E),F=U!=null?this.graph.getCellGeometry(U):null;if(F!=null&&(R=this.graph.getCellStyle(U),R.childLayout=="stackLayout")){var z=parseFloat(mxUtils$1.getValue(R,"stackBorder",mxStackLayout.prototype.border)),K=mxUtils$1.getValue(R,"horizontalStack","1")=="1",ge=this.graph.getActualStartSize(U);F=F.clone(),K?F.height=$.height+ge.y+ge.height+2*z:F.width=$.width+ge.x+ge.width+2*z,this.graph.model.setGeometry(U,F)}}};var Y=mxSelectionCellsHandler.prototype.getHandledSelectionCells;mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){var E=Y.apply(this,arguments),$=new mxDictionary,R=this.graph.model,U=[];function F(ge){$.get(ge)||($.put(ge,!0),U.push(ge))}for(var z=0;z<E.length;z++){var K=E[z];this.graph.isTableCell(K)?F(R.getParent(R.getParent(K))):this.graph.isTableRow(K)&&F(R.getParent(K)),F(K)}return U};var te=mxVertexHandler.prototype.createParentHighlightShape;mxVertexHandler.prototype.createParentHighlightShape=function(E){var $=te.apply(this,arguments);return $.stroke="#C0C0C0",$.strokewidth=1,$};var ie=mxEdgeHandler.prototype.createParentHighlightShape;mxEdgeHandler.prototype.createParentHighlightShape=function(E){var $=ie.apply(this,arguments);return $.stroke="#C0C0C0",$.strokewidth=1,$},mxVertexHandler.prototype.rotationHandleVSpacing=-12,mxVertexHandler.prototype.getRotationHandlePosition=function(){var E=this.getHandlePadding();return new mxPoint(this.bounds.x+this.bounds.width-this.rotationHandleVSpacing+E.x/2,this.bounds.y+this.rotationHandleVSpacing-E.y/2)},mxVertexHandler.prototype.isRecursiveResize=function(E,$){return this.graph.isRecursiveVertexResize(E)&&!mxEvent$1.isControlDown($.getEvent())},mxVertexHandler.prototype.isCenteredEvent=function(E,$){return!(!this.graph.isSwimlane(E.cell)&&this.graph.model.getChildCount(E.cell)>0&&!this.graph.isCellCollapsed(E.cell)&&mxUtils$1.getValue(E.style,"recursiveResize","1")=="1"&&mxUtils$1.getValue(E.style,"childLayout",null)==null)&&mxEvent$1.isControlDown($.getEvent())||mxEvent$1.isMetaDown($.getEvent())};var ne=mxVertexHandler.prototype.isRotationHandleVisible;mxVertexHandler.prototype.isRotationHandleVisible=function(){return ne.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTable(this.state.cell)},mxVertexHandler.prototype.getSizerBounds=function(){return this.graph.isTableCell(this.state.cell)?this.graph.view.getState(this.graph.model.getParent(this.graph.model.getParent(this.state.cell))):this.bounds};var q=mxVertexHandler.prototype.isParentHighlightVisible;mxVertexHandler.prototype.isParentHighlightVisible=function(){return q.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)};var oe=mxVertexHandler.prototype.isCustomHandleVisible;mxVertexHandler.prototype.isCustomHandleVisible=function(E){return E.tableHandle||oe.apply(this,arguments)&&(!this.graph.isTable(this.state.cell)||this.graph.isCellSelected(this.state.cell))},mxVertexHandler.prototype.getSelectionBorderInset=function(){var E=0;return this.graph.isTableRow(this.state.cell)?E=1:this.graph.isTableCell(this.state.cell)&&(E=2),E};var le=mxVertexHandler.prototype.getSelectionBorderBounds;mxVertexHandler.prototype.getSelectionBorderBounds=function(){return le.apply(this,arguments).grow(-this.getSelectionBorderInset())};var Z=mxVertexHandler.prototype.createCustomHandles;mxVertexHandler.prototype.createCustomHandles=function(){var E=Z.apply(this,arguments);if(this.graph.isTable(this.state.cell)){var $=this.graph,R=$.model,U=this.state,F=this.selectionBorder,z=this;E==null&&(E=[]);var K=$.view.getCellStates(R.getChildCells(this.state.cell,!0));if(K.length>0){for(var ge=$.view.getCellStates(R.getChildCells(K[0].cell,!0)),de=0;de<ge.length;de++)mxUtils$1.bind(this,function(xe){var Re=ge[xe],we=xe<ge.length-1?ge[xe+1]:null,_e=new mxLine(new mxRectangle,mxConstants$1.NONE,1,!0);_e.isDashed=F.isDashed,_e.svgStrokeTolerance++;var Oe=new mxHandle(Re,"col-resize",null,_e);Oe.tableHandle=!0;var Ye=0;Oe.shape.node.parentNode.insertBefore(Oe.shape.node,Oe.shape.node.parentNode.firstChild),Oe.redraw=function(){if(this.shape!=null&&this.state.shape!=null){var nt=$.getActualStartSize(U.cell);this.shape.stroke=Ye==0?mxConstants$1.NONE:F.stroke,this.shape.bounds.x=this.state.x+this.state.width+Ye*this.graph.view.scale,this.shape.bounds.width=1,this.shape.bounds.y=U.y+(xe==ge.length-1?0:nt.y*this.graph.view.scale),this.shape.bounds.height=U.height-(xe==ge.length-1?0:(nt.height+nt.y)*this.graph.view.scale),this.shape.redraw()}};var tt=!1;Oe.setPosition=function(nt,dt,qe){Ye=Math.max(Graph$1.minTableColumnWidth-nt.width,dt.x-nt.x-nt.width),tt=mxEvent$1.isShiftDown(qe.getEvent()),we!=null&&!tt&&(Ye=Math.min((we.x+we.width-Re.x-Re.width)/$.view.scale-Graph$1.minTableColumnWidth,Ye))},Oe.execute=function(nt){if(Ye!=0)$.setTableColumnWidth(this.state.cell,Ye,tt);else if(!z.blockDelayedSelection){var dt=$.getCellAt(nt.getGraphX(),nt.getGraphY())||U.cell;$.graphHandler.selectCellForEvent(dt,nt)}Ye=0},Oe.reset=function(){Ye=0},E.push(Oe)})(de);for(var de=0;de<K.length;de++)mxUtils$1.bind(this,function(Re){var we=K[Re],_e=new mxLine(new mxRectangle,mxConstants$1.NONE,1);_e.isDashed=F.isDashed,_e.svgStrokeTolerance++;var Oe=new mxHandle(we,"row-resize",null,_e);Oe.tableHandle=!0;var Ye=0;Oe.shape.node.parentNode.insertBefore(Oe.shape.node,Oe.shape.node.parentNode.firstChild),Oe.redraw=function(){this.shape!=null&&this.state.shape!=null&&(this.shape.stroke=Ye==0?mxConstants$1.NONE:F.stroke,this.shape.bounds.x=this.state.x,this.shape.bounds.width=this.state.width,this.shape.bounds.y=this.state.y+this.state.height+Ye*this.graph.view.scale,this.shape.bounds.height=1,this.shape.redraw())},Oe.setPosition=function(tt,nt,dt){Ye=Math.max(Graph$1.minTableRowHeight-tt.height,nt.y-tt.y-tt.height)},Oe.execute=function(tt){if(Ye!=0)$.setTableRowHeight(this.state.cell,Ye,!mxEvent$1.isShiftDown(tt.getEvent()));else if(!z.blockDelayedSelection){var nt=$.getCellAt(tt.getGraphX(),tt.getGraphY())||U.cell;$.graphHandler.selectCellForEvent(nt,tt)}Ye=0},Oe.reset=function(){Ye=0},E.push(Oe)})(de)}}return E!=null?E.reverse():null};var B=mxVertexHandler.prototype.setHandlesVisible;mxVertexHandler.prototype.setHandlesVisible=function(E){if(B.apply(this,arguments),this.moveHandles!=null)for(var $=0;$<this.moveHandles.length;$++)this.moveHandles[$].style.visibility=E?"":"hidden";if(this.cornerHandles!=null)for(var $=0;$<this.cornerHandles.length;$++)this.cornerHandles[$].node.style.visibility=E?"":"hidden"},mxVertexHandler.prototype.refreshMoveHandles=function(){var E=this.graph,$=E.model;if(this.moveHandles!=null){for(var R=0;R<this.moveHandles.length;R++)this.moveHandles[R].parentNode.removeChild(this.moveHandles[R]);this.moveHandles=null}this.moveHandles=[];for(var R=0;R<$.getChildCount(this.state.cell);R++)mxUtils$1.bind(this,function(F){if(F!=null&&$.isVertex(F.cell)){var z=mxUtils$1.createImage(Editor$1.rowMoveImage);z.style.position="absolute",z.style.cursor="pointer",z.style.width="7px",z.style.height="4px",z.style.padding="4px 2px 4px 2px",z.rowState=F,mxEvent$1.addGestureListeners(z,mxUtils$1.bind(this,function(K){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),(this.graph.isToggleEvent(K)||!this.graph.isCellSelected(F.cell))&&this.graph.selectCellForEvent(F.cell,K),mxEvent$1.isPopupTrigger(K)||(this.graph.graphHandler.start(this.state.cell,mxEvent$1.getClientX(K),mxEvent$1.getClientY(K),this.graph.getSelectionCells()),this.graph.graphHandler.cellWasClicked=!0,this.graph.isMouseTrigger=mxEvent$1.isMouseEvent(K),this.graph.isMouseDown=!0),mxEvent$1.consume(K)}),null,mxUtils$1.bind(this,function(K){mxEvent$1.isPopupTrigger(K)&&(this.graph.popupMenuHandler.popup(mxEvent$1.getClientX(K),mxEvent$1.getClientY(K),F.cell,K),mxEvent$1.consume(K))})),this.moveHandles.push(z),this.graph.container.appendChild(z)}})(this.graph.view.getState($.getChildAt(this.state.cell,R)))},mxVertexHandler.prototype.refresh=function(){if(this.customHandles!=null){for(var E=0;E<this.customHandles.length;E++)this.customHandles[E].destroy();this.customHandles=this.createCustomHandles()}this.graph.isTable(this.state.cell)&&this.refreshMoveHandles()};var re=mxVertexHandler.prototype.getHandlePadding;mxVertexHandler.prototype.getHandlePadding=function(){var E=new mxPoint(0,0),$=this.tolerance,R=this.state.style.shape;mxCellRenderer.defaultShapes[R]==null&&mxStencilRegistry.getStencil(R)==null&&(R=mxConstants$1.SHAPE_RECTANGLE);var U=this.graph.isTable(this.state.cell)||this.graph.cellEditor.getEditingCell()==this.state.cell;if(!U&&this.customHandles!=null){for(var F=0;F<this.customHandles.length;F++)if(this.customHandles[F].shape!=null&&this.customHandles[F].shape.bounds!=null){var z=this.customHandles[F].shape.bounds,K=z.getCenterX(),ge=z.getCenterY();if(Math.abs(this.state.x-K)<z.width/2||Math.abs(this.state.y-ge)<z.height/2||Math.abs(this.state.x+this.state.width-K)<z.width/2||Math.abs(this.state.y+this.state.height-ge)<z.height/2){U=!0;break}}}return U&&this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null?($/=2,this.graph.isTable(this.state.cell)&&($+=7),E.x=this.sizers[0].bounds.width+$,E.y=this.sizers[0].bounds.height+$):E=re.apply(this,arguments),E},mxVertexHandler.prototype.updateHint=function(E){if(this.index!=mxEvent$1.LABEL_HANDLE){if(this.hint==null&&(this.hint=L(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent$1.ROTATION_HANDLE)this.hint.innerHTML=this.currentAlpha+"&deg;";else{var $=this.state.view.scale,R=this.state.view.unit;this.hint.innerHTML=k(this.roundLength(this.bounds.width/$),R)+" x "+k(this.roundLength(this.bounds.height/$),R)}var U=this.currentAlpha!=null?this.currentAlpha:this.state.style[mxConstants$1.STYLE_ROTATION]||"0",F=mxUtils$1.getBoundingBox(this.bounds,U);F==null&&(F=this.bounds),this.hint.style.left=F.x+Math.round((F.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=F.y+F.height+Editor$1.hintOffset+"px",this.linkHint!=null&&(this.linkHint.style.display="none")}},mxVertexHandler.prototype.removeHint=function(){mxGraphHandler.prototype.removeHint.apply(this,arguments),this.linkHint!=null&&(this.linkHint.style.display="")};var se=mxEdgeHandler.prototype.mouseMove;mxEdgeHandler.prototype.mouseMove=function(E,$){se.apply(this,arguments),this.linkHint!=null&&this.linkHint.style.display!="none"&&this.graph.graphHandler!=null&&this.graph.graphHandler.first!=null&&(this.linkHint.style.display="none")};var ve=mxEdgeHandler.prototype.mouseUp;if(mxEdgeHandler.prototype.mouseUp=function(E,$){ve.apply(this,arguments),this.linkHint!=null&&this.linkHint.style.display=="none"&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.updateHint=function(E,$){this.hint==null&&(this.hint=L(),this.state.view.graph.container.appendChild(this.hint));var R=this.graph.view.translate,U=this.graph.view.scale,F=this.roundLength($.x/U-R.x),z=this.roundLength($.y/U-R.y),K=this.graph.view.unit;if(this.hint.innerHTML=k(F,K)+", "+k(z,K),this.hint.style.visibility="visible",this.isSource||this.isTarget)if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null){var ge=this.constraintHandler.currentConstraint.point;this.hint.innerHTML="["+Math.round(ge.x*100)+"%, "+Math.round(ge.y*100)+"%]"}else this.marker.hasValidState()&&(this.hint.style.visibility="hidden");this.hint.style.left=Math.round(E.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(E.getGraphY(),$.y)+Editor$1.hintOffset+"px",this.linkHint!=null&&(this.linkHint.style.display="none")},mxEdgeHandler.prototype.removeHint=mxVertexHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=mxClient.IS_SVG?Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/>'):new mxImage(IMAGE_PATH+"/handle-main.png",17,17),HoverIcons.prototype.secondaryHandle=mxClient.IS_SVG?Graph$1.createSvgImage(16,16,'<path d="m 8 3 L 13 8 L 8 13 L 3 8 z" stroke="#fff" fill="#fca000"/>'):new mxImage(IMAGE_PATH+"/handle-secondary.png",17,17),HoverIcons.prototype.fixedHandle=mxClient.IS_SVG?Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><path d="m 7 7 L 11 11 M 7 11 L 11 7" stroke="#fff"/>'):new mxImage(IMAGE_PATH+"/handle-fixed.png",17,17),HoverIcons.prototype.terminalHandle=mxClient.IS_SVG?Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><circle cx="9" cy="9" r="2" stroke="#fff" fill="transparent"/>'):new mxImage(IMAGE_PATH+"/handle-terminal.png",17,17),HoverIcons.prototype.rotationHandle=mxClient.IS_SVG?Graph$1.createSvgImage(16,16,'<path stroke="'+HoverIcons.prototype.arrowFill+'" fill="'+HoverIcons.prototype.arrowFill+'" d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"/>',24,24):new mxImage(IMAGE_PATH+"/handle-rotate.png",16,16),mxClient.IS_SVG&&(mxConstraintHandler.prototype.pointImage=Graph$1.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="'+HoverIcons.prototype.arrowFill+'"/>')),mxVertexHandler.TABLE_HANDLE_COLOR="#fca000",mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop,mxClient.IS_SVG||(new Image().src=HoverIcons.prototype.mainHandle.src,new Image().src=HoverIcons.prototype.fixedHandle.src,new Image().src=HoverIcons.prototype.terminalHandle.src,new Image().src=HoverIcons.prototype.secondaryHandle.src,new Image().src=HoverIcons.prototype.rotationHandle.src,new Image().src=HoverIcons.prototype.triangleUp.src,new Image().src=HoverIcons.prototype.triangleRight.src,new Image().src=HoverIcons.prototype.triangleDown.src,new Image().src=HoverIcons.prototype.triangleLeft.src,new Image().src=HoverIcons.prototype.refreshTarget.src,new Image().src=HoverIcons.prototype.roundDrop.src),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxGraphHandler.prototype.maxLivePreview=16,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(E){return!mxEvent$1.isShiftDown(E.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(E){return!mxEvent$1.isShiftDown(E.getEvent())},Graph$1.touchStyle){(mxClient.IS_TOUCH||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph$1.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxConstraintHandler.prototype.getTolerance=function(E){return mxEvent$1.isMouseEvent(E.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(E){var $=E.getEvent();return E.getState()==null&&!mxEvent$1.isMouseEvent($)||mxEvent$1.isPopupTrigger($)&&(E.getState()==null||mxEvent$1.isControlDown($)||mxEvent$1.isShiftDown($))};var pe=mxGraphHandler.prototype.mouseDown;mxGraphHandler.prototype.mouseDown=function(E,$){pe.apply(this,arguments),mxEvent$1.isTouchEvent($.getEvent())&&this.graph.isCellSelected($.getCell())&&this.graph.getSelectionCount()>1&&(this.delayedSelection=!1)}}else mxPanningHandler.prototype.isPanningTrigger=function(E){var $=E.getEvent();return mxEvent$1.isLeftMouseButton($)&&(this.useLeftButtonForPanning&&E.getState()==null||mxEvent$1.isControlDown($)&&!mxEvent$1.isShiftDown($))||this.usePopupTrigger&&mxEvent$1.isPopupTrigger($)};mxRubberband.prototype.isSpaceEvent=function(E){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent$1.isControlDown(E.getEvent())&&mxEvent$1.isShiftDown(E.getEvent())},mxRubberband.prototype.cancelled=!1,mxRubberband.prototype.cancel=function(){this.isActive()&&(this.cancelled=!0,this.reset())},mxRubberband.prototype.mouseUp=function(E,$){if(this.cancelled)this.cancelled=!1,$.consume();else{var R=this.div!=null&&this.div.style.display!="none",U=null,F=null,z=null,K=null;if(this.first!=null&&this.currentX!=null&&this.currentY!=null&&(U=this.first.x,F=this.first.y,z=(this.currentX-U)/this.graph.view.scale,K=(this.currentY-F)/this.graph.view.scale,mxEvent$1.isAltDown($.getEvent())||(z=this.graph.snap(z),K=this.graph.snap(K),this.graph.isGridEnabled()||(Math.abs(z)<this.graph.tolerance&&(z=0),Math.abs(K)<this.graph.tolerance&&(K=0)))),this.reset(),R){if(mxEvent$1.isAltDown($.getEvent())&&this.graph.isToggleEvent($.getEvent())){var ge=new mxRectangle(this.x,this.y,this.width,this.height),de=this.graph.getCells(ge.x,ge.y,ge.width,ge.height);this.graph.removeSelectionCells(de)}else if(this.isSpaceEvent($)){this.graph.model.beginUpdate();try{for(var de=this.graph.getCellsBeyond(U,F,this.graph.getDefaultParent(),!0,!0),xe=0;xe<de.length;xe++)if(this.graph.isCellMovable(de[xe])){var Re=this.graph.view.getState(de[xe]),we=this.graph.getCellGeometry(de[xe]);Re!=null&&we!=null&&(we=we.clone(),we.translate(z,K),this.graph.model.setGeometry(de[xe],we))}}finally{this.graph.model.endUpdate()}}else{var ge=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(ge,$.getEvent())}$.consume()}}},mxRubberband.prototype.mouseMove=function(E,$){if(!$.isConsumed()&&this.first!=null){var R=mxUtils$1.getScrollOrigin(this.graph.container),U=mxUtils$1.getOffset(this.graph.container);R.x-=U.x,R.y-=U.y;var F=$.getX()+R.x,z=$.getY()+R.y,K=this.first.x-F,ge=this.first.y-z,de=this.graph.tolerance;if(this.div!=null||Math.abs(K)>de||Math.abs(ge)>de){if(this.div==null&&(this.div=this.createShape()),mxUtils$1.clearSelection(),this.update(F,z),this.isSpaceEvent($)){var xe=this.x+this.width,Re=this.y+this.height,we=this.graph.view.scale;mxEvent$1.isAltDown($.getEvent())||(this.width=this.graph.snap(this.width/we)*we,this.height=this.graph.snap(this.height/we)*we,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=xe-this.width),this.y<this.first.y&&(this.y=Re-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",this.secondDiv==null&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"}else this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",this.secondDiv!=null&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null);$.consume()}}};var Q=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){this.secondDiv!=null&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),Q.apply(this,arguments)};var me=new Date().getTime(),ce=0,Le=mxEdgeHandler.prototype.updatePreviewState;mxEdgeHandler.prototype.updatePreviewState=function(E,$,R,U){Le.apply(this,arguments),R!=this.currentTerminalState?(me=new Date().getTime(),ce=0):ce=new Date().getTime()-me,this.currentTerminalState=R};var Ie=mxEdgeHandler.prototype.isOutlineConnectEvent;mxEdgeHandler.prototype.isOutlineConnectEvent=function(E){return this.currentTerminalState!=null&&E.getState()==this.currentTerminalState&&ce>2e3||(this.currentTerminalState==null||mxUtils$1.getValue(this.currentTerminalState.style,"outlineConnect","1")!="0")&&Ie.apply(this,arguments)},mxEdgeHandler.prototype.createHandleShape=function(E,$){var R=E!=null&&E==0,U=this.state.getVisibleTerminalState(R),F=E!=null&&(E==0||E>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler$1&&E==2)?this.graph.getConnectionConstraint(this.state,U,R):null,z=F!=null?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(R),F):null,K=z!=null?this.fixedHandleImage:F!=null&&U!=null?this.terminalHandleImage:this.handleImage;if(K!=null){var ge=new mxImageShape(new mxRectangle(0,0,K.width,K.height),K.src);return ge.preserveImageAspect=!1,ge}else{var de=mxConstants$1.HANDLE_SIZE;return this.preferHtml&&(de-=1),new mxRectangleShape(new mxRectangle(0,0,de,de),mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}};var Ge=mxVertexHandler.prototype.createSizerShape;mxVertexHandler.prototype.createSizerShape=function(E,$,R){return this.handleImage=$==mxEvent$1.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:$==mxEvent$1.LABEL_HANDLE?this.secondaryHandleImage:this.handleImage,Ge.apply(this,arguments)};var fe=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(E){if(E!=null&&E.length==1){var $=this.graph.getModel(),R=$.getParent(E[0]),U=this.graph.getCellGeometry(E[0]);if($.isEdge(R)&&U!=null&&U.relative){var F=this.graph.view.getState(E[0]);if(F!=null&&F.width<2&&F.height<2&&F.text!=null&&F.text.boundingBox!=null)return mxRectangle.fromRectangle(F.text.boundingBox)}}return fe.apply(this,arguments)};var Te=mxGraphHandler.prototype.getGuideStates;mxGraphHandler.prototype.getGuideStates=function(){for(var E=Te.apply(this,arguments),$=[],R=0;R<E.length;R++)mxUtils$1.getValue(E[R].style,"part","0")!="1"&&$.push(E[R]);return $};var Ve=mxVertexHandler.prototype.getSelectionBounds;mxVertexHandler.prototype.getSelectionBounds=function(E){var $=this.graph.getModel(),R=$.getParent(E.cell),U=this.graph.getCellGeometry(E.cell);if($.isEdge(R)&&U!=null&&U.relative&&E.width<2&&E.height<2&&E.text!=null&&E.text.boundingBox!=null){var F=E.text.unrotatedBoundingBox||E.text.boundingBox;return new mxRectangle(Math.round(F.x),Math.round(F.y),Math.round(F.width),Math.round(F.height))}else return Ve.apply(this,arguments)};var De=mxVertexHandler.prototype.mouseDown;mxVertexHandler.prototype.mouseDown=function(E,$){var R=this.graph.getModel(),U=R.getParent(this.state.cell),F=this.graph.getCellGeometry(this.state.cell),z=this.getHandleForEvent($);(z==mxEvent$1.ROTATION_HANDLE||!R.isEdge(U)||F==null||!F.relative||this.state==null||this.state.width>=2||this.state.height>=2)&&De.apply(this,arguments)},mxVertexHandler.prototype.rotateClick=function(){var E=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE),$=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE);if(this.state.view.graph.model.isVertex(this.state.cell)&&E==mxConstants$1.NONE&&$==mxConstants$1.NONE){var R=mxUtils$1.mod(mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_ROTATION,0)+90,360);this.state.view.graph.setCellStyles(mxConstants$1.STYLE_ROTATION,R,[this.state.cell])}else this.state.view.graph.turnShapes([this.state.cell])};var He=mxVertexHandler.prototype.mouseMove;mxVertexHandler.prototype.mouseMove=function(E,$){He.apply(this,arguments),this.graph.graphHandler.first!=null&&(this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display="none"),this.linkHint!=null&&this.linkHint.style.display!="none"&&(this.linkHint.style.display="none"))};var ue=mxVertexHandler.prototype.mouseUp;mxVertexHandler.prototype.mouseUp=function(E,$){ue.apply(this,arguments),this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display=this.graph.getSelectionCount()==1?"":"none"),this.linkHint!=null&&this.linkHint.style.display=="none"&&(this.linkHint.style.display=""),this.blockDelayedSelection=null};var be=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){be.apply(this,arguments);var E=!1;if(this.rotationShape!=null&&this.rotationShape.node.setAttribute("title",mxResources$1.get("rotateTooltip")),this.graph.isTable(this.state.cell))this.refreshMoveHandles();else if(this.graph.getSelectionCount()==1&&(this.graph.isTableCell(this.state.cell)||this.graph.isTableRow(this.state.cell))){this.cornerHandles=[];for(var $=0;$<4;$++){var R=new mxRectangleShape(new mxRectangle(0,0,6,6),"#ffffff",mxConstants$1.HANDLE_STROKECOLOR);R.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,R.init(this.graph.view.getOverlayPane()),this.cornerHandles.push(R)}}var U=mxUtils$1.bind(this,function(){this.specialHandle!=null&&(this.specialHandle.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none"),this.redrawHandles()});this.changeHandler=mxUtils$1.bind(this,function(K,ge){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),U()}),this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.editingHandler=mxUtils$1.bind(this,function(K,ge){this.redrawHandles()}),this.graph.addListener(mxEvent$1.EDITING_STOPPED,this.editingHandler);var F=this.graph.getLinkForCell(this.state.cell),z=this.graph.getLinksForState(this.state);this.updateLinkHint(F,z),(F!=null||z!=null&&z.length>0)&&(E=!0),E&&this.redrawHandles()},mxVertexHandler.prototype.updateLinkHint=function(E,$){try{if(E==null&&($==null||$.length==0)||this.graph.getSelectionCount()>1)this.linkHint!=null&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(E!=null||$!=null&&$.length>0){if(this.linkHint==null&&(this.linkHint=L(),this.linkHint.style.padding="6px 8px 6px 8px",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.graph.container.appendChild(this.linkHint)),this.linkHint.innerHTML="",E!=null&&(this.linkHint.appendChild(this.graph.createLinkForHint(E)),this.graph.isEnabled()&&typeof this.graph.editLink=="function")){var R=document.createElement("img");R.setAttribute("src",Editor$1.editImage),R.setAttribute("title",mxResources$1.get("editLink")),R.setAttribute("width","11"),R.setAttribute("height","11"),R.style.marginLeft="10px",R.style.marginBottom="-1px",R.style.cursor="pointer",this.linkHint.appendChild(R),mxEvent$1.addListener(R,"click",mxUtils$1.bind(this,function(K){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent$1.consume(K)}));var U=document.createElement("img");U.setAttribute("src",Dialog.prototype.clearImage),U.setAttribute("title",mxResources$1.get("removeIt",[mxResources$1.get("link")])),U.setAttribute("width","13"),U.setAttribute("height","10"),U.style.marginLeft="4px",U.style.marginBottom="-1px",U.style.cursor="pointer",this.linkHint.appendChild(U),mxEvent$1.addListener(U,"click",mxUtils$1.bind(this,function(K){this.graph.setLinkForCell(this.state.cell,null),mxEvent$1.consume(K)}))}if($!=null)for(var F=0;F<$.length;F++){var z=document.createElement("div");z.style.marginTop=E!=null||F>0?"6px":"0px",z.appendChild(this.graph.createLinkForHint($[F].getAttribute("href"),mxUtils$1.getTextContent($[F]))),this.linkHint.appendChild(z)}}}catch{}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint;var Fe=mxEdgeHandler.prototype.init;mxEdgeHandler.prototype.init=function(){Fe.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils$1.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var E=mxUtils$1.bind(this,function(){this.linkHint!=null&&(this.linkHint.style.display=this.graph.getSelectionCount()==1?"":"none"),this.labelShape!=null&&(this.labelShape.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none")});this.changeHandler=mxUtils$1.bind(this,function(U,F){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),E(),this.redrawHandles()}),this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler);var $=this.graph.getLinkForCell(this.state.cell),R=this.graph.getLinksForState(this.state);($!=null||R!=null&&R.length>0)&&(this.updateLinkHint($,R),this.redrawHandles())};var Pe=new mxConnectionHandler(this,arguments);Pe.isEnabled=mxUtils$1.bind(this,function(){return this.graph.connectionHandler.isEnabled()});var je=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){if(this.moveHandles!=null)for(var E=0;E<this.moveHandles.length;E++)this.moveHandles[E].style.left=this.moveHandles[E].rowState.x+this.moveHandles[E].rowState.width-5+"px",this.moveHandles[E].style.top=this.moveHandles[E].rowState.y+this.moveHandles[E].rowState.height/2-6+"px";if(this.cornerHandles!=null){var $=this.getSelectionBorderInset(),R=this.cornerHandles,U=R[0].bounds.width/2,F=R[0].bounds.height/2;R[0].bounds.x=this.state.x-U+$,R[0].bounds.y=this.state.y-F+$,R[0].redraw(),R[1].bounds.x=R[0].bounds.x+this.state.width-2*$,R[1].bounds.y=R[0].bounds.y,R[1].redraw(),R[2].bounds.x=R[0].bounds.x,R[2].bounds.y=this.state.y+this.state.height-2*$,R[2].redraw(),R[3].bounds.x=R[1].bounds.x,R[3].bounds.y=R[2].bounds.y,R[3].redraw();for(var E=0;E<this.cornerHandles.length;E++)this.cornerHandles[E].node.style.display=this.graph.getSelectionCount()==1?"":"none"}if(this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display=this.moveHandles==null&&this.graph.getSelectionCount()==1&&(this.index==null||this.index==mxEvent$1.ROTATION_HANDLE)?"":"none"),je.apply(this),this.state!=null&&this.linkHint!=null){var z=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),K=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),ge=mxUtils$1.getBoundingBox(K,this.state.style[mxConstants$1.STYLE_ROTATION]||"0",z),de=ge!=null?mxUtils$1.getBoundingBox(this.state,this.state.style[mxConstants$1.STYLE_ROTATION]||"0"):this.state,xe=this.state.text!=null?this.state.text.boundingBox:null;ge==null&&(ge=this.state);var Re=ge.y+ge.height;xe!=null&&(Re=Math.max(Re,xe.y+xe.height)),this.linkHint.style.left=Math.max(0,Math.round(de.x+(de.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(Re+this.verticalOffset/2+Editor$1.hintOffset)+"px"}};var Qe=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(){if(Qe.apply(this,arguments),this.moveHandles!=null){for(var E=0;E<this.moveHandles.length;E++)this.moveHandles[E]!=null&&this.moveHandles[E].parentNode!=null&&this.moveHandles[E].parentNode.removeChild(this.moveHandles[E]);this.moveHandles=null}if(this.cornerHandles!=null){for(var E=0;E<this.cornerHandles.length;E++)this.cornerHandles[E]!=null&&this.cornerHandles[E].node!=null&&this.cornerHandles[E].node.parentNode!=null&&this.cornerHandles[E].node.parentNode.removeChild(this.cornerHandles[E].node);this.cornerHandles=null}this.linkHint!=null&&(this.linkHint.parentNode!=null&&this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),this.changeHandler!=null&&(this.graph.getSelectionModel().removeListener(this.changeHandler),this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.editingHandler!=null&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)};var et=mxEdgeHandler.prototype.redrawHandles;mxEdgeHandler.prototype.redrawHandles=function(){if(this.marker!=null&&(et.apply(this),this.state!=null&&this.linkHint!=null)){var E=this.state;this.state.text!=null&&this.state.text.bounds!=null&&(E=new mxRectangle(E.x,E.y,E.width,E.height),E.add(this.state.text.bounds)),this.linkHint.style.left=Math.max(0,Math.round(E.x+(E.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(E.y+E.height+Editor$1.hintOffset)+"px"}};var Ze=mxEdgeHandler.prototype.reset;mxEdgeHandler.prototype.reset=function(){Ze.apply(this,arguments),this.linkHint!=null&&(this.linkHint.style.visibility="")};var Ke=mxEdgeHandler.prototype.destroy;mxEdgeHandler.prototype.destroy=function(){Ke.apply(this,arguments),this.linkHint!=null&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getSelectionModel().removeListener(this.changeHandler),this.changeHandler=null)}}();let Editor$1=class ai extends mxEventSource{constructor(e,t,i,n,s){super(),this.chromeless=e??this.chromeless,this.initStencilRegistry(),this.graph=n||this.createGraph(t,i),this.editable=s??!e,this.undoManager=this.createUndoManager(),this.status="",this.pageCounter=0,this.graph.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()}getOrCreateFilename(){return this.filename||mxResources$1.get("drawing",[ai.pageCounter])+".xml"}getFilename(){return this.filename}setStatus(e){this.status=e,this.fireEvent(new mxEventObject$1("statusChanged"))}getStatus(){return this.status}graphChangeListener(e,t){var i=t!=null?t.getProperty("edit"):null;(i==null||!i.ignoreEdit)&&this.setModified(!0)}};(function(){try{for(var r=window;r.opener!=null&&typeof r.opener.Editor<"u"&&!isNaN(r.opener.Editor.pageCounter)&&r.opener!=r;)r=r.opener;r!=null&&(r.Editor.pageCounter++,Editor$1.pageCounter=r.Editor.pageCounter)}catch{}})();Editor$1.prototype.useLocalStorage=typeof Storage<"u"&&mxClient.IS_IOS;Editor$1.prototype.seleceImage=IMAGE_PATH+"/select.png";Editor$1.prototype.panImage=IMAGE_PATH+"/pan.png";Editor$1.prototype.moveImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCI+PGc+PC9nPjxnPjxnPjxnPjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNCwyLjQpc2NhbGUoMC44KXJvdGF0ZSg0NSwxMiwxMikiIHN0cm9rZT0iIzI5YjZmMiIgZmlsbD0iIzI5YjZmMiIgZD0iTTE1LDNsMi4zLDIuM2wtMi44OSwyLjg3bDEuNDIsMS40MkwxOC43LDYuN0wyMSw5VjNIMTV6IE0zLDlsMi4zLTIuM2wyLjg3LDIuODlsMS40Mi0xLjQyTDYuNyw1LjNMOSwzSDNWOXogTTksMjEgbC0yLjMtMi4zbDIuODktMi44N2wtMS40Mi0xLjQyTDUuMywxNy4zTDMsMTV2Nkg5eiBNMjEsMTVsLTIuMywyLjNsLTIuODctMi44OWwtMS40MiwxLjQybDIuODksMi44N0wxNSwyMWg2VjE1eiIvPjwvZz48L2c+PC9nPjwvc3ZnPgo=":IMAGE_PATH+"/move.png";Editor$1.prototype.rowMoveImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAEBAMAAACw6DhOAAAAGFBMVEUzMzP///9tbW1QUFCKiopBQUF8fHxfX1/IXlmXAAAAFElEQVQImWNgNVdzYBAUFBRggLMAEzYBy29kEPgAAAAASUVORK5CYII=":IMAGE_PATH+"/thumb_horz.png";Editor$1.prototype.helpImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+":IMAGE_PATH+"/help.png";Editor$1.prototype.checkmarkImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=":IMAGE_PATH+"/checkmark.gif";Editor$1.prototypemaximizeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMA758vX1Pw3BoAAABJSURBVAjXY8AJQkODGBhUQ0MhbAUGBiYY24CBgRnGFmZgMISwgwwDGRhEhVVBbAVmEQYGRwMmBjIAQi/CTIRd6G5AuA3dzYQBAHj0EFdHkvV4AAAAAElFTkSuQmCC";Editor$1.prototype.zoomOutImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCxxcXEhISFgYGChjTUxAAAAAXRSTlMAQObYZgAAAEdJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITgLJZXFxgbIQ4Qj3CHIT5ggoIe5kgNkM1KSDYKBKqxPkDAPo5BAZBE54hAAAAAElFTkSuQmCC";Editor$1.prototype.zoomInImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCwhISFxcXFgYGBavKaoAAAAAXRSTlMAQObYZgAAAElJREFUCNdjIAMwCQrB2YKCggJQJqMIA4sglK3owMzgqABVwsDMwCgAZTMbG8PYCHGEeoQ5CPMFFRD2MkFshmpSQLBRJFSJ8wcAEqcEM2uhl2MAAAAASUVORK5CYII=";Editor$1.prototype.zoomFitImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAD1BMVEUAAAAAAAAwMDBwcHBgYGC1xl09AAAAAXRSTlMAQObYZgAAAEFJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITwMdGqEeYgzBfUAFhLxPEZqgmBQQbRUKFOH8AAK5OA3lA+FFOAAAAAElFTkSuQmCC";Editor$1.prototype.layersImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAaVBMVEUAAAAgICAICAgdHR0PDw8WFhYICAgLCwsXFxcvLy8ODg4uLi4iIiIqKiokJCQYGBgKCgonJycFBQUCAgIqKiocHBwcHBwODg4eHh4cHBwnJycJCQkUFBQqKiojIyMuLi4ZGRkgICAEBATOWYXAAAAAGnRSTlMAD7+fnz8/H7/ff18/77+vr5+fn39/b28fH2xSoKsAAACQSURBVBjTrYxJEsMgDARZZMAY73sgCcn/HxnhKtnk7j6oRq0psfuoyndZ/SuODkHPLzfVT6KeyPePnJ7KrnkRjWMXTn4SMnN8mXe2SSM3ts8L/ZUxxrbAULSYJJULE0Iw9pjpenoICcgcX61mGgTgtCv9Be99pzCoDhNQWQnchD1mup5++CYGcoQexajZbfwAj/0MD8ZOaUgAAAAASUVORK5CYII=";Editor$1.prototype.previousImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAh0lEQVQ4je3UsQnCUBCA4U8hpa1NsoEjpHQJS0dxADdwEMuMIJkgA1hYChbGQgMi+JC8q4L/AB/vDu7x74cWWEZhJU44RmA1zujR5GIbXF9YNrjD/Q0bDRY4fEBZ4P4LlgTnCbAf84pUM8/9hY08tMUtEoQ1LpEgrNBFglChFXR6Q6GfwwR6AGKJMF74Vtt3AAAAAElFTkSuQmCC";Editor$1.prototype.nextImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAi0lEQVQ4jeXUIQ7CUAwA0MeGxWI2yylwnALJUdBcgYvM7QYLmjOQIAkIPmJZghiIvypoUtX0tfnJL38X5ZfaEgUeUcManFBHgS0SLlhHggk3bCPBhCf2keCQR8wjwYTDp6YiZxJmOU1jGw7vGALescuBxsArNlOwd/CM1VSM/ut1qCIw+uOwiMJ+OF4CQzBCXm3hyAAAAABJRU5ErkJggg==";Editor$1.prototype.editImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCwALAIABAFdXV////yH5BAEAAAEALAAAAAALAAsAAAIZjB8AiKuc4jvLOGqzrjX6zmkWyChXaUJBAQA7":IMAGE_PATH+"/edit.gif";Editor$1.prototype.zoomOutLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABJklEQVQ4y4WT2XaDMAxEvWD2nSSUNEnTJN3r//+9Sj7ILAY6L0ijC4ONYVZRpo6cByrz2YKSUGorGTpz71lPVHvT+avoB5wIkU/mxk8veceSuNoLg44IzziXjvpih72wKQnm8yc2UoiP/LAd8jQfe2Xf4Pq+2EyYIvv9wbzHHCgwxDdlBtWZOdqDfTCVgqpygQpsZaojVAVc9UjQxnAJDIBhiQv84tq3gMQCAVTxVoSibXJf8tMuc7e1TB/DCmejBNg/w1Y3c+AM5vv4w7xM59/oXamrHaLVqPQ+OTCnmMZxgz0SdL5zji0/ld6j88qGa5KIiBB6WeJGKfUKwSMKLuXgvl1TW0tm5R9UQL/efSDYsnzxD8CinhBsTTdugJatKpJwf8v+ADb8QmvW7AeAAAAAAElFTkSuQmCC";Editor$1.prototype.zoomInLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABKElEQVQ4y4WT6WKCMBCENwkBwn2oFKvWqr3L+79es4EkQIDOH2d3Pxk2ABiJlB8JCXjqw4LikHVGLHTm3nM3UeVN5690GBBN0GwyV/3kkrUQR+WeKnREeKpzaXWd77CmJiXGfPIEI4V4yQ9TIW/ntlcMBe731Vts9w5TWG8F5j3mQI4hvrKpdGeYA7CX9qAcl650gVJartxRuhyHVghF8idQAIbFLvCLu28BsQEC6aKtCK6Pyb3JT7PmbmtNH8Ny56CotD/2qOs5cJbuffxgXmCib+xddVU5RNOhkvvkhTlFehzVWCOh3++MYElOhfdovaImnRYVmqDdsuhNp1QrBBE6uGC2+3ZNjGdg5B94oD+9uyVgWT79BwAxEBTWdOu3bWBVgsn/N/AHUD9IC01Oe40AAAAASUVORK5CYII=";Editor$1.prototype.actualSizeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABIUlEQVQ4y4WT2XqDIBCFBxDc9yTWNEnTJN3r+79eGT4BEbXnaubMr8dBBaM450dCQp4LWFAascGIRd48eB4cNYE7f6XjgGiCFs5c+dml6CFN6j1V6IQIlHPpdV/usKcmJcV88gQTRXjLD9Mhb+fWq8YG9/uCmTCFjeeDeY85UGKIUGUuqzN42kv7oCouq9oHamlzVR1lVfpAIu1QVRiW+sAv7r4FpAYIZZVsRXB9TP5Dfpo1d1trCgzz1iiptH/sUbdz4CzN9+mLeXHn3+hdddd4RDegsrvzwZwSs2GLPRJidAqCLTlVwaMPqpYMWjTWBB2WRW86pVkhSKyDK2bdt2tmagZG4sBD/evdLQHLEvQfAOKRoLCmG1FAB6uKmby+gz+REDn7O5+EwQAAAABJRU5ErkJggg==";Editor$1.prototype.printLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAXVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9RKvvlAAAAHnRSTlMAydnl77qbMLT093H7K4Nd4Ktn082+lYt5bkklEgP44nQSAAAApUlEQVQ4y73P2Q6DIBRF0cOgbRHHzhP//5m9mBAQKjG1cT0Yc7ITAMu1LNQgUZiQ2DYoNQ0sCQb6qgHAfRx48opq3J9AZ6xuF7uOew8Ik1OsCZRS2UAC9V+D9a+QZYxNA45YFQftPtSkATOhw7dAc0vPBwKWiIOjP0JZ0yMuQJ27g36DipOUsqRAM0dR8KD1/ILHaHSE/w8DIx09E3g/BTce6rHUB5sAPKvfF+JdAAAAAElFTkSuQmCC";Editor$1.prototype.layersLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v7///+bnZkkAAAAMnRSTlMABPr8ByiD88KsTi/rvJb272mjeUA1CuPe1M/KjVxYHxMP6KZ0S9nYzGRGGRaznpGIbzaGUf0AAAHESURBVDjLbZLZYoIwEEVDgLCjbKIgAlqXqt3m/z+uNwu1rcyDhjl3ktnYL7OY254C0VX3yWFZfzDrOClbbgKxi0YDHjwl4jbnRkXxJS/C1YP3DbBhD1n7Ex4uaAqdVDb3yJ/4J/3nJD2to/ngQz/DfUvzMp4JJ5sSCaF5oXmemgQDfDxzbi+Kq4sU+vNcuAmx94JtyOP2DD4Epz2asWSCz4Z/4fECxyNj9zC9xNLHcdPEO+awDKeSaUu0W4twZQiO2hYVisTR3RCtK/c1X6t4xMEpiGqXqVntEBLolkZZsKY4QtwH6jzq67dEHlJysB1aNOD3XT7n1UkasQN59L4yC2RELMDSeCRtz3yV22Ub3ozIUTknYx8JWqDdQxbUes98cR2kZtUSveF/bAhcedwEWmlxIkpZUy4XOCb6VBjjxHvbwo/1lBAHHi2JCr0NI570QhyHq/DhJoE2lLgyA4RVe6KmZ47O/3b86MCP0HWa73A8/C3SUc5Qc1ajt6fgpXJ+RGpMvDSchepZDOOQRcZVIKcK90x2D7etqtI+56+u6n3sPriO6nfphitR4+O2m3EbM7lh3me1FM1o+LMI887rN+s3/wZdTFlpNVJiOAAAAABJRU5ErkJggg==";Editor$1.prototype.closeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAuvAIg/dDM/QlOeuFhj0S5s4vKgzjxJRQNiLSey0AAADNSURBVDjLfZLbEoMgDEQjRRRs1XqX///QNmOHJSnjPkHOGR7IEmeoGtJZstnwjqbRfIsmgEdtPCqe9Ynz7ZSc07rE2QiSc+qv8TvjRXA2PDUm3dpe82iJhOEUfxJJo3aCv+jKmRmH4lcCjCjeh9GWOdL/GZZkXH3PYYDrHBnfc4D/RVZf5sjoC1was+Y6HQxwaUxFvq/a0Pv343VCTxfBSRiB+ab3M3eiQZXmMNBJ3Y8pGRZtYQ7DgHMXJEdPLTaN/qBjzJOBc3nmNcbsA16bMR0oLqf+AAAAAElFTkSuQmCC";Editor$1.prototype.editLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAKnRSTlMA+hzi3nRQWyXzkm0h2j3u54gzEgSXjlYoTBgJxL2loGpAOS3Jt7Wxm35Ga7gRAAAA6UlEQVQ4y63Q2XaCMBSF4Q0JBasoQ5DJqbXjfv8HbCK2BZNwo/8FXHx7rcMC7lQu0iX8qU/qtvAWCpoqH8dYzS0SwaV5eK/UAf8X9pd2CWKzuF5Jrftp1owXwnIGLUaL3PYndOHf4kNNXWrXK/m7CHunk7K8LE6YtBpcknwG9GKxnroY+ylBXcx4xKyx/u/EuXi509cP9V7OO1oyHnzrdFTcqLG/4ibBA5pIMr/4xvKzuQDkVy9wW8SgBFD6HDvuzMvrZcC9QlkfMzI7w64m+b4PqBMNHB05lH21PVxJo2/fBXxV4hB38PcD+5AkI4FuETsAAAAASUVORK5CYII=";Editor$1.prototype.previousLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFZJREFUOMvdkskRgDAMA4lDwg2B7b9XOlge/KKvdsa25KFb5XlRvxXC/DNBEv8IFNjBgGdDgXtFgTyhwDXiQAUHCvwa4Uv6mR6UR+1led2mVonvl+tML45qCQNQLIx7AAAAAElFTkSuQmCC";Editor$1.prototype.nextLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFRJREFUOMvd0skRgCAQBVEFwQ0V7fxzNQP6wI05v6pZ/kyj1b7FNgik2gQzzLcAwiUAigHOTwDHK4A1CmB5BJANJG1hQ9qafYcqFlZP3IFc9eVGrR+iIgkDQRUXIAAAAABJRU5ErkJggg==";Editor$1.prototype.refreshLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ELnaCAAAANXRSTlMABfyE2QKU+dfNyyDyoVYKwnTv7N+6rntsYlFNQjEqEw316uSzf2c1JB3GvqebiVw6GAjQB4DQr10AAAE7SURBVDjLvZLXcoMwEABPIgRCx3TT3A3udqL//7UgAdGRcR4yk8k+idsdmgS/QyWEqD/axS2JDV33zlnzLHIzQ2MDq9OeJ3m8l76KKENYlxrmM/b65Ys1+8YxnTEZFIEY0vVhszFWfUGZDJpQTDznTgAe5k4XhQxILB7ruzBQn+kkyDXuHfRtjoYDEvH7J9Lz98dBZXXL94X0Ofco2PFlChKbjVzEdakoSlKjoNoqPYkJ/wUZAYwc+PpLj1Ei7+jdoBWlwQZoJv2H1w3CWgRvo7dd9DP5btgwCWz0M02+oVoxCcIWeY9PNmR6B++m9prMxYEISpCBYBlfy9bc745is7UUULAem1Ww7FfalsiA2uaJsgmWP3pQI9q9/yMLkaaHAp2fxhHff/cNq7dBdHXhGW7l+Mo2zU0Cf8knJ2xA0oJ8enwAAAAASUVORK5CYII=";Editor$1.prototype.backLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEUAAAD////////////////+/v7////////////////////////////////////////////+/v7///////////////////////////////////////////////////////////////////////////////8vKLfTAAAAJXRSTlMACh7h9gby3NLIwzwZ55uVJgH57b+8tbCljYV1RRMQ46FrTzQw+vtxOQAAAJ5JREFUOMuF00cWgzAQA1DRDQFCbwFSdf8rZpdVrNH2z3tuMv7mldZQ2WN2yi8x+TT8JvyTkqvwpiKvwsOIrA1fWr+XGTklfj8dOQR+D3KyUF6QufBkJN0hfCazEv6sZBRCJDUcPasGKpu1RLtYE8lkHAPBQLoTsK/SfAyRw5FjAuhCzC2MSj0gJ+66lHatgXdKboD9tfREB5m9/+3iC9jHDYvsGNcUAAAAAElFTkSuQmCC";Editor$1.prototype.fullscreenLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAllBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AJcWoAAAAMXRSTlMA+wIFxPWPCIb446tnUxmsoIykgxTe29jQnpKBe2MNsZhVTR/KyLuWbFhEPjUq7L9z+bQj+gAAAWxJREFUOMttk4l2gkAMRTODCO4FtQgIbnWpS9v8/881iZFh8R51NO8GJ+gAjMN8zuTRFSw04cIOHQcqFHH6oaQFGxf0jeBjEgB8Y52TpW9Ag4zB5QICWOtHrgwGuFZBcw+gPP0MFS7+iiD5inOmDIQS9sZgTwUzwEzyxhxHVEEU7NdDUXsqUPtqjIgR2IZSCT4upzSeIeOdcMHnfDsx3giPoezfU6MrQGB5//SckLEG2xYscK4GfnUFqaix39zrwooaOD/cXoYuvHKQIc7pzd3HVPusp6t2FAW/RmjMonbl8vwHDeZo/GkleJC7e+p5XA/rAq1X/V10wKag04rBpa2/d0LL4OYYceOEtsG5jyMntI1wS+N1BGcQBl/CoLoPOl9ABrW/BP53e1bwSJHHlkIVchJwmHwyyfJ4kIvEnKtwkxNSEct83KSChT7WiWgDZ3ccZ0BM4tloJow2YUAtifNT3njnyD+y/pMsnP4DN3Y4yl1Gyk0AAAAASUVORK5CYII=";Editor$1.roughFillStyles=[{val:"auto",dispName:"Auto"},{val:"hachure",dispName:"Hachure"},{val:"solid",dispName:"Solid"},{val:"zigzag",dispName:"ZigZag"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dots",dispName:"Dots"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}];Editor$1.themes=null;Editor$1.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl";Editor$1.hintOffset=20;Editor$1.popupsAllowed=!0;Editor$1.prototype.originalNoForeignObject=mxClient.NO_FO;Editor$1.prototype.transparentImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif";Editor$1.prototype.extendCanvas=!0;Editor$1.prototype.chromeless=!1;Editor$1.prototype.cancelFirst=!0;Editor$1.prototype.enabled=!0;Editor$1.prototype.filename=null;Editor$1.prototype.modified=!1;Editor$1.prototype.autosave=!0;Editor$1.prototype.initialTopSpacing=0;Editor$1.prototype.appName=document.title;Editor$1.prototype.editBlankUrl=window.location.protocol+"//"+window.location.host+"/";Editor$1.prototype.defaultGraphOverflow="hidden";Editor$1.prototype.init=function(){};Editor$1.prototype.isChromelessView=function(){return this.chromeless};Editor$1.prototype.setAutosave=function(r){this.autosave=r,this.fireEvent(new mxEventObject$1("autosaveChanged"))};Editor$1.prototype.getEditBlankUrl=function(r){return this.editBlankUrl+r};Editor$1.prototype.editAsNew=function(r,e){var t=e!=null?"?title="+encodeURIComponent(e):"";if(urlParams.ui!=null&&(t+=(t.length>0?"&":"?")+"ui="+urlParams.ui),typeof window.postMessage<"u"&&(document.documentMode==null||document.documentMode>=10)){var i=null,n=mxUtils$1.bind(this,function(s){s.data=="ready"&&s.source==i&&(mxEvent$1.removeListener(window,"message",n),i.postMessage(r,"*"))});mxEvent$1.addListener(window,"message",n),i=this.graph.openLink(this.getEditBlankUrl(t+(t.length>0?"&":"?")+"client=1"),null,!0)}else this.graph.openLink(this.getEditBlankUrl(t)+"#R"+encodeURIComponent(r))};Editor$1.prototype.createGraph=function(r,e){var t=new Graph$1(null,e,null,null,r);return t.transparentBackground=!1,this.chromeless||(t.isBlankLink=function(i){return!this.isExternalProtocol(i)}),t};Editor$1.prototype.resetGraph=function(){this.graph.gridEnabled=!this.isChromelessView()||urlParams.grid=="1",this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)};Editor$1.prototype.readGraphState=function(r){this.graph.gridEnabled=r.getAttribute("grid")!="0"&&(!this.isChromelessView()||urlParams.grid=="1"),this.graph.gridSize=parseFloat(r.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled=r.getAttribute("guides")!="0",this.graph.setTooltips(r.getAttribute("tooltips")!="0"),this.graph.setConnectable(r.getAttribute("connect")!="0"),this.graph.connectionArrowsEnabled=r.getAttribute("arrows")!="0",this.graph.foldingEnabled=r.getAttribute("fold")!="0",this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled=urlParams.nav=="1",this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var e=parseFloat(r.getAttribute("pageScale"));if(!isNaN(e)&&e>0?this.graph.pageScale=e:this.graph.pageScale=mxGraph.prototype.pageScale,!this.graph.isLightboxView()&&!this.graph.isViewer()){var t=r.getAttribute("page");t!=null?this.graph.pageVisible=t!="0":this.graph.pageVisible=this.graph.defaultPageVisible}else this.graph.pageVisible=!1;this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var i=parseFloat(r.getAttribute("pageWidth")),n=parseFloat(r.getAttribute("pageHeight"));!isNaN(i)&&!isNaN(n)&&(this.graph.pageFormat=new mxRectangle(0,0,i,n));var s=r.getAttribute("background");s!=null&&s.length>0?this.graph.background=s:this.graph.background=null};Editor$1.prototype.setGraphXml=function(r){if(console.log("Editor.prototype.setGraphXml"),r!=null){var e=new mxCodec(r.ownerDocument);if(console.log("dec"),console.log(e),r.nodeName=="mxGraphModel"){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(r),this.updateGraphComponents(),e.decode(r,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject$1("resetGraphView"))}else if(r.nodeName=="root"){this.resetGraph();var t=e.document.createElement("mxGraphModel");t.appendChild(r),e.decode(t,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new mxEventObject$1("resetGraphView"))}else throw{message:mxResources$1.get("cannotOpenFile"),node:r,toString:function(){return this.message}}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new mxEventObject$1("resetGraphView"))};Editor$1.prototype.getGraphXml=function(r){r=r??!0;var e=null;if(r){var t=new mxCodec(mxUtils$1.createXmlDocument());e=t.encode(this.graph.getModel())}else e=this.graph.encodeCells(mxUtils$1.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells())));return(this.graph.view.translate.x!=0||this.graph.view.translate.y!=0)&&(e.setAttribute("dx",Math.round(this.graph.view.translate.x*100)/100),e.setAttribute("dy",Math.round(this.graph.view.translate.y*100)/100)),e.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),e.setAttribute("gridSize",this.graph.gridSize),e.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),e.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),e.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),e.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),e.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),e.setAttribute("page",this.graph.pageVisible?"1":"0"),e.setAttribute("pageScale",this.graph.pageScale),e.setAttribute("pageWidth",this.graph.pageFormat.width),e.setAttribute("pageHeight",this.graph.pageFormat.height),this.graph.background!=null&&e.setAttribute("background",this.graph.background),e};Editor$1.prototype.updateGraphComponents=function(){var r=this.graph;r.container!=null&&(r.view.validateBackground(),r.container.style.overflow=r.scrollbars?"auto":this.defaultGraphOverflow,this.fireEvent(new mxEventObject$1("updateGraphComponents")))};Editor$1.prototype.setModified=function(r){this.modified=r};Editor$1.prototype.setFilename=function(r){this.filename=r};Editor$1.prototype.createUndoManager=function(){var r=this.graph,e=new mxUndoManager;this.undoListener=function(n,s){e.undoableEditHappened(s.getProperty("edit"))};var t=mxUtils$1.bind(this,function(n,s){this.undoListener.apply(this,arguments)});r.getModel().addListener(mxEvent$1.UNDO,t),r.getView().addListener(mxEvent$1.UNDO,t);var i=function(n,s){var l=r.getSelectionCellsForChanges(s.getProperty("edit").changes,function(h){return!(h instanceof mxChildChange)});if(l.length>0){r.getModel();for(var a=[],o=0;o<l.length;o++)r.view.getState(l[o])!=null&&a.push(l[o]);r.setSelectionCells(a)}};return e.addListener(mxEvent$1.UNDO,i),e.addListener(mxEvent$1.REDO,i),e};Editor$1.prototype.initStencilRegistry=function(){};Editor$1.prototype.destroy=function(){this.graph!=null&&(this.graph.destroy(),this.graph=null)};function OpenFile$1(r){this.producer=null,this.consumer=null,this.done=r,this.args=null}OpenFile$1.prototype.setConsumer=function(r){this.consumer=r,this.execute()};OpenFile$1.prototype.setData=function(){this.args=arguments,this.execute()};OpenFile$1.prototype.error=function(r){this.cancel(!0),mxUtils$1.alert(r)};OpenFile$1.prototype.execute=function(){this.consumer!=null&&this.args!=null&&(this.cancel(!1),this.consumer.apply(this,this.args))};OpenFile$1.prototype.cancel=function(r){this.done!=null&&this.done(r??!0)};function Dialog$1(r,e,t,i,n,s,l,a,o,h,d){var m=0;mxClient.IS_VML&&(document.documentMode==null||document.documentMode<8)&&(m=80),t+=m,i+=m;var g=t,c=i,f=mxUtils$1.getDocumentSize();window.innerHeight!=null&&(f.height=window.innerHeight);var C=f.height,v=Math.max(1,Math.round((f.width-t-64)/2)),w=Math.max(1,Math.round((C-i-r.footerHeight)/3));mxClient.IS_QUIRKS||(e.style.maxHeight="100%"),t=document.body!=null?Math.min(t,document.body.scrollWidth-64):t,i=Math.min(i,C-64),r.dialogs.length>0&&(this.zIndex+=r.dialogs.length*2),this.bg==null&&(this.bg=r.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog$1.backdropColor,this.bg.style.height=C+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils$1.setOpacity(this.bg,this.bgOpacity),mxClient.IS_QUIRKS&&new mxDivResizer(this.bg));var S=mxUtils$1.getDocumentScrollOrigin(document);this.bg.style.left=S.x+"px",this.bg.style.top=S.y+"px",v+=S.x,w+=S.y,n&&document.body.appendChild(this.bg);var T=r.createDiv(o?"geTransDialog":"geDialog"),P=this.getPosition(v,w,t,i);if(v=P.x,w=P.y,T.style.width=t+"px",T.style.height=i+"px",T.style.left=v+"px",T.style.top=w+"px",T.style.zIndex=this.zIndex,T.appendChild(e),document.body.appendChild(T),!a&&e.clientHeight>T.clientHeight-64&&(e.style.overflowY="auto"),s){var L=document.createElement("img");if(L.setAttribute("src",Dialog$1.prototype.closeImage),L.setAttribute("title",mxResources$1.get("close")),L.className="geDialogClose",L.style.top=w+14+"px",L.style.left=v+t+38-m+"px",L.style.zIndex=this.zIndex,mxEvent$1.addListener(L,"click",mxUtils$1.bind(this,function(){r.hideDialog(!0)})),document.body.appendChild(L),this.dialogImg=L,!d){var k=!1;mxEvent$1.addGestureListeners(this.bg,mxUtils$1.bind(this,function(G){k=!0}),null,mxUtils$1.bind(this,function(G){k&&(r.hideDialog(!0),k=!1)}))}}this.resizeListener=mxUtils$1.bind(this,function(){if(h!=null){var G=h();G!=null&&(g=t=G.w,c=i=G.h)}var Y=mxUtils$1.getDocumentSize();C=Y.height,this.bg.style.height=C+"px",v=Math.max(1,Math.round((Y.width-t-64)/2)),w=Math.max(1,Math.round((C-i-r.footerHeight)/3)),t=document.body!=null?Math.min(g,document.body.scrollWidth-64):g,i=Math.min(c,C-64);var te=this.getPosition(v,w,t,i);v=te.x,w=te.y,T.style.left=v+"px",T.style.top=w+"px",T.style.width=t+"px",T.style.height=i+"px",!a&&e.clientHeight>T.clientHeight-64&&(e.style.overflowY="auto"),this.dialogImg!=null&&(this.dialogImg.style.top=w+14+"px",this.dialogImg.style.left=v+t+38-m+"px")}),mxEvent$1.addListener(window,"resize",this.resizeListener),this.onDialogClose=l,this.container=T,r.editor.fireEvent(new mxEventObject$1("showDialog"))}Dialog$1.backdropColor="white";Dialog$1.prototype.zIndex=mxPopupMenu.prototype.zIndex-1;Dialog$1.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png";Dialog$1.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png";Dialog$1.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif";Dialog$1.prototype.lockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCODExNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCODIxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3RjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI4MDE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvqMCFYAAAAVUExURZmZmb+/v7KysqysrMzMzLGxsf///4g8N1cAAAAHdFJOU////////wAaSwNGAAAAPElEQVR42lTMQQ4AIQgEwUa0//9kTQirOweYOgDqAMbZUr10AGlAwx4/BJ2QJ4U0L5brYjovvpv32xZgAHZaATFtMbu4AAAAAElFTkSuQmCC":IMAGE_PATH+"/locked.png";Dialog$1.prototype.unlockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCN0QxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCN0UxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3QjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI3QzE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkKMpVwAAAAYUExURZmZmbKysr+/v6ysrOXl5czMzLGxsf///zHN5lwAAAAIdFJOU/////////8A3oO9WQAAADxJREFUeNpUzFESACAEBNBVsfe/cZJU+8Mzs8CIABCidtfGOndnYsT40HDSiCcbPdoJo10o9aI677cpwACRoAF3dFNlswAAAABJRU5ErkJggg==":IMAGE_PATH+"/unlocked.png";Dialog$1.prototype.bgOpacity=80;Dialog$1.prototype.getPosition=function(r,e){return new mxPoint(r,e)};Dialog$1.prototype.close=function(r,e){if(this.onDialogClose!=null){if(this.onDialogClose(r,e)==!1)return!1;this.onDialogClose=null}this.dialogImg!=null&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),this.bg!=null&&this.bg.parentNode!=null&&this.bg.parentNode.removeChild(this.bg),mxEvent$1.removeListener(window,"resize",this.resizeListener),this.container.parentNode.removeChild(this.container)};function ErrorDialog(r,e,t,i,n,s,l,a,o,h,d){o=o??!0;var m=document.createElement("div");if(m.style.textAlign="center",e!=null){var g=document.createElement("div");g.style.padding="0px",g.style.margin="0px",g.style.fontSize="18px",g.style.paddingBottom="16px",g.style.marginBottom="10px",g.style.borderBottom="1px solid #c0c0c0",g.style.color="gray",g.style.whiteSpace="nowrap",g.style.textOverflow="ellipsis",g.style.overflow="hidden",mxUtils$1.write(g,e),g.setAttribute("title",e),m.appendChild(g)}var c=document.createElement("div");c.style.lineHeight="1.2em",c.style.padding="6px",c.innerHTML=t,m.appendChild(c);var f=document.createElement("div");if(f.style.marginTop="12px",f.style.textAlign="center",s!=null){var C=mxUtils$1.button(mxResources$1.get("tryAgain"),function(){r.hideDialog(),s()});C.className="geBtn",f.appendChild(C),f.style.textAlign="center"}if(h!=null){var v=mxUtils$1.button(h,function(){d?.()});v.className="geBtn",f.appendChild(v)}var w=mxUtils$1.button(i,function(){o&&r.hideDialog(),n?.()});if(w.className="geBtn",f.appendChild(w),l!=null){var S=mxUtils$1.button(l,function(){o&&r.hideDialog(),a?.()});S.className="geBtn gePrimaryBtn",f.appendChild(S)}this.init=function(){w.focus()},m.appendChild(f),this.container=m}function PageSetupDialog$1(r){var e=r.editor.graph,t,i,n=document.createElement("table");n.style.width="100%",n.style.height="100%";var s=document.createElement("tbody");t=document.createElement("tr"),i=document.createElement("td"),i.style.verticalAlign="top",i.style.fontSize="10pt",mxUtils$1.write(i,mxResources$1.get("paperSize")+":"),t.appendChild(i),i=document.createElement("td"),i.style.verticalAlign="top",i.style.fontSize="10pt";var l=PageSetupDialog$1.addPageFormatPanel(i,"pagesetupdialog",e.pageFormat);t.appendChild(i),s.appendChild(t),t=document.createElement("tr"),i=document.createElement("td"),mxUtils$1.write(i,mxResources$1.get("background")+":"),t.appendChild(i),i=document.createElement("td"),i.style.whiteSpace="nowrap";var a=document.createElement("input");a.setAttribute("type","text");var o=document.createElement("button");o.style.width="18px",o.style.height="18px",o.style.marginRight="20px",o.style.backgroundPosition="center center",o.style.backgroundRepeat="no-repeat";var h=e.background;function d(){h==null||h==mxConstants$1.NONE?(o.style.backgroundColor="",o.style.backgroundImage="url('"+Dialog$1.prototype.noColorImage+"')"):(o.style.backgroundColor=h,o.style.backgroundImage="")}d(),mxEvent$1.addListener(o,"click",function(w){r.pickColor(h||"none",function(S){h=S,d()}),mxEvent$1.consume(w)}),i.appendChild(o),mxUtils$1.write(i,mxResources$1.get("gridSize")+":");var m=document.createElement("input");m.setAttribute("type","number"),m.setAttribute("min","0"),m.style.width="40px",m.style.marginLeft="6px",m.value=e.getGridSize(),i.appendChild(m),mxEvent$1.addListener(m,"change",function(){var w=parseInt(m.value);m.value=Math.max(1,isNaN(w)?e.getGridSize():w)}),t.appendChild(i),s.appendChild(t),t=document.createElement("tr"),i=document.createElement("td"),mxUtils$1.write(i,mxResources$1.get("image")+":"),t.appendChild(i),i=document.createElement("td");var g=document.createElement("a");g.style.textDecoration="underline",g.style.cursor="pointer",g.style.color="#a0a0a0";var c=e.backgroundImage;function f(){c==null?(g.removeAttribute("title"),g.style.fontSize="",g.innerHTML=mxUtils$1.htmlEntities(mxResources$1.get("change"))+"..."):(g.setAttribute("title",c.src),g.style.fontSize="11px",g.innerHTML=mxUtils$1.htmlEntities(c.src.substring(0,42))+"...")}mxEvent$1.addListener(g,"click",function(w){r.showBackgroundImageDialog(function(S,T){T||(c=S,f())},c),mxEvent$1.consume(w)}),f(),i.appendChild(g),t.appendChild(i),s.appendChild(t),t=document.createElement("tr"),i=document.createElement("td"),i.colSpan=2,i.style.paddingTop="16px",i.setAttribute("align","right");var C=mxUtils$1.button(mxResources$1.get("cancel"),function(){r.hideDialog()});C.className="geBtn",r.editor.cancelFirst&&i.appendChild(C);var v=mxUtils$1.button(mxResources$1.get("apply"),function(){r.hideDialog();var w=parseInt(m.value);!isNaN(w)&&e.gridSize!==w&&e.setGridSize(w);var S=new ChangePageSetup(r,h,c,l.get());S.ignoreColor=e.background==h;var T=e.backgroundImage!=null?e.backgroundImage.src:null,P=c!=null?c.src:null;S.ignoreImage=T===P,(e.pageFormat.width!=S.previousFormat.width||e.pageFormat.height!=S.previousFormat.height||!S.ignoreColor||!S.ignoreImage)&&e.model.execute(S)});v.className="geBtn gePrimaryBtn",i.appendChild(v),r.editor.cancelFirst||i.appendChild(C),t.appendChild(i),s.appendChild(t),n.appendChild(s),this.container=n}PageSetupDialog$1.addPageFormatPanel=function(r,e,t,i){var n="format-"+e,s=document.createElement("input");s.setAttribute("name",n),s.setAttribute("type","radio"),s.setAttribute("value","portrait");var l=document.createElement("input");l.setAttribute("name",n),l.setAttribute("type","radio"),l.setAttribute("value","landscape");var a=document.createElement("select");a.style.marginBottom="8px",a.style.width="202px";var o=document.createElement("div");o.style.marginLeft="4px",o.style.width="210px",o.style.height="24px",s.style.marginRight="6px",o.appendChild(s);var h=document.createElement("span");h.style.maxWidth="100px",mxUtils$1.write(h,mxResources$1.get("portrait")),o.appendChild(h),l.style.marginLeft="10px",l.style.marginRight="6px",o.appendChild(l);var d=document.createElement("span");d.style.width="100px",mxUtils$1.write(d,mxResources$1.get("landscape")),o.appendChild(d);var m=document.createElement("div");m.style.marginLeft="4px",m.style.width="210px",m.style.height="24px";var g=document.createElement("input");g.setAttribute("size","7"),g.style.textAlign="right",m.appendChild(g),mxUtils$1.write(m," in x ");var c=document.createElement("input");c.setAttribute("size","7"),c.style.textAlign="right",m.appendChild(c),mxUtils$1.write(m," in"),o.style.display="none",m.style.display="none";for(var f=new Object,C=PageSetupDialog$1.getFormats(),v=0;v<C.length;v++){var w=C[v];f[w.key]=w;var S=document.createElement("option");S.setAttribute("value",w.key),mxUtils$1.write(S,w.title),a.appendChild(S)}var T=!1;function P(G,Y,te){if(te||g!=document.activeElement&&c!=document.activeElement){for(var ie=!1,ne=0;ne<C.length;ne++){var q=C[ne];T?q.key=="custom"&&(a.value=q.key,T=!1):q.format!=null&&(q.key=="a4"?t.width==826?(t=mxRectangle.fromRectangle(t),t.width=827):t.height==826&&(t=mxRectangle.fromRectangle(t),t.height=827):q.key=="a5"&&(t.width==584?(t=mxRectangle.fromRectangle(t),t.width=583):t.height==584&&(t=mxRectangle.fromRectangle(t),t.height=583)),t.width==q.format.width&&t.height==q.format.height?(a.value=q.key,s.setAttribute("checked","checked"),s.defaultChecked=!0,s.checked=!0,l.removeAttribute("checked"),l.defaultChecked=!1,l.checked=!1,ie=!0):t.width==q.format.height&&t.height==q.format.width&&(a.value=q.key,s.removeAttribute("checked"),s.defaultChecked=!1,s.checked=!1,l.setAttribute("checked","checked"),l.defaultChecked=!0,l.checked=!0,ie=!0))}ie?(o.style.display="",m.style.display="none"):(g.value=t.width/100,c.value=t.height/100,s.setAttribute("checked","checked"),a.value="custom",o.style.display="none",m.style.display="")}}P(),r.appendChild(a),mxUtils$1.br(r),r.appendChild(o),r.appendChild(m);var L=t,k=function(G,Y){var te=f[a.value];te.format!=null?(g.value=te.format.width/100,c.value=te.format.height/100,m.style.display="none",o.style.display=""):(o.style.display="none",m.style.display="");var ie=parseFloat(g.value);(isNaN(ie)||ie<=0)&&(g.value=t.width/100);var ne=parseFloat(c.value);(isNaN(ne)||ne<=0)&&(c.value=t.height/100);var q=new mxRectangle(0,0,Math.floor(parseFloat(g.value)*100),Math.floor(parseFloat(c.value)*100));a.value!="custom"&&l.checked&&(q=new mxRectangle(0,0,q.height,q.width)),(!Y||!T)&&(q.width!=L.width||q.height!=L.height)&&(L=q,i?.(L))};return mxEvent$1.addListener(h,"click",function(G){s.checked=!0,k(),mxEvent$1.consume(G)}),mxEvent$1.addListener(d,"click",function(G){l.checked=!0,k(),mxEvent$1.consume(G)}),mxEvent$1.addListener(g,"blur",k),mxEvent$1.addListener(g,"click",k),mxEvent$1.addListener(c,"blur",k),mxEvent$1.addListener(c,"click",k),mxEvent$1.addListener(l,"change",k),mxEvent$1.addListener(s,"change",k),mxEvent$1.addListener(a,"change",function(G){T=a.value=="custom",k(G,!0)}),k(),{set:function(G){t=G,P(null,null,!0)},get:function(){return L},widthInput:g,heightInput:c}};PageSetupDialog$1.getFormats=function(){return[{key:"letter",title:'US-Letter (8,5" x 11")',format:mxConstants$1.PAGE_FORMAT_LETTER_PORTRAIT},{key:"legal",title:'US-Legal (8,5" x 14")',format:new mxRectangle(0,0,850,1400)},{key:"tabloid",title:'US-Tabloid (11" x 17")',format:new mxRectangle(0,0,1100,1700)},{key:"executive",title:'US-Executive (7" x 10")',format:new mxRectangle(0,0,700,1e3)},{key:"a0",title:"A0 (841 mm x 1189 mm)",format:new mxRectangle(0,0,3300,4681)},{key:"a1",title:"A1 (594 mm x 841 mm)",format:new mxRectangle(0,0,2339,3300)},{key:"a2",title:"A2 (420 mm x 594 mm)",format:new mxRectangle(0,0,1654,2336)},{key:"a3",title:"A3 (297 mm x 420 mm)",format:new mxRectangle(0,0,1169,1654)},{key:"a4",title:"A4 (210 mm x 297 mm)",format:mxConstants$1.PAGE_FORMAT_A4_PORTRAIT},{key:"a5",title:"A5 (148 mm x 210 mm)",format:new mxRectangle(0,0,583,827)},{key:"a6",title:"A6 (105 mm x 148 mm)",format:new mxRectangle(0,0,413,583)},{key:"a7",title:"A7 (74 mm x 105 mm)",format:new mxRectangle(0,0,291,413)},{key:"b4",title:"B4 (250 mm x 353 mm)",format:new mxRectangle(0,0,980,1390)},{key:"b5",title:"B5 (176 mm x 250 mm)",format:new mxRectangle(0,0,690,980)},{key:"16-9",title:"16:9 (1600 x 900)",format:new mxRectangle(0,0,900,1600)},{key:"16-10",title:"16:10 (1920 x 1200)",format:new mxRectangle(0,0,1200,1920)},{key:"4-3",title:"4:3 (1600 x 1200)",format:new mxRectangle(0,0,1200,1600)},{key:"custom",title:mxResources$1.get("custom"),format:null}]};function FilenameDialog$1(r,e,t,i,n,s,l,a,o,h,d,m){o=o??!0;var g,c,f=document.createElement("table"),C=document.createElement("tbody");f.style.marginTop="8px",g=document.createElement("tr"),c=document.createElement("td"),c.style.whiteSpace="nowrap",c.style.fontSize="10pt",c.style.width=d?"80px":"120px",mxUtils$1.write(c,(n||mxResources$1.get("filename"))+":"),g.appendChild(c);var v=document.createElement("input");v.setAttribute("value",e||""),v.style.marginLeft="4px",v.style.width=m!=null?m+"px":"180px";var w=mxUtils$1.button(t,function(){(s==null||s(v.value))&&(o&&r.hideDialog(),i(v.value))});if(w.className="geBtn gePrimaryBtn",this.init=function(){if(!(n==null&&l!=null)&&(v.focus(),mxClient.IS_GC||mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?v.select():document.execCommand("selectAll",!1,null),Graph$1.fileSupport)){var L=f.parentNode;if(L!=null){r.editor.graph;var k=null;mxEvent$1.addListener(L,"dragleave",function(G){k!=null&&(k.style.backgroundColor="",k=null),G.stopPropagation(),G.preventDefault()}),mxEvent$1.addListener(L,"dragover",mxUtils$1.bind(this,function(G){k==null&&(!mxClient.IS_IE||document.documentMode>10)&&(k=v,k.style.backgroundColor="#ebf2f9"),G.stopPropagation(),G.preventDefault()})),mxEvent$1.addListener(L,"drop",mxUtils$1.bind(this,function(G){k!=null&&(k.style.backgroundColor="",k=null),mxUtils$1.indexOf(G.dataTransfer.types,"text/uri-list")>=0&&(v.value=decodeURIComponent(G.dataTransfer.getData("text/uri-list")),w.click()),G.stopPropagation(),G.preventDefault()}))}}},c=document.createElement("td"),c.style.whiteSpace="nowrap",c.appendChild(v),g.appendChild(c),(n!=null||l==null)&&(C.appendChild(g),d!=null)){if(r.editor.diagramFileTypes!=null){var S=FilenameDialog$1.createFileTypes(r,v,r.editor.diagramFileTypes);S.style.marginLeft="6px",S.style.width="74px",c.appendChild(S),v.style.width=m!=null?m-40+"px":"140px"}c.appendChild(FilenameDialog$1.createTypeHint(r,v,d))}l!=null&&(g=document.createElement("tr"),c=document.createElement("td"),c.colSpan=2,c.appendChild(l),g.appendChild(c),C.appendChild(g)),g=document.createElement("tr"),c=document.createElement("td"),c.colSpan=2,c.style.paddingTop="20px",c.style.whiteSpace="nowrap",c.setAttribute("align","right");var T=mxUtils$1.button(mxResources$1.get("cancel"),function(){r.hideDialog(),h?.()});if(T.className="geBtn",r.editor.cancelFirst&&c.appendChild(T),a!=null){var P=mxUtils$1.button(mxResources$1.get("help"),function(){r.editor.graph.openLink(a)});P.className="geBtn",c.appendChild(P)}mxEvent$1.addListener(v,"keypress",function(L){L.keyCode==13&&w.click()}),c.appendChild(w),r.editor.cancelFirst||c.appendChild(T),g.appendChild(c),C.appendChild(g),f.appendChild(C),this.container=f}FilenameDialog$1.filenameHelpLink=null;FilenameDialog$1.createTypeHint=function(r,e,t){var i=document.createElement("img");i.style.cssText="vertical-align:top;height:16px;width:16px;margin-left:4px;background-repeat:no-repeat;background-position:center bottom;cursor:pointer;",mxUtils$1.setOpacity(i,70);var n=function(){i.setAttribute("src",Editor$1.helpImage),i.setAttribute("title",mxResources$1.get("help"));for(var s=0;s<t.length;s++)if(t[s].ext.length>0&&e.value.toLowerCase().substring(e.value.length-t[s].ext.length-1)=="."+t[s].ext){i.setAttribute("src",mxClient.imageBasePath+"/warning.png"),i.setAttribute("title",mxResources$1.get(t[s].title));break}};return mxEvent$1.addListener(e,"keyup",n),mxEvent$1.addListener(e,"change",n),mxEvent$1.addListener(i,"click",function(s){var l=i.getAttribute("title");i.getAttribute("src")==Editor$1.helpImage?r.editor.graph.openLink(FilenameDialog$1.filenameHelpLink):l!=""&&r.showError(null,l,mxResources$1.get("help"),function(){r.editor.graph.openLink(FilenameDialog$1.filenameHelpLink)},null,mxResources$1.get("ok"),null,null,null,340,90),mxEvent$1.consume(s)}),n(),i};FilenameDialog$1.createFileTypes=function(r,e,t){for(var i=document.createElement("select"),n=0;n<t.length;n++){var s=document.createElement("option");s.setAttribute("value",n),mxUtils$1.write(s,mxResources$1.get(t[n].description)+" (."+t[n].extension+")"),i.appendChild(s)}mxEvent$1.addListener(i,"change",function(a){var o=t[i.value].extension,h=e.value.lastIndexOf(".");if(h>0){var o=t[i.value].extension;e.value=e.value.substring(0,h+1)+o}else e.value=e.value+"."+o;if("createEvent"in document){var d=document.createEvent("HTMLEvents");d.initEvent("change",!1,!0),e.dispatchEvent(d)}else e.fireEvent("onchange")});var l=function(a){var o=e.value.lastIndexOf("."),h=0;if(o>0){for(var d=e.value.toLowerCase().substring(o+1),m=0;m<t.length;m++)if(d==t[m].extension){h=m;break}}i.value=h};return mxEvent$1.addListener(e,"change",l),mxEvent$1.addListener(e,"keyup",l),l(),i};(function(){mxGraphView.prototype.validateBackgroundPage=function(){var l=this.graph;if(l.container!=null&&!l.transparentBackground){if(l.pageVisible){var a=this.getBackgroundPageBounds();if(this.backgroundPageShape==null){for(var o=l.container.firstChild;o!=null&&o.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)o=o.nextSibling;o!=null&&(this.backgroundPageShape=this.createBackgroundPageShape(a),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!mxClient.IS_QUIRKS,this.backgroundPageShape.dialect=mxConstants$1.DIALECT_STRICTHTML,this.backgroundPageShape.init(l.container),o.style.position="absolute",l.container.insertBefore(this.backgroundPageShape.node,o),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent$1.addListener(this.backgroundPageShape.node,"dblclick",mxUtils$1.bind(this,function(h){l.dblClick(h)})),mxEvent$1.addGestureListeners(this.backgroundPageShape.node,mxUtils$1.bind(this,function(h){l.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(h))}),mxUtils$1.bind(this,function(h){l.tooltipHandler!=null&&l.tooltipHandler.isHideOnHover()&&l.tooltipHandler.hide(),l.isMouseDown&&!mxEvent$1.isConsumed(h)&&l.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(h))}),mxUtils$1.bind(this,function(h){l.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(h))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=a,this.backgroundPageShape.redraw()}else this.backgroundPageShape!=null&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(){var l=this.graph,a=l.background==null||l.background==mxConstants$1.NONE?l.defaultPageBackgroundColor:l.background,o=a!=null&&this.gridColor!=a.toLowerCase()?this.gridColor:"#ffffff",h="none",d="";if(l.isGridEnabled()){var m=10;mxClient.IS_SVG?(h=unescape(encodeURIComponent(this.createSvgGrid(o))),h=window.btoa?btoa(h):Base64.encode(h,!0),h="url(data:image/svg+xml;base64,"+h+")",m=l.gridSize*this.scale*this.gridSteps):h="url("+this.gridImage+")";var g=0,c=0;if(l.view.backgroundPageShape!=null){var f=this.getBackgroundPageBounds();g=1+f.x,c=1+f.y}d=-Math.round(m-mxUtils$1.mod(this.translate.x*this.scale-g,m))+"px "+-Math.round(m-mxUtils$1.mod(this.translate.y*this.scale-c,m))+"px"}var C=l.view.canvas;C.ownerSVGElement!=null&&(C=C.ownerSVGElement),l.view.backgroundPageShape!=null?(l.view.backgroundPageShape.node.style.backgroundPosition=d,l.view.backgroundPageShape.node.style.backgroundImage=h,l.view.backgroundPageShape.node.style.backgroundColor=a,l.container.className="geDiagramContainer geDiagramBackdrop",C.style.backgroundImage="none",C.style.backgroundColor=""):(l.container.className="geDiagramContainer",C.style.backgroundPosition=d,C.style.backgroundColor=a,C.style.backgroundImage=h)},mxGraphView.prototype.createSvgGrid=function(l){for(var a=this.graph.gridSize*this.scale;a<this.minGridSize;)a*=2;for(var o=this.gridSteps*a,h=[],d=1;d<this.gridSteps;d++){var m=d*a;h.push("M 0 "+m+" L "+o+" "+m+" M "+m+" 0 L "+m+" "+o)}var g=o,c='<svg width="'+g+'" height="'+g+'" xmlns="'+mxConstants$1.NS_SVG+'"><defs><pattern id="grid" width="'+o+'" height="'+o+'" patternUnits="userSpaceOnUse"><path d="'+h.join(" ")+'" fill="none" stroke="'+l+'" opacity="0.2" stroke-width="1"/><path d="M '+o+" 0 L 0 0 0 "+o+'" fill="none" stroke="'+l+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>';return c};var r=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(l,a){if(r.apply(this,arguments),this.shiftPreview1!=null){var o=this.view.canvas;o.ownerSVGElement!=null&&(o=o.ownerSVGElement);var h=this.gridSize*this.view.scale*this.view.gridSteps,d=-Math.round(h-mxUtils$1.mod(this.view.translate.x*this.view.scale+l,h))+"px "+-Math.round(h-mxUtils$1.mod(this.view.translate.y*this.view.scale+a,h))+"px";o.style.backgroundPosition=d}},mxGraph.prototype.updatePageBreaks=function(l,a,o){var h=this.view.scale,d=this.view.translate,m=this.pageFormat,g=h*this.pageScale,c=this.view.getBackgroundPageBounds();a=c.width,o=c.height;var f=new mxRectangle(h*d.x,h*d.y,m.width*g,m.height*g);l=l&&Math.min(f.width,f.height)>this.minPageBreakDist;var C=l?Math.ceil(o/f.height)-1:0,v=l?Math.ceil(a/f.width)-1:0,w=c.x+a,S=c.y+o;this.horizontalPageBreaks==null&&C>0&&(this.horizontalPageBreaks=[]),this.verticalPageBreaks==null&&v>0&&(this.verticalPageBreaks=[]);var T=mxUtils$1.bind(this,function(P){if(P!=null){for(var L=P==this.horizontalPageBreaks?C:v,k=0;k<=L;k++){var G=P==this.horizontalPageBreaks?[new mxPoint(Math.round(c.x),Math.round(c.y+(k+1)*f.height)),new mxPoint(Math.round(w),Math.round(c.y+(k+1)*f.height))]:[new mxPoint(Math.round(c.x+(k+1)*f.width),Math.round(c.y)),new mxPoint(Math.round(c.x+(k+1)*f.width),Math.round(S))];if(P[k]!=null)P[k].points=G,P[k].redraw();else{var Y=new mxPolyline(G,this.pageBreakColor);Y.dialect=this.dialect,Y.isDashed=this.pageBreakDashed,Y.pointerEvents=!1,Y.init(this.view.backgroundPane),Y.redraw(),P[k]=Y}}for(var k=L;k<P.length;k++)P[k].destroy();P.splice(L,P.length-L)}});T(this.horizontalPageBreaks),T(this.verticalPageBreaks)};var e=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(l,a,o){for(var h=0;h<a.length;h++){if(this.graph.isTableCell(a[h])||this.graph.isTableRow(a[h]))return!1;if(this.graph.getModel().isVertex(a[h])){var d=this.graph.getCellGeometry(a[h]);if(d!=null&&d.relative)return!1}}return e.apply(this,arguments)};var t=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var l=t.apply(this,arguments);return l.intersects=mxUtils$1.bind(this,function(a,o){return this.isConnecting()?!0:mxCellMarker.prototype.intersects.apply(l,arguments)}),l},mxGraphView.prototype.createBackgroundPageShape=function(l){return new mxRectangleShape(l,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var l=this.getGraphBounds(),a=l.width>0?l.x/this.scale-this.translate.x:0,o=l.height>0?l.y/this.scale-this.translate.y:0,h=l.width/this.scale,d=l.height/this.scale,m=this.graph.pageFormat,g=this.graph.pageScale,c=m.width*g,f=m.height*g,C=Math.floor(Math.min(0,a)/c),v=Math.floor(Math.min(0,o)/f),w=Math.ceil(Math.max(1,a+h)/c),S=Math.ceil(Math.max(1,o+d)/f),T=w-C,P=S-v,L=new mxRectangle(this.scale*(this.translate.x+C*c),this.scale*(this.translate.y+v*f),this.scale*T*c,this.scale*P*f);return L};var i=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(l,a){i.apply(this,arguments),this.dialect!=mxConstants$1.DIALECT_SVG&&this.view.backgroundPageShape!=null&&(!this.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.container))&&(this.view.backgroundPageShape.node.style.marginLeft=l+"px",this.view.backgroundPageShape.node.style.marginTop=a+"px")};var n=mxPopupMenu.prototype.addItem;mxPopupMenu.prototype.addItem=function(l,a,o,h,d,m){var g=n.apply(this,arguments);return m!=null&&!m&&mxEvent$1.addListener(g,"mousedown",function(c){mxEvent$1.consume(c)}),g};var s=mxGraphHandler.prototype.isPropagateSelectionCell;mxGraphHandler.prototype.isPropagateSelectionCell=function(l,a,o){var h=!1,d=this.graph.model.getParent(l);if(a){var m=this.graph.model.isEdge(l)?null:this.graph.getCellGeometry(l);h=!this.graph.model.isEdge(d)&&!this.graph.isSiblingSelected(l)&&(m!=null&&m.relative||!this.graph.isContainer(d)||this.graph.isPart(l))}else if(h=s.apply(this,arguments),this.graph.isTableCell(l)||this.graph.isTableRow(l)){var g=d;this.graph.isTable(g)||(g=this.graph.model.getParent(g)),h=!this.graph.selectionCellsHandler.isHandled(g)||this.graph.isCellSelected(g)&&this.graph.isToggleEvent(o.getEvent())||this.graph.isCellSelected(l)&&!this.graph.isToggleEvent(o.getEvent())||this.graph.isTableCell(l)&&this.graph.isCellSelected(d)}return h},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(l){for(var a=l.getCell(),o=this.graph.getModel(),h=o.getParent(a),d=this.graph.view.getState(h),m=this.graph.isCellSelected(a);d!=null&&(o.isVertex(h)||o.isEdge(h));){var g=this.graph.isCellSelected(h);m=m||g,(g||!m&&(this.graph.isTableCell(a)||this.graph.isTableRow(a)))&&(a=h),h=o.getParent(h)}return a}})();function Format(r,e){this.editorUi=r,this.container=e}Format.prototype.labelIndex=0;Format.prototype.diagramIndex=0;Format.prototype.currentIndex=0;Format.prototype.showCloseButton=!0;Format.prototype.inactiveTabBackgroundColor="#f1f3f4";Format.prototype.roundableShapes=["label","rectangle","internalStorage","corner","parallelogram","swimlane","triangle","trapezoid","ext","step","tee","process","link","rhombus","offPageConnector","loopLimit","hexagon","manualInput","card","curlyBracket","singleArrow","callout","doubleArrow","flexArrow","umlLifeline"];Format.prototype.init=function(){var r=this.editorUi,e=r.editor,t=e.graph;this.update=mxUtils$1.bind(this,function(i,n){this.clearSelectionState(),this.refresh()}),t.getSelectionModel().addListener(mxEvent$1.CHANGE,this.update),t.addListener(mxEvent$1.EDITING_STARTED,this.update),t.addListener(mxEvent$1.EDITING_STOPPED,this.update),t.getModel().addListener(mxEvent$1.CHANGE,this.update),t.addListener(mxEvent$1.ROOT,mxUtils$1.bind(this,function(){this.refresh()})),r.addListener("styleChanged",mxUtils$1.bind(this,function(i,n){this.refresh()})),e.addListener("autosaveChanged",mxUtils$1.bind(this,function(){this.refresh()})),this.refresh()};Format.prototype.clearSelectionState=function(){this.selectionState=null};Format.prototype.getSelectionState=function(){return this.selectionState==null&&(this.selectionState=this.createSelectionState()),this.selectionState};Format.prototype.createSelectionState=function(){for(var r=this.editorUi.editor.graph.getSelectionCells(),e=this.initSelectionState(),t=0;t<r.length;t++)this.updateSelectionStateForCell(e,r[t],r);return e};Format.prototype.initSelectionState=function(){return{vertices:[],edges:[],x:null,y:null,width:null,height:null,style:{},containsImage:!1,containsLabel:!1,fill:!0,glass:!0,rounded:!0,autoSize:!1,image:!0,shadow:!0,lineJumps:!0,resizable:!0,table:!1,cell:!1,row:!1,movable:!0,rotatable:!0,stroke:!0}};Format.prototype.updateSelectionStateForCell=function(r,e,t){var i=this.editorUi.editor.graph;if(i.getModel().isVertex(e)){r.resizable=r.resizable&&i.isCellResizable(e),r.rotatable=r.rotatable&&i.isCellRotatable(e),r.movable=r.movable&&i.isCellMovable(e)&&!i.isTableRow(e)&&!i.isTableCell(e),r.table=r.table||i.isTable(e),r.cell=r.cell||i.isTableCell(e),r.row=r.row||i.isTableRow(e),r.vertices.push(e);var n=i.getCellGeometry(e);if(n!=null&&(n.width>0?r.width==null?r.width=n.width:r.width!=n.width&&(r.width=""):r.containsLabel=!0,n.height>0?r.height==null?r.height=n.height:r.height!=n.height&&(r.height=""):r.containsLabel=!0,!n.relative||n.offset!=null)){var s=n.relative?n.offset.x:n.x,l=n.relative?n.offset.y:n.y;r.x==null?r.x=s:r.x!=s&&(r.x=""),r.y==null?r.y=l:r.y!=l&&(r.y="")}}else i.getModel().isEdge(e)&&(r.edges.push(e),r.resizable=!1,r.rotatable=!1,r.movable=!1);var a=i.view.getState(e);if(a!=null){r.autoSize=r.autoSize||this.isAutoSizeState(a),r.glass=r.glass&&this.isGlassState(a),r.rounded=r.rounded&&this.isRoundedState(a),r.lineJumps=r.lineJumps&&this.isLineJumpState(a),r.image=r.image&&this.isImageState(a),r.shadow=r.shadow&&this.isShadowState(a),r.fill=r.fill&&this.isFillState(a),r.stroke=r.stroke&&this.isStrokeState(a);var o=mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null);r.containsImage=r.containsImage||o=="image";for(var h in a.style){var d=a.style[h];d!=null&&(r.style[h]==null?r.style[h]=d:r.style[h]!=d&&(r.style[h]=""))}}};Format.prototype.isFillState=function(r){return!this.isSpecialColor(r.style[mxConstants$1.STYLE_FILLCOLOR])&&(r.view.graph.model.isVertex(r.cell)||mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null)=="arrow"||mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null)=="filledEdge"||mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null)=="flexArrow")};Format.prototype.isStrokeState=function(r){return!this.isSpecialColor(r.style[mxConstants$1.STYLE_STROKECOLOR])};Format.prototype.isSpecialColor=function(r){return mxUtils$1.indexOf([mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.STYLE_FILLCOLOR,"inherit","swimlane","indicated"],r)>=0};Format.prototype.isGlassState=function(r){var e=mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null);return e=="label"||e=="rectangle"||e=="internalStorage"||e=="ext"||e=="umlLifeline"||e=="swimlane"||e=="process"};Format.prototype.isRoundedState=function(r){return r.shape!=null?r.shape.isRoundable():mxUtils$1.indexOf(this.roundableShapes,mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null))>=0};Format.prototype.isLineJumpState=function(r){var e=mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null),t=mxUtils$1.getValue(r.style,mxConstants$1.STYLE_CURVED,!1);return!t&&(e=="connector"||e=="filledEdge")};Format.prototype.isAutoSizeState=function(r){return mxUtils$1.getValue(r.style,mxConstants$1.STYLE_AUTOSIZE,null)=="1"};Format.prototype.isImageState=function(r){var e=mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null);return e=="label"||e=="image"};Format.prototype.isShadowState=function(r){var e=mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null);return e!="image"};Format.prototype.clear=function(){if(this.container.innerHTML="",this.panels!=null)for(var r=0;r<this.panels.length;r++)this.panels[r].destroy();this.panels=[]};Format.prototype.refresh=function(){if(this.container.style.width!="0px"){this.clear();var r=this.editorUi,e=r.editor.graph,t=document.createElement("div");t.style.whiteSpace="nowrap",t.style.color="rgb(112, 112, 112)",t.style.textAlign="left",t.style.cursor="default";var i=document.createElement("div");i.className="geFormatSection",i.style.textAlign="center",i.style.fontWeight="bold",i.style.paddingTop="8px",i.style.fontSize="13px",i.style.borderWidth="0px 0px 1px 1px",i.style.borderStyle="solid",i.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",i.style.height=mxClient.IS_QUIRKS?"34px":"25px",i.style.overflow="hidden",i.style.width="100%",this.container.appendChild(t),mxEvent$1.addListener(i,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(v){v.preventDefault()}));var n=this.getSelectionState().containsLabel,s=null,l=null,a=mxUtils$1.bind(this,function(v,w,S){var T=mxUtils$1.bind(this,function(P){s!=v&&(n?this.labelIndex=S:e.isSelectionEmpty()?this.diagramIndex=S:this.currentIndex=S,s!=null&&(s.style.backgroundColor=this.inactiveTabBackgroundColor,s.style.borderBottomWidth="1px"),s=v,s.style.backgroundColor="",s.style.borderBottomWidth="0px",l!=w&&(l!=null&&(l.style.display="none"),l=w,l.style.display=""))});mxEvent$1.addListener(v,"click",T),mxEvent$1.addListener(v,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(P){P.preventDefault()})),S==(n?this.labelIndex:e.isSelectionEmpty()?this.diagramIndex:this.currentIndex)&&T()}),o=0;if(e.isSelectionEmpty()){mxUtils$1.write(i,mxResources$1.get("diagram")),i.style.borderLeftWidth="0px",t.appendChild(i);var h=t.cloneNode(!1);if(this.panels.push(new DiagramFormatPanel(this,r,h)),this.container.appendChild(h),Editor$1.styles!=null){h.style.display="none",i.style.width=this.showCloseButton?"106px":"50%",i.style.cursor="pointer",i.style.backgroundColor=this.inactiveTabBackgroundColor;var d=i.cloneNode(!1);d.style.borderLeftWidth="1px",d.style.borderRightWidth="1px",d.style.backgroundColor=this.inactiveTabBackgroundColor,a(i,h,o++);var m=t.cloneNode(!1);m.style.display="none",mxUtils$1.write(d,mxResources$1.get("style")),t.appendChild(d),this.panels.push(new DiagramStylePanel(this,r,m)),this.container.appendChild(m),a(d,m,o++)}if(this.showCloseButton){var d=i.cloneNode(!1);d.style.borderLeftWidth="1px",d.style.borderRightWidth="1px",d.style.borderBottomWidth="1px",d.style.backgroundColor=this.inactiveTabBackgroundColor,d.style.position="absolute",d.style.right="0px",d.style.top="0px",d.style.width="25px";var g=document.createElement("img");g.setAttribute("border","0"),g.setAttribute("src",Dialog$1.prototype.closeImage),g.setAttribute("title",mxResources$1.get("hide")),g.style.position="absolute",g.style.display="block",g.style.right="0px",g.style.top="8px",g.style.cursor="pointer",g.style.marginTop="1px",g.style.marginRight="6px",g.style.border="1px solid transparent",g.style.padding="1px",g.style.opacity=.5,d.appendChild(g),mxEvent$1.addListener(g,"click",function(){r.actions.get("formatPanel").funct()}),t.appendChild(d)}}else if(e.isEditing())mxUtils$1.write(i,mxResources$1.get("text")),t.appendChild(i),this.panels.push(new TextFormatPanel(this,r,t));else{i.style.backgroundColor=this.inactiveTabBackgroundColor,i.style.borderLeftWidth="1px",i.style.cursor="pointer",i.style.width=n?"50%":"33.3%";var d=i.cloneNode(!1),c=d.cloneNode(!1);if(d.style.backgroundColor=this.inactiveTabBackgroundColor,c.style.backgroundColor=this.inactiveTabBackgroundColor,n)d.style.borderLeftWidth="0px";else{i.style.borderLeftWidth="0px",mxUtils$1.write(i,mxResources$1.get("style")),t.appendChild(i);var m=t.cloneNode(!1);m.style.display="none",this.panels.push(new StyleFormatPanel$1(this,r,m)),this.container.appendChild(m),a(i,m,o++)}mxUtils$1.write(d,mxResources$1.get("text")),t.appendChild(d);var f=t.cloneNode(!1);f.style.display="none",this.panels.push(new TextFormatPanel(this,r,f)),this.container.appendChild(f),mxUtils$1.write(c,mxResources$1.get("arrange")),t.appendChild(c);var C=t.cloneNode(!1);C.style.display="none",this.panels.push(new ArrangePanel(this,r,C)),this.container.appendChild(C),a(d,f,o++),a(c,C,o++)}}};class BaseFormatPanel{constructor(e,t,i){this.format=e,this.editorUi=t,this.container=i,this.listeners=[]}}BaseFormatPanel.prototype.buttonBackgroundColor="white";BaseFormatPanel.prototype.getSelectionState=function(){for(var r=this.editorUi.editor.graph,e=r.getSelectionCells(),t=null,i=0;i<e.length;i++){var n=r.view.getState(e[i]);if(n!=null){var s=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SHAPE,null);if(s!=null){if(t==null)t=s;else if(t!=s)return null}}}return t};BaseFormatPanel.prototype.installInputHandler=function(r,e,t,i,n,s,l,a){s=s??"",a=a??!1;var o=this.editorUi,h=o.editor.graph;i=i??1,n=n??999;var d=null,m=!1,g=mxUtils$1.bind(this,function(c){var f=a?parseFloat(r.value):parseInt(r.value);if(!isNaN(f)&&e==mxConstants$1.STYLE_ROTATION&&(f=mxUtils$1.mod(Math.round(f*100),36e3)/100),f=Math.min(n,Math.max(i,isNaN(f)?t:f)),h.cellEditor.isContentEditing()&&l)m||(m=!0,d!=null&&(h.cellEditor.restoreSelection(d),d=null),l(f),r.value=f+s,m=!1);else if(f!=mxUtils$1.getValue(this.format.getSelectionState().style,e,t)){h.isEditing()&&h.stopEditing(!0),h.getModel().beginUpdate();try{var C=h.getSelectionCells();h.setCellStyles(e,f,C),e==mxConstants$1.STYLE_FONTSIZE&&h.updateLabelElements(h.getSelectionCells(),function(w){w.style.fontSize=f+"px",w.removeAttribute("size")});for(var v=0;v<C.length;v++)h.model.getChildCount(C[v])==0&&h.autoSizeCell(C[v],!1);o.fireEvent(new mxEventObject$1("styleChanged","keys",[e],"values",[f],"cells",C))}finally{h.getModel().endUpdate()}}r.value=f+s,mxEvent$1.consume(c)});return l&&h.cellEditor.isContentEditing()&&(mxEvent$1.addListener(r,"mousedown",function(){document.activeElement==h.cellEditor.textarea&&(d=h.cellEditor.saveSelection())}),mxEvent$1.addListener(r,"touchstart",function(){document.activeElement==h.cellEditor.textarea&&(d=h.cellEditor.saveSelection())})),mxEvent$1.addListener(r,"change",g),mxEvent$1.addListener(r,"blur",g),g};BaseFormatPanel.prototype.createPanel=function(){var r=document.createElement("div");return r.className="geFormatSection",r.style.padding="12px 0px 12px 18px",r};BaseFormatPanel.prototype.createTitle=function(r){var e=document.createElement("div");return e.style.padding="0px 0px 6px 0px",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.width="200px",e.style.fontWeight="bold",mxUtils$1.write(e,r),e};BaseFormatPanel.prototype.createStepper=function(r,e,t,i,n,s,l){t=t??1,i=i??8,mxClient.IS_QUIRKS?i=i-2:(mxClient.IS_MT||document.documentMode>=8)&&(i=i+1);var a=document.createElement("div");mxUtils$1.setPrefixedStyle(a.style,"borderRadius","3px"),a.style.border="1px solid rgb(192, 192, 192)",a.style.position="absolute";var o=document.createElement("div");o.style.borderBottom="1px solid rgb(192, 192, 192)",o.style.position="relative",o.style.height=i+"px",o.style.width="10px",o.className="geBtnUp",a.appendChild(o);var h=o.cloneNode(!1);if(h.style.border="none",h.style.height=i+"px",h.className="geBtnDown",a.appendChild(h),mxEvent$1.addListener(h,"click",function(m){r.value==""&&(r.value=s||"2");var g=l?parseFloat(r.value):parseInt(r.value);isNaN(g)||(r.value=g-t,e?.(m)),mxEvent$1.consume(m)}),mxEvent$1.addListener(o,"click",function(m){r.value==""&&(r.value=s||"0");var g=l?parseFloat(r.value):parseInt(r.value);isNaN(g)||(r.value=g+t,e?.(m)),mxEvent$1.consume(m)}),n){var d=null;mxEvent$1.addGestureListeners(a,function(m){(mxClient.IS_QUIRKS||document.documentMode==8)&&(d=document.selection.createRange()),mxEvent$1.consume(m)},null,function(m){if(d!=null){try{d.select()}catch{}d=null,mxEvent$1.consume(m)}})}return a};BaseFormatPanel.prototype.createOption=function(r,e,t,i,n){var s=document.createElement("div");s.style.padding="6px 0px 1px 0px",s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.width="200px",s.style.height=mxClient.IS_QUIRKS?"27px":"18px";var l=document.createElement("input");l.setAttribute("type","checkbox"),l.style.margin="0px 6px 0px 0px",s.appendChild(l);var a=document.createElement("span");mxUtils$1.write(a,r),s.appendChild(a);var o=!1,h=e(),d=function(m){o||(o=!0,m?(l.setAttribute("checked","checked"),l.defaultChecked=!0,l.checked=!0):(l.removeAttribute("checked"),l.defaultChecked=!1,l.checked=!1),h!=m&&(h=m,e()!=h&&t(h)),o=!1)};return mxEvent$1.addListener(s,"click",function(m){if(l.getAttribute("disabled")!="disabled"){var g=mxEvent$1.getSource(m);(g==s||g==a)&&(l.checked=!l.checked),d(l.checked)}}),d(h),i!=null&&(i.install(d),this.listeners.push(i)),n?.(s),s};BaseFormatPanel.prototype.createCellOption=function(r,e,t,i,n,s,l,a){i=i!=null?i=="null"?null:i:"1",n=n!=null?n=="null"?null:n:"0";var o=this.editorUi,h=o.editor,d=h.graph;return this.createOption(r,function(){var m=d.view.getState(d.getSelectionCell());return m!=null?mxUtils$1.getValue(m.style,e,t)!=n:null},function(m){if(a&&d.stopEditing(),l!=null)l.funct();else{d.getModel().beginUpdate();try{var g=m?i:n;d.setCellStyles(e,g,d.getSelectionCells()),s?.(d.getSelectionCells(),g),o.fireEvent(new mxEventObject$1("styleChanged","keys",[e],"values",[g],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}},{install:function(m){this.listener=function(){var g=d.view.getState(d.getSelectionCell());g!=null&&m(mxUtils$1.getValue(g.style,e,t)!=n)},d.getModel().addListener(mxEvent$1.CHANGE,this.listener)},destroy:function(){d.getModel().removeListener(this.listener)}})};BaseFormatPanel.prototype.createColorOption=function(r,e,t,i,n,s,l){var a=document.createElement("div");a.style.padding="6px 0px 1px 0px",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.width="200px",a.style.height=mxClient.IS_QUIRKS?"27px":"18px";var o=document.createElement("input");o.setAttribute("type","checkbox"),o.style.margin="0px 6px 0px 0px",l||a.appendChild(o);var h=document.createElement("span");mxUtils$1.write(h,r),a.appendChild(h);var d=e(),m=!1,g=null,c=function(f,C,v){m||(m=!0,f=/(^#?[a-zA-Z0-9]*$)/.test(f)?f:i,g.innerHTML='<div style="width:'+(mxClient.IS_QUIRKS?"30":"36")+"px;height:12px;margin:3px;border:1px solid black;background-color:"+mxUtils$1.htmlEntities(f!=null&&f!=mxConstants$1.NONE?f:i)+';"></div>',(mxClient.IS_QUIRKS||document.documentMode==8)&&(g.firstChild.style.margin="0px"),f!=null&&f!=mxConstants$1.NONE?(o.setAttribute("checked","checked"),o.defaultChecked=!0,o.checked=!0):(o.removeAttribute("checked"),o.defaultChecked=!1,o.checked=!1),g.style.display=o.checked||l?"":"none",s?.(f),C||(d=f,(v||l||e()!=d)&&t(d)),m=!1)};return g=mxUtils$1.button("",mxUtils$1.bind(this,function(f){this.editorUi.pickColor(d,function(C){c(C,null,!0)}),mxEvent$1.consume(f)})),g.style.position="absolute",g.style.marginTop="-4px",g.style.right=mxClient.IS_QUIRKS?"0px":"20px",g.style.height="22px",g.className="geColorBtn",g.style.display=o.checked||l?"":"none",a.appendChild(g),mxEvent$1.addListener(a,"click",function(f){var C=mxEvent$1.getSource(f);(C==o||C.nodeName!="INPUT")&&(C!=o&&(o.checked=!o.checked),!o.checked&&d!=null&&d!=mxConstants$1.NONE&&i!=mxConstants$1.NONE&&(i=d),c(o.checked?i:mxConstants$1.NONE))}),c(d,!0),n!=null&&(n.install(c),this.listeners.push(n)),a};BaseFormatPanel.prototype.createCellColorOption=function(r,e,t,i,n){var s=this.editorUi,l=s.editor,a=l.graph;return this.createColorOption(r,function(){var o=a.view.getState(a.getSelectionCell());return o!=null?mxUtils$1.getValue(o.style,e,null):null},function(o){a.getModel().beginUpdate();try{a.setCellStyles(e,o,a.getSelectionCells()),n?.(o),s.fireEvent(new mxEventObject$1("styleChanged","keys",[e],"values",[o],"cells",a.getSelectionCells()))}finally{a.getModel().endUpdate()}},t||mxConstants$1.NONE,{install:function(o){this.listener=function(){var h=a.view.getState(a.getSelectionCell());h!=null&&o(mxUtils$1.getValue(h.style,e,null))},a.getModel().addListener(mxEvent$1.CHANGE,this.listener)},destroy:function(){a.getModel().removeListener(this.listener)}},i)};BaseFormatPanel.prototype.addArrow=function(r,e){e=e??10;var t=document.createElement("div");t.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",t.style.padding="6px",t.style.paddingRight="4px";var i=10-e;i==2?t.style.paddingTop="6px":i>0?t.style.paddingTop=6-i+"px":t.style.marginTop="-2px",t.style.height=e+"px",t.style.borderLeft="1px solid #a0a0a0",t.innerHTML='<img border="0" src="'+(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHBJREFUeNpidHB2ZyAGsACxDRBPIKCuA6TwCBB/h2rABu4A8SYmKCcXiP/iUFgAxL9gCi8A8SwsirZCMQMTkmANEH9E4v+CmsaArvAdyNFI/FlQ92EoBIE+qCRIUz168DBgsU4OqhinQpgHMABAgAEALY4XLIsJ20oAAAAASUVORK5CYII=":IMAGE_PATH+"/dropdown.png")+'" style="margin-bottom:4px;">',mxUtils$1.setOpacity(t,70);var n=r.getElementsByTagName("div")[0];return n!=null&&(n.style.paddingRight="6px",n.style.marginLeft="4px",n.style.marginTop="-1px",n.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",mxUtils$1.setOpacity(n,60)),mxUtils$1.setOpacity(r,100),r.style.border="1px solid #a0a0a0",r.style.backgroundColor=this.buttonBackgroundColor,r.style.backgroundImage="none",r.style.width="auto",r.className+=" geColorBtn",mxUtils$1.setPrefixedStyle(r.style,"borderRadius","3px"),r.appendChild(t),n};BaseFormatPanel.prototype.addUnitInput=function(r,e,t,i,n,s,l,a,o){l=l??0;var h=document.createElement("input");h.style.position="absolute",h.style.textAlign="right",h.style.marginTop="-2px",h.style.right=t+12+"px",h.style.width=i+"px",r.appendChild(h);var d=this.createStepper(h,n,s,null,a,null,o);return d.style.marginTop=l-2+"px",d.style.right=t+"px",r.appendChild(d),h};BaseFormatPanel.prototype.createRelativeOption=function(r,e,t,i,n){t=t??44;var s=this.editorUi.editor.graph,l=this.createPanel();l.style.paddingTop="10px",l.style.paddingBottom="10px",mxUtils$1.write(l,r),l.style.fontWeight="bold";var a=mxUtils$1.bind(this,function(d){if(i!=null)i(o);else{var m=parseInt(o.value);m=Math.min(100,Math.max(0,isNaN(m)?100:m));var g=s.view.getState(s.getSelectionCell());g!=null&&m!=mxUtils$1.getValue(g.style,e,100)&&(m==100&&(m=null),s.setCellStyles(e,m,s.getSelectionCells()),this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",[e],"values",[m],"cells",s.getSelectionCells()))),o.value=(m??"100")+" %"}mxEvent$1.consume(d)}),o=this.addUnitInput(l,"%",20,t,a,10,-15,i!=null);if(e!=null){var h=mxUtils$1.bind(this,function(d,m,g){if(g||o!=document.activeElement){var c=this.format.getSelectionState(),f=parseInt(mxUtils$1.getValue(c.style,e,100));o.value=isNaN(f)?"":f+" %"}});mxEvent$1.addListener(o,"keydown",function(d){d.keyCode==13?(s.container.focus(),mxEvent$1.consume(d)):d.keyCode==27&&(h(null,null,!0),s.container.focus(),mxEvent$1.consume(d))}),s.getModel().addListener(mxEvent$1.CHANGE,h),this.listeners.push({destroy:function(){s.getModel().removeListener(h)}}),h()}return mxEvent$1.addListener(o,"blur",a),mxEvent$1.addListener(o,"change",a),n?.(o),l};BaseFormatPanel.prototype.addLabel=function(r,e,t,i){i=i??61;var n=document.createElement("div");mxUtils$1.write(n,e),n.style.position="absolute",n.style.right=t+"px",n.style.width=i+"px",n.style.marginTop="6px",n.style.textAlign="center",r.appendChild(n)};BaseFormatPanel.prototype.addKeyHandler=function(r,e){mxEvent$1.addListener(r,"keydown",mxUtils$1.bind(this,function(t){t.keyCode==13?(this.editorUi.editor.graph.container.focus(),mxEvent$1.consume(t)):t.keyCode==27&&(e?.(null,null,!0),this.editorUi.editor.graph.container.focus(),mxEvent$1.consume(t))}))};BaseFormatPanel.prototype.styleButtons=function(r){for(var e=0;e<r.length;e++)mxUtils$1.setPrefixedStyle(r[e].style,"borderRadius","3px"),mxUtils$1.setOpacity(r[e],100),r[e].style.border="1px solid #a0a0a0",r[e].style.padding="4px",r[e].style.paddingTop="3px",r[e].style.paddingRight="1px",r[e].style.margin="1px",r[e].style.width="24px",r[e].style.height="20px",r[e].className+=" geColorBtn"};BaseFormatPanel.prototype.destroy=function(){if(this.listeners!=null){for(var r=0;r<this.listeners.length;r++)this.listeners[r].destroy();this.listeners=null}};class ArrangePanel extends BaseFormatPanel{constructor(e,t,i){super(e,t,i),this.init()}}ArrangePanel.prototype.init=function(){var r=this.editorUi.editor.graph,e=this.format.getSelectionState();if(this.container.appendChild(this.addLayerOps(this.createPanel())),this.addGeometry(this.container),this.addEdgeGeometry(this.container),(!e.containsLabel||e.edges.length==0)&&this.container.appendChild(this.addAngle(this.createPanel())),!e.containsLabel&&e.edges.length==0&&e.style.shape!="rectangle"&&e.style.shape!="label"&&this.container.appendChild(this.addFlip(this.createPanel())),e.vertices.length>1&&(this.container.appendChild(this.addAlign(this.createPanel())),this.container.appendChild(this.addDistribute(this.createPanel()))),(r.isTable(e.vertices[0])||r.isTableRow(e.vertices[0])||r.isTableCell(e.vertices[0]))&&this.container.appendChild(this.addTable(this.createPanel())),this.container.appendChild(this.addGroupOps(this.createPanel())),e.containsLabel){var t=document.createElement("div");t.style.width="100%",t.style.marginTop="0px",t.style.fontWeight="bold",t.style.padding="10px 0 0 18px",mxUtils$1.write(t,mxResources$1.get("style")),this.container.appendChild(t),new StyleFormatPanel$1(this.format,this.editorUi,this.container)}};ArrangePanel.prototype.addTable=function(r){var e=this.editorUi,t=e.editor,i=t.graph,n=this.format.getSelectionState();r.style.paddingTop="6px",r.style.paddingBottom="10px";var s=document.createElement("div");s.style.marginTop="2px",s.style.marginBottom="8px",s.style.fontWeight="bold",mxUtils$1.write(s,mxResources$1.get("table")),r.appendChild(s);var l=document.createElement("div");l.style.position="relative",l.style.paddingLeft="0px",l.style.borderWidth="0px",l.className="geToolbarContainer";var a=[e.toolbar.addButton("geSprite-insertcolumnbefore",mxResources$1.get("insertColumnBefore"),mxUtils$1.bind(this,function(){try{i.insertTableColumn(n.vertices[0],!0)}catch(o){e.handleError(o)}}),l),e.toolbar.addButton("geSprite-insertcolumnafter",mxResources$1.get("insertColumnAfter"),mxUtils$1.bind(this,function(){try{i.insertTableColumn(n.vertices[0],!1)}catch(o){e.handleError(o)}}),l),e.toolbar.addButton("geSprite-deletecolumn",mxResources$1.get("deleteColumn"),mxUtils$1.bind(this,function(){try{i.deleteTableColumn(n.vertices[0])}catch(o){e.handleError(o)}}),l),e.toolbar.addButton("geSprite-insertrowbefore",mxResources$1.get("insertRowBefore"),mxUtils$1.bind(this,function(){try{i.insertTableRow(n.vertices[0],!0)}catch(o){e.handleError(o)}}),l),e.toolbar.addButton("geSprite-insertrowafter",mxResources$1.get("insertRowAfter"),mxUtils$1.bind(this,function(){try{i.insertTableRow(n.vertices[0],!1)}catch(o){e.handleError(o)}}),l),e.toolbar.addButton("geSprite-deleterow",mxResources$1.get("deleteRow"),mxUtils$1.bind(this,function(){try{i.deleteTableRow(n.vertices[0])}catch(o){e.handleError(o)}}),l)];return this.styleButtons(a),r.appendChild(l),a[2].style.marginRight="9px",r};ArrangePanel.prototype.addLayerOps=function(r){var e=this.editorUi,t=mxUtils$1.button(mxResources$1.get("toFront"),function(i){e.actions.get("toFront").funct()});t.setAttribute("title",mxResources$1.get("toFront")+" ("+this.editorUi.actions.get("toFront").shortcut+")"),t.style.width="100px",t.style.marginRight="2px",r.appendChild(t);var t=mxUtils$1.button(mxResources$1.get("toBack"),function(i){e.actions.get("toBack").funct()});return t.setAttribute("title",mxResources$1.get("toBack")+" ("+this.editorUi.actions.get("toBack").shortcut+")"),t.style.width="100px",r.appendChild(t),r};ArrangePanel.prototype.addGroupOps=function(r){var e=this.editorUi,t=e.editor.graph,i=t.getSelectionCell(),n=this.format.getSelectionState(),s=0,l=null;if(r.style.paddingTop="8px",r.style.paddingBottom="6px",t.getSelectionCount()>1?(l=mxUtils$1.button(mxResources$1.get("group"),function(o){e.actions.get("group").funct()}),l.setAttribute("title",mxResources$1.get("group")+" ("+this.editorUi.actions.get("group").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",r.appendChild(l),s++):t.getSelectionCount()==1&&!t.getModel().isEdge(i)&&!t.isSwimlane(i)&&!t.isTable(i)&&!n.row&&!n.cell&&t.getModel().getChildCount(i)>0&&(l=mxUtils$1.button(mxResources$1.get("ungroup"),function(o){e.actions.get("ungroup").funct()}),l.setAttribute("title",mxResources$1.get("ungroup")+" ("+this.editorUi.actions.get("ungroup").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",r.appendChild(l),s++),n.vertices.length>0){s>0&&(mxUtils$1.br(r),s=0);var l=mxUtils$1.button(mxResources$1.get("copySize"),function(h){e.actions.get("copySize").funct()});if(l.setAttribute("title",mxResources$1.get("copySize")+" ("+this.editorUi.actions.get("copySize").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",r.appendChild(l),s++,e.copiedSize!=null){var a=mxUtils$1.button(mxResources$1.get("pasteSize"),function(h){e.actions.get("pasteSize").funct()});a.setAttribute("title",mxResources$1.get("pasteSize")+" ("+this.editorUi.actions.get("pasteSize").shortcut+")"),r.appendChild(a),s++,l.style.width="100px",l.style.marginBottom="2px",a.style.width="100px",a.style.marginBottom="2px"}}return t.getSelectionCount()==1&&t.getModel().isVertex(i)&&!n.row&&!n.cell&&t.getModel().isVertex(t.getModel().getParent(i))?(s>0&&mxUtils$1.br(r),l=mxUtils$1.button(mxResources$1.get("removeFromGroup"),function(o){e.actions.get("removeFromGroup").funct()}),l.setAttribute("title",mxResources$1.get("removeFromGroup")),l.style.width="202px",l.style.marginBottom="2px",r.appendChild(l),s++):t.getSelectionCount()>0&&(s>0&&mxUtils$1.br(r),l=mxUtils$1.button(mxResources$1.get("clearWaypoints"),mxUtils$1.bind(this,function(o){this.editorUi.actions.get("clearWaypoints").funct()})),l.setAttribute("title",mxResources$1.get("clearWaypoints")+" ("+this.editorUi.actions.get("clearWaypoints").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",r.appendChild(l),s++),t.getSelectionCount()==1&&(s>0&&mxUtils$1.br(r),l=mxUtils$1.button(mxResources$1.get("editData"),mxUtils$1.bind(this,function(o){this.editorUi.actions.get("editData").funct()})),l.setAttribute("title",mxResources$1.get("editData")+" ("+this.editorUi.actions.get("editData").shortcut+")"),l.style.width="100px",l.style.marginBottom="2px",r.appendChild(l),s++,l=mxUtils$1.button(mxResources$1.get("editLink"),mxUtils$1.bind(this,function(o){this.editorUi.actions.get("editLink").funct()})),l.setAttribute("title",mxResources$1.get("editLink")),l.style.width="100px",l.style.marginLeft="2px",l.style.marginBottom="2px",r.appendChild(l),s++),s==0&&(r.style.display="none"),r};ArrangePanel.prototype.addAlign=function(r){var e=this.editorUi.editor.graph;r.style.paddingTop="6px",r.style.paddingBottom="12px",r.appendChild(this.createTitle(mxResources$1.get("align")));var t=document.createElement("div");t.style.position="relative",t.style.paddingLeft="0px",t.style.borderWidth="0px",t.className="geToolbarContainer",mxClient.IS_QUIRKS&&(r.style.height="60px");var i=this.editorUi.toolbar.addButton("geSprite-alignleft",mxResources$1.get("left"),function(){e.alignCells(mxConstants$1.ALIGN_LEFT)},t),n=this.editorUi.toolbar.addButton("geSprite-aligncenter",mxResources$1.get("center"),function(){e.alignCells(mxConstants$1.ALIGN_CENTER)},t),s=this.editorUi.toolbar.addButton("geSprite-alignright",mxResources$1.get("right"),function(){e.alignCells(mxConstants$1.ALIGN_RIGHT)},t),l=this.editorUi.toolbar.addButton("geSprite-aligntop",mxResources$1.get("top"),function(){e.alignCells(mxConstants$1.ALIGN_TOP)},t),a=this.editorUi.toolbar.addButton("geSprite-alignmiddle",mxResources$1.get("middle"),function(){e.alignCells(mxConstants$1.ALIGN_MIDDLE)},t),o=this.editorUi.toolbar.addButton("geSprite-alignbottom",mxResources$1.get("bottom"),function(){e.alignCells(mxConstants$1.ALIGN_BOTTOM)},t);return this.styleButtons([i,n,s,l,a,o]),s.style.marginRight="6px",r.appendChild(t),r};ArrangePanel.prototype.addFlip=function(r){var e=this.editorUi,t=e.editor,i=t.graph;r.style.paddingTop="6px",r.style.paddingBottom="10px";var n=document.createElement("div");n.style.marginTop="2px",n.style.marginBottom="8px",n.style.fontWeight="bold",mxUtils$1.write(n,mxResources$1.get("flip")),r.appendChild(n);var s=mxUtils$1.button(mxResources$1.get("horizontal"),function(l){i.toggleCellStyles(mxConstants$1.STYLE_FLIPH,!1)});s.setAttribute("title",mxResources$1.get("horizontal")),s.style.width="100px",s.style.marginRight="2px",r.appendChild(s);var s=mxUtils$1.button(mxResources$1.get("vertical"),function(l){i.toggleCellStyles(mxConstants$1.STYLE_FLIPV,!1)});return s.setAttribute("title",mxResources$1.get("vertical")),s.style.width="100px",r.appendChild(s),r};ArrangePanel.prototype.addDistribute=function(r){var e=this.editorUi,t=e.editor,i=t.graph;r.style.paddingTop="6px",r.style.paddingBottom="12px",r.appendChild(this.createTitle(mxResources$1.get("distribute")));var n=mxUtils$1.button(mxResources$1.get("horizontal"),function(s){i.distributeCells(!0)});n.setAttribute("title",mxResources$1.get("horizontal")),n.style.width="100px",n.style.marginRight="2px",r.appendChild(n);var n=mxUtils$1.button(mxResources$1.get("vertical"),function(s){i.distributeCells(!1)});return n.setAttribute("title",mxResources$1.get("vertical")),n.style.width="100px",r.appendChild(n),r};ArrangePanel.prototype.addAngle=function(r){var e=this.editorUi,t=e.editor,i=t.graph,n=this.format.getSelectionState();r.style.paddingBottom="8px";var s=document.createElement("div");s.style.position="absolute",s.style.width="70px",s.style.marginTop="0px",s.style.fontWeight="bold";var l=null,a=null,o=null;if(n.rotatable&&!n.table&&!n.row&&!n.cell?(mxUtils$1.write(s,mxResources$1.get("angle")),r.appendChild(s),l=this.addUnitInput(r,"",20,44,function(){a.apply(this,arguments)}),mxUtils$1.br(r),r.style.paddingTop="10px"):r.style.paddingTop="8px",!n.containsLabel){var h=mxResources$1.get("reverse");n.vertices.length>0&&n.edges.length>0?h=mxResources$1.get("turn")+" / "+h:n.vertices.length>0&&(h=mxResources$1.get("turn")),o=mxUtils$1.button(h,function(m){e.actions.get("turn").funct(m)}),o.setAttribute("title",h+" ("+this.editorUi.actions.get("turn").shortcut+")"),o.style.width="202px",r.appendChild(o),l!=null&&(o.style.marginTop="8px")}if(l!=null){var d=mxUtils$1.bind(this,function(m,g,c){if(c||document.activeElement!=l){n=this.format.getSelectionState();var f=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ROTATION,0));l.value=isNaN(f)?"":f+""}});a=this.installInputHandler(l,mxConstants$1.STYLE_ROTATION,0,0,360,"",null,!0),this.addKeyHandler(l,d),i.getModel().addListener(mxEvent$1.CHANGE,d),this.listeners.push({destroy:function(){i.getModel().removeListener(d)}}),d()}return r};BaseFormatPanel.prototype.getUnit=function(){var r=this.editorUi.editor.graph.view.unit;switch(r){case mxConstants$1.POINTS:return"pt";case mxConstants$1.INCHES:return'"';case mxConstants$1.MILLIMETERS:return"mm"}};BaseFormatPanel.prototype.inUnit=function(r){return this.editorUi.editor.graph.view.formatUnitText(r)};BaseFormatPanel.prototype.fromUnit=function(r){var e=this.editorUi.editor.graph.view.unit;switch(e){case mxConstants$1.POINTS:return r;case mxConstants$1.INCHES:return r*mxConstants$1.PIXELS_PER_INCH;case mxConstants$1.MILLIMETERS:return r*mxConstants$1.PIXELS_PER_MM}};BaseFormatPanel.prototype.isFloatUnit=function(){return this.editorUi.editor.graph.view.unit!=mxConstants$1.POINTS};BaseFormatPanel.prototype.getUnitStep=function(){var r=this.editorUi.editor.graph.view.unit;switch(r){case mxConstants$1.POINTS:return 1;case mxConstants$1.INCHES:return .1;case mxConstants$1.MILLIMETERS:return .5}};ArrangePanel.prototype.addGeometry=function(r){var e=this,t=this.editorUi,i=t.editor.graph,n=this.format.getSelectionState(),s=this.createPanel();s.style.paddingBottom="8px";var w=document.createElement("div");w.style.position="absolute",w.style.width="50px",w.style.marginTop="0px",w.style.fontWeight="bold",mxUtils$1.write(w,mxResources$1.get("size")),s.appendChild(w);var l,a,o,h,d=this.addUnitInput(s,this.getUnit(),84,44,function(){l.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),m=this.addUnitInput(s,this.getUnit(),20,44,function(){a.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),g=document.createElement("div");g.className="geSprite geSprite-fit",g.setAttribute("title",mxResources$1.get("autosize")+" ("+this.editorUi.actions.get("autosize").shortcut+")"),g.style.position="relative",g.style.cursor="pointer",g.style.marginTop="-3px",g.style.border="0px",g.style.left="42px",mxUtils$1.setOpacity(g,50),mxEvent$1.addListener(g,"mouseenter",function(){mxUtils$1.setOpacity(g,100)}),mxEvent$1.addListener(g,"mouseleave",function(){mxUtils$1.setOpacity(g,50)}),mxEvent$1.addListener(g,"click",function(){t.actions.get("autosize").funct()}),s.appendChild(g),n.row?(d.style.visibility="hidden",d.nextSibling.style.visibility="hidden"):this.addLabel(s,mxResources$1.get("width"),84),this.addLabel(s,mxResources$1.get("height"),20),mxUtils$1.br(s);var c=document.createElement("div");c.style.paddingTop="8px",c.style.paddingRight="20px",c.style.whiteSpace="nowrap",c.style.textAlign="right";var f=this.createCellOption(mxResources$1.get("constrainProportions"),mxConstants$1.STYLE_ASPECT,null,"fixed","null");f.style.width="100%",c.appendChild(f),!n.cell&&!n.row?s.appendChild(c):g.style.visibility="hidden";var C=f.getElementsByTagName("input")[0];this.addKeyHandler(d,P),this.addKeyHandler(m,P),l=this.addGeometryHandler(d,function(L,k,G){if(i.isTableCell(G))return i.setTableColumnWidth(G,k-L.width,!0),!0;if(L.width>0){var k=Math.max(1,e.fromUnit(k));C.checked&&(L.height=Math.round(L.height*k*100/L.width)/100),L.width=k}}),a=this.addGeometryHandler(m,function(L,k,G){if(i.isTableCell(G)&&(G=i.model.getParent(G)),i.isTableRow(G))return i.setTableRowHeight(G,k-L.height),!0;if(L.height>0){var k=Math.max(1,e.fromUnit(k));C.checked&&(L.width=Math.round(L.width*k*100/L.height)/100),L.height=k}}),(n.resizable||n.row||n.cell)&&r.appendChild(s);var v=this.createPanel();v.style.paddingBottom="30px";var w=document.createElement("div");w.style.position="absolute",w.style.width="70px",w.style.marginTop="0px",w.style.fontWeight="bold",mxUtils$1.write(w,mxResources$1.get("position")),v.appendChild(w);var S=this.addUnitInput(v,this.getUnit(),84,44,function(){o.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),T=this.addUnitInput(v,this.getUnit(),20,44,function(){h.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit());mxUtils$1.br(v),this.addLabel(v,mxResources$1.get("left"),84),this.addLabel(v,mxResources$1.get("top"),20);var P=mxUtils$1.bind(this,function(L,k,G){n=this.format.getSelectionState(),!n.containsLabel&&n.vertices.length==i.getSelectionCount()&&n.width!=null&&n.height!=null?(s.style.display="",(G||document.activeElement!=d)&&(d.value=this.inUnit(n.width)+(n.width==""?"":" "+this.getUnit())),(G||document.activeElement!=m)&&(m.value=this.inUnit(n.height)+(n.height==""?"":" "+this.getUnit()))):s.style.display="none",n.vertices.length==i.getSelectionCount()&&n.x!=null&&n.y!=null?(v.style.display="",(G||document.activeElement!=S)&&(S.value=this.inUnit(n.x)+(n.x==""?"":" "+this.getUnit())),(G||document.activeElement!=T)&&(T.value=this.inUnit(n.y)+(n.y==""?"":" "+this.getUnit()))):v.style.display="none"});this.addKeyHandler(S,P),this.addKeyHandler(T,P),i.getModel().addListener(mxEvent$1.CHANGE,P),this.listeners.push({destroy:function(){i.getModel().removeListener(P)}}),P(),o=this.addGeometryHandler(S,function(L,k){k=e.fromUnit(k),L.relative?L.offset.x=k:L.x=k}),h=this.addGeometryHandler(T,function(L,k){k=e.fromUnit(k),L.relative?L.offset.y=k:L.y=k}),n.movable&&r.appendChild(v)};ArrangePanel.prototype.addGeometryHandler=function(r,e){var t=this.editorUi,i=t.editor.graph,n=null,s=this;function l(a){if(r.value!=""){var o=parseFloat(r.value);if(isNaN(o))r.value=n+" "+s.getUnit();else if(o!=n){i.getModel().beginUpdate();try{for(var h=i.getSelectionCells(),d=0;d<h.length;d++)if(i.getModel().isVertex(h[d])){var m=i.getCellGeometry(h[d]);if(m!=null&&(m=m.clone(),!e(m,o,h[d]))){var g=i.view.getState(h[d]);g!=null&&i.isRecursiveVertexResize(g)&&i.resizeChildCells(h[d],m),i.getModel().setGeometry(h[d],m),i.constrainChildCells(h[d])}}}finally{i.getModel().endUpdate()}n=o,r.value=o+" "+s.getUnit()}}mxEvent$1.consume(a)}return mxEvent$1.addListener(r,"blur",l),mxEvent$1.addListener(r,"change",l),mxEvent$1.addListener(r,"focus",function(){n=r.value}),l};ArrangePanel.prototype.addEdgeGeometryHandler=function(r,e){var t=this.editorUi,i=t.editor.graph,n=null;function s(l){if(r.value!=""){var a=parseFloat(r.value);if(isNaN(a))r.value=n+" pt";else if(a!=n){i.getModel().beginUpdate();try{for(var o=i.getSelectionCells(),h=0;h<o.length;h++)if(i.getModel().isEdge(o[h])){var d=i.getCellGeometry(o[h]);d!=null&&(d=d.clone(),e(d,a),i.getModel().setGeometry(o[h],d))}}finally{i.getModel().endUpdate()}n=a,r.value=a+" pt"}}mxEvent$1.consume(l)}return mxEvent$1.addListener(r,"blur",s),mxEvent$1.addListener(r,"change",s),mxEvent$1.addListener(r,"focus",function(){n=r.value}),s};ArrangePanel.prototype.addEdgeGeometry=function(r){var e=this.editorUi,t=e.editor.graph,i=this.format.getSelectionState(),n=this.createPanel(),C=document.createElement("div");C.style.position="absolute",C.style.width="70px",C.style.marginTop="0px",C.style.fontWeight="bold",mxUtils$1.write(C,mxResources$1.get("width")),n.appendChild(C);var d,s,l,a,o,h=this.addUnitInput(n,"pt",20,44,function(){d.apply(this,arguments)});mxUtils$1.br(n),this.addKeyHandler(h,S);function d(T){var P=parseInt(h.value);P=Math.min(999,Math.max(1,isNaN(P)?1:P)),P!=mxUtils$1.getValue(i.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth)&&(t.setCellStyles("width",P,t.getSelectionCells()),e.fireEvent(new mxEventObject$1("styleChanged","keys",["width"],"values",[P],"cells",t.getSelectionCells()))),h.value=P+" pt",mxEvent$1.consume(T)}mxEvent$1.addListener(h,"blur",d),mxEvent$1.addListener(h,"change",d),r.appendChild(n);var m=this.createPanel();m.style.paddingBottom="30px";var C=document.createElement("div");C.style.position="absolute",C.style.width="70px",C.style.marginTop="0px",C.style.fontWeight="bold",mxUtils$1.write(C,"Start"),m.appendChild(C);var g=this.addUnitInput(m,"pt",84,44,function(){a.apply(this,arguments)}),c=this.addUnitInput(m,"pt",20,44,function(){o.apply(this,arguments)});mxUtils$1.br(m),this.addLabel(m,mxResources$1.get("left"),84),this.addLabel(m,mxResources$1.get("top"),20),r.appendChild(m),this.addKeyHandler(g,S),this.addKeyHandler(c,S);var f=this.createPanel();f.style.paddingBottom="30px";var C=document.createElement("div");C.style.position="absolute",C.style.width="70px",C.style.marginTop="0px",C.style.fontWeight="bold",mxUtils$1.write(C,"End"),f.appendChild(C);var v=this.addUnitInput(f,"pt",84,44,function(){s.apply(this,arguments)}),w=this.addUnitInput(f,"pt",20,44,function(){l.apply(this,arguments)});mxUtils$1.br(f),this.addLabel(f,mxResources$1.get("left"),84),this.addLabel(f,mxResources$1.get("top"),20),r.appendChild(f),this.addKeyHandler(v,S),this.addKeyHandler(w,S);var S=mxUtils$1.bind(this,function(T,P,L){i=this.format.getSelectionState();var k=t.getSelectionCell();if(i.style.shape=="link"||i.style.shape=="flexArrow"){if(n.style.display="",L||document.activeElement!=h){var G=mxUtils$1.getValue(i.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth);h.value=G+" pt"}}else n.style.display="none";if(t.getSelectionCount()==1&&t.model.isEdge(k)){var Y=t.model.getGeometry(k);Y.sourcePoint!=null&&t.model.getTerminal(k,!0)==null?(g.value=Y.sourcePoint.x,c.value=Y.sourcePoint.y):m.style.display="none",Y.targetPoint!=null&&t.model.getTerminal(k,!1)==null?(v.value=Y.targetPoint.x,w.value=Y.targetPoint.y):f.style.display="none"}else m.style.display="none",f.style.display="none"});a=this.addEdgeGeometryHandler(g,function(T,P){T.sourcePoint.x=P}),o=this.addEdgeGeometryHandler(c,function(T,P){T.sourcePoint.y=P}),s=this.addEdgeGeometryHandler(v,function(T,P){T.targetPoint.x=P}),l=this.addEdgeGeometryHandler(w,function(T,P){T.targetPoint.y=P}),t.getModel().addListener(mxEvent$1.CHANGE,S),this.listeners.push({destroy:function(){t.getModel().removeListener(S)}}),S()};class TextFormatPanel extends BaseFormatPanel{constructor(e,t,i){super(e,t,i),this.init()}}TextFormatPanel.prototype.init=function(){this.container.style.borderBottom="none",this.addFont(this.container)};TextFormatPanel.prototype.addFont=function(r){var e=this.editorUi,t=e.editor,i=t.graph,n=this.format.getSelectionState(),s=this.createTitle(mxResources$1.get("font"));s.style.paddingLeft="18px",s.style.paddingTop="10px",s.style.paddingBottom="6px",r.appendChild(s);var l=this.createPanel();if(l.style.paddingTop="2px",l.style.paddingBottom="2px",l.style.position="relative",l.style.marginLeft="-2px",l.style.borderWidth="0px",l.className="geToolbarContainer",mxClient.IS_QUIRKS&&(l.style.display="block"),i.cellEditor.isContentEditing()){var a=l.cloneNode(),o=this.editorUi.toolbar.addMenu(mxResources$1.get("style"),mxResources$1.get("style"),!0,"formatBlock",a,null,!0);o.style.color="rgb(112, 112, 112)",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.margin="0px",this.addArrow(o),o.style.width="192px",o.style.height="15px";var He=o.getElementsByTagName("div")[0];He.style.cssFloat="right",r.appendChild(a)}r.appendChild(l);var h=this.createPanel();h.style.marginTop="8px",h.style.borderTop="1px solid #c0c0c0",h.style.paddingTop="6px",h.style.paddingBottom="6px";var d=this.editorUi.toolbar.addMenu("Helvetica",mxResources$1.get("fontFamily"),!0,"fontFamily",l,null,!0);d.style.color="rgb(112, 112, 112)",d.style.whiteSpace="nowrap",d.style.overflow="hidden",d.style.margin="0px",this.addArrow(d),d.style.width="192px",d.style.height="15px";var m=l.cloneNode(!1);m.style.marginLeft="-3px";var g=this.editorUi.toolbar.addItems(["bold","italic","underline"],m,!0);g[0].setAttribute("title",mxResources$1.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),g[1].setAttribute("title",mxResources$1.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),g[2].setAttribute("title",mxResources$1.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")");var c=this.editorUi.toolbar.addItems(["vertical"],m,!0)[0];mxClient.IS_QUIRKS&&mxUtils$1.br(r),r.appendChild(m),this.styleButtons(g),this.styleButtons([c]);var f=l.cloneNode(!1);f.style.marginLeft="-3px",f.style.paddingBottom="0px";var C=function(Be){return function(){return Be()}},v=this.editorUi.toolbar.addButton("geSprite-left",mxResources$1.get("left"),i.cellEditor.isContentEditing()?function(Be){i.cellEditor.alignText(mxConstants$1.ALIGN_LEFT,Be)}:C(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_ALIGN],[mxConstants$1.ALIGN_LEFT])),f),w=this.editorUi.toolbar.addButton("geSprite-center",mxResources$1.get("center"),i.cellEditor.isContentEditing()?function(Be){i.cellEditor.alignText(mxConstants$1.ALIGN_CENTER,Be)}:C(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_ALIGN],[mxConstants$1.ALIGN_CENTER])),f),S=this.editorUi.toolbar.addButton("geSprite-right",mxResources$1.get("right"),i.cellEditor.isContentEditing()?function(Be){i.cellEditor.alignText(mxConstants$1.ALIGN_RIGHT,Be)}:C(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_ALIGN],[mxConstants$1.ALIGN_RIGHT])),f);if(this.styleButtons([v,w,S]),i.cellEditor.isContentEditing()){var T=this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources$1.get("strikethrough"),function(){document.execCommand("strikeThrough",!1,null)},m);this.styleButtons([T]),T.firstChild.style.background="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMwMTAxMDEiIGQ9Ik03LjI0IDguNzVjLS4yNi0uNDgtLjM5LTEuMDMtLjM5LTEuNjcgMC0uNjEuMTMtMS4xNi40LTEuNjcuMjYtLjUuNjMtLjkzIDEuMTEtMS4yOS40OC0uMzUgMS4wNS0uNjMgMS43LS44My42Ni0uMTkgMS4zOS0uMjkgMi4xOC0uMjkuODEgMCAxLjU0LjExIDIuMjEuMzQuNjYuMjIgMS4yMy41NCAxLjY5Ljk0LjQ3LjQuODMuODggMS4wOCAxLjQzLjI1LjU1LjM4IDEuMTUuMzggMS44MWgtMy4wMWMwLS4zMS0uMDUtLjU5LS4xNS0uODUtLjA5LS4yNy0uMjQtLjQ5LS40NC0uNjgtLjItLjE5LS40NS0uMzMtLjc1LS40NC0uMy0uMS0uNjYtLjE2LTEuMDYtLjE2LS4zOSAwLS43NC4wNC0xLjAzLjEzLS4yOS4wOS0uNTMuMjEtLjcyLjM2LS4xOS4xNi0uMzQuMzQtLjQ0LjU1LS4xLjIxLS4xNS40My0uMTUuNjYgMCAuNDguMjUuODguNzQgMS4yMS4zOC4yNS43Ny40OCAxLjQxLjdINy4zOWMtLjA1LS4wOC0uMTEtLjE3LS4xNS0uMjV6TTIxIDEydi0ySDN2Mmg5LjYyYy4xOC4wNy40LjE0LjU1LjIuMzcuMTcuNjYuMzQuODcuNTEuMjEuMTcuMzUuMzYuNDMuNTcuMDcuMi4xMS40My4xMS42OSAwIC4yMy0uMDUuNDUtLjE0LjY2LS4wOS4yLS4yMy4zOC0uNDIuNTMtLjE5LjE1LS40Mi4yNi0uNzEuMzUtLjI5LjA4LS42My4xMy0xLjAxLjEzLS40MyAwLS44My0uMDQtMS4xOC0uMTNzLS42Ni0uMjMtLjkxLS40MmMtLjI1LS4xOS0uNDUtLjQ0LS41OS0uNzUtLjE0LS4zMS0uMjUtLjc2LS4yNS0xLjIxSDYuNGMwIC41NS4wOCAxLjEzLjI0IDEuNTguMTYuNDUuMzcuODUuNjUgMS4yMS4yOC4zNS42LjY2Ljk4LjkyLjM3LjI2Ljc4LjQ4IDEuMjIuNjUuNDQuMTcuOS4zIDEuMzguMzkuNDguMDguOTYuMTMgMS40NC4xMy44IDAgMS41My0uMDkgMi4xOC0uMjhzMS4yMS0uNDUgMS42Ny0uNzljLjQ2LS4zNC44Mi0uNzcgMS4wNy0xLjI3cy4zOC0xLjA3LjM4LTEuNzFjMC0uNi0uMS0xLjE0LS4zMS0xLjYxLS4wNS0uMTEtLjExLS4yMy0uMTctLjMzSDIxeiIvPjwvc3ZnPg==)",T.firstChild.style.backgroundPosition="2px 2px",T.firstChild.style.backgroundSize="18px 18px",this.styleButtons([T])}var P=this.editorUi.toolbar.addButton("geSprite-top",mxResources$1.get("top"),C(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_VERTICAL_ALIGN],[mxConstants$1.ALIGN_TOP])),f),L=this.editorUi.toolbar.addButton("geSprite-middle",mxResources$1.get("middle"),C(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_VERTICAL_ALIGN],[mxConstants$1.ALIGN_MIDDLE])),f),k=this.editorUi.toolbar.addButton("geSprite-bottom",mxResources$1.get("bottom"),C(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_VERTICAL_ALIGN],[mxConstants$1.ALIGN_BOTTOM])),f);this.styleButtons([P,L,k]),mxClient.IS_QUIRKS&&mxUtils$1.br(r),r.appendChild(f);var G,Y,te,ie,ne,q,oe;if(i.cellEditor.isContentEditing()){P.style.display="none",L.style.display="none",k.style.display="none",c.style.display="none",te=this.editorUi.toolbar.addButton("geSprite-justifyfull",mxResources$1.get("block"),function(){te.style.opacity==1&&document.execCommand("justifyfull",!1,null)},f),te.style.marginRight="9px",te.style.opacity=1,this.styleButtons([te,G=this.editorUi.toolbar.addButton("geSprite-subscript",mxResources$1.get("subscript")+" ("+Editor$1.ctrlKey+"+,)",function(){document.execCommand("subscript",!1,null)},f),Y=this.editorUi.toolbar.addButton("geSprite-superscript",mxResources$1.get("superscript")+" ("+Editor$1.ctrlKey+"+.)",function(){document.execCommand("superscript",!1,null)},f)]),G.style.marginLeft="9px";var le=f.cloneNode(!1);le.style.paddingTop="4px";var Z=[this.editorUi.toolbar.addButton("geSprite-orderedlist",mxResources$1.get("numberedList"),function(){document.execCommand("insertorderedlist",!1,null)},le),this.editorUi.toolbar.addButton("geSprite-unorderedlist",mxResources$1.get("bulletedList"),function(){document.execCommand("insertunorderedlist",!1,null)},le),this.editorUi.toolbar.addButton("geSprite-outdent",mxResources$1.get("decreaseIndent"),function(){document.execCommand("outdent",!1,null)},le),this.editorUi.toolbar.addButton("geSprite-indent",mxResources$1.get("increaseIndent"),function(){document.execCommand("indent",!1,null)},le),this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources$1.get("removeFormat"),function(){document.execCommand("removeformat",!1,null)},le),this.editorUi.toolbar.addButton("geSprite-code",mxResources$1.get("html"),function(){i.cellEditor.toggleViewMode()},le)];this.styleButtons(Z),Z[Z.length-2].style.marginLeft="9px",mxClient.IS_QUIRKS&&(mxUtils$1.br(r),le.style.height="40"),r.appendChild(le)}else g[2].style.marginRight="9px",S.style.marginRight="9px";var B=l.cloneNode(!1);B.style.marginLeft="0px",B.style.paddingTop="8px",B.style.paddingBottom="4px",B.style.fontWeight="normal",mxUtils$1.write(B,mxResources$1.get("position"));var re=document.createElement("select");re.style.position="absolute",re.style.right="20px",re.style.width="97px",re.style.marginTop="-2px";for(var se=["topLeft","top","topRight","left","center","right","bottomLeft","bottom","bottomRight"],ve={topLeft:[mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_TOP,mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_BOTTOM],top:[mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_TOP,mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_BOTTOM],topRight:[mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_TOP,mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_BOTTOM],left:[mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_MIDDLE,mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_MIDDLE],center:[mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_MIDDLE,mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_MIDDLE],right:[mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_MIDDLE,mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_MIDDLE],bottomLeft:[mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_BOTTOM,mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_TOP],bottom:[mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_BOTTOM,mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_TOP],bottomRight:[mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_BOTTOM,mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_TOP]},pe=0;pe<se.length;pe++){var Q=document.createElement("option");Q.setAttribute("value",se[pe]),mxUtils$1.write(Q,mxResources$1.get(se[pe])),re.appendChild(Q)}B.appendChild(re);var me=l.cloneNode(!1);me.style.marginLeft="0px",me.style.paddingTop="4px",me.style.paddingBottom="4px",me.style.fontWeight="normal",mxUtils$1.write(me,mxResources$1.get("writingDirection"));var ce=document.createElement("select");ce.style.position="absolute",ce.style.right="20px",ce.style.width="97px",ce.style.marginTop="-2px";for(var Le=["automatic","leftToRight","rightToLeft"],Ie={automatic:null,leftToRight:mxConstants$1.TEXT_DIRECTION_LTR,rightToLeft:mxConstants$1.TEXT_DIRECTION_RTL},pe=0;pe<Le.length;pe++){var Ge=document.createElement("option");Ge.setAttribute("value",Le[pe]),mxUtils$1.write(Ge,mxResources$1.get(Le[pe])),ce.appendChild(Ge)}me.appendChild(ce),i.isEditing()||(r.appendChild(B),mxEvent$1.addListener(re,"change",function(Be){i.getModel().beginUpdate();try{var Ae=ve[re.value];Ae!=null&&(i.setCellStyles(mxConstants$1.STYLE_LABEL_POSITION,Ae[0],i.getSelectionCells()),i.setCellStyles(mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,Ae[1],i.getSelectionCells()),i.setCellStyles(mxConstants$1.STYLE_ALIGN,Ae[2],i.getSelectionCells()),i.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,Ae[3],i.getSelectionCells()))}finally{i.getModel().endUpdate()}mxEvent$1.consume(Be)}),r.appendChild(me),mxEvent$1.addListener(ce,"change",function(Be){i.setCellStyles(mxConstants$1.STYLE_TEXT_DIRECTION,Ie[ce.value],i.getSelectionCells()),mxEvent$1.consume(Be)}));var fe=document.createElement("input");fe.style.textAlign="right",fe.style.marginTop="4px",mxClient.IS_QUIRKS||(fe.style.position="absolute",fe.style.right="32px"),fe.style.width="40px",fe.style.height=mxClient.IS_QUIRKS?"21px":"17px",m.appendChild(fe);var Te=null,Ve=this.installInputHandler(fe,mxConstants$1.STYLE_FONTSIZE,12,1,999," pt",function(Be){if(window.getSelection&&!mxClient.IS_IE&&!mxClient.IS_IE11){let ft=function(gt,Dt){if(i.cellEditor.textarea!=null&&gt!=i.cellEditor.textarea&&i.cellEditor.textarea.contains(gt)&&Ae.containsNode(gt,!0))if(gt.nodeName=="FONT")gt.removeAttribute("size"),gt.style.fontSize=Be+"px";else{var Gt=mxUtils$1.getCurrentStyle(gt);Gt.fontSize!=Be+"px"&&(mxUtils$1.getCurrentStyle(gt.parentNode).fontSize!=Be+"px"?gt.style.fontSize=Be+"px":gt.style.fontSize="")}};var ht=ft,Ae=window.getSelection(),We=Ae.rangeCount>0?Ae.getRangeAt(0).commonAncestorContainer:i.cellEditor.textarea;if((We==i.cellEditor.textarea||We.nodeType!=mxConstants$1.NODETYPE_ELEMENT)&&document.execCommand("fontSize",!1,"1"),We!=i.cellEditor.textarea&&(We=We.parentNode),We!=null&&We.nodeType==mxConstants$1.NODETYPE_ELEMENT){var ze=We.getElementsByTagName("*");ft(We);for(var $e=0;$e<ze.length;$e++)ft(ze[$e])}fe.value=Be+" pt"}else if(window.getSelection||document.selection){let ft=function(gt,Dt){for(;Dt!=null;){if(Dt===gt)return!0;Dt=Dt.parentNode}return!1};var ot=ft,st=null;if(document.selection)st=document.selection.createRange().parentElement();else{var Ae=window.getSelection();Ae.rangeCount>0&&(st=Ae.getRangeAt(0).commonAncestorContainer)}if(st!=null&&ft(i.cellEditor.textarea,st)){Te=Be,document.execCommand("fontSize",!1,"4");for(var ze=i.cellEditor.textarea.getElementsByTagName("font"),$e=0;$e<ze.length;$e++)if(ze[$e].getAttribute("size")=="4"){ze[$e].removeAttribute("size"),ze[$e].style.fontSize=Te+"px",window.setTimeout(function(){fe.value=Te+" pt",Te=null},0);break}}}},!0),De=this.createStepper(fe,Ve,1,10,!0,12);De.style.display=fe.style.display,De.style.marginTop="4px",mxClient.IS_QUIRKS||(De.style.right="20px"),m.appendChild(De);var He=d.getElementsByTagName("div")[0];He.style.cssFloat="right";var ue=null,be="#ffffff",Fe=null,Pe="#000000",je=i.cellEditor.isContentEditing()?this.createColorOption(mxResources$1.get("backgroundColor"),function(){return be},function(Be){document.execCommand("backcolor",!1,Be!=mxConstants$1.NONE?Be:"transparent")},"#ffffff",{install:function(Be){ue=Be},destroy:function(){ue=null}},null,!0):this.createCellColorOption(mxResources$1.get("backgroundColor"),mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,"#ffffff",null,function(Be){i.updateLabelElements(i.getSelectionCells(),function(Ae){Ae.style.backgroundColor=null})});je.style.fontWeight="bold";var Qe=this.createCellColorOption(mxResources$1.get("borderColor"),mxConstants$1.STYLE_LABEL_BORDERCOLOR,"#000000");Qe.style.fontWeight="bold";var et=n.vertices.length>=1?i.stylesheet.getDefaultVertexStyle():i.stylesheet.getDefaultEdgeStyle(),Ze=i.cellEditor.isContentEditing()?this.createColorOption(mxResources$1.get("fontColor"),function(){return Pe},function(Be){if(mxClient.IS_FF){for(var Ae=i.cellEditor.textarea.getElementsByTagName("font"),We=[],ze=0;ze<Ae.length;ze++)We.push({node:Ae[ze],color:Ae[ze].getAttribute("color")});document.execCommand("forecolor",!1,Be!=mxConstants$1.NONE?Be:"transparent");for(var $e=i.cellEditor.textarea.getElementsByTagName("font"),ze=0;ze<$e.length;ze++)if(ze>=We.length||$e[ze]!=We[ze].node||$e[ze]==We[ze].node&&$e[ze].getAttribute("color")!=We[ze].color){var st=$e[ze].firstChild;if(st!=null&&st.nodeName=="A"&&st.nextSibling==null&&st.firstChild!=null){var ht=$e[ze].parentNode;ht.insertBefore(st,$e[ze]);for(var Ae=st.firstChild;Ae!=null;){var ot=Ae.nextSibling;$e[ze].appendChild(Ae),Ae=ot}st.appendChild($e[ze])}break}}else document.execCommand("forecolor",!1,Be!=mxConstants$1.NONE?Be:"transparent")},et[mxConstants$1.STYLE_FONTCOLOR]!=null?et[mxConstants$1.STYLE_FONTCOLOR]:"#000000",{install:function(Be){Fe=Be},destroy:function(){Fe=null}},null,!0):this.createCellColorOption(mxResources$1.get("fontColor"),mxConstants$1.STYLE_FONTCOLOR,et[mxConstants$1.STYLE_FONTCOLOR]!=null?et[mxConstants$1.STYLE_FONTCOLOR]:"#000000",function(Be){Be==mxConstants$1.NONE?je.style.display="none":je.style.display="",Qe.style.display=je.style.display},function(Be){Be==mxConstants$1.NONE?i.setCellStyles(mxConstants$1.STYLE_NOLABEL,"1",i.getSelectionCells()):i.setCellStyles(mxConstants$1.STYLE_NOLABEL,null,i.getSelectionCells()),i.updateCellStyles(mxConstants$1.STYLE_FONTCOLOR,Be,i.getSelectionCells()),i.updateLabelElements(i.getSelectionCells(),function(Ae){Ae.removeAttribute("color"),Ae.style.color=null})});Ze.style.fontWeight="bold",h.appendChild(Ze),h.appendChild(je),i.cellEditor.isContentEditing()||h.appendChild(Qe),r.appendChild(h);var Ke=this.createPanel();Ke.style.paddingTop="2px",Ke.style.paddingBottom="4px";var E=this.createCellOption(mxResources$1.get("wordWrap"),mxConstants$1.STYLE_WHITE_SPACE,null,"wrap","null",null,null,!0);E.style.fontWeight="bold",!n.containsLabel&&!n.autoSize&&n.edges.length==0&&Ke.appendChild(E);var $=this.createCellOption(mxResources$1.get("formattedText"),"html","0",null,null,null,e.actions.get("formattedText"));$.style.fontWeight="bold",Ke.appendChild($);var R=this.createPanel();R.style.paddingTop="10px",R.style.paddingBottom="28px",R.style.fontWeight="normal";var U=document.createElement("div");U.style.position="absolute",U.style.width="70px",U.style.marginTop="0px",U.style.fontWeight="bold",mxUtils$1.write(U,mxResources$1.get("spacing")),R.appendChild(U);var F,z,K,ge,de,xe=this.addUnitInput(R,"pt",91,44,function(){F.apply(this,arguments)}),Re=this.addUnitInput(R,"pt",20,44,function(){z.apply(this,arguments)});mxUtils$1.br(R),this.addLabel(R,mxResources$1.get("top"),91),this.addLabel(R,mxResources$1.get("global"),20),mxUtils$1.br(R),mxUtils$1.br(R);var we=this.addUnitInput(R,"pt",162,44,function(){K.apply(this,arguments)}),_e=this.addUnitInput(R,"pt",91,44,function(){ge.apply(this,arguments)}),Oe=this.addUnitInput(R,"pt",20,44,function(){de.apply(this,arguments)});if(mxUtils$1.br(R),this.addLabel(R,mxResources$1.get("left"),162),this.addLabel(R,mxResources$1.get("bottom"),91),this.addLabel(R,mxResources$1.get("right"),20),!i.cellEditor.isContentEditing())r.appendChild(Ke),r.appendChild(this.createRelativeOption(mxResources$1.get("opacity"),mxConstants$1.STYLE_TEXT_OPACITY)),r.appendChild(R);else{var Ye=null,tt=null;r.appendChild(this.createRelativeOption(mxResources$1.get("lineheight"),null,null,function(Ae){var We=Ae.value==""?120:parseInt(Ae.value);We=Math.max(0,isNaN(We)?120:We),Ye!=null&&(i.cellEditor.restoreSelection(Ye),Ye=null);for(var ze=i.getSelectedElement(),$e=ze;$e!=null&&$e.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)$e=$e.parentNode;$e!=null&&$e==i.cellEditor.textarea&&i.cellEditor.textarea.firstChild!=null&&(i.cellEditor.textarea.firstChild.nodeName!="P"&&(i.cellEditor.textarea.innerHTML="<p>"+i.cellEditor.textarea.innerHTML+"</p>"),$e=i.cellEditor.textarea.firstChild),$e!=null&&i.cellEditor.textarea!=null&&$e!=i.cellEditor.textarea&&i.cellEditor.textarea.contains($e)&&($e.style.lineHeight=We+"%"),Ae.value=We+" %"},function(Ae){tt=Ae,mxEvent$1.addListener(Ae,"mousedown",function(){document.activeElement==i.cellEditor.textarea&&(Ye=i.cellEditor.saveSelection())}),mxEvent$1.addListener(Ae,"touchstart",function(){document.activeElement==i.cellEditor.textarea&&(Ye=i.cellEditor.saveSelection())}),Ae.value="120 %"}));var nt=l.cloneNode(!1);nt.style.paddingLeft="0px";var dt=this.editorUi.toolbar.addItems(["link","image"],nt,!0),Z=[this.editorUi.toolbar.addButton("geSprite-horizontalrule",mxResources$1.get("insertHorizontalRule"),function(){document.execCommand("inserthorizontalrule",!1)},nt),this.editorUi.toolbar.addMenuFunctionInContainer(nt,"geSprite-table",mxResources$1.get("table"),!1,mxUtils$1.bind(this,function(Ae){this.editorUi.menus.addInsertTableItem(Ae)}))];this.styleButtons(dt),this.styleButtons(Z);var qe=this.createPanel();qe.style.paddingTop="10px",qe.style.paddingBottom="10px",qe.appendChild(this.createTitle(mxResources$1.get("insert"))),qe.appendChild(nt),r.appendChild(qe),mxClient.IS_QUIRKS&&(qe.style.height="70");var lt=l.cloneNode(!1);lt.style.paddingLeft="0px";var Z=[this.editorUi.toolbar.addButton("geSprite-insertcolumnbefore",mxResources$1.get("insertColumnBefore"),mxUtils$1.bind(this,function(){try{ne!=null&&i.insertColumn(ne,q!=null?q.cellIndex:0)}catch(Ae){this.editorUi.handleError(Ae)}}),lt),this.editorUi.toolbar.addButton("geSprite-insertcolumnafter",mxResources$1.get("insertColumnAfter"),mxUtils$1.bind(this,function(){try{ne!=null&&i.insertColumn(ne,q!=null?q.cellIndex+1:-1)}catch(Ae){this.editorUi.handleError(Ae)}}),lt),this.editorUi.toolbar.addButton("geSprite-deletecolumn",mxResources$1.get("deleteColumn"),mxUtils$1.bind(this,function(){try{ne!=null&&q!=null&&i.deleteColumn(ne,q.cellIndex)}catch(Ae){this.editorUi.handleError(Ae)}}),lt),this.editorUi.toolbar.addButton("geSprite-insertrowbefore",mxResources$1.get("insertRowBefore"),mxUtils$1.bind(this,function(){try{ne!=null&&oe!=null&&i.insertRow(ne,oe.sectionRowIndex)}catch(Ae){this.editorUi.handleError(Ae)}}),lt),this.editorUi.toolbar.addButton("geSprite-insertrowafter",mxResources$1.get("insertRowAfter"),mxUtils$1.bind(this,function(){try{ne!=null&&oe!=null&&i.insertRow(ne,oe.sectionRowIndex+1)}catch(Ae){this.editorUi.handleError(Ae)}}),lt),this.editorUi.toolbar.addButton("geSprite-deleterow",mxResources$1.get("deleteRow"),mxUtils$1.bind(this,function(){try{ne!=null&&oe!=null&&i.deleteRow(ne,oe.sectionRowIndex)}catch(Ae){this.editorUi.handleError(Ae)}}),lt)];this.styleButtons(Z),Z[2].style.marginRight="9px";var xt=this.createPanel();xt.style.paddingTop="10px",xt.style.paddingBottom="10px",xt.appendChild(this.createTitle(mxResources$1.get("table"))),xt.appendChild(lt),mxClient.IS_QUIRKS&&(mxUtils$1.br(r),xt.style.height="70");var mt=l.cloneNode(!1);mt.style.paddingLeft="0px";var Z=[this.editorUi.toolbar.addButton("geSprite-strokecolor",mxResources$1.get("borderColor"),mxUtils$1.bind(this,function(Ae){if(ne!=null){var We=ne.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(ze,$e,st,ht){return"#"+("0"+Number($e).toString(16)).substr(-2)+("0"+Number(st).toString(16)).substr(-2)+("0"+Number(ht).toString(16)).substr(-2)});this.editorUi.pickColor(We,function(ze){var $e=q!=null&&(Ae==null||!mxEvent$1.isShiftDown(Ae))?q:ne;i.processElements($e,function(st){st.style.border=null}),ze==null||ze==mxConstants$1.NONE?($e.removeAttribute("border"),$e.style.border="",$e.style.borderCollapse=""):($e.setAttribute("border","1"),$e.style.border="1px solid "+ze,$e.style.borderCollapse="collapse")})}}),mt),this.editorUi.toolbar.addButton("geSprite-fillcolor",mxResources$1.get("backgroundColor"),mxUtils$1.bind(this,function(Ae){if(ne!=null){var We=ne.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(ze,$e,st,ht){return"#"+("0"+Number($e).toString(16)).substr(-2)+("0"+Number(st).toString(16)).substr(-2)+("0"+Number(ht).toString(16)).substr(-2)});this.editorUi.pickColor(We,function(ze){var $e=q!=null&&(Ae==null||!mxEvent$1.isShiftDown(Ae))?q:ne;i.processElements($e,function(st){st.style.backgroundColor=null}),ze==null||ze==mxConstants$1.NONE?$e.style.backgroundColor="":$e.style.backgroundColor=ze})}}),mt),this.editorUi.toolbar.addButton("geSprite-fit",mxResources$1.get("spacing"),function(){if(ne!=null){var Ae=ne.getAttribute("cellPadding")||0,We=new FilenameDialog(e,Ae,mxResources$1.get("apply"),mxUtils$1.bind(this,function(ze){ze!=null&&ze.length>0?ne.setAttribute("cellPadding",ze):ne.removeAttribute("cellPadding")}),mxResources$1.get("spacing"));e.showDialog(We.container,300,80,!0,!0),We.init()}},mt),this.editorUi.toolbar.addButton("geSprite-left",mxResources$1.get("left"),function(){ne?.setAttribute("align","left")},mt),this.editorUi.toolbar.addButton("geSprite-center",mxResources$1.get("center"),function(){ne?.setAttribute("align","center")},mt),this.editorUi.toolbar.addButton("geSprite-right",mxResources$1.get("right"),function(){ne?.setAttribute("align","right")},mt)];this.styleButtons(Z),Z[2].style.marginRight="9px",mxClient.IS_QUIRKS&&(mxUtils$1.br(xt),mxUtils$1.br(xt)),xt.appendChild(mt),r.appendChild(xt),ie=xt}function Je(Be,Ae){mxClient.IS_IE&&(mxClient.IS_QUIRKS||document.documentMode<10)?Be.style.filter=Ae?"progid:DXImageTransform.Microsoft.Gradient(StartColorStr='#c5ecff', EndColorStr='#87d4fb', GradientType=0)":"":Be.style.backgroundImage=Ae?"linear-gradient(#c5ecff 0px,#87d4fb 100%)":""}var St=mxUtils$1.bind(this,function(Be,Ae,We){n=this.format.getSelectionState();var ze=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_FONTSTYLE,0);if(Je(g[0],(ze&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD),Je(g[1],(ze&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC),Je(g[2],(ze&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE),d.firstChild.nodeValue=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_FONTFAMILY,12),Je(c,mxUtils$1.getValue(n.style,mxConstants$1.STYLE_HORIZONTAL,"1")=="0"),We||document.activeElement!=fe){var $e=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_FONTSIZE,12));fe.value=isNaN($e)?"":$e+" pt"}var st=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER);Je(v,st==mxConstants$1.ALIGN_LEFT),Je(w,st==mxConstants$1.ALIGN_CENTER),Je(S,st==mxConstants$1.ALIGN_RIGHT);var ht=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE);Je(P,ht==mxConstants$1.ALIGN_TOP),Je(L,ht==mxConstants$1.ALIGN_MIDDLE),Je(k,ht==mxConstants$1.ALIGN_BOTTOM);var ot=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),ft=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);ot==mxConstants$1.ALIGN_LEFT&&ft==mxConstants$1.ALIGN_TOP?re.value="topLeft":ot==mxConstants$1.ALIGN_CENTER&&ft==mxConstants$1.ALIGN_TOP?re.value="top":ot==mxConstants$1.ALIGN_RIGHT&&ft==mxConstants$1.ALIGN_TOP?re.value="topRight":ot==mxConstants$1.ALIGN_LEFT&&ft==mxConstants$1.ALIGN_BOTTOM?re.value="bottomLeft":ot==mxConstants$1.ALIGN_CENTER&&ft==mxConstants$1.ALIGN_BOTTOM?re.value="bottom":ot==mxConstants$1.ALIGN_RIGHT&&ft==mxConstants$1.ALIGN_BOTTOM?re.value="bottomRight":ot==mxConstants$1.ALIGN_LEFT?re.value="left":ot==mxConstants$1.ALIGN_RIGHT?re.value="right":re.value="center";var gt=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION);if(gt==mxConstants$1.TEXT_DIRECTION_RTL?ce.value="rightToLeft":gt==mxConstants$1.TEXT_DIRECTION_LTR?ce.value="leftToRight":gt==mxConstants$1.TEXT_DIRECTION_AUTO&&(ce.value="automatic"),We||document.activeElement!=Re){var $e=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING,2));Re.value=isNaN($e)?"":$e+" pt"}if(We||document.activeElement!=xe){var $e=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_TOP,0));xe.value=isNaN($e)?"":$e+" pt"}if(We||document.activeElement!=Oe){var $e=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_RIGHT,0));Oe.value=isNaN($e)?"":$e+" pt"}if(We||document.activeElement!=_e){var $e=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_BOTTOM,0));_e.value=isNaN($e)?"":$e+" pt"}if(We||document.activeElement!=we){var $e=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_LEFT,0));we.value=isNaN($e)?"":$e+" pt"}});if(z=this.installInputHandler(Re,mxConstants$1.STYLE_SPACING,2,-999,999," pt"),F=this.installInputHandler(xe,mxConstants$1.STYLE_SPACING_TOP,0,-999,999," pt"),de=this.installInputHandler(Oe,mxConstants$1.STYLE_SPACING_RIGHT,0,-999,999," pt"),ge=this.installInputHandler(_e,mxConstants$1.STYLE_SPACING_BOTTOM,0,-999,999," pt"),K=this.installInputHandler(we,mxConstants$1.STYLE_SPACING_LEFT,0,-999,999," pt"),this.addKeyHandler(fe,St),this.addKeyHandler(Re,St),this.addKeyHandler(xe,St),this.addKeyHandler(Oe,St),this.addKeyHandler(_e,St),this.addKeyHandler(we,St),i.getModel().addListener(mxEvent$1.CHANGE,St),this.listeners.push({destroy:function(){i.getModel().removeListener(St)}}),St(),i.cellEditor.isContentEditing()){var Ut=!1,Rt=function(){Ut||(Ut=!0,window.setTimeout(function(){var Be=i.getSelectedEditingElement();if(Be!=null){let Ht=function(x,M,D){if(D.style!=null&&M!=null){var y=M.lineHeight;return D.style.lineHeight!=null&&D.style.lineHeight.substring(D.style.lineHeight.length-1)=="%"?parseInt(D.style.lineHeight)/100:y.substring(y.length-2)=="px"?parseFloat(y)/x:parseInt(y)}else return""},_t=function(x){var M=x!=null?x.fontSize:null;return M!=null&&M.substring(M.length-2)=="px"?parseFloat(M):mxConstants$1.DEFAULT_FONTSIZE},At=function(x){if(i.getParentByName(Be,x,i.cellEditor.textarea)!=null)return!0;for(var M=Be;M!=null&&M.childNodes.length==1;)if(M=M.childNodes[0],M.nodeName==x)return!0;return!1},Mt=function(x,M){if(x!=null&&M!=null){if(x==M)return!0;if(x.length>M.length+1)return x.substring(x.length-M.length-1,x.length)=="-"+M}return!1};var ii=Ht,ni=_t,si=At,jt=Mt,Ae=mxUtils$1.getCurrentStyle(Be),We=_t(Ae),ze=Ht(We,Ae,Be),$e=Be.getElementsByTagName("*");if($e.length>0&&window.getSelection&&!mxClient.IS_IE&&!mxClient.IS_IE11){for(var st=window.getSelection(),ht=0;ht<$e.length;ht++)if(st.containsNode($e[ht],!0)){var ot=mxUtils$1.getCurrentStyle($e[ht]);We=Math.max(_t(ot),We);var ft=Ht(We,ot,$e[ht]);(ft!=ze||isNaN(ft))&&(ze="")}}if(Ae!=null){if(Je(g[0],Ae.fontWeight=="bold"||Ae.fontWeight>400||At("B")||At("STRONG")),Je(g[1],Ae.fontStyle=="italic"||At("I")||At("EM")),Je(g[2],At("U")),Je(Y,At("SUP")),Je(G,At("SUB")),i.cellEditor.isTableSelected())Je(te,Mt(Ae.textAlign,"justify")),Je(v,Mt(Ae.textAlign,"left")),Je(w,Mt(Ae.textAlign,"center")),Je(S,Mt(Ae.textAlign,"right"));else{var gt=i.cellEditor.align||mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER);Mt(Ae.textAlign,"justify")?(Je(te,Mt(Ae.textAlign,"justify")),Je(v,!1),Je(w,!1),Je(S,!1)):(Je(te,!1),Je(v,gt==mxConstants$1.ALIGN_LEFT),Je(w,gt==mxConstants$1.ALIGN_CENTER),Je(S,gt==mxConstants$1.ALIGN_RIGHT))}if(ne=i.getParentByName(Be,"TABLE",i.cellEditor.textarea),oe=ne==null?null:i.getParentByName(Be,"TR",ne),q=ne==null?null:i.getParentByNames(Be,["TD","TH"],ne),ie.style.display=ne!=null?"":"none",document.activeElement!=fe){Be.nodeName=="FONT"&&Be.getAttribute("size")=="4"&&Te!=null?(Be.removeAttribute("size"),Be.style.fontSize=Te+" pt",Te=null):fe.value=isNaN(We)?"":We+" pt";var ft=parseFloat(ze);isNaN(ft)?tt.value="100 %":tt.value=Math.round(ft*100)+" %"}var Dt=Ae.color.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(x,M,D,y){return"#"+("0"+Number(M).toString(16)).substr(-2)+("0"+Number(D).toString(16)).substr(-2)+("0"+Number(y).toString(16)).substr(-2)}),Gt=Ae.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(x,M,D,y){return"#"+("0"+Number(M).toString(16)).substr(-2)+("0"+Number(D).toString(16)).substr(-2)+("0"+Number(y).toString(16)).substr(-2)});Fe!=null&&(Dt.charAt(0)=="#"?Pe=Dt:Pe="#000000",Fe(Pe,!0)),ue!=null&&(Gt.charAt(0)=="#"?be=Gt:be=null,ue(be,!0)),d.firstChild!=null&&(d.firstChild.nodeValue=Graph$1.stripQuotes(Ae.fontFamily))}}Ut=!1},0))};(mxClient.IS_FF||mxClient.IS_EDGE||mxClient.IS_IE||mxClient.IS_IE11)&&mxEvent$1.addListener(i.cellEditor.textarea,"DOMSubtreeModified",Rt),mxEvent$1.addListener(i.cellEditor.textarea,"input",Rt),mxEvent$1.addListener(i.cellEditor.textarea,"touchend",Rt),mxEvent$1.addListener(i.cellEditor.textarea,"mouseup",Rt),mxEvent$1.addListener(i.cellEditor.textarea,"keyup",Rt),this.listeners.push({destroy:function(){}}),Rt()}return r};let StyleFormatPanel$1=class extends BaseFormatPanel{constructor(e,t,i){super(e,t,i),this.init()}};StyleFormatPanel$1.prototype.defaultStrokeColor="black";StyleFormatPanel$1.prototype.init=function(){var r=this.editorUi,e=r.editor;e.graph;var t=this.format.getSelectionState();if(!t.containsLabel){t.containsImage&&t.vertices.length==1&&t.style.shape=="image"&&t.style.image!=null&&t.style.image.substring(0,19)=="data:image/svg+xml;"&&this.container.appendChild(this.addSvgStyles(this.createPanel())),(!t.containsImage||t.style.shape=="image")&&this.container.appendChild(this.addFill(this.createPanel())),this.container.appendChild(this.addStroke(this.createPanel())),this.container.appendChild(this.addLineJumps(this.createPanel()));var i=this.createRelativeOption(mxResources$1.get("opacity"),mxConstants$1.STYLE_OPACITY,41);i.style.paddingTop="8px",i.style.paddingBottom="8px",this.container.appendChild(i),this.container.appendChild(this.addEffects(this.createPanel()))}var n=this.addEditOps(this.createPanel());n.firstChild!=null&&mxUtils$1.br(n),this.container.appendChild(this.addStyleOps(n))};StyleFormatPanel$1.prototype.getCssRules=function(r){var e=document.implementation.createHTMLDocument(""),t=document.createElement("style");return mxUtils$1.setTextContent(t,r),e.body.appendChild(t),t.sheet.cssRules};StyleFormatPanel$1.prototype.addSvgStyles=function(r){var e=this.editorUi;e.editor.graph;var t=this.format.getSelectionState();r.style.paddingTop="6px",r.style.paddingBottom="6px",r.style.fontWeight="bold",r.style.display="none";try{var i=t.style.editableCssRules;if(i!=null){var n=new RegExp(i),s=t.style.image.substring(t.style.image.indexOf(",")+1),l=window.atob?atob(s):Base64.decode(s,!0),a=mxUtils$1.parseXml(l);if(a!=null)for(var o=a.getElementsByTagName("style"),h=0;h<o.length;h++)for(var d=this.getCssRules(mxUtils$1.getTextContent(o[h])),m=0;m<d.length;m++)this.addSvgRule(r,d[m],a,o[h],d,m,n)}}catch{}return r};StyleFormatPanel$1.prototype.addSvgRule=function(r,e,t,i,n,s,l){var a=this.editorUi,o=a.editor.graph;if(l.test(e.selectorText)){let m=function(g){return g=g.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),g&&g.length===4?"#"+("0"+parseInt(g[1],10).toString(16)).slice(-2)+("0"+parseInt(g[2],10).toString(16)).slice(-2)+("0"+parseInt(g[3],10).toString(16)).slice(-2):""};var d=m,h=mxUtils$1.bind(this,function(g,c,f){var C=mxUtils$1.trim(g.style[c]);if(C!=""&&C.substring(0,4)!="url("){var v=this.createColorOption(f+" "+g.selectorText,function(){return m(C)},function(w){n[s].style[c]=w;for(var S="",T=0;T<n.length;T++)S+=n[T].cssText+" ";i.textContent=S;var P=mxUtils$1.getXml(t.documentElement);o.setCellStyles(mxConstants$1.STYLE_IMAGE,"data:image/svg+xml,"+(window.btoa?btoa(P):Base64.encode(P,!0)),o.getSelectionCells())},"#ffffff",{install:function(w){},destroy:function(){}});r.appendChild(v),r.style.display=""}});h(e,"fill",mxResources$1.get("fill")),h(e,"stroke",mxResources$1.get("line")),h(e,"stop-color",mxResources$1.get("gradient"))}};StyleFormatPanel$1.prototype.addEditOps=function(r){var e=this.format.getSelectionState(),t=null;if(this.editorUi.editor.graph.getSelectionCount()==1&&(t=mxUtils$1.button(mxResources$1.get("editStyle"),mxUtils$1.bind(this,function(n){this.editorUi.actions.get("editStyle").funct()})),t.setAttribute("title",mxResources$1.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")"),t.style.width="202px",t.style.marginBottom="2px",r.appendChild(t)),e.image){var i=mxUtils$1.button(mxResources$1.get("editImage"),mxUtils$1.bind(this,function(n){this.editorUi.actions.get("image").funct()}));i.setAttribute("title",mxResources$1.get("editImage")),i.style.marginBottom="2px",t==null?i.style.width="202px":(t.style.width="100px",i.style.width="100px",i.style.marginLeft="2px"),r.appendChild(i)}return r};StyleFormatPanel$1.prototype.addFill=function(r){var e=this.editorUi,t=e.editor.graph,i=this.format.getSelectionState();r.style.paddingTop="6px",r.style.paddingBottom="6px";var n=document.createElement("select");n.style.position="absolute",n.style.marginTop="-2px",n.style.right=mxClient.IS_QUIRKS?"52px":"72px",n.style.width="70px";var s=n.cloneNode(!1);mxEvent$1.addListener(n,"click",function(S){mxEvent$1.consume(S)}),mxEvent$1.addListener(s,"click",function(S){mxEvent$1.consume(S)});var h=i.vertices.length>=1?t.stylesheet.getDefaultVertexStyle():t.stylesheet.getDefaultEdgeStyle(),l=this.createCellColorOption(mxResources$1.get("gradient"),mxConstants$1.STYLE_GRADIENTCOLOR,h[mxConstants$1.STYLE_GRADIENTCOLOR]!=null?h[mxConstants$1.STYLE_GRADIENTCOLOR]:"#ffffff",function(S){S==null||S==mxConstants$1.NONE?n.style.display="none":n.style.display=""},function(S){t.updateCellStyles(mxConstants$1.STYLE_GRADIENTCOLOR,S,t.getSelectionCells())}),a=i.style.shape=="image"?mxConstants$1.STYLE_IMAGE_BACKGROUND:mxConstants$1.STYLE_FILLCOLOR,o=i.style.shape=="image"?mxResources$1.get("background"):mxResources$1.get("fill"),h=i.vertices.length>=1?t.stylesheet.getDefaultVertexStyle():t.stylesheet.getDefaultEdgeStyle(),d=this.createCellColorOption(o,a,h[a]!=null?h[a]:"#ffffff",null,mxUtils$1.bind(this,function(S){t.updateCellStyles(a,S,t.getSelectionCells())}));d.style.fontWeight="bold";var m=mxUtils$1.getValue(i.style,a,null);l.style.display=m!=null&&m!=mxConstants$1.NONE&&i.fill&&i.style.shape!="image"?"":"none";for(var g=[mxConstants$1.DIRECTION_NORTH,mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST],c=0;c<g.length;c++){var f=document.createElement("option");f.setAttribute("value",g[c]),mxUtils$1.write(f,mxResources$1.get(g[c])),n.appendChild(f)}l.appendChild(n);for(var c=0;c<Editor$1.roughFillStyles.length;c++){var C=document.createElement("option");C.setAttribute("value",Editor$1.roughFillStyles[c].val),mxUtils$1.write(C,Editor$1.roughFillStyles[c].dispName),s.appendChild(C)}d.appendChild(s);var v=mxUtils$1.bind(this,function(){i=this.format.getSelectionState();var S=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_GRADIENT_DIRECTION,mxConstants$1.DIRECTION_SOUTH),T=mxUtils$1.getValue(i.style,"fillStyle","auto");S==""&&(S=mxConstants$1.DIRECTION_SOUTH),n.value=S,s.value=T,r.style.display=i.fill?"":"none";var P=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_FILLCOLOR,null);!i.fill||i.containsImage||P==null||P==mxConstants$1.NONE||i.style.shape=="filledEdge"?(s.style.display="none",l.style.display="none"):(s.style.display=i.style.sketch=="1"?"":"none",l.style.display=i.style.sketch!="1"||T=="solid"||T=="auto"?"":"none")});t.getModel().addListener(mxEvent$1.CHANGE,v),this.listeners.push({destroy:function(){t.getModel().removeListener(v)}}),v(),mxEvent$1.addListener(n,"change",function(S){t.setCellStyles(mxConstants$1.STYLE_GRADIENT_DIRECTION,n.value,t.getSelectionCells()),mxEvent$1.consume(S)}),mxEvent$1.addListener(s,"change",function(S){t.setCellStyles("fillStyle",s.value,t.getSelectionCells()),mxEvent$1.consume(S)}),r.appendChild(d),r.appendChild(l);for(var w=this.getCustomColors(),c=0;c<w.length;c++)r.appendChild(this.createCellColorOption(w[c].title,w[c].key,w[c].defaultValue));return r};StyleFormatPanel$1.prototype.getCustomColors=function(){var r=this.format.getSelectionState(),e=[];return(r.style.shape=="swimlane"||r.style.shape=="table")&&e.push({title:mxResources$1.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),e};StyleFormatPanel$1.prototype.addStroke=function(r){var e=this.editorUi,t=e.editor.graph,i=this.format.getSelectionState();r.style.paddingTop="4px",r.style.paddingBottom="4px",r.style.whiteSpace="normal";var n=document.createElement("div");n.style.fontWeight="bold",i.stroke||(n.style.display="none");var s=document.createElement("select");s.style.position="absolute",s.style.marginTop="-2px",s.style.right="72px",s.style.width="80px";for(var l=["sharp","rounded","curved"],a=0;a<l.length;a++){var o=document.createElement("option");o.setAttribute("value",l[a]),mxUtils$1.write(o,mxResources$1.get(l[a])),s.appendChild(o)}mxEvent$1.addListener(s,"change",function(ue){t.getModel().beginUpdate();try{var be=[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],Fe=["0",null];s.value=="rounded"?Fe=["1",null]:s.value=="curved"&&(Fe=[null,"1"]);for(var Pe=0;Pe<be.length;Pe++)t.setCellStyles(be[Pe],Fe[Pe],t.getSelectionCells());e.fireEvent(new mxEventObject$1("styleChanged","keys",be,"values",Fe,"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}mxEvent$1.consume(ue)}),mxEvent$1.addListener(s,"click",function(ue){mxEvent$1.consume(ue)});var h=i.style.shape=="image"?mxConstants$1.STYLE_IMAGE_BORDER:mxConstants$1.STYLE_STROKECOLOR,d=i.style.shape=="image"?mxResources$1.get("border"):mxResources$1.get("line"),m=i.vertices.length>=1?t.stylesheet.getDefaultVertexStyle():t.stylesheet.getDefaultEdgeStyle(),g=this.createCellColorOption(d,h,m[h]!=null?m[h]:"#000000",null,mxUtils$1.bind(this,function(ue){t.updateCellStyles(h,ue,t.getSelectionCells())}));g.appendChild(s),n.appendChild(g);var c=n.cloneNode(!1);c.style.fontWeight="normal",c.style.whiteSpace="nowrap",c.style.position="relative",c.style.paddingLeft="16px",c.style.marginBottom="2px",c.style.marginTop="2px",c.className="geToolbarContainer";var f=mxUtils$1.bind(this,function(ue,be,Fe,Pe,je){var Qe=this.editorUi.menus.styleChange(ue,"",Pe,je,"geIcon",null),et=document.createElement("div");return et.style.width=be+"px",et.style.height="1px",et.style.borderBottom="1px "+Fe+" "+this.defaultStrokeColor,et.style.paddingTop="6px",Qe.firstChild.firstChild.style.padding="0px 4px 0px 4px",Qe.firstChild.firstChild.style.width=be+"px",Qe.firstChild.firstChild.appendChild(et),Qe}),C=this.editorUi.toolbar.addMenuFunctionInContainer(c,"geSprite-orthogonal",mxResources$1.get("pattern"),!1,mxUtils$1.bind(this,function(ue){f(ue,75,"solid",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources$1.get("solid")),f(ue,75,"dashed",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources$1.get("dashed")),f(ue,75,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources$1.get("dotted")+" (1)"),f(ue,75,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources$1.get("dotted")+" (2)"),f(ue,75,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources$1.get("dotted")+" (3)")})),v=c.cloneNode(!1),w=this.editorUi.toolbar.addMenuFunctionInContainer(v,"geSprite-connection",mxResources$1.get("connection"),!1,mxUtils$1.bind(this,function(ue){this.editorUi.menus.styleChange(ue,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources$1.get("line")),this.editorUi.menus.styleChange(ue,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources$1.get("link")),this.editorUi.menus.styleChange(ue,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources$1.get("arrow")),this.editorUi.menus.styleChange(ue,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources$1.get("simpleArrow"))})),S=this.editorUi.toolbar.addMenuFunctionInContainer(v,"geSprite-orthogonal",mxResources$1.get("pattern"),!1,mxUtils$1.bind(this,function(ue){f(ue,33,"solid",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources$1.get("solid")),f(ue,33,"dashed",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources$1.get("dashed")),f(ue,33,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources$1.get("dotted")+" (1)"),f(ue,33,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources$1.get("dotted")+" (2)"),f(ue,33,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources$1.get("dotted")+" (3)")})),T=c.cloneNode(!1),P=document.createElement("input");P.style.textAlign="right",P.style.marginTop="2px",P.style.width="41px",P.setAttribute("title",mxResources$1.get("linewidth")),c.appendChild(P);var L=P.cloneNode(!0);v.appendChild(L);function k(ue){var be=parseInt(P.value);be=Math.min(999,Math.max(1,isNaN(be)?1:be)),be!=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_STROKEWIDTH,1)&&(t.setCellStyles(mxConstants$1.STYLE_STROKEWIDTH,be,t.getSelectionCells()),e.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_STROKEWIDTH],"values",[be],"cells",t.getSelectionCells()))),P.value=be+" pt",mxEvent$1.consume(ue)}function G(ue){var be=parseInt(L.value);be=Math.min(999,Math.max(1,isNaN(be)?1:be)),be!=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_STROKEWIDTH,1)&&(t.setCellStyles(mxConstants$1.STYLE_STROKEWIDTH,be,t.getSelectionCells()),e.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_STROKEWIDTH],"values",[be],"cells",t.getSelectionCells()))),L.value=be+" pt",mxEvent$1.consume(ue)}var Y=this.createStepper(P,k,1,9);Y.style.display=P.style.display,Y.style.marginTop="2px",c.appendChild(Y);var te=this.createStepper(L,G,1,9);te.style.display=L.style.display,te.style.marginTop="2px",v.appendChild(te),mxClient.IS_QUIRKS?(P.style.height="17px",L.style.height="17px"):(P.style.position="absolute",P.style.height="15px",P.style.left="141px",Y.style.left="190px",L.style.position="absolute",L.style.left="141px",L.style.height="15px",te.style.left="190px"),mxEvent$1.addListener(P,"blur",k),mxEvent$1.addListener(P,"change",k),mxEvent$1.addListener(L,"blur",G),mxEvent$1.addListener(L,"change",G),mxClient.IS_QUIRKS&&(mxUtils$1.br(T),mxUtils$1.br(T));var ie=this.editorUi.toolbar.addMenuFunctionInContainer(T,"geSprite-orthogonal",mxResources$1.get("waypoints"),!1,mxUtils$1.bind(this,function(ue){i.style.shape!="arrow"&&(this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources$1.get("straight")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources$1.get("orthogonal")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),i.style.shape=="connector"&&this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources$1.get("curved")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources$1.get("entityRelation")))})),ne=this.editorUi.toolbar.addMenuFunctionInContainer(T,"geSprite-startclassic",mxResources$1.get("linestart"),!1,mxUtils$1.bind(this,function(ue){if(i.style.shape=="connector"||i.style.shape=="flexArrow"||i.style.shape=="filledEdge"){var be=this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.NONE,0],"geIcon",null,!1);be.setAttribute("title",mxResources$1.get("none")),be.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils$1.htmlEntities(mxResources$1.get("none"))+"</font>",i.style.shape=="connector"||i.style.shape=="filledEdge"?(this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC,1],"geIcon geSprite geSprite-startclassic",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-startclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OPEN,0],"geIcon geSprite geSprite-startopen",null,!1).setAttribute("title",mxResources$1.get("openArrow")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-startopenthin",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["openAsync",0],"geIcon geSprite geSprite-startopenasync",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK,1],"geIcon geSprite geSprite-startblock",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-startblockthin",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["async",1],"geIcon geSprite geSprite-startasync",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OVAL,1],"geIcon geSprite geSprite-startoval",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND,1],"geIcon geSprite geSprite-startdiamond",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-startthindiamond",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC,0],"geIcon geSprite geSprite-startclassictrans",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-startclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK,0],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-startblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["async",0],"geIcon geSprite geSprite-startasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OVAL,0],"geIcon geSprite geSprite-startovaltrans",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND,0],"geIcon geSprite geSprite-startdiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-startthindiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["box",0],"geIcon geSprite geSvgSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["dash",0],"geIcon geSprite geSprite-startdash",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["cross",0],"geIcon geSprite geSprite-startcross",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["circlePlus",0],"geIcon geSprite geSprite-startcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["circle",1],"geIcon geSprite geSprite-startcircle",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERone",0],"geIcon geSprite geSprite-starterone",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERmandOne",0],"geIcon geSprite geSprite-starteronetoone",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERmany",0],"geIcon geSprite geSprite-startermany",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERoneToMany",0],"geIcon geSprite geSprite-starteronetomany",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-starteroneopt",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-startermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_STARTARROW],[mxConstants$1.ARROW_BLOCK],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources$1.get("block"))}})),q=this.editorUi.toolbar.addMenuFunctionInContainer(T,"geSprite-endclassic",mxResources$1.get("lineend"),!1,mxUtils$1.bind(this,function(ue){if(i.style.shape=="connector"||i.style.shape=="flexArrow"||i.style.shape=="filledEdge"){var be=this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.NONE,0],"geIcon",null,!1);be.setAttribute("title",mxResources$1.get("none")),be.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils$1.htmlEntities(mxResources$1.get("none"))+"</font>",i.style.shape=="connector"||i.style.shape=="filledEdge"?(this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC,1],"geIcon geSprite geSprite-endclassic",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-endclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OPEN,0],"geIcon geSprite geSprite-endopen",null,!1).setAttribute("title",mxResources$1.get("openArrow")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-endopenthin",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["openAsync",0],"geIcon geSprite geSprite-endopenasync",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK,1],"geIcon geSprite geSprite-endblock",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-endblockthin",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["async",1],"geIcon geSprite geSprite-endasync",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OVAL,1],"geIcon geSprite geSprite-endoval",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND,1],"geIcon geSprite geSprite-enddiamond",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-endthindiamond",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC,0],"geIcon geSprite geSprite-endclassictrans",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-endclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK,0],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-endblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["async",0],"geIcon geSprite geSprite-endasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OVAL,0],"geIcon geSprite geSprite-endovaltrans",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND,0],"geIcon geSprite geSprite-enddiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-endthindiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["box",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["dash",0],"geIcon geSprite geSprite-enddash",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["cross",0],"geIcon geSprite geSprite-endcross",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["circlePlus",0],"geIcon geSprite geSprite-endcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["circle",1],"geIcon geSprite geSprite-endcircle",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERone",0],"geIcon geSprite geSprite-enderone",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERmandOne",0],"geIcon geSprite geSprite-enderonetoone",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERmany",0],"geIcon geSprite geSprite-endermany",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERoneToMany",0],"geIcon geSprite geSprite-enderonetomany",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-enderoneopt",null,!1),this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-endermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(ue,"",[mxConstants$1.STYLE_ENDARROW],[mxConstants$1.ARROW_BLOCK],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources$1.get("block"))}}));this.addArrow(w,8),this.addArrow(ie),this.addArrow(ne),this.addArrow(q);var oe=this.addArrow(C,9);oe.className="geIcon",oe.style.width="auto";var le=this.addArrow(S,9);le.className="geIcon",le.style.width="22px";var Z=document.createElement("div");Z.style.width="85px",Z.style.height="1px",Z.style.borderBottom="1px solid "+this.defaultStrokeColor,Z.style.marginBottom="9px",oe.appendChild(Z);var B=document.createElement("div");B.style.width="23px",B.style.height="1px",B.style.borderBottom="1px solid "+this.defaultStrokeColor,B.style.marginBottom="9px",le.appendChild(B),C.style.height="15px",S.style.height="15px",w.style.height="15px",ie.style.height="17px",ne.style.marginLeft="3px",ne.style.height="17px",q.style.marginLeft="3px",q.style.height="17px",r.appendChild(n),r.appendChild(v),r.appendChild(c);var re=c.cloneNode(!1);re.style.paddingBottom="6px",re.style.paddingTop="4px",re.style.fontWeight="normal";var Te=document.createElement("div");Te.style.position="absolute",Te.style.marginLeft="3px",Te.style.marginBottom="12px",Te.style.marginTop="2px",Te.style.fontWeight="normal",Te.style.width="76px",mxUtils$1.write(Te,mxResources$1.get("lineend")),re.appendChild(Te);var se,ve,pe=this.addUnitInput(re,"pt",74,33,function(){se.apply(this,arguments)}),Q=this.addUnitInput(re,"pt",20,33,function(){ve.apply(this,arguments)});mxUtils$1.br(re);var me=document.createElement("div");me.style.height="8px",re.appendChild(me),Te=Te.cloneNode(!1),mxUtils$1.write(Te,mxResources$1.get("linestart")),re.appendChild(Te);var ce,Le,Ie=this.addUnitInput(re,"pt",74,33,function(){ce.apply(this,arguments)}),Ge=this.addUnitInput(re,"pt",20,33,function(){Le.apply(this,arguments)});mxUtils$1.br(re),this.addLabel(re,mxResources$1.get("spacing"),74,50),this.addLabel(re,mxResources$1.get("size"),20,50),mxUtils$1.br(re);var fe=n.cloneNode(!1);fe.style.fontWeight="normal",fe.style.position="relative",fe.style.paddingLeft="16px",fe.style.marginBottom="2px",fe.style.marginTop="6px",fe.style.borderWidth="0px",fe.style.paddingBottom="18px";var Te=document.createElement("div");Te.style.position="absolute",Te.style.marginLeft="3px",Te.style.marginBottom="12px",Te.style.marginTop="1px",Te.style.fontWeight="normal",Te.style.width="120px",mxUtils$1.write(Te,mxResources$1.get("perimeter")),fe.appendChild(Te);var Ve,De=this.addUnitInput(fe,"pt",20,41,function(){Ve.apply(this,arguments)});i.edges.length==t.getSelectionCount()?(r.appendChild(T),mxClient.IS_QUIRKS&&(mxUtils$1.br(r),mxUtils$1.br(r)),r.appendChild(re)):i.vertices.length==t.getSelectionCount()&&(mxClient.IS_QUIRKS&&mxUtils$1.br(r),r.appendChild(fe));var He=mxUtils$1.bind(this,function(ue,be,Fe){if(i=this.format.getSelectionState(),mxUtils$1.getValue(i.style,h,null),Fe||document.activeElement!=P){var Pe=parseInt(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_STROKEWIDTH,1));P.value=isNaN(Pe)?"":Pe+" pt"}if(Fe||document.activeElement!=L){var Pe=parseInt(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_STROKEWIDTH,1));L.value=isNaN(Pe)?"":Pe+" pt"}s.style.visibility=i.style.shape=="connector"||i.style.shape=="filledEdge"?"":"hidden",mxUtils$1.getValue(i.style,mxConstants$1.STYLE_CURVED,null)=="1"?s.value="curved":mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ROUNDED,null)=="1"&&(s.value="rounded"),mxUtils$1.getValue(i.style,mxConstants$1.STYLE_DASHED,null)=="1"?mxUtils$1.getValue(i.style,mxConstants$1.STYLE_DASH_PATTERN,null)==null?Z.style.borderBottom="1px dashed "+this.defaultStrokeColor:Z.style.borderBottom="1px dotted "+this.defaultStrokeColor:Z.style.borderBottom="1px solid "+this.defaultStrokeColor,B.style.borderBottom=Z.style.borderBottom;var je=ie.getElementsByTagName("div")[0];if(je!=null){var Qe=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_EDGE,null);mxUtils$1.getValue(i.style,mxConstants$1.STYLE_NOEDGESTYLE,null)=="1"&&(Qe=null),Qe=="orthogonalEdgeStyle"&&mxUtils$1.getValue(i.style,mxConstants$1.STYLE_CURVED,null)=="1"?je.className="geSprite geSprite-curved":Qe=="straight"||Qe=="none"||Qe==null?je.className="geSprite geSprite-straight":Qe=="entityRelationEdgeStyle"?je.className="geSprite geSprite-entity":Qe=="elbowEdgeStyle"?je.className="geSprite "+(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ELBOW,null)=="vertical"?"geSprite-verticalelbow":"geSprite-horizontalelbow"):Qe=="isometricEdgeStyle"?je.className="geSprite "+(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ELBOW,null)=="vertical"?"geSprite-verticalisometric":"geSprite-horizontalisometric"):je.className="geSprite geSprite-orthogonal"}var et=w.getElementsByTagName("div")[0];et!=null&&(i.style.shape=="link"?et.className="geSprite geSprite-linkedge":i.style.shape=="flexArrow"?et.className="geSprite geSprite-arrow":i.style.shape=="arrow"?et.className="geSprite geSprite-simplearrow":et.className="geSprite geSprite-connection"),i.edges.length==t.getSelectionCount()?(v.style.display="",c.style.display="none"):(v.style.display="none",c.style.display="");function Ze($,R,U,F,z){var K=F.getElementsByTagName("div")[0];return K!=null&&(K.className=e.getCssClassForMarker(z,i.style.shape,R,U),K.className=="geSprite geSprite-noarrow"&&(K.innerHTML=mxUtils$1.htmlEntities(mxResources$1.get("none")),K.style.backgroundImage="none",K.style.verticalAlign="top",K.style.marginTop="5px",K.style.fontSize="10px",K.style.filter="none",K.style.color=$.defaultStrokeColor,K.nextSibling.style.marginTop="0px")),K}var Ke=Ze(this,mxUtils$1.getValue(i.style,mxConstants$1.STYLE_STARTARROW,null),mxUtils$1.getValue(i.style,"startFill","1"),ne,"start"),E=Ze(this,mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ENDARROW,null),mxUtils$1.getValue(i.style,"endFill","1"),q,"end");if(Ke!=null&&E!=null&&(i.style.shape=="arrow"?(Ke.className="geSprite geSprite-noarrow",E.className="geSprite geSprite-endblocktrans"):i.style.shape=="link"&&(Ke.className="geSprite geSprite-noarrow",E.className="geSprite geSprite-noarrow")),mxUtils$1.setOpacity(ie,i.style.shape=="arrow"?30:100),i.style.shape!="connector"&&i.style.shape!="flexArrow"&&i.style.shape!="filledEdge"?(mxUtils$1.setOpacity(ne,30),mxUtils$1.setOpacity(q,30)):(mxUtils$1.setOpacity(ne,100),mxUtils$1.setOpacity(q,100)),Fe||document.activeElement!=Ge){var Pe=parseInt(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_MARKERSIZE));Ge.value=isNaN(Pe)?"":Pe+" pt"}if(Fe||document.activeElement!=Ie){var Pe=parseInt(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING,0));Ie.value=isNaN(Pe)?"":Pe+" pt"}if(Fe||document.activeElement!=Q){var Pe=parseInt(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE));Q.value=isNaN(Pe)?"":Pe+" pt"}if(Fe||document.activeElement!=Ie){var Pe=parseInt(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_TARGET_PERIMETER_SPACING,0));pe.value=isNaN(Pe)?"":Pe+" pt"}if(Fe||document.activeElement!=De){var Pe=parseInt(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_PERIMETER_SPACING,0));De.value=isNaN(Pe)?"":Pe+" pt"}});return Le=this.installInputHandler(Ge,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_MARKERSIZE,0,999," pt"),ce=this.installInputHandler(Ie,mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING,0,-999,999," pt"),ve=this.installInputHandler(Q,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE,0,999," pt"),se=this.installInputHandler(pe,mxConstants$1.STYLE_TARGET_PERIMETER_SPACING,0,-999,999," pt"),Ve=this.installInputHandler(De,mxConstants$1.STYLE_PERIMETER_SPACING,0,0,999," pt"),this.addKeyHandler(P,He),this.addKeyHandler(Ge,He),this.addKeyHandler(Ie,He),this.addKeyHandler(Q,He),this.addKeyHandler(pe,He),this.addKeyHandler(De,He),t.getModel().addListener(mxEvent$1.CHANGE,He),this.listeners.push({destroy:function(){t.getModel().removeListener(He)}}),He(),r};StyleFormatPanel$1.prototype.addLineJumps=function(r){var e=this.format.getSelectionState();if(Graph$1.lineJumpsEnabled&&e.edges.length>0&&e.vertices.length==0&&e.lineJumps){r.style.padding="8px 0px 24px 18px";var t=this.editorUi,i=t.editor,n=i.graph,s=document.createElement("div");s.style.position="absolute",s.style.fontWeight="bold",s.style.width="80px",mxUtils$1.write(s,mxResources$1.get("lineJumps")),r.appendChild(s);var l=document.createElement("select");l.style.position="absolute",l.style.marginTop="-2px",l.style.right="76px",l.style.width="62px";for(var a=["none","arc","gap","sharp"],o=0;o<a.length;o++){var h=document.createElement("option");h.setAttribute("value",a[o]),mxUtils$1.write(h,mxResources$1.get(a[o])),l.appendChild(h)}mxEvent$1.addListener(l,"change",function(c){n.getModel().beginUpdate();try{n.setCellStyles("jumpStyle",l.value,n.getSelectionCells()),t.fireEvent(new mxEventObject$1("styleChanged","keys",["jumpStyle"],"values",[l.value],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}mxEvent$1.consume(c)}),mxEvent$1.addListener(l,"click",function(c){mxEvent$1.consume(c)}),r.appendChild(l);var d,m=this.addUnitInput(r,"pt",22,33,function(){d.apply(this,arguments)});d=this.installInputHandler(m,"jumpSize",Graph$1.defaultJumpSize,0,999," pt");var g=mxUtils$1.bind(this,function(c,f,C){if(e=this.format.getSelectionState(),l.value=mxUtils$1.getValue(e.style,"jumpStyle","none"),C||document.activeElement!=m){var v=parseInt(mxUtils$1.getValue(e.style,"jumpSize",Graph$1.defaultJumpSize));m.value=isNaN(v)?"":v+" pt"}});this.addKeyHandler(m,g),n.getModel().addListener(mxEvent$1.CHANGE,g),this.listeners.push({destroy:function(){n.getModel().removeListener(g)}}),g()}else r.style.display="none";return r};StyleFormatPanel$1.prototype.addEffects=function(r){var e=this.editorUi,t=e.editor,i=t.graph,n=this.format.getSelectionState();r.style.paddingTop="0px",r.style.paddingBottom="2px";var s=document.createElement("table");mxClient.IS_QUIRKS&&(s.style.fontSize="1em"),s.style.width="100%",s.style.fontWeight="bold",s.style.paddingRight="20px";var l=document.createElement("tbody"),a=document.createElement("tr");a.style.padding="0px";var o=document.createElement("td");o.style.padding="0px",o.style.width="50%",o.setAttribute("valign","top");var h=o.cloneNode(!0);h.style.paddingLeft="8px",a.appendChild(o),a.appendChild(h),l.appendChild(a),s.appendChild(l),r.appendChild(s);var d=o,m=mxUtils$1.bind(this,function(c,f,C){var v=this.createCellOption(c,f,C);v.style.width="100%",d.appendChild(v),d=d==o?h:o}),g=mxUtils$1.bind(this,function(c,f,C){n=this.format.getSelectionState(),o.innerHTML="",h.innerHTML="",d=o,n.rounded&&m(mxResources$1.get("rounded"),mxConstants$1.STYLE_ROUNDED,0),n.style.shape=="swimlane"&&m(mxResources$1.get("divider"),"swimlaneLine",1),n.containsImage||m(mxResources$1.get("shadow"),mxConstants$1.STYLE_SHADOW,0),n.glass&&m(mxResources$1.get("glass"),mxConstants$1.STYLE_GLASS,0),m(mxResources$1.get("sketch"),"sketch",0)});return i.getModel().addListener(mxEvent$1.CHANGE,g),this.listeners.push({destroy:function(){i.getModel().removeListener(g)}}),g(),r};StyleFormatPanel$1.prototype.addStyleOps=function(r){r.style.paddingTop="10px",r.style.paddingBottom="10px";var e=mxUtils$1.button(mxResources$1.get("setAsDefaultStyle"),mxUtils$1.bind(this,function(t){this.editorUi.actions.get("setAsDefaultStyle").funct()}));return e.setAttribute("title",mxResources$1.get("setAsDefaultStyle")+" ("+this.editorUi.actions.get("setAsDefaultStyle").shortcut+")"),e.style.width="202px",r.appendChild(e),r};class DiagramStylePanel extends BaseFormatPanel{constructor(e,t,i){super(e,t,i),this.init()}}DiagramStylePanel.prototype.init=function(){var r=this.editorUi,e=r.editor;e.graph,this.container.appendChild(this.addView(this.createPanel()))};DiagramStylePanel.prototype.addView=function(r){var e=this.editorUi,t=e.editor,i=t.graph,n=i.getModel();r.style.whiteSpace="normal";var s=i.currentVertexStyle.sketch=="1"&&i.currentEdgeStyle.sketch=="1",l=i.currentVertexStyle.rounded=="1",a=i.currentEdgeStyle.curved=="1",o=document.createElement("div");o.style.paddingBottom="12px",o.style.marginRight="16px",r.style.paddingTop="8px";var h=document.createElement("table");mxClient.IS_QUIRKS&&(h.style.fontSize="1em"),h.style.width="100%",h.style.fontWeight="bold";var d=document.createElement("tbody"),m=document.createElement("tr");m.style.padding="0px";var g=document.createElement("td");g.style.padding="0px",g.style.width="50%",g.setAttribute("valign","middle");var c=g.cloneNode(!0);c.style.paddingLeft="8px",m.appendChild(g),m.appendChild(c),d.appendChild(m),h.appendChild(d),g.appendChild(this.createOption(mxResources$1.get("sketch"),function(){return s},function(Z){s=Z,Z?(i.currentEdgeStyle.sketch="1",i.currentVertexStyle.sketch="1"):(delete i.currentEdgeStyle.sketch,delete i.currentVertexStyle.sketch),i.updateCellStyles("sketch",Z?"1":null,i.getVerticesAndEdges())},null,function(Z){Z.style.width="auto"})),c.appendChild(this.createOption(mxResources$1.get("rounded"),function(){return l},function(Z){l=Z,Z?i.currentVertexStyle.rounded="1":delete i.currentVertexStyle.rounded,i.updateCellStyles("rounded",Z?"1":null,i.getVerticesAndEdges(!0,!0))},null,function(Z){Z.style.width="auto"})),g=g.cloneNode(!1),c=c.cloneNode(!1),m=m.cloneNode(!1),m.appendChild(g),m.appendChild(c),d.appendChild(m),g.appendChild(this.createOption(mxResources$1.get("curved"),function(){return a},function(Z){a=Z,Z?i.currentEdgeStyle.curved="1":delete i.currentEdgeStyle.curved,i.updateCellStyles("curved",Z?"1":null,i.getVerticesAndEdges(!1,!0))},null,function(Z){Z.style.width="auto"})),o.appendChild(h),r.appendChild(o);var f=["fillColor","strokeColor","fontColor","gradientColor"],C=mxUtils$1.bind(this,function(Z,B){var re=i.getVerticesAndEdges();n.beginUpdate();try{for(var se=0;se<re.length;se++){var ve=i.getCellStyle(re[se]);ve.labelBackgroundColor!=null&&i.updateCellStyles("labelBackgroundColor",B!=null?B.background:null,[re[se]]);for(var pe=n.isEdge(re[se]),Q=n.getStyle(re[se]),me=pe?i.currentEdgeStyle:i.currentVertexStyle,ce=0;ce<Z.length;ce++)(ve[Z[ce]]!=null&&ve[Z[ce]]!=mxConstants$1.NONE||Z[ce]!=mxConstants$1.STYLE_FILLCOLOR&&Z[ce]!=mxConstants$1.STYLE_STROKECOLOR)&&(Q=mxUtils$1.setStyle(Q,Z[ce],me[Z[ce]]));n.setStyle(re[se],Q)}}finally{n.endUpdate()}}),v=mxUtils$1.bind(this,function(Z,B,re){if(Z!=null)for(var se=0;se<B.length;se++)(Z[B[se]]!=null&&Z[B[se]]!=mxConstants$1.NONE||B[se]!=mxConstants$1.STYLE_FILLCOLOR&&B[se]!=mxConstants$1.STYLE_STROKECOLOR)&&(Z[B[se]]=re[B[se]])}),w=mxUtils$1.bind(this,function(Z,B,re,se,ve){if(Z!=null){if(re!=null&&B.labelBackgroundColor!=null){var pe=se!=null?se.background:null;ve=ve??i,pe==null&&(pe=ve.background),pe==null&&(pe=ve.defaultPageBackgroundColor),B.labelBackgroundColor=pe}for(var Q in Z)(re==null||B[Q]!=null&&B[Q]!=mxConstants$1.NONE||Q!=mxConstants$1.STYLE_FILLCOLOR&&Q!=mxConstants$1.STYLE_STROKECOLOR)&&(B[Q]=Z[Q])}}),S=mxUtils$1.button(mxResources$1.get("reset"),mxUtils$1.bind(this,function(Z){var B=i.getVerticesAndEdges(!0,!0);if(B.length>0){n.beginUpdate();try{i.updateCellStyles("sketch",null,B),i.updateCellStyles("rounded",null,B),i.updateCellStyles("curved",null,i.getVerticesAndEdges(!1,!0))}finally{n.endUpdate()}}i.defaultVertexStyle=mxUtils$1.clone(e.initialDefaultVertexStyle),i.defaultEdgeStyle=mxUtils$1.clone(e.initialDefaultEdgeStyle),e.clearDefaultStyle()}));S.setAttribute("title",mxResources$1.get("reset")),S.style.textOverflow="ellipsis",S.style.maxWidth="90px",c.appendChild(S);var T=mxUtils$1.bind(this,function(Z,B,re,se,ve){var pe=document.createElement("div");pe.style.cssText="position:absolute;display:inline-block;width:100%;height:100%;overflow:hidden;pointer-events:none;",ve.appendChild(pe);var Q=new Graph$1(pe,null,null,i.getStylesheet());Q.resetViewOnRootChange=!1,Q.foldingEnabled=!1,Q.gridEnabled=!1,Q.autoScroll=!1,Q.setTooltips(!1),Q.setConnectable(!1),Q.setPanning(!1),Q.setEnabled(!1),Q.getCellStyle=function(Le){var Ie=mxUtils$1.clone(Graph$1.prototype.getCellStyle.apply(this,arguments)),Ge=i.stylesheet.getDefaultVertexStyle(),fe=B;return n.isEdge(Le)&&(Ge=i.stylesheet.getDefaultEdgeStyle(),fe=re),v(Ie,f,Ge),w(Z,Ie,Le,se,Q),w(fe,Ie,Le,se,Q),Ie},Q.model.beginUpdate();try{var me=Q.insertVertex(Q.getDefaultParent(),null,"Shape",14,8,70,40,"strokeWidth=2;"),ce=Q.insertEdge(Q.getDefaultParent(),null,"Connector",me,me,"edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;endSize=5;strokeWidth=2;");ce.geometry.points=[new mxPoint(32,70)],ce.geometry.offset=new mxPoint(0,8)}finally{Q.model.endUpdate()}}),P=document.createElement("div");P.style.position="relative",r.appendChild(P),this.format.cachedStyleEntries==null&&(this.format.cachedStyleEntries=[]);var L=mxUtils$1.bind(this,function(Z,B,re,se,ve){var pe=this.format.cachedStyleEntries[ve];pe==null&&(pe=document.createElement("div"),pe.style.cssText="display:inline-block;position:relative;width:96px;height:90px;cursor:pointer;border:1px solid gray;margin:2px;overflow:hidden;",se!=null&&se.background!=null&&(pe.style.backgroundColor=se.background),T(Z,B,re,se,pe),mxEvent$1.addGestureListeners(pe,mxUtils$1.bind(this,function(Q){pe.style.opacity=.5}),null,mxUtils$1.bind(this,function(Q){pe.style.opacity=1,i.defaultVertexStyle=mxUtils$1.clone(e.initialDefaultVertexStyle),i.defaultEdgeStyle=mxUtils$1.clone(e.initialDefaultEdgeStyle),w(Z,i.defaultVertexStyle),w(Z,i.defaultEdgeStyle),w(B,i.defaultVertexStyle),w(re,i.defaultEdgeStyle),e.clearDefaultStyle(),s?(i.currentEdgeStyle.sketch="1",i.currentVertexStyle.sketch="1"):(i.currentEdgeStyle.sketch="0",i.currentVertexStyle.sketch="0"),l?(i.currentVertexStyle.rounded="1",i.currentEdgeStyle.rounded="1"):(i.currentVertexStyle.rounded="0",i.currentEdgeStyle.rounded="1"),a?i.currentEdgeStyle.curved="1":i.currentEdgeStyle.curved="0",n.beginUpdate();try{C(f,se);var me=new ChangePageSetup$1(e,se!=null?se.background:null);me.ignoreImage=!0,n.execute(me),n.execute(new ChangeGridColor(e,se!=null&&se.gridColor!=null?se.gridColor:i.view.defaultGridColor))}finally{n.endUpdate()}})),mxEvent$1.addListener(pe,"mouseenter",mxUtils$1.bind(this,function(Q){var me=i.getCellStyle,ce=i.background,Le=i.view.gridColor;i.background=se!=null?se.background:null,i.view.gridColor=se!=null&&se.gridColor!=null?se.gridColor:i.view.defaultGridColor,i.getCellStyle=function(Ie){var Ge=mxUtils$1.clone(me.apply(this,arguments)),fe=i.stylesheet.getDefaultVertexStyle(),Te=B;return n.isEdge(Ie)&&(fe=i.stylesheet.getDefaultEdgeStyle(),Te=re),v(Ge,f,fe),w(Z,Ge,Ie,se),w(Te,Ge,Ie,se),Ge},i.refresh(),i.getCellStyle=me,i.background=ce,i.view.gridColor=Le})),mxEvent$1.addListener(pe,"mouseleave",mxUtils$1.bind(this,function(Q){i.refresh()})),this.format.cachedStyleEntries[ve]=pe),P.appendChild(pe)}),k=10,G=Math.ceil(Editor$1.styles.length/k);this.format.currentStylePage=this.format.currentStylePage!=null?this.format.currentStylePage:0;var Y=[],te=mxUtils$1.bind(this,function(){Y.length>0&&(Y[this.format.currentStylePage].style.background="#84d7ff");for(var Z=this.format.currentStylePage*k;Z<Math.min((this.format.currentStylePage+1)*k,Editor$1.styles.length);Z++){var B=Editor$1.styles[Z];L(B.commonStyle,B.vertexStyle,B.edgeStyle,B.graph,Z)}}),ie=mxUtils$1.bind(this,function(Z){Z>=0&&Z<G&&(Y[this.format.currentStylePage].style.background="transparent",P.innerHTML="",this.format.currentStylePage=Z,te())});if(G>1){var ne=document.createElement("div");ne.style.whiteSpace="nowrap",ne.style.position="relative",ne.style.textAlign="center",ne.style.paddingTop="4px",ne.style.width="210px",r.style.paddingBottom="8px";for(var q=0;q<G;q++){var oe=document.createElement("div");oe.style.display="inline-block",oe.style.width="6px",oe.style.height="6px",oe.style.marginLeft="4px",oe.style.marginRight="3px",oe.style.borderRadius="3px",oe.style.cursor="pointer",oe.style.background="transparent",oe.style.border="1px solid #b5b6b7",mxUtils$1.bind(this,function(Z,B){mxEvent$1.addListener(oe,"click",mxUtils$1.bind(this,function(){ie(Z)}))})(q,oe),ne.appendChild(oe),Y.push(oe)}if(r.appendChild(ne),te(),G<15){let re=function(se){mxEvent$1.addListener(se,"mouseenter",function(){se.style.opacity="1"}),mxEvent$1.addListener(se,"mouseleave",function(){se.style.opacity="0.5"})};var le=re,g=document.createElement("div");g.style.cssText="position:absolute;left:0px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ4eHh3d3d1dXVxcXF2dnZ2dnZ2dnZxcXF2dnYmb3w1AAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADRJREFUCNdjwACMAmBKaiGYs2oJmLPKAZ3DabU8AMRTXpUKopislqFyVzCAuUZgikkBZjoAcMYLnp53P/UAAAAASUVORK5CYII=);",mxEvent$1.addListener(g,"click",mxUtils$1.bind(this,function(){ie(mxUtils$1.mod(this.format.currentStylePage-1,G))}));var c=document.createElement("div");c.style.cssText="position:absolute;right:2px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYBuwCcAAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADZJREFUCNdjQAOMAmBKaiGY8loF5rKswsZlrVo8AUiFrTICcbIWK8A5DF1gDoMymMPApIAwHwCS0Qx/U7qCBQAAAABJRU5ErkJggg==);",ne.appendChild(g),ne.appendChild(c),mxEvent$1.addListener(c,"click",mxUtils$1.bind(this,function(){ie(mxUtils$1.mod(this.format.currentStylePage+1,G))})),re(g),re(c)}}else te();return r};class DiagramFormatPanel extends BaseFormatPanel{constructor(e,t,i){super(e,t,i),this.init()}}DiagramFormatPanel.showPageView=!0;DiagramFormatPanel.prototype.showBackgroundImageOption=!0;DiagramFormatPanel.prototype.init=function(){var r=this.editorUi,e=r.editor,t=e.graph;this.container.appendChild(this.addView(this.createPanel())),t.isEnabled()&&(this.container.appendChild(this.addOptions(this.createPanel())),this.container.appendChild(this.addPaperSize(this.createPanel())),this.container.appendChild(this.addStyleOps(this.createPanel())))};DiagramFormatPanel.prototype.addView=function(r){var e=this.editorUi,t=e.editor,i=t.graph;if(r.appendChild(this.createTitle(mxResources$1.get("view"))),this.addGridOption(r),DiagramFormatPanel.showPageView&&r.appendChild(this.createOption(mxResources$1.get("pageView"),function(){return i.pageVisible},function(l){e.actions.get("pageView").funct()},{install:function(l){this.listener=function(){l(i.pageVisible)},e.addListener("pageViewChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),i.isEnabled()){var n=this.createColorOption(mxResources$1.get("background"),function(){return i.background},function(l){var a=new ChangePageSetup$1(e,l);a.ignoreImage=!0,i.model.execute(a)},"#ffffff",{install:function(l){this.listener=function(){l(i.background)},e.addListener("backgroundColorChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}});if(this.showBackgroundImageOption){var s=mxUtils$1.button(mxResources$1.get("image"),function(l){e.showBackgroundImageDialog(null,e.editor.graph.backgroundImage),mxEvent$1.consume(l)});s.style.position="absolute",s.className="geColorBtn",s.style.marginTop="-4px",s.style.paddingBottom=document.documentMode==11||mxClient.IS_MT?"0px":"2px",s.style.height="22px",s.style.right=mxClient.IS_QUIRKS?"52px":"72px",s.style.width="56px",n.appendChild(s)}r.appendChild(n)}return r};DiagramFormatPanel.prototype.addOptions=function(r){var e=this.editorUi,t=e.editor,i=t.graph;return r.appendChild(this.createTitle(mxResources$1.get("options"))),i.isEnabled()&&(r.appendChild(this.createOption(mxResources$1.get("connectionArrows"),function(){return i.connectionArrowsEnabled},function(n){e.actions.get("connectionArrows").funct()},{install:function(n){this.listener=function(){n(i.connectionArrowsEnabled)},e.addListener("connectionArrowsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),r.appendChild(this.createOption(mxResources$1.get("connectionPoints"),function(){return i.connectionHandler.isEnabled()},function(n){e.actions.get("connectionPoints").funct()},{install:function(n){this.listener=function(){n(i.connectionHandler.isEnabled())},e.addListener("connectionPointsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),r.appendChild(this.createOption(mxResources$1.get("guides"),function(){return i.graphHandler.guidesEnabled},function(n){e.actions.get("guides").funct()},{install:function(n){this.listener=function(){n(i.graphHandler.guidesEnabled)},e.addListener("guidesEnabledChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}}))),r};DiagramFormatPanel.prototype.addGridOption=function(r){var e=this,t=this.editorUi,i=t.editor.graph,n=document.createElement("input");n.style.position="absolute",n.style.textAlign="right",n.style.width="38px",n.value=this.inUnit(i.getGridSize())+" "+this.getUnit();var s=this.createStepper(n,l,this.getUnitStep(),null,null,null,this.isFloatUnit());n.style.display=i.isGridEnabled()?"":"none",s.style.display=n.style.display,mxEvent$1.addListener(n,"keydown",function(h){h.keyCode==13?(i.container.focus(),mxEvent$1.consume(h)):h.keyCode==27&&(n.value=i.getGridSize(),i.container.focus(),mxEvent$1.consume(h))});function l(h){var d=e.isFloatUnit()?parseFloat(n.value):parseInt(n.value);d=e.fromUnit(Math.max(e.inUnit(1),isNaN(d)?e.inUnit(10):d)),d!=i.getGridSize()&&i.setGridSize(d),n.value=e.inUnit(d)+" "+e.getUnit(),mxEvent$1.consume(h)}mxEvent$1.addListener(n,"blur",l),mxEvent$1.addListener(n,"change",l);var a=function(h,d){n.value=e.inUnit(i.getGridSize())+" "+e.getUnit(),e.format.refresh()};if(i.view.addListener("unitChanged",a),this.listeners.push({destroy:function(){i.view.removeListener(a)}}),mxClient.IS_SVG){n.style.marginTop="-2px",n.style.right="84px",s.style.marginTop="-16px",s.style.right="72px";var o=this.createColorOption(mxResources$1.get("grid"),function(){var h=i.view.gridColor;return i.isGridEnabled()?h:null},function(h){var d=i.isGridEnabled();h==mxConstants$1.NONE?i.setGridEnabled(!1):(i.setGridEnabled(!0),t.setGridColor(h)),n.style.display=i.isGridEnabled()?"":"none",s.style.display=n.style.display,d!=i.isGridEnabled()&&t.fireEvent(new mxEventObject$1("gridEnabledChanged"))},"#e0e0e0",{install:function(h){this.listener=function(){h(i.isGridEnabled()?i.view.gridColor:null)},t.addListener("gridColorChanged",this.listener),t.addListener("gridEnabledChanged",this.listener)},destroy:function(){t.removeListener(this.listener)}});o.appendChild(n),o.appendChild(s),r.appendChild(o)}else n.style.marginTop="2px",n.style.right="32px",s.style.marginTop="2px",s.style.right="20px",r.appendChild(n),r.appendChild(s),r.appendChild(this.createOption(mxResources$1.get("grid"),function(){return i.isGridEnabled()},function(h){i.setGridEnabled(h),i.isGridEnabled()&&(i.view.gridColor="#e0e0e0"),t.fireEvent(new mxEventObject$1("gridEnabledChanged"))},{install:function(h){this.listener=function(){n.style.display=i.isGridEnabled()?"":"none",s.style.display=n.style.display,h(i.isGridEnabled())},t.addListener("gridEnabledChanged",this.listener)},destroy:function(){t.removeListener(this.listener)}}))};DiagramFormatPanel.prototype.addDocumentProperties=function(r){var e=this.editorUi,t=e.editor;return t.graph,r.appendChild(this.createTitle(mxResources$1.get("options"))),r};DiagramFormatPanel.prototype.addPaperSize=function(r){var e=this.editorUi,t=e.editor,i=t.graph;r.appendChild(this.createTitle(mxResources$1.get("paperSize")));var n=PageSetupDialog$1.addPageFormatPanel(r,"formatpanel",i.pageFormat,function(l){if(i.pageFormat==null||i.pageFormat.width!=l.width||i.pageFormat.height!=l.height){var a=new ChangePageSetup$1(e,null,null,l);a.ignoreColor=!0,a.ignoreImage=!0,i.model.execute(a)}});this.addKeyHandler(n.widthInput,function(){n.set(i.pageFormat)}),this.addKeyHandler(n.heightInput,function(){n.set(i.pageFormat)});var s=function(){n.set(i.pageFormat)};return e.addListener("pageFormatChanged",s),this.listeners.push({destroy:function(){e.removeListener(s)}}),i.getModel().addListener(mxEvent$1.CHANGE,s),this.listeners.push({destroy:function(){i.getModel().removeListener(s)}}),r};DiagramFormatPanel.prototype.addStyleOps=function(r){var e=mxUtils$1.button(mxResources$1.get("editData"),mxUtils$1.bind(this,function(t){this.editorUi.actions.get("editData").funct()}));return e.setAttribute("title",mxResources$1.get("editData")+" ("+this.editorUi.actions.get("editData").shortcut+")"),e.style.width="202px",e.style.marginBottom="2px",r.appendChild(e),mxUtils$1.br(r),e=mxUtils$1.button(mxResources$1.get("clearDefaultStyle"),mxUtils$1.bind(this,function(t){this.editorUi.actions.get("clearDefaultStyle").funct()})),e.setAttribute("title",mxResources$1.get("clearDefaultStyle")+" ("+this.editorUi.actions.get("clearDefaultStyle").shortcut+")"),e.style.width="202px",r.appendChild(e),r};DiagramFormatPanel.prototype.destroy=function(){BaseFormatPanel.prototype.destroy.apply(this,arguments),this.gridEnabledListener&&(this.editorUi.removeListener(this.gridEnabledListener),this.gridEnabledListener=null)};class Default{constructor(){}}Default.prototype.defaultFont="Helvetica";Default.prototype.defaultFontSize="12";Default.prototype.defaultMenuItems=["file","edit","view","arrange","extras","help"];Default.prototype.defaultFonts=["Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"];class Toolbar{constructor(e,t){this.compactUi=!0,this.editorUi=e,this.container=t,this.staticElements=[],this.init(),this.gestureHandler=mxUtils$1.bind(this,function(i){this.editorUi.currentMenu!=null&&mxEvent$1.getSource(i)!=this.editorUi.currentMenu.div&&this.hideMenu()}),mxEvent$1.addGestureListeners(document,this.gestureHandler)}}Toolbar.prototype.dropdownImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAHt7e////yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCREM1NkJFMjE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCREM1NkJFMzE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQzOUMzMjZCMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQzOUMzMjZDMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/dropdown.gif";Toolbar.prototype.dropdownImageHtml='<img border="0" style="position:absolute;right:4px;top:'+(Toolbar.compactUi?6:8)+'px;" src="'+Toolbar.prototype.dropdownImage+'" valign="middle"/>';Toolbar.prototype.selectedBackground="#d0d0d0";Toolbar.prototype.unselectedBackground="none";Toolbar.prototype.staticElements=null;Toolbar.prototype.init=function(){var r=screen.width;if(r-=screen.height>740?56:0,r>=700){var e=this.addMenu("",mxResources$1.get("view")+" ("+mxResources$1.get("panTooltip")+")",!0,"viewPanels",null,!0);this.addDropDownArrow(e,"geSprite-formatpanel",38,50,-4,-3,36,-8),this.addSeparator()}var t=this.addMenu("",mxResources$1.get("zoom")+" (Alt+Mousewheel)",!0,"viewZoom",null,!0);if(t.showDisabled=!0,t.style.whiteSpace="nowrap",t.style.position="relative",t.style.overflow="hidden",Toolbar.compactUi?t.style.width=mxClient.IS_QUIRKS?"58px":"50px":t.style.width=mxClient.IS_QUIRKS?"62px":"36px",r>=420){this.addSeparator();var i=this.addItems(["zoomIn","zoomOut"]);i[0].setAttribute("title",mxResources$1.get("zoomIn")+" ("+this.editorUi.actions.get("zoomIn").shortcut+")"),i[1].setAttribute("title",mxResources$1.get("zoomOut")+" ("+this.editorUi.actions.get("zoomOut").shortcut+")")}this.updateZoom=mxUtils$1.bind(this,function(){t.innerHTML=Math.round(this.editorUi.editor.graph.view.scale*100)+"%"+this.dropdownImageHtml,Toolbar.compactUi&&(t.getElementsByTagName("img")[0].style.right="1px",t.getElementsByTagName("img")[0].style.top="5px")}),this.editorUi.editor.graph.view.addListener(mxEvent$1.EVENT_SCALE,this.updateZoom),this.editorUi.editor.addListener("resetGraphView",this.updateZoom);var i=this.addItems(["-","undo","redo"]);i[1].setAttribute("title",mxResources$1.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),i[2].setAttribute("title",mxResources$1.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")");var n=this.addItems(["-","select","pan"]);if(n[1].setAttribute("title",mxResources$1.get("select")+" ("+this.editorUi.actions.get("select").shortcut+")"),n[2].setAttribute("title",mxResources$1.get("pan")+" ("+this.editorUi.actions.get("select").shortcut+")"),r>=320){var i=this.addItems(["-","delete"]);i[1].setAttribute("title",mxResources$1.get("delete")+" ("+this.editorUi.actions.get("delete").shortcut+")")}r>=550&&this.addItems(["-","toFront","toBack"]),r>=740&&(this.addItems(["-","fillColor"]),r>=780&&(this.addItems(["strokeColor"]),r>=820&&this.addItems(["shadow"]))),r>=400&&(this.addSeparator(),r>=440&&(this.edgeShapeMenu=this.addMenuFunction("",mxResources$1.get("connection"),!1,mxUtils$1.bind(this,function(l){this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],[null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources$1.get("line")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],["link",null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources$1.get("link")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],["flexArrow",null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources$1.get("arrow")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],["arrow",null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources$1.get("simpleArrow"))})),this.addDropDownArrow(this.edgeShapeMenu,"geSprite-connection",44,50,0,0,22,-4)),this.edgeStyleMenu=this.addMenuFunction("geSprite-orthogonal",mxResources$1.get("waypoints"),!1,mxUtils$1.bind(this,function(l){this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources$1.get("straight")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources$1.get("orthogonal")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources$1.get("curved")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources$1.get("entityRelation"))})),this.addDropDownArrow(this.edgeStyleMenu,"geSprite-orthogonal",44,50,0,0,22,-4)),this.addSeparator();var s=this.addMenu("",mxResources$1.get("insert")+" ("+mxResources$1.get("doubleClickTooltip")+")",!0,"insert",null,!0);this.addDropDownArrow(s,"geSprite-plus",38,48,-4,-3,36,-8),this.addTableDropDown()};Toolbar.prototype.addTableDropDown=function(){this.addSeparator();var r=this.addMenuFunction("geIcon geSprite geSprite-table",mxResources$1.get("table"),!1,mxUtils$1.bind(this,function(t){var i=this.editorUi.editor.graph,n=i.getSelectionCell();if(!i.isTableCell(n)&&!i.isTableRow(n)&&!i.isTable(n))this.editorUi.menus.addInsertTableCellItem(t);else{var s=t.addItem("",null,mxUtils$1.bind(this,function(){try{i.insertTableColumn(n,!0)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertcolumnbefore");s.setAttribute("title",mxResources$1.get("insertColumnBefore")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{i.insertTableColumn(n,!1)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertcolumnafter"),s.setAttribute("title",mxResources$1.get("insertColumnAfter")),s=t.addItem("Delete column",null,mxUtils$1.bind(this,function(){if(n!=null)try{i.deleteTableColumn(n)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-deletecolumn"),s.setAttribute("title",mxResources$1.get("deleteColumn")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{i.insertTableRow(n,!0)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertrowbefore"),s.setAttribute("title",mxResources$1.get("insertRowBefore")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{i.insertTableRow(n,!1)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertrowafter"),s.setAttribute("title",mxResources$1.get("insertRowAfter")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{i.deleteTableRow(n)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-deleterow"),s.setAttribute("title",mxResources$1.get("deleteRow"))}}));r.style.position="relative",r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,r.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(r.getElementsByTagName("img")[0].style.left="22px",r.getElementsByTagName("img")[0].style.top="5px");var e=this.editorUi.menus.get("insert");return e!=null&&typeof r.setEnabled=="function"&&e.addListener("stateChanged",function(){r.setEnabled(e.enabled)}),r};Toolbar.prototype.addDropDownArrow=function(r,e,t,i,n,s,l,a){l=l??32,n=Toolbar.compactUi?n:a,r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.position="relative",r.innerHTML='<div class="geSprite '+e+'" style="margin-left:'+n+"px;margin-top:"+s+'px;"></div>'+this.dropdownImageHtml,r.style.width=mxClient.IS_QUIRKS?i+"px":i-l+"px",mxClient.IS_QUIRKS&&(r.style.height=Toolbar.compactUi?"24px":"26px"),Toolbar.compactUi&&(r.getElementsByTagName("img")[0].style.left="24px",r.getElementsByTagName("img")[0].style.top="5px",r.style.width=mxClient.IS_QUIRKS?t+"px":t-10+"px")};Toolbar.prototype.setFontName=function(r){this.fontMenu!=null&&(this.fontMenu.innerHTML='<div style="width:60px;overflow:hidden;display:inline-block;">'+mxUtils$1.htmlEntities(r)+"</div>"+this.dropdownImageHtml)};Toolbar.prototype.setFontSize=function(r){this.sizeMenu!=null&&(this.sizeMenu.innerHTML='<div style="width:24px;overflow:hidden;display:inline-block;">'+mxUtils$1.htmlEntities(r)+"</div>"+this.dropdownImageHtml)};Toolbar.prototype.createTextToolbar=function(){var r=this.editorUi.editor.graph,e=this.addMenu("",mxResources$1.get("style"),!0,"formatBlock");e.style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML=mxResources$1.get("style")+this.dropdownImageHtml,Toolbar.compactUi&&(e.style.paddingRight="18px",e.getElementsByTagName("img")[0].style.right="1px",e.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.fontMenu=this.addMenu("",mxResources$1.get("fontFamily"),!0,"fontFamily"),this.fontMenu.style.position="relative",this.fontMenu.style.whiteSpace="nowrap",this.fontMenu.style.overflow="hidden",this.fontMenu.style.width=mxClient.IS_QUIRKS?"80px":"60px",this.setFontName(Default.prototype.defaultFont),Toolbar.compactUi&&(this.fontMenu.style.paddingRight="18px",this.fontMenu.getElementsByTagName("img")[0].style.right="1px",this.fontMenu.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.sizeMenu=this.addMenu(Default.prototype.defaultFontSize,mxResources$1.get("fontSize"),!0,"fontSize"),this.sizeMenu.style.position="relative",this.sizeMenu.style.whiteSpace="nowrap",this.sizeMenu.style.overflow="hidden",this.sizeMenu.style.width=mxClient.IS_QUIRKS?"44px":"24px",this.setFontSize(Default.prototype.defaultFontSize),Toolbar.compactUi&&(this.sizeMenu.style.paddingRight="18px",this.sizeMenu.getElementsByTagName("img")[0].style.right="1px",this.sizeMenu.getElementsByTagName("img")[0].style.top="5px");var t=this.addItems(["-","undo","redo","-","bold","italic","underline"]);t[1].setAttribute("title",mxResources$1.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),t[2].setAttribute("title",mxResources$1.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),t[4].setAttribute("title",mxResources$1.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),t[5].setAttribute("title",mxResources$1.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),t[6].setAttribute("title",mxResources$1.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")");var i=this.addMenuFunction("",mxResources$1.get("align"),!1,mxUtils$1.bind(this,function(a){l=a.addItem("",null,mxUtils$1.bind(this,function(o){r.cellEditor.alignText(mxConstants$1.ALIGN_LEFT,o)}),null,"geIcon geSprite geSprite-left"),l.setAttribute("title",mxResources$1.get("left")),l=a.addItem("",null,mxUtils$1.bind(this,function(o){r.cellEditor.alignText(mxConstants$1.ALIGN_CENTER,o)}),null,"geIcon geSprite geSprite-center"),l.setAttribute("title",mxResources$1.get("center")),l=a.addItem("",null,mxUtils$1.bind(this,function(o){r.cellEditor.alignText(mxConstants$1.ALIGN_RIGHT,o)}),null,"geIcon geSprite geSprite-right"),l.setAttribute("title",mxResources$1.get("right")),l=a.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("justifyfull",!1,null)}),null,"geIcon geSprite geSprite-justifyfull"),l.setAttribute("title",mxResources$1.get("justifyfull")),l=a.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("insertorderedlist",!1,null)}),null,"geIcon geSprite geSprite-orderedlist"),l.setAttribute("title",mxResources$1.get("numberedList")),l=a.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("insertunorderedlist",!1,null)}),null,"geIcon geSprite geSprite-unorderedlist"),l.setAttribute("title",mxResources$1.get("bulletedList")),l=a.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("outdent",!1,null)}),null,"geIcon geSprite geSprite-outdent"),l.setAttribute("title",mxResources$1.get("decreaseIndent")),l=a.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("indent",!1,null)}),null,"geIcon geSprite geSprite-indent"),l.setAttribute("title",mxResources$1.get("increaseIndent"))}));i.style.position="relative",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.innerHTML='<div class="geSprite geSprite-left" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,i.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(i.getElementsByTagName("img")[0].style.left="22px",i.getElementsByTagName("img")[0].style.top="5px");var n=this.addMenuFunction("",mxResources$1.get("format"),!1,mxUtils$1.bind(this,function(a){l=a.addItem("",null,this.editorUi.actions.get("subscript").funct,null,"geIcon geSprite geSprite-subscript"),l.setAttribute("title",mxResources$1.get("subscript")+" ("+Editor.ctrlKey+"+,)"),l=a.addItem("",null,this.editorUi.actions.get("superscript").funct,null,"geIcon geSprite geSprite-superscript"),l.setAttribute("title",mxResources$1.get("superscript")+" ("+Editor.ctrlKey+"+.)"),l=a.addItem("",null,this.editorUi.actions.get("fontColor").funct,null,"geIcon geSprite geSprite-fontcolor"),l.setAttribute("title",mxResources$1.get("fontColor")),l=a.addItem("",null,this.editorUi.actions.get("backgroundColor").funct,null,"geIcon geSprite geSprite-fontbackground"),l.setAttribute("title",mxResources$1.get("backgroundColor")),l=a.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("removeformat",!1,null)}),null,"geIcon geSprite geSprite-removeformat"),l.setAttribute("title",mxResources$1.get("removeFormat"))}));n.style.position="relative",n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.innerHTML='<div class="geSprite geSprite-dots" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,n.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(n.getElementsByTagName("img")[0].style.left="22px",n.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.addButton("geIcon geSprite geSprite-code",mxResources$1.get("html"),function(){r.cellEditor.toggleViewMode(),r.cellEditor.textarea.innerHTML.length>0&&(r.cellEditor.textarea.innerHTML!="&nbsp;"||!r.cellEditor.clearOnChange)&&window.setTimeout(function(){document.execCommand("selectAll",!1,null)})}),this.addSeparator();var s=this.addMenuFunction("",mxResources$1.get("insert"),!0,mxUtils$1.bind(this,function(a){a.addItem(mxResources$1.get("insertLink"),null,mxUtils$1.bind(this,function(){this.editorUi.actions.get("link").funct()})),a.addItem(mxResources$1.get("insertImage"),null,mxUtils$1.bind(this,function(){this.editorUi.actions.get("image").funct()})),a.addItem(mxResources$1.get("insertHorizontalRule"),null,mxUtils$1.bind(this,function(){document.execCommand("inserthorizontalrule",!1,null)}))}));s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.position="relative",s.innerHTML='<div class="geSprite geSprite-plus" style="margin-left:-4px;margin-top:-3px;"></div>'+this.dropdownImageHtml,s.style.width=mxClient.IS_QUIRKS?"36px":"16px",Toolbar.compactUi&&(s.getElementsByTagName("img")[0].style.left="24px",s.getElementsByTagName("img")[0].style.top="5px",s.style.width=mxClient.IS_QUIRKS?"50px":"30px"),this.addSeparator();var l=this.addMenuFunction("geIcon geSprite geSprite-table",mxResources$1.get("table"),!1,mxUtils$1.bind(this,function(a){var o=r.getSelectedElement(),h=r.getParentByNames(o,["TD","TH"],r.cellEditor.text2),d=r.getParentByName(o,"TR",r.cellEditor.text2);if(d==null)this.editorUi.menus.addInsertTableItem(a);else{var m=r.getParentByName(d,"TABLE",r.cellEditor.text2);o=a.addItem("",null,mxUtils$1.bind(this,function(){try{r.selectNode(r.insertColumn(m,h!=null?h.cellIndex:0))}catch(g){this.editorUi.handleError(g)}}),null,"geIcon geSprite geSprite-insertcolumnbefore"),o.setAttribute("title",mxResources$1.get("insertColumnBefore")),o=a.addItem("",null,mxUtils$1.bind(this,function(){try{r.selectNode(r.insertColumn(m,h!=null?h.cellIndex+1:-1))}catch(g){this.editorUi.handleError(g)}}),null,"geIcon geSprite geSprite-insertcolumnafter"),o.setAttribute("title",mxResources$1.get("insertColumnAfter")),o=a.addItem("Delete column",null,mxUtils$1.bind(this,function(){if(h!=null)try{r.deleteColumn(m,h.cellIndex)}catch(g){this.editorUi.handleError(g)}}),null,"geIcon geSprite geSprite-deletecolumn"),o.setAttribute("title",mxResources$1.get("deleteColumn")),o=a.addItem("",null,mxUtils$1.bind(this,function(){try{r.selectNode(r.insertRow(m,d.sectionRowIndex))}catch(g){this.editorUi.handleError(g)}}),null,"geIcon geSprite geSprite-insertrowbefore"),o.setAttribute("title",mxResources$1.get("insertRowBefore")),o=a.addItem("",null,mxUtils$1.bind(this,function(){try{r.selectNode(r.insertRow(m,d.sectionRowIndex+1))}catch(g){this.editorUi.handleError(g)}}),null,"geIcon geSprite geSprite-insertrowafter"),o.setAttribute("title",mxResources$1.get("insertRowAfter")),o=a.addItem("",null,mxUtils$1.bind(this,function(){try{r.deleteRow(m,d.sectionRowIndex)}catch(g){this.editorUi.handleError(g)}}),null,"geIcon geSprite geSprite-deleterow"),o.setAttribute("title",mxResources$1.get("deleteRow")),o=a.addItem("",null,mxUtils$1.bind(this,function(){var g=m.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(c,f,C,v){return"#"+("0"+Number(f).toString(16)).substr(-2)+("0"+Number(C).toString(16)).substr(-2)+("0"+Number(v).toString(16)).substr(-2)});this.editorUi.pickColor(g,function(c){c==null||c==mxConstants$1.NONE?(m.removeAttribute("border"),m.style.border="",m.style.borderCollapse=""):(m.setAttribute("border","1"),m.style.border="1px solid "+c,m.style.borderCollapse="collapse")})}),null,"geIcon geSprite geSprite-strokecolor"),o.setAttribute("title",mxResources$1.get("borderColor")),o=a.addItem("",null,mxUtils$1.bind(this,function(){var g=m.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(c,f,C,v){return"#"+("0"+Number(f).toString(16)).substr(-2)+("0"+Number(C).toString(16)).substr(-2)+("0"+Number(v).toString(16)).substr(-2)});this.editorUi.pickColor(g,function(c){c==null||c==mxConstants$1.NONE?m.style.backgroundColor="":m.style.backgroundColor=c})}),null,"geIcon geSprite geSprite-fillcolor"),o.setAttribute("title",mxResources$1.get("backgroundColor")),o=a.addItem("",null,mxUtils$1.bind(this,function(){var g=m.getAttribute("cellPadding")||0,c=new FilenameDialog(this.editorUi,g,mxResources$1.get("apply"),mxUtils$1.bind(this,function(f){f!=null&&f.length>0?m.setAttribute("cellPadding",f):m.removeAttribute("cellPadding")}),mxResources$1.get("spacing"));this.editorUi.showDialog(c.container,300,80,!0,!0),c.init()}),null,"geIcon geSprite geSprite-fit"),o.setAttribute("title",mxResources$1.get("spacing")),o=a.addItem("",null,mxUtils$1.bind(this,function(){m.setAttribute("align","left")}),null,"geIcon geSprite geSprite-left"),o.setAttribute("title",mxResources$1.get("left")),o=a.addItem("",null,mxUtils$1.bind(this,function(){m.setAttribute("align","center")}),null,"geIcon geSprite geSprite-center"),o.setAttribute("title",mxResources$1.get("center")),o=a.addItem("",null,mxUtils$1.bind(this,function(){m.setAttribute("align","right")}),null,"geIcon geSprite geSprite-right"),o.setAttribute("title",mxResources$1.get("right"))}}));l.style.position="relative",l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,l.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(l.getElementsByTagName("img")[0].style.left="22px",l.getElementsByTagName("img")[0].style.top="5px")};Toolbar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()};Toolbar.prototype.addMenu=function(r,e,t,i,n,s,l){var a=this.editorUi.menus.get(i),o=this.addMenuFunction(r,e,t,function(){a.funct.apply(a,arguments)},n,s);return!l&&typeof o.setEnabled=="function"&&a.addListener("stateChanged",function(){o.setEnabled(a.enabled)}),o};Toolbar.prototype.addMenuFunction=function(r,e,t,i,n,s){return this.addMenuFunctionInContainer(n??this.container,r,e,t,i,s)};Toolbar.prototype.addMenuFunctionInContainer=function(r,e,t,i,n,s){var l=i?this.createLabel(e):this.createButton(e);return this.initElement(l,t),this.addMenuHandler(l,i,n,s),r.appendChild(l),l};Toolbar.prototype.addSeparator=function(r){r=r??this.container;var e=document.createElement("div");return e.className="geSeparator",r.appendChild(e),e};Toolbar.prototype.addItems=function(r,e,t){for(var i=[],n=0;n<r.length;n++){var s=r[n];s=="-"?i.push(this.addSeparator(e)):i.push(this.addItem("geSprite-"+s.toLowerCase(),s,e,t))}return i};Toolbar.prototype.addItem=function(r,e,t,i){var n=this.editorUi.actions.get(e),s=null;if(n!=null){var l=n.label;n.shortcut!=null&&(l+=" ("+n.shortcut+")"),s=this.addButton(r,l,n.funct,t),!i&&typeof s.setEnabled=="function"&&(s.setEnabled(n.enabled),n.addListener("stateChanged",function(){s.setEnabled(n.enabled)}))}return s};Toolbar.prototype.addButton=function(r,e,t,i){var n=this.createButton(r);return i=i??this.container,this.initElement(n,e),this.addClickHandler(n,t),i.appendChild(n),n};Toolbar.prototype.initElement=function(r,e){e!=null&&r.setAttribute("title",e),this.addEnabledState(r)};Toolbar.prototype.addEnabledState=function(r){var e=r.className;r.setEnabled=function(t){r.enabled=t,t?r.className=e:r.className=e+" mxDisabled"},r.setEnabled(!0)};Toolbar.prototype.addClickHandler=function(r,e){e!=null&&(mxEvent$1.addListener(r,"click",function(t){r.enabled&&e(t),mxEvent$1.consume(t)}),mxEvent$1.addListener(r,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(t){t.preventDefault()})))};Toolbar.prototype.createButton=function(r){var e=document.createElement("a");e.className="geButton";var t=document.createElement("div");return r!=null&&(t.className="geSprite "+r),e.appendChild(t),e};Toolbar.prototype.createLabel=function(r,e){var t=document.createElement("a");return t.className="geLabel",mxUtils$1.write(t,r),t};Toolbar.prototype.addMenuHandler=function(r,e,t,i){if(t!=null){var n=this.editorUi.editor.graph,s=null,l=!0;mxEvent$1.addListener(r,"click",mxUtils$1.bind(this,function(a){if(l&&(r.enabled==null||r.enabled)){n.popupMenuHandler.hideMenu(),s=new mxPopupMenu(t),s.div.className+=" geToolbarMenu",s.showDisabled=i,s.labels=e,s.autoExpand=!0;var o=mxUtils$1.getOffset(r);s.popup(o.x,o.y+r.offsetHeight,null,a),this.editorUi.setCurrentMenu(s,r),!e&&s.div.scrollHeight>s.div.clientHeight&&(s.div.style.width="40px"),s.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(s,arguments),this.editorUi.resetCurrentMenu(),s.destroy()}),s.addListener(mxEvent$1.EVENT_HIDE,mxUtils$1.bind(this,function(){this.currentElt=null}))}l=!0,mxEvent$1.consume(a)})),mxEvent$1.addListener(r,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(a){l=this.currentElt!=r,a.preventDefault()}))}};Toolbar.prototype.destroy=function(){this.gestureHandler!=null&&(mxEvent$1.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null)};class EditorUi extends mxEventSource{constructor(e,t,i){super(),this.destroyFunctions=[],this.editor=e||new Editor$1,window.parent.Editor=this.editor,window.parent.mxResources=mxResources$1,window.parent.Graph=this.editor.graph,this.container=t||document.body;var n=this.editor.graph;if(n.lightbox=i,this.initialDefaultVertexStyle=mxUtils$1.clone(n.defaultVertexStyle),this.initialDefaultEdgeStyle=mxUtils$1.clone(n.defaultEdgeStyle),n.useCssTransforms&&(this.lazyZoomDelay=0),mxClient.IS_SVG?mxPopupMenu.prototype.submenuImage="data:image/gif;base64,R0lGODlhCQAJAIAAAP///zMzMyH5BAEAAAAALAAAAAAJAAkAAAIPhI8WebHsHopSOVgb26AAADs=":new Image().src=mxPopupMenu.prototype.submenuImage,!mxClient.IS_SVG&&mxConnectionHandler.prototype.connectImage!=null&&(new Image().src=mxConnectionHandler.prototype.connectImage.src),this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,n.isEnabled=function(){return!1},n.panningHandler.isForcePanningEvent=function(B){return!mxEvent$1.isPopupTrigger(B.getEvent())}),this.actions=new Actions(this),this.menus=this.createMenus(),!n.standalone){this.createDivs(),this.createUi(),this.refresh();var s=mxUtils$1.bind(this,function(B){return B==null&&(B=window.event),n.isEditing()||B!=null&&this.isSelectionAllowed(B)});if(this.container==document.body&&(this.menubarContainer.onselectstart=s,this.menubarContainer.onmousedown=s,this.toolbarContainer.onselectstart=s,this.toolbarContainer.onmousedown=s,this.diagramContainer.onselectstart=s,this.diagramContainer.onmousedown=s,this.sidebarContainer.onselectstart=s,this.sidebarContainer.onmousedown=s,this.formatContainer.onselectstart=s,this.formatContainer.onmousedown=s,this.footerContainer.onselectstart=s,this.footerContainer.onmousedown=s,this.tabContainer!=null&&(this.tabContainer.onselectstart=s)),!this.editor.chromeless||this.editor.editable){var l=function(B){if(B!=null){var re=mxEvent$1.getSource(B);if(re.nodeName=="A")for(;re!=null;){if(re.className=="geHint")return!0;re=re.parentNode}}return s(B)};mxClient.IS_IE&&(typeof document.documentMode>"u"||document.documentMode<9)?mxEvent$1.addListener(this.diagramContainer,"contextmenu",l):this.diagramContainer.oncontextmenu=l}else n.panningHandler.usePopupTrigger=!1;if(n.init(this.diagramContainer),mxClient.IS_SVG&&n.view.getDrawPane()!=null){var a=n.view.getDrawPane().ownerSVGElement;a!=null&&(a.style.position="absolute")}if(this.hoverIcons=this.createHoverIcons(),n.graphHandler!=null){var o=n.graphHandler.start;n.graphHandler.start=function(){T.hoverIcons!=null&&T.hoverIcons.reset(),o.apply(this,arguments)}}mxEvent$1.addListener(this.diagramContainer,"mousemove",mxUtils$1.bind(this,function(B){var re=mxUtils$1.getOffset(this.diagramContainer);mxEvent$1.getClientX(B)-re.x-this.diagramContainer.clientWidth>0||mxEvent$1.getClientY(B)-re.y-this.diagramContainer.clientHeight>0?this.diagramContainer.setAttribute("title",mxResources$1.get("panTooltip")):this.diagramContainer.removeAttribute("title")}));var h=!1,d=this.hoverIcons.isResetEvent;this.hoverIcons.isResetEvent=function(B,re){return h||d.apply(this,arguments)},this.keydownHandler=mxUtils$1.bind(this,function(B){B.which==32&&!n.isEditing()?(h=!0,this.hoverIcons.reset(),n.container.style.cursor="move",!n.isEditing()&&mxEvent$1.getSource(B)==n.container&&mxEvent$1.consume(B)):!mxEvent$1.isConsumed(B)&&B.keyCode==27&&this.hideDialog(null,!0)}),mxEvent$1.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=mxUtils$1.bind(this,function(B){n.container.style.cursor="",h=!1}),mxEvent$1.addListener(document,"keyup",this.keyupHandler);var m=n.panningHandler.isForcePanningEvent;n.panningHandler.isForcePanningEvent=function(B){return m.apply(this,arguments)||h||mxEvent$1.isMouseEvent(B.getEvent())&&(this.usePopupTrigger||!mxEvent$1.isPopupTrigger(B.getEvent()))&&(!mxEvent$1.isControlDown(B.getEvent())&&mxEvent$1.isRightMouseButton(B.getEvent())||mxEvent$1.isMiddleMouseButton(B.getEvent()))};var g=n.cellEditor.isStopEditingEvent;n.cellEditor.isStopEditingEvent=function(B){return g.apply(this,arguments)||B.keyCode==13&&(!mxClient.IS_SF&&mxEvent$1.isControlDown(B)||mxClient.IS_MAC&&mxEvent$1.isMetaDown(B)||mxClient.IS_SF&&mxEvent$1.isShiftDown(B))};var c=n.isZoomWheelEvent;n.isZoomWheelEvent=function(){return h||c.apply(this,arguments)};var f=!1,C=null,v=null,w=null,S=mxUtils$1.bind(this,function(){if(this.toolbar!=null&&f!=n.cellEditor.isContentEditing()){for(var B=this.toolbar.container.firstChild,re=[];B!=null;){var se=B.nextSibling;mxUtils$1.indexOf(this.toolbar.staticElements,B)<0&&(B.parentNode.removeChild(B),re.push(B)),B=se}var ve=this.toolbar.fontMenu,pe=this.toolbar.sizeMenu;if(w==null)this.toolbar.createTextToolbar();else{for(var Q=0;Q<w.length;Q++)this.toolbar.container.appendChild(w[Q]);this.toolbar.fontMenu=C,this.toolbar.sizeMenu=v}f=n.cellEditor.isContentEditing(),C=ve,v=pe,w=re}}),T=this,P=n.cellEditor.startEditing;n.cellEditor.startEditing=function(){if(P.apply(this,arguments),S(),n.cellEditor.isContentEditing()){var B=!1,re=function(){B||(B=!0,window.setTimeout(function(){var se=n.getSelectedEditingElement();if(se!=null){var ve=mxUtils$1.getCurrentStyle(se);ve!=null&&T.toolbar!=null&&(T.toolbar.setFontName(Graph$1.stripQuotes(ve.fontFamily)),T.toolbar.setFontSize(parseInt(ve.fontSize)))}B=!1},0))};mxEvent$1.addListener(n.cellEditor.textarea,"input",re),mxEvent$1.addListener(n.cellEditor.textarea,"touchend",re),mxEvent$1.addListener(n.cellEditor.textarea,"mouseup",re),mxEvent$1.addListener(n.cellEditor.textarea,"keyup",re),re()}};var L=n.cellEditor.stopEditing;if(n.cellEditor.stopEditing=function(B,re){try{L.apply(this,arguments),S()}catch(se){T.handleError(se)}},n.container.setAttribute("tabindex","0"),n.container.style.cursor="default",window.self===window.top&&n.container.parentNode!=null)try{n.container.focus()}catch{}var k=n.fireMouseEvent;n.fireMouseEvent=function(B,re,se){B==mxEvent$1.MOUSE_DOWN&&this.container.focus(),k.apply(this,arguments)},n.popupMenuHandler.autoExpand=!0,this.menus!=null&&(n.popupMenuHandler.factoryMethod=mxUtils$1.bind(this,function(B,re,se){this.menus.createPopupMenu(B,re,se)})),mxEvent$1.addGestureListeners(document,mxUtils$1.bind(this,function(B){n.popupMenuHandler.hideMenu()})),this.keyHandler=this.createKeyHandler(e),this.getKeyHandler=function(){return keyHandler};var G=["rounded","shadow","glass","dashed","dashPattern","labelBackgroundColor","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle"],Y=["shape","edgeStyle","curved","rounded","elbow","jumpStyle","jumpSize","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle"];this.setDefaultStyle=function(B){try{var re=n.view.getState(B);if(re!=null){var se=B.clone();se.style="";var ve=n.getCellStyle(se),pe=[],Q=[];for(var me in re.style)ve[me]!=re.style[me]&&(pe.push(re.style[me]),Q.push(me));for(var ce=n.getModel().getStyle(re.cell),Le=ce!=null?ce.split(";"):[],Ie=0;Ie<Le.length;Ie++){var Ge=Le[Ie],fe=Ge.indexOf("=");if(fe>=0){var me=Ge.substring(0,fe),Te=Ge.substring(fe+1);ve[me]!=null&&Te=="none"&&(pe.push(Te),Q.push(me))}}n.getModel().isEdge(re.cell)?n.currentEdgeStyle={}:n.currentVertexStyle={},this.fireEvent(new mxEventObject$1("styleChanged","keys",Q,"values",pe,"cells",[re.cell]))}}catch(Ve){this.handleError(Ve)}},this.clearDefaultStyle=function(){n.currentEdgeStyle=mxUtils$1.clone(n.defaultEdgeStyle),n.currentVertexStyle=mxUtils$1.clone(n.defaultVertexStyle),this.fireEvent(new mxEventObject$1("styleChanged","keys",[],"values",[],"cells",[]))};for(var te=["fontFamily","fontSource","fontSize","fontColor"],ie=["edgeStyle","startArrow","startFill","startSize","endArrow","endFill","endSize"],ne=[["startArrow","startFill","startSize","sourcePerimeterSpacing","endArrow","endFill","endSize","targetPerimeterSpacing"],["strokeColor","strokeWidth"],["fillColor","gradientColor"],te,["opacity"],["align"],["html"]],q=0;q<ne.length;q++)for(var oe=0;oe<ne[q].length;oe++)G.push(ne[q][oe]);for(var q=0;q<Y.length;q++)mxUtils$1.indexOf(G,Y[q])<0&&G.push(Y[q]);var le=function(B,re,se){se=se??n.getModel(),se.beginUpdate();try{for(var ve=0;ve<B.length;ve++){var pe=B[ve],Q;if(re)Q=["fontSize","fontFamily","fontColor"];else{var me=se.getStyle(pe),ce=me!=null?me.split(";"):[];Q=G.slice();for(var Le=0;Le<ce.length;Le++){var Ie=ce[Le],Ge=Ie.indexOf("=");if(Ge>=0){var fe=Ie.substring(0,Ge),Te=mxUtils$1.indexOf(Q,fe);Te>=0&&Q.splice(Te,1);for(var Ve=0;Ve<ne.length;Ve++){var De=ne[Ve];if(mxUtils$1.indexOf(De,fe)>=0)for(var He=0;He<De.length;He++){var ue=mxUtils$1.indexOf(Q,De[He]);ue>=0&&Q.splice(ue,1)}}}}}for(var be=se.isEdge(pe),Fe=be?n.currentEdgeStyle:n.currentVertexStyle,Pe=se.getStyle(pe),Le=0;Le<Q.length;Le++){var fe=Q[Le],je=Fe[fe];je!=null&&(fe!="shape"||be)&&(!be||mxUtils$1.indexOf(Y,fe)<0)&&(Pe=mxUtils$1.setStyle(Pe,fe,je))}se.setStyle(pe,Pe)}}finally{se.endUpdate()}};if(n.addListener("cellsInserted",function(B,re){le(re.getProperty("cells"))}),n.addListener("textInserted",function(B,re){le(re.getProperty("cells"),!0)}),this.insertHandler=le,n.connectionHandler.addListener(mxEvent$1.CONNECT,function(B,re){var se=[re.getProperty("cell")];re.getProperty("terminalInserted")&&se.push(re.getProperty("terminal")),le(se)}),this.addListener("styleChanged",mxUtils$1.bind(this,function(B,re){var se=re.getProperty("cells"),ve=!1,pe=!1;if(se.length>0)for(var Q=0;Q<se.length&&(ve=n.getModel().isVertex(se[Q])||ve,pe=n.getModel().isEdge(se[Q])||pe,!(pe&&ve));Q++);else ve=!0,pe=!0;for(var me=re.getProperty("keys"),ce=re.getProperty("values"),Q=0;Q<me.length;Q++){var Le=mxUtils$1.indexOf(te,me[Q])>=0;(me[Q]!="strokeColor"||ce[Q]!=null&&ce[Q]!="none")&&(mxUtils$1.indexOf(Y,me[Q])>=0?pe||mxUtils$1.indexOf(ie,me[Q])>=0?ce[Q]==null?delete n.currentEdgeStyle[me[Q]]:n.currentEdgeStyle[me[Q]]=ce[Q]:ve&&mxUtils$1.indexOf(G,me[Q])>=0&&(ce[Q]==null?delete n.currentVertexStyle[me[Q]]:n.currentVertexStyle[me[Q]]=ce[Q]):mxUtils$1.indexOf(G,me[Q])>=0&&((ve||Le)&&(ce[Q]==null?delete n.currentVertexStyle[me[Q]]:n.currentVertexStyle[me[Q]]=ce[Q]),(pe||Le||mxUtils$1.indexOf(ie,me[Q])>=0)&&(ce[Q]==null?delete n.currentEdgeStyle[me[Q]]:n.currentEdgeStyle[me[Q]]=ce[Q])))}if(this.toolbar!=null){if(this.toolbar.setFontName(n.currentVertexStyle.fontFamily),this.toolbar.setFontSize(n.currentVertexStyle.fontSize),this.toolbar.edgeStyleMenu!=null){var Ie=this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0];n.currentEdgeStyle.edgeStyle=="orthogonalEdgeStyle"&&n.currentEdgeStyle.curved=="1"?Ie.className="geSprite geSprite-curved":n.currentEdgeStyle.edgeStyle=="straight"||n.currentEdgeStyle.edgeStyle=="none"||n.currentEdgeStyle.edgeStyle==null?Ie.className="geSprite geSprite-straight":n.currentEdgeStyle.edgeStyle=="entityRelationEdgeStyle"?Ie.className="geSprite geSprite-entity":n.currentEdgeStyle.edgeStyle=="elbowEdgeStyle"?Ie.className="geSprite geSprite-"+(n.currentEdgeStyle.elbow=="vertical"?"verticalelbow":"horizontalelbow"):n.currentEdgeStyle.edgeStyle=="isometricEdgeStyle"?Ie.className="geSprite geSprite-"+(n.currentEdgeStyle.elbow=="vertical"?"verticalisometric":"horizontalisometric"):Ie.className="geSprite geSprite-orthogonal"}if(this.toolbar.edgeShapeMenu!=null){var Ge=this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0];n.currentEdgeStyle.shape=="link"?Ge.className="geSprite geSprite-linkedge":n.currentEdgeStyle.shape=="flexArrow"?Ge.className="geSprite geSprite-arrow":n.currentEdgeStyle.shape=="arrow"?Ge.className="geSprite geSprite-simplearrow":Ge.className="geSprite geSprite-connection"}if(this.toolbar.lineStartMenu!=null){var fe=this.toolbar.lineStartMenu.getElementsByTagName("div")[0];fe.className=this.getCssClassForMarker("start",n.currentEdgeStyle.shape,n.currentEdgeStyle[mxConstants$1.STYLE_STARTARROW],mxUtils$1.getValue(n.currentEdgeStyle,"startFill","1"))}if(this.toolbar.lineEndMenu!=null){var Te=this.toolbar.lineEndMenu.getElementsByTagName("div")[0];Te.className=this.getCssClassForMarker("end",n.currentEdgeStyle.shape,n.currentEdgeStyle[mxConstants$1.STYLE_ENDARROW],mxUtils$1.getValue(n.currentEdgeStyle,"endFill","1"))}}})),this.toolbar!=null){var Z=mxUtils$1.bind(this,function(){var B=n.currentVertexStyle.fontFamily||"Helvetica",re=String(n.currentVertexStyle.fontSize||"12"),se=n.getView().getState(n.getSelectionCell());se!=null&&(B=se.style[mxConstants$1.STYLE_FONTFAMILY]||B,re=se.style[mxConstants$1.STYLE_FONTSIZE]||re,B.length>10&&(B=B.substring(0,8)+"...")),this.toolbar.setFontName(B),this.toolbar.setFontSize(re)});n.getSelectionModel().addListener(mxEvent$1.CHANGE,Z),n.getModel().addListener(mxEvent$1.CHANGE,Z)}n.addListener(mxEvent$1.CELLS_ADDED,function(B,re){var se=re.getProperty("cells"),ve=re.getProperty("parent");n.getModel().isLayer(ve)&&!n.isCellVisible(ve)&&se!=null&&se.length>0&&n.getModel().setVisible(ve,!0)}),this.gestureHandler=mxUtils$1.bind(this,function(B){this.currentMenu!=null&&mxEvent$1.getSource(B)!=this.currentMenu.div&&this.hideCurrentMenu()}),mxEvent$1.addGestureListeners(document,this.gestureHandler),this.resizeHandler=mxUtils$1.bind(this,function(){window.setTimeout(mxUtils$1.bind(this,function(){this.editor.graph!=null&&this.refresh()}),0)}),mxEvent$1.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=mxUtils$1.bind(this,function(){this.refresh()}),mxEvent$1.addListener(window,"orientationchange",this.orientationChangeHandler),mxClient.IS_IOS&&!window.navigator.standalone&&(this.scrollHandler=mxUtils$1.bind(this,function(){window.scrollTo(0,0)}),mxEvent$1.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",mxUtils$1.bind(this,function(){this.resetScrollbars()})),this.addListener("gridEnabledChanged",mxUtils$1.bind(this,function(){n.view.validateBackground()})),this.addListener("backgroundColorChanged",mxUtils$1.bind(this,function(){n.view.validateBackground()})),n.addListener("gridSizeChanged",mxUtils$1.bind(this,function(){n.isGridEnabled()&&n.view.validateBackground()})),this.editor.resetGraph()}this.init(),n.standalone||this.open()}}EditorUi.prototype.splitSize=mxClient.IS_TOUCH||mxClient.IS_POINTER?12:8;EditorUi.prototype.menubarHeight=30;EditorUi.prototype.formatEnabled=!0;EditorUi.prototype.formatWidth=240;EditorUi.prototype.toolbarHeight=38;EditorUi.prototype.footerHeight=28;EditorUi.prototype.sidebarFooterHeight=34;EditorUi.prototype.hsplitPosition=screen.width<=640?118:urlParams["sidebar-entries"]!="large"?212:240;EditorUi.prototype.allowAnimation=!0;EditorUi.prototype.lightboxMaxFitScale=2;EditorUi.prototype.lightboxVerticalDivider=4;EditorUi.prototype.hsplitClickEnabled=!1;EditorUi.prototype.init=function(){var r=this.editor.graph;if(!r.standalone){urlParams["shape-picker"]!="0"&&this.installShapePicker(),mxEvent$1.addListener(r.container,"scroll",mxUtils$1.bind(this,function(){r.tooltipHandler.hide(),r.connectionHandler!=null&&r.connectionHandler.constraintHandler!=null&&r.connectionHandler.constraintHandler.reset()})),r.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){r.tooltipHandler.hide();var i=r.getRubberband();i?.cancel()})),mxEvent$1.addListener(r.container,"keydown",mxUtils$1.bind(this,function(i){this.onKeyDown(i)})),mxEvent$1.addListener(r.container,"keypress",mxUtils$1.bind(this,function(i){this.onKeyPress(i)})),this.addUndoListener(),this.addBeforeUnloadListener(),r.getSelectionModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.updateActionStates()})),r.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.updateActionStates()}));var e=r.setDefaultParent,t=this;this.editor.graph.setDefaultParent=function(){e.apply(this,arguments),t.updateActionStates()},r.editLink=t.actions.get("editLink").funct,this.updateActionStates(),this.initClipboard(),this.initCanvas(),this.format!=null&&this.format.init()}};EditorUi.prototype.installShapePicker=function(){var r=this.editor.graph,e=this;r.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(l,a){a.getProperty("eventName")=="mouseDown"&&e.hideShapePicker()})),r.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){e.hideShapePicker(!0)})),r.getSelectionModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){e.hideShapePicker(!0)})),r.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){e.hideShapePicker(!0)}));var t=r.popupMenuHandler.isMenuShowing;r.popupMenuHandler.isMenuShowing=function(){return t.apply(this,arguments)||e.shapePicker!=null};var i=r.dblClick;if(r.dblClick=function(l,a){if(this.isEnabled())if(a==null&&e.sidebar!=null&&!mxEvent$1.isShiftDown(l)){mxEvent$1.consume(l);var o=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(l),mxEvent$1.getClientY(l));window.setTimeout(mxUtils$1.bind(this,function(){e.showShapePicker(o.x,o.y)}),30)}else i.apply(this,arguments)},this.hoverIcons!=null){var n=this.hoverIcons.drag;this.hoverIcons.drag=function(){e.hideShapePicker(),n.apply(this,arguments)};var s=this.hoverIcons.execute;this.hoverIcons.execute=function(l,a,o){var h=o.getEvent();!this.graph.isCloneEvent(h)&&!mxEvent$1.isShiftDown(h)?this.graph.connectVertex(l.cell,a,this.graph.defaultEdgeLength,h,null,null,mxUtils$1.bind(this,function(d,m,g){var c=r.getCompositeParent(l.cell),f=r.getCellGeometry(c);for(o.consume();c!=null&&r.model.isVertex(c)&&f!=null&&f.relative;)cell=c,c=r.model.getParent(cell),f=r.getCellGeometry(c);window.setTimeout(mxUtils$1.bind(this,function(){e.showShapePicker(o.getGraphX(),o.getGraphY(),c,mxUtils$1.bind(this,function(C){g(C)}),a)}),30)}),mxUtils$1.bind(this,function(d){this.graph.selectCellsForConnectVertex(d,h,this)})):s.apply(this,arguments)}}};EditorUi.prototype.showShapePicker=function(r,e,t,i,n){var s=this.getCellsForShapePicker(t);if(s!=null&&s.length>0){var l=this,a=this.editor.graph,o=document.createElement("div"),h=a.view.getState(t),d=t!=null&&(h==null||!a.isTransparentState(h))?a.copyStyle(t):null;o.className="geToolbarContainer geSidebarContainer geSidebar",o.style.cssText="position:absolute;left:"+r+"px;top:"+e+"px;width:140px;border-radius:10px;padding:4px;text-align:center;box-shadow:0px 0px 3px 1px #d1d1d1;padding: 6px 0 8px 0;",mxUtils$1.setPrefixedStyle(o.style,"transform","translate(-22px,-22px)"),a.background!=null&&a.background!=mxConstants$1.NONE&&(o.style.backgroundColor=a.background),a.container.appendChild(o);for(var m=mxUtils$1.bind(this,function(c){var f=document.createElement("a");f.className="geItem",f.style.cssText="position:relative;display:inline-block;position:relative;width:30px;height:30px;cursor:pointer;overflow:hidden;padding:3px 0 0 3px;",o.appendChild(f),d!=null?this.sidebar.graph.pasteStyle(d,[c]):l.insertHandler([c],c.value!="",this.sidebar.graph.model),this.sidebar.createThumb([c],25,25,f,null,!0,!1,c.geometry.width,c.geometry.height),mxEvent$1.addListener(f,"click",function(){var C=a.cloneCell(c);if(i!=null)i(C);else{C.geometry.x=a.snap(Math.round(r/a.view.scale)-a.view.translate.x-c.geometry.width/2),C.geometry.y=a.snap(Math.round(e/a.view.scale)-a.view.translate.y-c.geometry.height/2),a.model.beginUpdate();try{a.addCell(C)}finally{a.model.endUpdate()}a.setSelectionCell(C),a.scrollCellToVisible(C),a.startEditingAtCell(C),l.hoverIcons!=null&&l.hoverIcons.update(a.view.getState(C))}l.hideShapePicker()})}),g=0;g<s.length;g++)m(s[g]);l.hoverIcons!=null&&l.hoverIcons.reset(),a.popupMenuHandler.hideMenu(),a.tooltipHandler.hideTooltip(),this.hideCurrentMenu(),this.hideShapePicker(),this.shapePickerCallback=i,this.shapePicker=o}};EditorUi.prototype.getCellsForShapePicker=function(r){var e=mxUtils$1.bind(this,function(t,i,n,s){return this.editor.graph.createVertex(null,null,s||"",0,0,i||120,n||60,t,!1)});return[r!=null?this.editor.graph.cloneCell(r):e("text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;",40,20,"Text"),e("whiteSpace=wrap;html=1;"),e("ellipse;whiteSpace=wrap;html=1;",120,80),e("rhombus;whiteSpace=wrap;html=1;",80,80),e("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;"),e("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60),e("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80),e("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80),e("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;"),e("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80),e("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100),e("triangle;whiteSpace=wrap;html=1;",60,80),e("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80),e("shape=tape;whiteSpace=wrap;html=1;",120,100),e("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80),e("shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80)]};EditorUi.prototype.hideShapePicker=function(r){this.shapePicker!=null&&(this.shapePicker.parentNode.removeChild(this.shapePicker),this.shapePicker=null,!r&&this.shapePickerCallback!=null&&this.shapePickerCallback(),this.shapePickerCallback=null)};EditorUi.prototype.onKeyDown=function(r){var e=this.editor.graph;r.which==9&&e.isEnabled()&&!mxEvent$1.isAltDown(r)&&(!e.isEditing()||!mxEvent$1.isShiftDown(r))&&(e.isEditing()?e.stopEditing(!1):e.selectCell(!mxEvent$1.isShiftDown(r)),mxEvent$1.consume(r))};EditorUi.prototype.onKeyPress=function(r){var e=this.editor.graph;if(this.isImmediateEditingEvent(r)&&!e.isEditing()&&!e.isSelectionEmpty()&&r.which!==0&&r.which!==27&&!mxEvent$1.isAltDown(r)&&!mxEvent$1.isControlDown(r)&&!mxEvent$1.isMetaDown(r)&&(e.escape(),e.startEditing(),mxClient.IS_FF)){var t=e.cellEditor;if(t.textarea!=null){t.textarea.innerHTML=String.fromCharCode(r.which);var i=document.createRange();i.selectNodeContents(t.textarea),i.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(i)}}};EditorUi.prototype.isImmediateEditingEvent=function(r){return!0};EditorUi.prototype.getCssClassForMarker=function(r,e,t,i){var n="";return e=="flexArrow"?n=t!=null&&t!=mxConstants$1.NONE?"geSprite geSprite-"+r+"blocktrans":"geSprite geSprite-noarrow":t=="box"||t=="halfCircle"?n="geSprite geSvgSprite geSprite-"+t+(r=="end"?" geFlipSprite":""):t==mxConstants$1.ARROW_CLASSIC?n=i=="1"?"geSprite geSprite-"+r+"classic":"geSprite geSprite-"+r+"classictrans":t==mxConstants$1.ARROW_CLASSIC_THIN?n=i=="1"?"geSprite geSprite-"+r+"classicthin":"geSprite geSprite-"+r+"classicthintrans":t==mxConstants$1.ARROW_OPEN?n="geSprite geSprite-"+r+"open":t==mxConstants$1.ARROW_OPEN_THIN?n="geSprite geSprite-"+r+"openthin":t==mxConstants$1.ARROW_BLOCK?n=i=="1"?"geSprite geSprite-"+r+"block":"geSprite geSprite-"+r+"blocktrans":t==mxConstants$1.ARROW_BLOCK_THIN?n=i=="1"?"geSprite geSprite-"+r+"blockthin":"geSprite geSprite-"+r+"blockthintrans":t==mxConstants$1.ARROW_OVAL?n=i=="1"?"geSprite geSprite-"+r+"oval":"geSprite geSprite-"+r+"ovaltrans":t==mxConstants$1.ARROW_DIAMOND?n=i=="1"?"geSprite geSprite-"+r+"diamond":"geSprite geSprite-"+r+"diamondtrans":t==mxConstants$1.ARROW_DIAMOND_THIN?n=i=="1"?"geSprite geSprite-"+r+"thindiamond":"geSprite geSprite-"+r+"thindiamondtrans":t=="openAsync"?n="geSprite geSprite-"+r+"openasync":t=="dash"?n="geSprite geSprite-"+r+"dash":t=="cross"?n="geSprite geSprite-"+r+"cross":t=="async"?n=i=="1"?"geSprite geSprite-"+r+"async":"geSprite geSprite-"+r+"asynctrans":t=="circle"||t=="circlePlus"?n=i=="1"||t=="circle"?"geSprite geSprite-"+r+"circle":"geSprite geSprite-"+r+"circleplus":t=="ERone"?n="geSprite geSprite-"+r+"erone":t=="ERmandOne"?n="geSprite geSprite-"+r+"eronetoone":t=="ERmany"?n="geSprite geSprite-"+r+"ermany":t=="ERoneToMany"?n="geSprite geSprite-"+r+"eronetomany":t=="ERzeroToOne"?n="geSprite geSprite-"+r+"eroneopt":t=="ERzeroToMany"?n="geSprite geSprite-"+r+"ermanyopt":n="geSprite geSprite-noarrow",n};EditorUi.prototype.createMenus=function(){return null};EditorUi.prototype.updatePasteActionStates=function(){var r=this.editor.graph,e=this.actions.get("paste"),t=this.actions.get("pasteHere");e.setEnabled(this.editor.graph.cellEditor.isContentEditing()||!mxClipboard.isEmpty()&&r.isEnabled()&&!r.isCellLocked(r.getDefaultParent())),t.setEnabled(e.isEnabled())};EditorUi.prototype.initClipboard=function(){var r=this,e=mxClipboard.cut;mxClipboard.cut=function(s){s.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):e.apply(this,arguments),r.updatePasteActionStates()},mxClipboard.copy,mxClipboard.copy=function(s){var l=null;if(s.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{l=l||s.getSelectionCells(),l=s.getExportableCells(s.model.getTopmostCells(l));for(var a=new Object,o=s.createCellLookup(l),h=s.cloneCells(l,null,a),d=new mxGraphModel,m=d.getChildAt(d.getRoot(),0),g=0;g<h.length;g++){d.add(m,h[g]);var c=s.view.getState(l[g]);if(c!=null){var f=s.getCellGeometry(h[g]);f!=null&&f.relative&&!d.isEdge(l[g])&&o[mxObjectIdentity.get(d.getParent(l[g]))]==null&&(f.offset=null,f.relative=!1,f.x=c.x/c.view.scale-c.view.translate.x,f.y=c.y/c.view.scale-c.view.translate.y)}}s.updateCustomLinks(s.createCellMapping(a,o),h),mxClipboard.insertCount=1,mxClipboard.setCells(h)}return r.updatePasteActionStates(),l};var t=mxClipboard.paste;mxClipboard.paste=function(s){var l=null;return s.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):l=t.apply(this,arguments),r.updatePasteActionStates(),l};var i=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){i.apply(this,arguments),r.updatePasteActionStates()};var n=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(s,l){n.apply(this,arguments),r.updatePasteActionStates()},this.updatePasteActionStates()};EditorUi.prototype.lazyZoomDelay=20;EditorUi.prototype.wheelZoomDelay=400;EditorUi.prototype.buttonZoomDelay=600;EditorUi.prototype.initCanvas=function(){var r=this.editor.graph;r.timerAutoScroll=!0,r.getPagePadding=function(){return new mxPoint(Math.max(0,Math.round((r.container.offsetWidth-34)/r.view.scale)),Math.max(0,Math.round((r.container.offsetHeight-34)/r.view.scale)))},r.view.getBackgroundPageBounds=function(){var Z=this.graph.getPageLayout(),B=this.graph.getPageSize();return new mxRectangle(this.scale*(this.translate.x+Z.x*B.width),this.scale*(this.translate.y+Z.y*B.height),this.scale*Z.width*B.width,this.scale*Z.height*B.height)},r.getPreferredPageSize=function(Z,B,re){var se=this.getPageLayout(),ve=this.getPageSize();return new mxRectangle(0,0,se.width*ve.width,se.height*ve.height)};var e=null,t=this;if(this.editor.isChromelessView()){e=mxUtils$1.bind(this,function(Z,B,re,se){if(r.container!=null&&!r.isViewer()){re=re??0,se=se??0;var ve=r.pageVisible?r.view.getBackgroundPageBounds():r.getGraphBounds(),pe=mxUtils$1.hasScrollbars(r.container),Q=r.view.translate,me=r.view.scale,ce=mxRectangle.fromRectangle(ve);ce.x=ce.x/me-Q.x,ce.y=ce.y/me-Q.y,ce.width/=me,ce.height/=me;var Le=r.container.scrollTop,Ie=r.container.scrollLeft,Ge=mxClient.IS_QUIRKS||document.documentMode>=8?20:14;(document.documentMode==8||document.documentMode==9)&&(Ge+=3);var fe=r.container.offsetWidth-Ge,Te=r.container.offsetHeight-Ge,Ve=Z?Math.max(.3,Math.min(B||1,fe/ce.width)):me,De=(fe-Ve*ce.width)/2/Ve,He=this.lightboxVerticalDivider==0?0:(Te-Ve*ce.height)/this.lightboxVerticalDivider/Ve;if(pe&&(De=Math.max(De,0),He=Math.max(He,0)),pe||ve.width<fe||ve.height<Te)r.view.scaleAndTranslate(Ve,Math.floor(De-ce.x),Math.floor(He-ce.y)),r.container.scrollTop=Le*Ve/me,r.container.scrollLeft=Ie*Ve/me;else if(re!=0||se!=0){var ue=r.view.translate;r.view.setTranslate(Math.floor(ue.x+re/me),Math.floor(ue.y+se/me))}}}),this.chromelessResize=e,this.chromelessWindowResize=mxUtils$1.bind(this,function(){this.chromelessResize(!1)});var i=mxUtils$1.bind(this,function(){this.chromelessWindowResize(!1)});if(mxEvent$1.addListener(window,"resize",i),this.destroyFunctions.push(function(){mxEvent$1.removeListener(window,"resize",i)}),this.editor.addListener("resetGraphView",mxUtils$1.bind(this,function(){this.chromelessResize(!0)})),this.actions.get("zoomIn").funct=mxUtils$1.bind(this,function(Z){r.zoomIn(),this.chromelessResize(!1)}),this.actions.get("zoomOut").funct=mxUtils$1.bind(this,function(Z){r.zoomOut(),this.chromelessResize(!1)}),urlParams.toolbar!="0"){var n=JSON.parse(decodeURIComponent(urlParams["toolbar-config"]||"{}"));this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.backgroundColor="#000000",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=r.isViewer()?"0":"50%",mxClient.IS_VML||(mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","20px"),mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out"));var s=mxUtils$1.bind(this,function(){var Z=mxUtils$1.getCurrentStyle(r.container);r.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(Z!=null?parseInt(Z["margin-bottom"]||0):0)+(this.tabContainer!=null?20+parseInt(this.tabContainer.style.height):20)+"px"});this.editor.addListener("resetGraphView",s),s();var l=mxUtils$1.bind(this,function(Z,B,re){var se=document.createElement("span");se.style.paddingLeft="8px",se.style.paddingRight="8px",se.style.cursor="pointer",mxEvent$1.addListener(se,"click",Z),re!=null&&se.setAttribute("title",re);var ve=document.createElement("img");return ve.setAttribute("border","0"),ve.setAttribute("src",B),se.appendChild(ve),this.chromelessToolbar.appendChild(se),se});if(n.backBtn!=null&&l(mxUtils$1.bind(this,function(Z){window.location.href=n.backBtn.url,mxEvent$1.consume(Z)}),Editor$1.backLargeImage,mxResources$1.get("back",null,"Back")),this.isPagesEnabled()){var a=l(mxUtils$1.bind(this,function(Z){this.actions.get("previousPage").funct(),mxEvent$1.consume(Z)}),Editor$1.previousLargeImage,mxResources$1.get("previousPage")),o=document.createElement("div");o.style.display="inline-block",o.style.verticalAlign="top",o.style.fontFamily="Helvetica,Arial",o.style.marginTop="8px",o.style.fontSize="14px",o.style.color="#ffffff",this.chromelessToolbar.appendChild(o);var h=l(mxUtils$1.bind(this,function(Z){this.actions.get("nextPage").funct(),mxEvent$1.consume(Z)}),Editor$1.nextLargeImage,mxResources$1.get("nextPage")),d=mxUtils$1.bind(this,function(){this.pages!=null&&this.pages.length>1&&this.currentPage!=null&&(o.innerHTML="",mxUtils$1.write(o,mxUtils$1.indexOf(this.pages,this.currentPage)+1+" / "+this.pages.length))});a.style.paddingLeft="0px",a.style.paddingRight="4px",h.style.paddingLeft="4px",h.style.paddingRight="0px";var m=mxUtils$1.bind(this,function(){this.pages!=null&&this.pages.length>1&&this.currentPage!=null?(h.style.display="",a.style.display="",o.style.display="inline-block"):(h.style.display="none",a.style.display="none",o.style.display="none"),d()});this.editor.addListener("resetGraphView",m),this.editor.addListener("pageSelected",d)}l(mxUtils$1.bind(this,function(Z){this.actions.get("zoomOut").funct(),mxEvent$1.consume(Z)}),Editor$1.zoomOutLargeImage,mxResources$1.get("zoomOut")+" (Alt+Mousewheel)"),l(mxUtils$1.bind(this,function(Z){this.actions.get("zoomIn").funct(),mxEvent$1.consume(Z)}),Editor$1.zoomInLargeImage,mxResources$1.get("zoomIn")+" (Alt+Mousewheel)"),l(mxUtils$1.bind(this,function(Z){r.isLightboxView()?(r.view.scale==1?this.lightboxFit():r.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),mxEvent$1.consume(Z)}),Editor$1.actualSizeLargeImage,mxResources$1.get("fit"));var g=null,c=null,f=mxUtils$1.bind(this,function(Z){g!=null&&(window.clearTimeout(g),g=null),c!=null&&(window.clearTimeout(c),c=null),g=window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setOpacity(this.chromelessToolbar,0),g=null,c=window.setTimeout(mxUtils$1.bind(this,function(){this.chromelessToolbar.style.display="none",c=null}),600)}),Z||200)}),C=mxUtils$1.bind(this,function(Z){g!=null&&(window.clearTimeout(g),g=null),c!=null&&(window.clearTimeout(c),c=null),this.chromelessToolbar.style.display="",mxUtils$1.setOpacity(this.chromelessToolbar,Z||30)});if(urlParams.layers=="1"){this.layersDialog=null;var v=l(mxUtils$1.bind(this,function(Z){if(this.layersDialog!=null)this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null;else{this.layersDialog=r.createLayersDialog(),mxEvent$1.addListener(this.layersDialog,"mouseleave",mxUtils$1.bind(this,function(){this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null}));var B=v.getBoundingClientRect();mxUtils$1.setPrefixedStyle(this.layersDialog.style,"borderRadius","5px"),this.layersDialog.style.position="fixed",this.layersDialog.style.fontFamily="Helvetica,Arial",this.layersDialog.style.backgroundColor="#000000",this.layersDialog.style.width="160px",this.layersDialog.style.padding="4px 2px 4px 2px",this.layersDialog.style.color="#ffffff",mxUtils$1.setOpacity(this.layersDialog,70),this.layersDialog.style.left=B.left+"px",this.layersDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px";var re=mxUtils$1.getCurrentStyle(this.editor.graph.container);this.layersDialog.style.zIndex=re.zIndex,document.body.appendChild(this.layersDialog)}mxEvent$1.consume(Z)}),Editor$1.layersLargeImage,mxResources$1.get("layers")),w=r.getModel();w.addListener(mxEvent$1.CHANGE,function(){v.style.display=w.getChildCount(w.root)>1?"":"none"})}if(urlParams.openInSameWin!="1"&&this.addChromelessToolbarItems(l),(this.editor.editButtonLink!=null||this.editor.editButtonFunc!=null)&&l(mxUtils$1.bind(this,function(Z){this.editor.editButtonFunc!=null?this.editor.editButtonFunc():this.editor.editButtonLink=="_blank"?this.editor.editAsNew(this.getEditBlankXml()):r.openLink(this.editor.editButtonLink,"editWindow"),mxEvent$1.consume(Z)}),Editor$1.editLargeImage,mxResources$1.get("edit")),this.lightboxToolbarActions!=null)for(var S=0;S<this.lightboxToolbarActions.length;S++){var T=this.lightboxToolbarActions[S];l(T.fn,T.icon,T.tooltip)}n.refreshBtn!=null&&l(mxUtils$1.bind(this,function(Z){n.refreshBtn.url?window.location.href=n.refreshBtn.url:window.location.reload(),mxEvent$1.consume(Z)}),Editor$1.refreshLargeImage,mxResources$1.get("refresh",null,"Refresh")),n.fullscreenBtn!=null&&window.self!==window.top&&l(mxUtils$1.bind(this,function(Z){n.fullscreenBtn.url?r.openLink(n.fullscreenBtn.url):r.openLink(window.location.href),mxEvent$1.consume(Z)}),Editor$1.fullscreenLargeImage,mxResources$1.get("openInNewWindow",null,"Open in New Window")),(n.closeBtn&&window.self===window.top||r.lightbox&&(urlParams.close=="1"||this.container!=document.body))&&l(mxUtils$1.bind(this,function(Z){urlParams.close=="1"||n.closeBtn?window.close():(this.destroy(),mxEvent$1.consume(Z))}),Editor$1.closeLargeImage,mxResources$1.get("close")+" (Escape)"),this.chromelessToolbar.style.display="none",r.isViewer()||mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),r.container.appendChild(this.chromelessToolbar),mxEvent$1.addListener(r.container,mxClient.IS_POINTER?"pointermove":"mousemove",mxUtils$1.bind(this,function(Z){mxEvent$1.isTouchEvent(Z)||(mxEvent$1.isShiftDown(Z)||C(30),f())})),mxEvent$1.addListener(this.chromelessToolbar,mxClient.IS_POINTER?"pointermove":"mousemove",function(Z){mxEvent$1.consume(Z)}),mxEvent$1.addListener(this.chromelessToolbar,"mouseenter",mxUtils$1.bind(this,function(Z){mxEvent$1.isShiftDown(Z)?f():C(100)})),mxEvent$1.addListener(this.chromelessToolbar,"mousemove",mxUtils$1.bind(this,function(Z){mxEvent$1.isShiftDown(Z)?f():C(100),mxEvent$1.consume(Z)})),mxEvent$1.addListener(this.chromelessToolbar,"mouseleave",mxUtils$1.bind(this,function(Z){mxEvent$1.isTouchEvent(Z)||C(30)}));var P=r.getTolerance();r.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(Z,B){this.startX=B.getGraphX(),this.startY=B.getGraphY(),this.scrollLeft=r.container.scrollLeft,this.scrollTop=r.container.scrollTop},mouseMove:function(Z,B){},mouseUp:function(Z,B){mxEvent$1.isTouchEvent(B.getEvent())&&Math.abs(this.scrollLeft-r.container.scrollLeft)<P&&Math.abs(this.scrollTop-r.container.scrollTop)<P&&Math.abs(this.startX-B.getGraphX())<P&&Math.abs(this.startY-B.getGraphY())<P&&(parseFloat(t.chromelessToolbar.style.opacity||0)>0?f():C(30))}})}this.editor.editable||this.addChromelessClickHandler()}else if(this.editor.extendCanvas){var L=r.view.validate;if(r.view.validate=function(){if(this.graph.container!=null&&mxUtils$1.hasScrollbars(this.graph.container)){var Z=this.graph.getPagePadding(),B=this.graph.getPageSize();this.translate.x,this.translate.y,this.translate.x=Z.x-(this.x0||0)*B.width,this.translate.y=Z.y-(this.y0||0)*B.height}L.apply(this,arguments)},!r.isViewer()){var k=r.sizeDidChange;r.sizeDidChange=function(){if(this.container!=null&&mxUtils$1.hasScrollbars(this.container)){var Z=this.getPageLayout(),B=this.getPagePadding(),re=this.getPageSize(),se=Math.ceil(2*B.x+Z.width*re.width),ve=Math.ceil(2*B.y+Z.height*re.height),pe=r.minimumGraphSize;(pe==null||pe.width!=se||pe.height!=ve)&&(r.minimumGraphSize=new mxRectangle(0,0,se,ve));var Q=B.x-Z.x*re.width,me=B.y-Z.y*re.height;if(!this.autoTranslate&&(this.view.translate.x!=Q||this.view.translate.y!=me)){this.autoTranslate=!0,this.view.x0=Z.x,this.view.y0=Z.y;var ce=r.view.translate.x,Le=r.view.translate.y;r.view.setTranslate(Q,me),r.container.scrollLeft+=Math.round((Q-ce)*r.view.scale),r.container.scrollTop+=Math.round((me-Le)*r.view.scale),this.autoTranslate=!1;return}k.apply(this,arguments)}else this.fireEvent(new mxEventObject$1(mxEvent$1.SIZE,"bounds",this.getGraphBounds()))}}}var G=r.view.getBackgroundPane(),Y=r.view.getDrawPane();r.cumulativeZoomFactor=1;var te=null,ie=null,ne=null,q=null,oe=null,le=function(Z){te!=null&&window.clearTimeout(te),window.setTimeout(function(){(!r.isMouseDown||q)&&(te=window.setTimeout(mxUtils$1.bind(this,function(){r.isFastZoomEnabled()&&(r.view.backgroundPageShape!=null&&r.view.backgroundPageShape.node!=null&&(mxUtils$1.setPrefixedStyle(r.view.backgroundPageShape.node.style,"transform-origin",null),mxUtils$1.setPrefixedStyle(r.view.backgroundPageShape.node.style,"transform",null)),Y.style.transformOrigin="",G.style.transformOrigin="",mxClient.IS_SF?(Y.style.transform="scale(1)",G.style.transform="scale(1)",window.setTimeout(function(){Y.style.transform="",G.style.transform=""},0)):(Y.style.transform="",G.style.transform=""),r.view.getDecoratorPane().style.opacity="",r.view.getOverlayPane().style.opacity="");var B=new mxPoint(r.container.scrollLeft,r.container.scrollTop),re=mxUtils$1.getOffset(r.container),se=r.view.scale,ve=0,pe=0;ie!=null&&(ve=r.container.offsetWidth/2-ie.x+re.x,pe=r.container.offsetHeight/2-ie.y+re.y),r.zoom(r.cumulativeZoomFactor);var Q=r.view.scale;Q!=se&&(ne!=null&&(ve+=B.x-ne.x,pe+=B.y-ne.y),e!=null&&t.chromelessResize(!1,null,ve*(r.cumulativeZoomFactor-1),pe*(r.cumulativeZoomFactor-1)),mxUtils$1.hasScrollbars(r.container)&&(ve!=0||pe!=0)&&(r.container.scrollLeft-=ve*(r.cumulativeZoomFactor-1),r.container.scrollTop-=pe*(r.cumulativeZoomFactor-1))),oe!=null&&Y.setAttribute("filter",oe),r.cumulativeZoomFactor=1,te=null,ne=null,ie=null,q=null,oe=null}),Z??(r.isFastZoomEnabled()?t.wheelZoomDelay:t.lazyZoomDelay)))},0)};r.lazyZoom=function(Z,B,re){if(B=B||!r.scrollbars,B&&(ie=new mxPoint(r.container.offsetLeft+r.container.clientWidth/2,r.container.offsetTop+r.container.clientHeight/2)),Z?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,r.isFastZoomEnabled()){oe==null&&Y.getAttribute("filter")!=""&&(oe=Y.getAttribute("filter"),Y.removeAttribute("filter")),ne=new mxPoint(r.container.scrollLeft,r.container.scrollTop);var se=B?r.container.scrollLeft+r.container.clientWidth/2:ie.x+r.container.scrollLeft-r.container.offsetLeft,ve=B?r.container.scrollTop+r.container.clientHeight/2:ie.y+r.container.scrollTop-r.container.offsetTop;if(Y.style.transformOrigin=se+"px "+ve+"px",Y.style.transform="scale("+this.cumulativeZoomFactor+")",G.style.transformOrigin=se+"px "+ve+"px",G.style.transform="scale("+this.cumulativeZoomFactor+")",r.view.backgroundPageShape!=null&&r.view.backgroundPageShape.node!=null){var pe=r.view.backgroundPageShape.node;mxUtils$1.setPrefixedStyle(pe.style,"transform-origin",(B?r.container.clientWidth/2+r.container.scrollLeft-pe.offsetLeft+"px":ie.x+r.container.scrollLeft-pe.offsetLeft-r.container.offsetLeft+"px")+" "+(B?r.container.clientHeight/2+r.container.scrollTop-pe.offsetTop+"px":ie.y+r.container.scrollTop-pe.offsetTop-r.container.offsetTop+"px")),mxUtils$1.setPrefixedStyle(pe.style,"transform","scale("+this.cumulativeZoomFactor+")")}r.view.getDecoratorPane().style.opacity="0",r.view.getOverlayPane().style.opacity="0",t.hoverIcons!=null&&t.hoverIcons.reset()}le(re)},mxEvent$1.addGestureListeners(r.container,function(Z){te!=null&&window.clearTimeout(te)},null,function(Z){r.cumulativeZoomFactor!=1&&le(0)}),mxEvent$1.addListener(r.container,"scroll",function(Z){te!=null&&!r.isMouseDown&&r.cumulativeZoomFactor!=1&&le(0)}),mxEvent$1.addMouseWheelListener(mxUtils$1.bind(this,function(Z,B,re,se,ve){if(this.dialogs==null||this.dialogs.length==0){if(!r.scrollbars&&!re&&r.isScrollWheelEvent(Z)){var pe=r.view.getTranslate(),Q=40/r.view.scale;mxEvent$1.isShiftDown(Z)?r.view.setTranslate(pe.x+(B?-Q:Q),pe.y):r.view.setTranslate(pe.x,pe.y+(B?Q:-Q))}else if(re||r.isZoomWheelEvent(Z))for(var me=mxEvent$1.getSource(Z);me!=null;){if(me==r.container)return r.tooltipHandler.hideTooltip(),ie=se!=null&&ve!=null?new mxPoint(se,ve):new mxPoint(mxEvent$1.getClientX(Z),mxEvent$1.getClientY(Z)),q=re,r.lazyZoom(B),mxEvent$1.consume(Z),!1;me=me.parentNode}}}),r.container),r.panningHandler.zoomGraph=function(Z){r.cumulativeZoomFactor=Z.scale,r.lazyZoom(Z.scale>0,!0),mxEvent$1.consume(Z)}};EditorUi.prototype.addChromelessToolbarItems=function(r){r(mxUtils$1.bind(this,function(e){this.actions.get("print").funct(),mxEvent$1.consume(e)}),Editor$1.printLargeImage,mxResources$1.get("print"))};EditorUi.prototype.isPagesEnabled=function(){return this.editor.editable||urlParams["hide-pages"]!="1"};EditorUi.prototype.createTemporaryGraph=function(r){var e=new Graph$1(document.createElement("div"));return e.stylesheet.styles=mxUtils$1.clone(r.styles),e.resetViewOnRootChange=!1,e.setConnectable(!1),e.gridEnabled=!1,e.autoScroll=!1,e.setTooltips(!1),e.setEnabled(!1),e.container.style.visibility="hidden",e.container.style.position="absolute",e.container.style.overflow="hidden",e.container.style.height="1px",e.container.style.width="1px",e};EditorUi.prototype.addChromelessClickHandler=function(){var r=urlParams.highlight;r!=null&&r.length>0&&(r="#"+r),this.editor.graph.addClickHandler(r)};EditorUi.prototype.toggleFormatPanel=function(r){r=r??this.formatWidth==0,this.format!=null&&(this.formatWidth=r?240:0,this.formatContainer.style.display=r?"":"none",this.refresh(),this.format.refresh(),this.fireEvent(new mxEventObject$1("formatWidthChanged")))};EditorUi.prototype.lightboxFit=function(r){if(this.isDiagramEmpty())this.editor.graph.view.setScale(1);else{var e=urlParams.border,t=60;e!=null&&(t=parseInt(e)),this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(t,null,null,null,null,null,r),this.editor.graph.maxFitScale=null}};EditorUi.prototype.isDiagramEmpty=function(){var r=this.editor.graph.getModel();return r.getChildCount(r.root)==1&&r.getChildCount(r.getChildAt(r.root,0))==0};EditorUi.prototype.isSelectionAllowed=function(r){return mxEvent$1.getSource(r).nodeName=="SELECT"||mxEvent$1.getSource(r).nodeName=="INPUT"&&mxUtils$1.isAncestorNode(this.formatContainer,mxEvent$1.getSource(r))};EditorUi.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=mxUtils$1.bind(this,function(){if(!this.editor.isChromelessView())return this.onBeforeUnload()})};EditorUi.prototype.onBeforeUnload=function(){if(this.editor.modified)return mxResources$1.get("allChangesLost")};EditorUi.prototype.open=function(){try{window.opener!=null&&window.opener.openFile!=null&&window.opener.openFile.setConsumer(mxUtils$1.bind(this,function(r,e){try{var t=mxUtils$1.parseXml(r);this.editor.setGraphXml(t.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),e!=null&&(this.editor.setFilename(e),this.updateDocumentTitle());return}catch(i){mxUtils$1.alert(mxResources$1.get("invalidOrMissingFile")+": "+i.message)}}))}catch{}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new mxEventObject$1("resetGraphView"))};EditorUi.prototype.showPopupMenu=function(r,e,t,i){this.editor.graph.popupMenuHandler.hideMenu();var n=new mxPopupMenu(r);n.div.className+=" geMenubarMenu",n.smartSeparators=!0,n.showDisabled=!0,n.autoExpand=!0,n.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(n,arguments),n.destroy()}),n.popup(e,t,null,i),this.setCurrentMenu(n)};EditorUi.prototype.setCurrentMenu=function(r,e){this.currentMenuElt=e,this.currentMenu=r};EditorUi.prototype.resetCurrentMenu=function(){this.currentMenuElt=null,this.currentMenu=null};EditorUi.prototype.hideCurrentMenu=function(){this.currentMenu!=null&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())};EditorUi.prototype.updateDocumentTitle=function(){var r=this.editor.getOrCreateFilename();this.editor.appName!=null&&(r+=" - "+this.editor.appName),document.title=r};EditorUi.prototype.createHoverIcons=function(){return new HoverIcons(this.editor.graph)};EditorUi.prototype.redo=function(){try{var r=this.editor.graph;r.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch{}};EditorUi.prototype.undo=function(){try{var r=this.editor.graph;if(r.isEditing()){var e=r.cellEditor.textarea.innerHTML;document.execCommand("undo",!1,null),e==r.cellEditor.textarea.innerHTML&&(r.stopEditing(!0),this.editor.undoManager.undo())}else this.editor.undoManager.undo()}catch{}};EditorUi.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()};EditorUi.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()};EditorUi.prototype.getEditBlankXml=function(){return mxUtils$1.getXml(this.editor.getGraphXml())};EditorUi.prototype.getUrl=function(r){var e=r??window.location.pathname,t=e.indexOf("?")>0?1:0;for(var i in urlParams)t==0?e+="?":e+="&",e+=i+"="+urlParams[i],t++;return e};EditorUi.prototype.setScrollbars=function(r){var e=this.editor.graph,t=e.container.style.overflow;e.scrollbars=r,this.editor.updateGraphComponents(),t!=e.container.style.overflow&&(e.container.scrollTop=0,e.container.scrollLeft=0,e.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new mxEventObject$1("scrollbarsChanged"))};EditorUi.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars};EditorUi.prototype.resetScrollbars=function(){var r=this.editor.graph;if(!this.editor.extendCanvas)r.container.scrollTop=0,r.container.scrollLeft=0,mxUtils$1.hasScrollbars(r.container)||r.view.setTranslate(0,0);else if(!this.editor.isChromelessView())if(mxUtils$1.hasScrollbars(r.container))if(r.pageVisible){var e=r.getPagePadding();r.container.scrollTop=Math.floor(e.y-this.editor.initialTopSpacing)-1,r.container.scrollLeft=Math.floor(Math.min(e.x,(r.container.scrollWidth-r.container.clientWidth)/2))-1;var t=r.getGraphBounds();t.width>0&&t.height>0&&(t.x>r.container.scrollLeft+r.container.clientWidth*.9&&(r.container.scrollLeft=Math.min(t.x+t.width-r.container.clientWidth,t.x-10)),t.y>r.container.scrollTop+r.container.clientHeight*.9&&(r.container.scrollTop=Math.min(t.y+t.height-r.container.clientHeight,t.y-10)))}else{var t=r.getGraphBounds(),i=Math.max(t.width,r.scrollTileSize.width*r.view.scale),n=Math.max(t.height,r.scrollTileSize.height*r.view.scale);r.container.scrollTop=Math.floor(Math.max(0,t.y-Math.max(20,(r.container.clientHeight-n)/4))),r.container.scrollLeft=Math.floor(Math.max(0,t.x-Math.max(0,(r.container.clientWidth-i)/2)))}else{var s=mxRectangle.fromRectangle(r.pageVisible?r.view.getBackgroundPageBounds():r.getGraphBounds()),l=r.view.translate,a=r.view.scale;s.x=s.x/a-l.x,s.y=s.y/a-l.y,s.width/=a,s.height/=a;var o=r.pageVisible?0:Math.max(0,(r.container.clientHeight-s.height)/4);r.view.setTranslate(Math.floor(Math.max(0,(r.container.clientWidth-s.width)/2)-s.x+2),Math.floor(o-s.y+1))}};EditorUi.prototype.setPageVisible=function(r){var e=this.editor.graph,t=mxUtils$1.hasScrollbars(e.container),i=0,n=0;if(t&&(i=e.view.translate.x*e.view.scale-e.container.scrollLeft,n=e.view.translate.y*e.view.scale-e.container.scrollTop),e.pageVisible=r,e.pageBreaksVisible=r,e.preferPageSize=r,e.view.validateBackground(),t){var s=e.getSelectionCells();e.clearSelection(),e.setSelectionCells(s)}e.sizeDidChange(),t&&(e.container.scrollLeft=e.view.translate.x*e.view.scale-i,e.container.scrollTop=e.view.translate.y*e.view.scale-n),this.fireEvent(new mxEventObject$1("pageViewChanged"))};function ChangeGridColor$1(r,e){this.ui=r,this.color=e}ChangeGridColor$1.prototype.execute=function(){var r=this.ui.editor.graph.view.gridColor;this.ui.setGridColor(this.color),this.color=r};(function(){var r=new mxObjectCodec(new ChangeGridColor$1,["ui"]);mxCodecRegistry.register(r)})();function ChangePageSetup$1(r,e,t,i,n){this.ui=r,this.color=e,this.previousColor=e,this.image=t,this.previousImage=t,this.format=i,this.previousFormat=i,this.pageScale=n,this.previousPageScale=n,this.ignoreColor=!1,this.ignoreImage=!1}ChangePageSetup$1.prototype.execute=function(){var r=this.ui.editor.graph;if(!this.ignoreColor){this.color=this.previousColor;var e=r.background;this.ui.setBackgroundColor(this.previousColor),this.previousColor=e}if(!this.ignoreImage){this.image=this.previousImage;var e=r.backgroundImage;this.ui.setBackgroundImage(this.previousImage),this.previousImage=e}if(this.previousFormat!=null){this.format=this.previousFormat;var e=r.pageFormat;(this.previousFormat.width!=e.width||this.previousFormat.height!=e.height)&&(this.ui.setPageFormat(this.previousFormat),this.previousFormat=e)}if(this.foldingEnabled!=null&&this.foldingEnabled!=this.ui.editor.graph.foldingEnabled&&(this.ui.setFoldingEnabled(this.foldingEnabled),this.foldingEnabled=!this.foldingEnabled),this.previousPageScale!=null){var t=this.ui.editor.graph.pageScale;this.previousPageScale!=t&&(this.ui.setPageScale(this.previousPageScale),this.previousPageScale=t)}};(function(){var r=new mxObjectCodec(new ChangePageSetup$1,["ui","previousColor","previousImage","previousFormat","previousPageScale"]);r.afterDecode=function(e,t,i){return i.previousColor=i.color,i.previousImage=i.image,i.previousFormat=i.format,i.previousPageScale=i.pageScale,i.foldingEnabled!=null&&(i.foldingEnabled=!i.foldingEnabled),i},mxCodecRegistry.register(r)})();EditorUi.prototype.setBackgroundColor=function(r){this.editor.graph.background=r,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject$1("backgroundColorChanged"))};EditorUi.prototype.setFoldingEnabled=function(r){this.editor.graph.foldingEnabled=r,this.editor.graph.view.revalidate(),this.fireEvent(new mxEventObject$1("foldingEnabledChanged"))};EditorUi.prototype.setPageFormat=function(r){this.editor.graph.pageFormat=r,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject$1("pageFormatChanged"))};EditorUi.prototype.setPageScale=function(r){this.editor.graph.pageScale=r,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject$1("pageScaleChanged"))};EditorUi.prototype.setGridColor=function(r){this.editor.graph.view.gridColor=r,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject$1("gridColorChanged"))};EditorUi.prototype.addUndoListener=function(){var r=this.actions.get("undo"),e=this.actions.get("redo"),t=this.editor.undoManager,i=mxUtils$1.bind(this,function(){r.setEnabled(this.canUndo()),e.setEnabled(this.canRedo())});t.addListener(mxEvent$1.ADD,i),t.addListener(mxEvent$1.UNDO,i),t.addListener(mxEvent$1.REDO,i),t.addListener(mxEvent$1.CLEAR,i);var n=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){n.apply(this,arguments),i()};var s=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(l,a){s.apply(this,arguments),i()},i()};EditorUi.prototype.updateActionStates=function(){var r=this.editor.graph,e=!r.isSelectionEmpty(),t=!1,i=!1,n=!1,s=r.getSelectionCells();if(s!=null)for(var l=0;l<s.length;l++){var a=s[l];if(r.getModel().isEdge(a)&&(n=!0),r.getModel().isVertex(a)&&(t=!0,(r.getModel().getChildCount(a)>0||r.isContainer(a))&&(i=!0)),n&&t)break}for(var o=["cut","copy","bold","italic","underline","delete","duplicate","editStyle","editTooltip","editLink","backgroundColor","borderColor","edit","toFront","toBack","lockUnlock","solid","dashed","pasteSize","dotted","fillColor","gradientColor","shadow","fontColor","formattedText","rounded","toggleRounded","sharp","strokeColor"],l=0;l<o.length;l++)this.actions.get(o[l]).setEnabled(e);this.actions.get("setAsDefaultStyle").setEnabled(r.getSelectionCount()==1),this.actions.get("clearWaypoints").setEnabled(!r.isSelectionEmpty()),this.actions.get("copySize").setEnabled(r.getSelectionCount()==1),this.actions.get("turn").setEnabled(!r.isSelectionEmpty()),this.actions.get("curved").setEnabled(n),this.actions.get("rotation").setEnabled(t),this.actions.get("wordWrap").setEnabled(t),this.actions.get("autosize").setEnabled(t);var h=t&&r.getSelectionCount()==1;this.actions.get("group").setEnabled(r.getSelectionCount()>1||h&&!r.isContainer(r.getSelectionCell())),this.actions.get("ungroup").setEnabled(i),this.actions.get("removeFromGroup").setEnabled(h&&r.getModel().isVertex(r.getModel().getParent(r.getSelectionCell()))),r.view.getState(r.getSelectionCell()),this.menus.get("navigation").setEnabled(e||r.view.currentRoot!=null),this.actions.get("collapsible").setEnabled(t&&(r.isContainer(r.getSelectionCell())||r.model.getChildCount(r.getSelectionCell())>0)),this.actions.get("home").setEnabled(r.view.currentRoot!=null),this.actions.get("exitGroup").setEnabled(r.view.currentRoot!=null),this.actions.get("enterGroup").setEnabled(r.getSelectionCount()==1&&r.isValidRoot(r.getSelectionCell()));var d=r.getSelectionCount()==1&&r.isCellFoldable(r.getSelectionCell());this.actions.get("expand").setEnabled(d),this.actions.get("collapse").setEnabled(d),this.actions.get("editLink").setEnabled(r.getSelectionCount()==1),this.actions.get("openLink").setEnabled(r.getSelectionCount()==1&&r.getLinkForCell(r.getSelectionCell())!=null),this.actions.get("guides").setEnabled(r.isEnabled()),this.actions.get("grid").setEnabled(!this.editor.chromeless||this.editor.editable);var m=r.isEnabled()&&!r.isCellLocked(r.getDefaultParent());this.menus.get("layout").setEnabled(m),this.menus.get("insert").setEnabled(m),this.menus.get("direction").setEnabled(m&&t),this.menus.get("align").setEnabled(m&&t&&r.getSelectionCount()>1),this.menus.get("distribute").setEnabled(m&&t&&r.getSelectionCount()>1),this.actions.get("selectVertices").setEnabled(m),this.actions.get("selectEdges").setEnabled(m),this.actions.get("selectAll").setEnabled(m),this.actions.get("selectNone").setEnabled(m),this.updatePasteActionStates()};EditorUi.prototype.zeroOffset=new mxPoint(0,0);EditorUi.prototype.getDiagramContainerOffset=function(){return this.zeroOffset};EditorUi.prototype.refresh=function(r){r=r??!0;var e=mxClient.IS_IE&&(document.documentMode==null||document.documentMode==5),t=this.container.clientWidth,i=this.container.clientHeight;this.container==document.body&&(t=document.body.clientWidth||document.documentElement.clientWidth,i=e&&document.body.clientHeight||document.documentElement.clientHeight);var n=0;mxClient.IS_IOS&&!window.navigator.standalone&&window.innerHeight!=document.documentElement.clientHeight&&(n=document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0));var s=Math.max(0,Math.min(this.hsplitPosition,t-this.splitSize-20)),l=0;this.menubar!=null&&(this.menubarContainer.style.height=this.menubarHeight+"px",l+=this.menubarHeight),this.toolbar!=null&&(this.toolbarContainer.style.top=this.menubarHeight+"px",this.toolbarContainer.style.height=this.toolbarHeight+"px",l+=this.toolbarHeight),l>0&&!mxClient.IS_QUIRKS&&(l+=1);var a=0;if(this.sidebarFooterContainer!=null){var o=this.footerHeight+n;a=Math.max(0,Math.min(i-l-o,this.sidebarFooterHeight)),this.sidebarFooterContainer.style.width=s+"px",this.sidebarFooterContainer.style.height=a+"px",this.sidebarFooterContainer.style.bottom=o+"px"}var h=this.format!=null?this.formatWidth:0;this.sidebarContainer.style.top=l+"px",this.sidebarContainer.style.width=s+"px",this.formatContainer.style.top=l+"px",this.formatContainer.style.width=h+"px",this.formatContainer.style.display=this.format!=null?"":"none";var d=this.getDiagramContainerOffset(),m=this.hsplit.parentNode!=null?s+this.splitSize:0;if(this.diagramContainer.style.left=m+d.x+"px",this.diagramContainer.style.top=l+d.y+"px",this.footerContainer.style.height=this.footerHeight+"px",this.hsplit.style.top=this.sidebarContainer.style.top,this.hsplit.style.bottom=this.footerHeight+n+"px",this.hsplit.style.left=s+"px",this.footerContainer.style.display=this.footerHeight==0?"none":"",this.tabContainer!=null&&(this.tabContainer.style.left=m+"px"),e){this.menubarContainer.style.width=t+"px",this.toolbarContainer.style.width=this.menubarContainer.style.width;var g=Math.max(0,i-this.footerHeight-this.menubarHeight-this.toolbarHeight);this.sidebarContainer.style.height=g-a+"px",this.formatContainer.style.height=g+"px",this.diagramContainer.style.width=this.hsplit.parentNode!=null?Math.max(0,t-s-this.splitSize-h)+"px":t+"px",this.footerContainer.style.width=this.menubarContainer.style.width;var c=Math.max(0,i-this.footerHeight-this.menubarHeight-this.toolbarHeight);this.tabContainer!=null&&(this.tabContainer.style.width=this.diagramContainer.style.width,this.tabContainer.style.bottom=this.footerHeight+n+"px",c-=this.tabContainer.clientHeight),this.diagramContainer.style.height=c+"px",this.hsplit.style.height=c+"px"}else{this.footerHeight>0&&(this.footerContainer.style.bottom=n+"px"),this.diagramContainer.style.right=h+"px";var f=0;this.tabContainer!=null&&(this.tabContainer.style.bottom=this.footerHeight+n+"px",this.tabContainer.style.right=this.diagramContainer.style.right,f=this.tabContainer.clientHeight),this.sidebarContainer.style.bottom=this.footerHeight+a+n+"px",this.formatContainer.style.bottom=this.footerHeight+n+"px",this.diagramContainer.style.bottom=this.footerHeight+n+f+"px"}r&&this.editor.graph.sizeDidChange()};EditorUi.prototype.createTabContainer=function(){return null};EditorUi.prototype.createDivs=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.hsplit.setAttribute("title",mxResources$1.get("collapseExpand")),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(this.format!=null?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=mxPopupMenu.prototype.zIndex-2,this.hsplit.style.width=this.splitSize+"px",this.sidebarFooterContainer=this.createSidebarFooterContainer(),this.sidebarFooterContainer&&(this.sidebarFooterContainer.style.left="0px"),this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()};EditorUi.prototype.createSidebarFooterContainer=function(){return null};EditorUi.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),this.menubar!=null&&this.menubarContainer.appendChild(this.menubar.container),this.menubar!=null&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",mxUtils$1.bind(this,function(){this.setStatusText(this.editor.getStatus())})),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),this.sidebar!=null&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),this.format!=null&&this.container.appendChild(this.formatContainer);var r=this.editor.chromeless?null:this.createFooter();r!=null&&(this.footerContainer.appendChild(r),this.container.appendChild(this.footerContainer)),this.sidebar!=null&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer),this.container.appendChild(this.diagramContainer),this.container!=null&&this.tabContainer!=null&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),this.toolbar!=null&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),this.sidebar!=null&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,mxUtils$1.bind(this,function(e){this.hsplitPosition=e,this.refresh()})))};EditorUi.prototype.createStatusContainer=function(){var r=document.createElement("a");return r.className="geItem geStatus",r};EditorUi.prototype.setStatusText=function(r){this.statusContainer.innerHTML=r};EditorUi.prototype.createToolbar=function(r){return new Toolbar(this,r)};EditorUi.prototype.createSidebar=function(r){return new Sidebar(this,r)};EditorUi.prototype.createFormat=function(r){return new Format(this,r)};EditorUi.prototype.createFooter=function(){return this.createDiv("geFooter")};EditorUi.prototype.createDiv=function(r){var e=document.createElement("div");return e.className=r,e};EditorUi.prototype.addSplitHandler=function(r,e,t,i){var n=null,s=null,l=!0,a=null;mxClient.IS_POINTER&&(r.style.touchAction="none");var o=mxUtils$1.bind(this,function(){var m=parseInt(e?r.style.left:r.style.bottom);return e||(m=m+t-this.footerHeight),m});function h(m){if(n!=null){var g=new mxPoint(mxEvent$1.getClientX(m),mxEvent$1.getClientY(m));i(Math.max(0,s+(e?g.x-n.x:n.y-g.y)-t)),mxEvent$1.consume(m),s!=o()&&(l=!0,a=null)}}function d(m){h(m),s=null,n=null}mxEvent$1.addGestureListeners(r,function(m){n=new mxPoint(mxEvent$1.getClientX(m),mxEvent$1.getClientY(m)),s=o(),l=!1,mxEvent$1.consume(m)}),mxEvent$1.addListener(r,"click",mxUtils$1.bind(this,function(m){if(!l&&this.hsplitClickEnabled){var g=a!=null?a-t:0;a=o(),i(g),mxEvent$1.consume(m)}})),mxEvent$1.addGestureListeners(document,null,h,d),this.destroyFunctions.push(function(){mxEvent$1.removeGestureListeners(document,null,h,d)})};EditorUi.prototype.handleError=function(r,e,t,i,n){};EditorUi.prototype.showError=function(r,e,t,i,n,s,l,a,o,h,d,m,g){var c=new ErrorDialog(this,r,e,t||mxResources$1.get("ok"),i,n,s,l,m,a,o),f=Math.ceil(e!=null?e.length/50:1);this.showDialog(c.container,h||340,d||100+f*20,!0,!1,g),c.init()};EditorUi.prototype.showDialog=function(r,e,t,i,n,s,l,a,o,h){this.editor.graph.tooltipHandler.hideTooltip(),this.dialogs==null&&(this.dialogs=[]),this.dialog=new Dialog$1(this,r,e,t,i,n,s,l,a,o,h),this.dialogs.push(this.dialog)};EditorUi.prototype.hideDialog=function(r,e){if(this.dialogs!=null&&this.dialogs.length>0){var t=this.dialogs.pop();if(t.close(r,e)==!1){this.dialogs.push(t);return}this.dialog=this.dialogs.length>0?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new mxEventObject$1("hideDialog")),this.dialog==null&&this.editor.graph.container.style.visibility!="hidden"&&window.setTimeout(mxUtils$1.bind(this,function(){this.editor.graph.isEditing()&&this.editor.graph.cellEditor.textarea!=null?this.editor.graph.cellEditor.textarea.focus():(mxUtils$1.clearSelection(),this.editor.graph.container.focus())}),0)}};EditorUi.prototype.ctrlEnter=function(){var r=this.editor.graph;if(r.isEnabled())try{for(var e=r.getSelectionCells(),t=new mxDictionary,i=[],n=0;n<e.length;n++){var s=r.isTableCell(e[n])?r.model.getParent(e[n]):e[n];s!=null&&!t.get(s)&&(t.put(s,!0),i.push(s))}r.setSelectionCells(r.duplicateCells(i,!1))}catch(l){this.handleError(l)}};EditorUi.prototype.pickColor=function(r,e){var t=this.editor.graph,i=t.cellEditor.saveSelection(),n=226+(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12))*17,s=new ColorDialog(this,r||"none",function(l){t.cellEditor.restoreSelection(i),e(l)},function(){t.cellEditor.restoreSelection(i)});this.showDialog(s.container,230,n,!0,!1),s.init()};EditorUi.prototype.openFile=function(){window.openFile=new OpenFile$1(mxUtils$1.bind(this,function(r){this.hideDialog(r)})),this.showDialog(new OpenDialog$1().container,Editor$1.useLocalStorage?640:320,Editor$1.useLocalStorage?480:220,!0,!0,function(){window.openFile=null})};EditorUi.prototype.extractGraphModelFromHtml=function(r){var e=null;try{var t=r.indexOf("&lt;mxGraphModel ");if(t>=0){var i=r.lastIndexOf("&lt;/mxGraphModel&gt;");i>t&&(e=r.substring(t,i+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}}catch{}return e};EditorUi.prototype.extractGraphModelFromEvent=function(r){var e=null,t=null;if(r!=null){var i=r.dataTransfer!=null?r.dataTransfer:r.clipboardData;if(i!=null&&(document.documentMode==10||document.documentMode==11?t=i.getData("Text"):(t=mxUtils$1.indexOf(i.types,"text/html")>=0?i.getData("text/html"):null,mxUtils$1.indexOf(i.types,t==null||t.length==0)&&(t=i.getData("text/plain"))),t!=null)){t=Graph$1.zapGremlins(mxUtils$1.trim(t));var n=this.extractGraphModelFromHtml(t);n!=null&&(t=n)}}return t!=null&&this.isCompatibleString(t)&&(e=t),e};EditorUi.prototype.isCompatibleString=function(r){return!1};EditorUi.prototype.saveFile=function(r){if(!r&&this.editor.filename!=null)this.save(this.editor.getOrCreateFilename());else{var e=new FilenameDialog$1(this,this.editor.getOrCreateFilename(),mxResources$1.get("save"),mxUtils$1.bind(this,function(t){this.save(t)}),null,mxUtils$1.bind(this,function(t){return t!=null&&t.length>0?!0:(mxUtils$1.confirm(mxResources$1.get("invalidName")),!1)}));this.showDialog(e.container,300,100,!0,!0),e.init()}};EditorUi.prototype.save=function(r){if(console.log("save"),r!=null){this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var e=mxUtils$1.getPrettyXml(this.editor.getGraphXml());const i=new Blob([e],{type:"text/plain"});var t=document.createElement("a");t.href=URL.createObjectURL(i),t.target="_blank",t.download=r,t.click()}};EditorUi.prototype.executeLayout=function(r,e,t){var i=this.editor.graph;if(i.isEnabled()){i.getModel().beginUpdate();try{r()}catch(s){throw s}finally{if(this.allowAnimation&&e&&(navigator.userAgent==null||navigator.userAgent.indexOf("Camino")<0)){var n=new mxMorphing(i);n.addListener(mxEvent$1.DONE,mxUtils$1.bind(this,function(){i.getModel().endUpdate(),t?.()})),n.startAnimation()}else i.getModel().endUpdate(),t?.()}}};EditorUi.prototype.showImageDialog=function(r,e,t,i){var n=this.editor.graph.cellEditor,s=n.saveSelection(),l=mxUtils$1.prompt(r,e);if(n.restoreSelection(s),l!=null&&l.length>0){var a=new Image;a.onload=function(){t(l,a.width,a.height)},a.onerror=function(){t(null),mxUtils$1.alert(mxResources.get("fileNotFound"))},a.src=l}else t(null)};EditorUi.prototype.showLinkDialog=function(r,e,t){var i=new LinkDialog(this,r,e,t);this.showDialog(i.container,420,90,!0,!0),i.init()};EditorUi.prototype.showDataDialog=function(r){if(r!=null){var e=new EditDataDialog(this,r);this.showDialog(e.container,480,420,!0,!1,null,!1),e.init()}};EditorUi.prototype.showBackgroundImageDialog=function(r,e){r=r??mxUtils$1.bind(this,function(i){var n=new ChangePageSetup$1(this,null,i);n.ignoreColor=!0,this.editor.graph.model.execute(n)});var t=mxUtils$1.prompt(mxResources$1.get("backgroundImage"),e!=null?e.src:"");if(t!=null&&t.length>0){var e=new Image;e.onload=function(){r(new mxImage(t,e.width,e.height),!1)},e.onerror=function(){r(null,!0),mxUtils$1.alert(mxResources$1.get("fileNotFound"))},e.src=t}else r(null)};EditorUi.prototype.setBackgroundImage=function(r){this.editor.graph.setBackgroundImage(r),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new mxEventObject$1("backgroundImageChanged"))};EditorUi.prototype.confirm=function(r,e,t){mxUtils$1.confirm(r)?e?.():t?.()};EditorUi.prototype.createOutline=function(r){var e=new mxOutline(this.editor.graph);return e.border=20,mxEvent$1.addListener(window,"resize",function(){e.update()}),this.addListener("pageFormatChanged",function(){e.update()}),e};EditorUi.prototype.altShiftActions={67:"clearWaypoints",65:"connectionArrows",76:"editLink",80:"connectionPoints",84:"editTooltip",86:"pasteSize",88:"copySize"};EditorUi.prototype.createKeyHandler=function(r){var e=this,t=this.editor.graph,i=new mxKeyHandler(t),n=i.isEventIgnored;i.isEventIgnored=function(g){return!(mxEvent$1.isShiftDown(g)&&g.keyCode==9)&&(!this.isControlDown(g)||mxEvent$1.isShiftDown(g)||g.keyCode!=90&&g.keyCode!=89&&g.keyCode!=188&&g.keyCode!=190&&g.keyCode!=85)&&(g.keyCode!=66&&g.keyCode!=73||!this.isControlDown(g)||this.graph.cellEditor.isContentEditing()&&!mxClient.IS_FF&&!mxClient.IS_SF)&&n.apply(this,arguments)},i.isEnabledForEvent=function(g){return!mxEvent$1.isConsumed(g)&&this.isGraphEvent(g)&&this.isEnabled()&&(e.dialogs==null||e.dialogs.length==0)},i.isControlDown=function(g){return mxEvent$1.isControlDown(g)||mxClient.IS_MAC&&g.metaKey};var s=[],l=null;function a(g,c,f){s.push(function(){if(!t.isSelectionEmpty()&&t.isEnabled())if(c=c??1,f){t.getModel().beginUpdate();try{for(var C=t.getSelectionCells(),v=0;v<C.length;v++)if(t.getModel().isVertex(C[v])&&t.isCellResizable(C[v])){var w=t.getCellGeometry(C[v]);w!=null&&(w=w.clone(),g==37?w.width=Math.max(0,w.width-c):g==38?w.height=Math.max(0,w.height-c):g==39?w.width+=c:g==40&&(w.height+=c),t.getModel().setGeometry(C[v],w))}}finally{t.getModel().endUpdate()}}else{var S=t.getSelectionCell(),T=t.model.getParent(S),P=null;if(t.getSelectionCount()==1&&t.model.isVertex(S)&&t.layoutManager!=null&&!t.isCellLocked(S)&&(P=t.layoutManager.getLayout(T)),P!=null&&P.constructor==mxStackLayout){var L=T.getIndex(S);g==37||g==38?t.model.add(T,S,Math.max(0,L-1)):(g==39||g==40)&&t.model.add(T,S,Math.min(t.model.getChildCount(T),L+1))}else{for(var C=t.getMovableCells(t.getSelectionCells()),k=[],v=0;v<C.length;v++){var G=t.getCurrentCellStyle(C[v]);if(mxUtils$1.getValue(G,"part","0")=="1"){var T=t.model.getParent(C[v]);t.model.isVertex(T)&&mxUtils$1.indexOf(C,T)<0&&k.push(T)}else k.push(C[v])}if(k.length>0){C=k;var Y=0,te=0;g==37?Y=-c:g==38?te=-c:g==39?Y=c:g==40&&(te=c),t.moveCells(C,Y,te)}}}}),l!=null&&window.clearTimeout(l),l=window.setTimeout(function(){if(s.length>0){t.getModel().beginUpdate();try{for(var C=0;C<s.length;C++)s[C]();s=[]}finally{t.getModel().endUpdate()}}},200)}var o={37:mxConstants$1.DIRECTION_WEST,38:mxConstants$1.DIRECTION_NORTH,39:mxConstants$1.DIRECTION_EAST,40:mxConstants$1.DIRECTION_SOUTH},h=i.getFunction;mxKeyHandler.prototype.getFunction=function(g){if(t.isEnabled()){if(mxEvent$1.isShiftDown(g)&&mxEvent$1.isAltDown(g)){var c=e.actions.get(e.altShiftActions[g.keyCode]);if(c!=null)return c.funct}if(g.keyCode==9&&mxEvent$1.isAltDown(g))return t.cellEditor.isContentEditing()?function(){document.execCommand("outdent",!1,null)}:mxEvent$1.isShiftDown(g)?function(){t.selectParentCell()}:function(){t.selectChildCell()};if(o[g.keyCode]!=null&&!t.isSelectionEmpty())if(!this.isControlDown(g)&&mxEvent$1.isShiftDown(g)&&mxEvent$1.isAltDown(g)){if(t.model.isVertex(t.getSelectionCell()))return function(){var f=t.connectVertex(t.getSelectionCell(),o[g.keyCode],t.defaultEdgeLength,g,!0);f!=null&&f.length>0&&(f.length==1&&t.model.isEdge(f[0])?t.setSelectionCell(t.model.getTerminal(f[0],!1)):t.setSelectionCell(f[f.length-1]),t.scrollCellToVisible(t.getSelectionCell()),e.hoverIcons!=null&&e.hoverIcons.update(t.view.getState(t.getSelectionCell())))}}else return this.isControlDown(g)?function(){a(g.keyCode,mxEvent$1.isShiftDown(g)?t.gridSize:null,!0)}:function(){a(g.keyCode,mxEvent$1.isShiftDown(g)?t.gridSize:null)}}return h.apply(this,arguments)},i.bindAction=mxUtils$1.bind(this,function(g,c,f,C){var v=this.actions.get(f);if(v!=null){var w=function(){v.isEnabled()&&v.funct()};c?C?i.bindControlShiftKey(g,w):i.bindControlKey(g,w):C?i.bindShiftKey(g,w):i.bindKey(g,w)}});var d=this,m=i.escape;return i.escape=function(g){m.apply(this,arguments)},i.enter=function(){},i.bindControlShiftKey(36,function(){t.exitGroup()}),i.bindControlShiftKey(35,function(){t.enterGroup()}),i.bindShiftKey(36,function(){t.home()}),i.bindKey(35,function(){t.refresh()}),i.bindAction(107,!0,"zoomIn"),i.bindAction(109,!0,"zoomOut"),i.bindAction(80,!0,"print"),i.bindAction(79,!0,"outline",!0),(!this.editor.chromeless||this.editor.editable)&&(i.bindControlKey(36,function(){t.isEnabled()&&t.foldCells(!0)}),i.bindControlKey(35,function(){t.isEnabled()&&t.foldCells(!1)}),i.bindControlKey(13,function(){d.ctrlEnter()}),i.bindAction(8,!1,"delete"),i.bindAction(8,!0,"deleteAll"),i.bindAction(8,!1,"deleteLabels",!0),i.bindAction(46,!1,"delete"),i.bindAction(46,!0,"deleteAll"),i.bindAction(46,!1,"deleteLabels",!0),i.bindAction(36,!1,"resetView"),i.bindAction(72,!0,"fitWindow",!0),i.bindAction(74,!0,"fitPage"),i.bindAction(74,!0,"fitTwoPages",!0),i.bindAction(48,!0,"customZoom"),i.bindAction(82,!0,"turn"),i.bindAction(82,!0,"clearDefaultStyle",!0),i.bindAction(83,!0,"save"),i.bindAction(83,!0,"saveAs",!0),i.bindAction(65,!0,"selectAll"),i.bindAction(65,!0,"selectNone",!0),i.bindAction(73,!0,"selectVertices",!0),i.bindAction(69,!0,"selectEdges",!0),i.bindAction(69,!0,"editStyle"),i.bindAction(66,!0,"bold"),i.bindAction(66,!0,"toBack",!0),i.bindAction(70,!0,"toFront",!0),i.bindAction(68,!0,"duplicate"),i.bindAction(68,!0,"setAsDefaultStyle",!0),i.bindAction(90,!0,"undo"),i.bindAction(89,!0,"autosize",!0),i.bindAction(88,!0,"cut"),i.bindAction(67,!0,"copy"),i.bindAction(86,!0,"paste"),i.bindAction(71,!0,"group"),i.bindAction(77,!0,"editData"),i.bindAction(71,!0,"grid",!0),i.bindAction(73,!0,"italic"),i.bindAction(76,!0,"lockUnlock"),i.bindAction(76,!0,"layers",!0),i.bindAction(80,!0,"formatPanel",!0),i.bindAction(85,!0,"underline"),i.bindAction(85,!0,"ungroup",!0),i.bindAction(190,!0,"superscript"),i.bindAction(188,!0,"subscript"),i.bindAction(9,!1,"indent",!0),i.bindKey(13,function(){t.isEnabled()&&t.startEditingAtCell()}),i.bindKey(113,function(){t.isEnabled()&&t.startEditingAtCell()})),mxClient.IS_WIN?i.bindAction(89,!0,"redo"):i.bindAction(90,!0,"redo",!0),i};EditorUi.prototype.destroy=function(){if(this.editor!=null&&(this.editor.destroy(),this.editor=null),this.menubar!=null&&(this.menubar.destroy(),this.menubar=null),this.toolbar!=null&&(this.toolbar.destroy(),this.toolbar=null),this.sidebar!=null&&(this.sidebar.destroy(),this.sidebar=null),this.keyHandler!=null&&(this.keyHandler.destroy(),this.keyHandler=null),this.keydownHandler!=null&&(mxEvent$1.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),this.keyupHandler!=null&&(mxEvent$1.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),this.resizeHandler!=null&&(mxEvent$1.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),this.gestureHandler!=null&&(mxEvent$1.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),this.orientationChangeHandler!=null&&(mxEvent$1.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),this.scrollHandler!=null&&(mxEvent$1.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),this.destroyFunctions!=null){for(var r=0;r<this.destroyFunctions.length;r++)this.destroyFunctions[r]();this.destroyFunctions=null}for(var e=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.sidebarFooterContainer,this.layersDialog],r=0;r<e.length;r++)e[r]!=null&&e[r].parentNode!=null&&e[r].parentNode.removeChild(e[r])};/**
 * jscolor, JavaScript Color Picker
 *
 * @version 1.3.13
 * @license GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html
 * @author  Jan Odvarko, http://odvarko.cz
 * @created 2008-06-15
 * @updated 2012-01-19
 * @link    http://jscolor.com
 */const mxJSColor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){},init:function(){mxJSColor.preload()},getDir:function(){if(!mxJSColor.dir){var r=mxJSColor.detectDir();mxJSColor.dir=r!==!1?r:"jscolor/"}return mxJSColor.dir},detectDir:function(){for(var r=location.href,t=document.getElementsByTagName("base"),e=0;e<t.length;e+=1)t[e].href&&(r=t[e].href);for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e+=1)if(t[e].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[e].src)){var i=new mxJSColor.URI(t[e].src),n=i.toAbsolute(r);return n.path=n.path.replace(/[^\/]+$/,""),n.query=null,n.fragment=null,n.toString()}return!1},preload:function(){for(var r in mxJSColor.imgRequire)mxJSColor.imgRequire.hasOwnProperty(r)&&mxJSColor.loadImage(r)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(r){mxJSColor.imgRequire[r]=!0},loadImage:function(r){mxJSColor.imgLoaded[r]||(mxJSColor.imgLoaded[r]=new Image,mxJSColor.imgLoaded[r].src=mxJSColor.getDir()+r)},fetchElement:function(r){return typeof r=="string"?document.getElementById(r):r},addEvent:function(r,e,t){r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent&&r.attachEvent("on"+e,t)},fireEvent:function(r,e){if(r)if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),r.dispatchEvent(t)}else if(document.createEventObject){var t=document.createEventObject();r.fireEvent("on"+e,t)}else r["on"+e]&&r["on"+e]()},getElementPos:function(r){var e=r,t=r,i=0,n=0;if(e.offsetParent)do i+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);for(;(t=t.parentNode)&&t.nodeName.toUpperCase()!=="BODY";)i-=t.scrollLeft,n-=t.scrollTop;return[i,n]},getElementSize:function(r){return[r.offsetWidth,r.offsetHeight]},getRelMousePos:function(r){var e=0,t=0;return r||(r=window.event),typeof r.offsetX=="number"?(e=r.offsetX,t=r.offsetY):typeof r.layerX=="number"&&(e=r.layerX,t=r.layerY),{x:e,y:t}},getViewPos:function(){return typeof window.pageYOffset=="number"?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return typeof window.innerWidth=="number"?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(r){this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(t){var i=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=i[3]?i[2]:null,this.authority=i[5]?i[6]:null,this.path=i[7],this.query=i[9]?i[10]:null,this.fragment=i[12]?i[13]:null,this},this.toString=function(){var t="";return this.scheme!==null&&(t=t+this.scheme+":"),this.authority!==null&&(t=t+"//"+this.authority),this.path!==null&&(t=t+this.path),this.query!==null&&(t=t+"?"+this.query),this.fragment!==null&&(t=t+"#"+this.fragment),t},this.toAbsolute=function(i){var i=new mxJSColor.URI(i),n=this,s=new mxJSColor.URI;return i.scheme===null?!1:(n.scheme!==null&&n.scheme.toLowerCase()===i.scheme.toLowerCase()&&(n.scheme=null),n.scheme!==null?(s.scheme=n.scheme,s.authority=n.authority,s.path=e(n.path),s.query=n.query):(n.authority!==null?(s.authority=n.authority,s.path=e(n.path),s.query=n.query):(n.path===""?(s.path=i.path,n.query!==null?s.query=n.query:s.query=i.query):(n.path.substr(0,1)==="/"?s.path=e(n.path):(i.authority!==null&&i.path===""?s.path="/"+n.path:s.path=i.path.replace(/[^\/]+$/,"")+n.path,s.path=e(s.path)),s.query=n.query),s.authority=i.authority),s.scheme=i.scheme),s.fragment=n.fragment,s)};function e(t){for(var i="";t;)if(t.substr(0,3)==="../"||t.substr(0,2)==="./")t=t.replace(/^\.+/,"").substr(1);else if(t.substr(0,3)==="/./"||t==="/.")t="/"+t.substr(3);else if(t.substr(0,4)==="/../"||t==="/..")t="/"+t.substr(4),i=i.replace(/\/?[^\/]*$/,"");else if(t==="."||t==="..")t="";else{var n=t.match(/^\/?[^\/]*/)[0];t=t.substr(n.length),i=i+n}return i}r&&this.parse(r)},color:function(target,prop){this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=target,this.styleElement=target,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=0,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var p in prop)prop.hasOwnProperty(p)&&(this[p]=prop[p]);this.hidePicker=function(){isPickerOwner()&&removePicker()},this.showPicker=function(){if(!isPickerOwner()){var r=mxJSColor.getElementPos(target),e=mxJSColor.getElementSize(target),t=mxJSColor.getViewPos(),i=mxJSColor.getViewSize(),n=getPickerDims(this),s,l,a;switch(this.pickerPosition.toLowerCase()){case"left":s=1,l=0,a=-1;break;case"right":s=1,l=0,a=1;break;case"top":s=0,l=1,a=-1;break;default:s=0,l=1,a=1;break}var o=(e[l]+n[l])/2;this.pickerSmartPosition?(-t[s]+r[s]+n[s]>i[s]&&-t[s]+r[s]+e[s]/2>i[s]/2&&r[s]+e[s]-n[s]>=0?r[s]+e[s]-n[s]:r[s],-t[l]+r[l]+e[l]+n[l]-o+o*a>i[l]?-t[l]+r[l]+e[l]/2>i[l]/2&&r[l]+e[l]-o-o*a>=0?r[l]+e[l]-o-o*a:r[l]+e[l]-o+o*a:r[l]+e[l]-o+o*a>=0?r[l]+e[l]-o+o*a:r[l]+e[l]-o-o*a):(r[s],r[l]+e[l]-o+o*a),drawPicker(0,0)}},this.importColor=function(){valueElement?this.adjust?!this.required&&/^\s*$/.test(valueElement.value)?(valueElement.value="",styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage,styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.fromString(valueElement.value)||this.exportColor():this.fromString(valueElement.value,leaveValue)||(styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage,styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.exportColor()},this.exportColor=function(r){if(!(r&leaveValue)&&valueElement){var e=this.toString();this.caps&&(e=e.toUpperCase()),this.hash&&(e="#"+e),valueElement.value=e}!(r&leaveStyle)&&styleElement&&(styleElement.style.backgroundImage="none",styleElement.style.backgroundColor="#"+this.toString(),styleElement.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),!(r&leavePad)&&isPickerOwner()&&redrawPad(),!(r&leaveSld)&&isPickerOwner()&&redrawSld()},this.fromHSV=function(r,e,t,i){r<0&&(r=0)||r>6&&(r=6),e<0&&(e=0)||e>1&&(e=1),t<0&&(t=0)||t>1&&(t=1),this.rgb=HSV_RGB(r===null?this.hsv[0]:this.hsv[0]=r,e===null?this.hsv[1]:this.hsv[1]=e,t===null?this.hsv[2]:this.hsv[2]=t),this.exportColor(i)},this.fromRGB=function(r,e,t,i){r<0&&(r=0)||r>1&&(r=1),e<0&&(e=0)||e>1&&(e=1),t<0&&(t=0)||t>1&&(t=1);var n=RGB_HSV(r===null?this.rgb[0]:this.rgb[0]=r,e===null?this.rgb[1]:this.rgb[1]=e,t===null?this.rgb[2]:this.rgb[2]=t);n[0]!==null&&(this.hsv[0]=n[0]),n[2]!==0&&(this.hsv[1]=n[1]),this.hsv[2]=n[2],this.exportColor(i)},this.fromString=function(r,e){var t=r.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return t?(t[1].length===6?this.fromRGB(parseInt(t[1].substr(0,2),16)/255,parseInt(t[1].substr(2,2),16)/255,parseInt(t[1].substr(4,2),16)/255,e):this.fromRGB(parseInt(t[1].charAt(0)+t[1].charAt(0),16)/255,parseInt(t[1].charAt(1)+t[1].charAt(1),16)/255,parseInt(t[1].charAt(2)+t[1].charAt(2),16)/255,e),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};function RGB_HSV(r,e,t){var i=Math.min(Math.min(r,e),t),n=Math.max(Math.max(r,e),t),s=n-i;if(s===0)return[null,0,n];var l=r===i?3+(t-e)/s:e===i?5+(r-t)/s:1+(e-r)/s;return[l===6?0:l,s/n,n]}function HSV_RGB(r,e,t){if(r===null)return[t,t,t];var i=Math.floor(r),n=i%2?r-i:1-(r-i),s=t*(1-e),l=t*(1-e*n);switch(i){case 6:case 0:return[t,l,s];case 1:return[l,t,s];case 2:return[s,t,l];case 3:return[s,l,t];case 4:return[l,s,t];case 5:return[t,s,l]}}function removePicker(){delete mxJSColor.picker.owner,document.getElementsByTagName("body")[0].removeChild(mxJSColor.picker.boxB)}function drawPicker(r,e){if(!mxJSColor.picker){mxJSColor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(THIS.pickerCloseText)};for(var t=0,i=4;t<mxJSColor.images.sld[1];t+=i){var n=document.createElement("div");n.style.height=i+"px",n.style.fontSize="1px",n.style.lineHeight="0",mxJSColor.picker.sld.appendChild(n)}mxJSColor.picker.sldB.appendChild(mxJSColor.picker.sld),mxJSColor.picker.box.appendChild(mxJSColor.picker.sldB),mxJSColor.picker.box.appendChild(mxJSColor.picker.sldM),mxJSColor.picker.padB.appendChild(mxJSColor.picker.pad),mxJSColor.picker.box.appendChild(mxJSColor.picker.padB),mxJSColor.picker.box.appendChild(mxJSColor.picker.padM),mxJSColor.picker.btnS.appendChild(mxJSColor.picker.btnT),mxJSColor.picker.btn.appendChild(mxJSColor.picker.btnS),mxJSColor.picker.box.appendChild(mxJSColor.picker.btn),mxJSColor.picker.boxB.appendChild(mxJSColor.picker.box)}var s=mxJSColor.picker;s.box.onmouseup=s.box.onmouseout=function(){mxClient.IS_TOUCH||target.focus()},s.box.onmousedown=function(){},s.box.onmousemove=function(h){(holdPad||holdSld)&&(holdPad&&setPad(h),holdSld&&setSld(h),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),dispatchImmediateChange())},s.padM.onmouseup=s.padM.onmouseout=function(){holdPad&&(holdPad=!1,mxJSColor.fireEvent(valueElement,"change"))},s.padM.onmousedown=function(h){switch(modeID){case 0:THIS.hsv[2]===0&&THIS.fromHSV(null,null,1);break;case 1:THIS.hsv[1]===0&&THIS.fromHSV(null,1,null);break}holdPad=!0,setPad(h),dispatchImmediateChange()},s.sldM.onmouseup=s.sldM.onmouseout=function(){holdSld&&(holdSld=!1,mxJSColor.fireEvent(valueElement,"change"))},s.sldM.onmousedown=function(h){holdSld=!0,setSld(h),dispatchImmediateChange()};var l=getPickerDims(THIS);s.box.style.width=l[0]+"px",s.box.style.height=l[1]+"px",s.boxB.style.position="absolute",s.boxB.style.clear="both",s.boxB.style.left=r+"px",s.boxB.style.top=e+"px",s.boxB.style.zIndex=THIS.pickerZIndex,s.boxB.style.border=THIS.pickerBorder+"px solid",s.boxB.style.borderColor=THIS.pickerBorderColor,s.boxB.style.background=THIS.pickerFaceColor,s.pad.style.width=mxJSColor.images.pad[0]+"px",s.pad.style.height=mxJSColor.images.pad[1]+"px",s.padB.style.position="absolute",s.padB.style.left=THIS.pickerFace+"px",s.padB.style.top=THIS.pickerFace+"px",s.padB.style.border=THIS.pickerInset+"px solid",s.padB.style.borderColor=THIS.pickerInsetColor,s.padM.style.position="absolute",s.padM.style.left="0",s.padM.style.top="0",s.padM.style.width=THIS.pickerFace+2*THIS.pickerInset+mxJSColor.images.pad[0]+mxJSColor.images.arrow[0]+"px",s.padM.style.height=s.box.style.height,s.padM.style.cursor="crosshair",s.sld.style.overflow="hidden",s.sld.style.width=mxJSColor.images.sld[0]+"px",s.sld.style.height=mxJSColor.images.sld[1]+"px",s.sldB.style.display=THIS.slider?"block":"none",s.sldB.style.position="absolute",s.sldB.style.right=THIS.pickerFace+"px",s.sldB.style.top=THIS.pickerFace+"px",s.sldB.style.border=THIS.pickerInset+"px solid",s.sldB.style.borderColor=THIS.pickerInsetColor,s.sldM.style.display=THIS.slider?"block":"none",s.sldM.style.position="absolute",s.sldM.style.right="0",s.sldM.style.top="0",s.sldM.style.width=mxJSColor.images.sld[0]+mxJSColor.images.arrow[0]+THIS.pickerFace+2*THIS.pickerInset+"px",s.sldM.style.height=s.box.style.height;try{s.sldM.style.cursor="pointer"}catch{s.sldM.style.cursor="hand"}function a(){var h=THIS.pickerInsetColor.split(/\s+/),d=h.length<2?h[0]:h[1]+" "+h[0]+" "+h[0]+" "+h[1];s.btn.style.borderColor=d}s.btn.style.display=THIS.pickerClosable?"block":"none",s.btn.style.position="absolute",s.btn.style.left=THIS.pickerFace+"px",s.btn.style.bottom=THIS.pickerFace+"px",s.btn.style.padding="0 15px",s.btn.style.height="18px",s.btn.style.border=THIS.pickerInset+"px solid",a(),s.btn.style.color=THIS.pickerButtonColor,s.btn.style.font="12px sans-serif",s.btn.style.textAlign="center";try{s.btn.style.cursor="pointer"}catch{s.btn.style.cursor="hand"}switch(s.btn.onmousedown=function(){THIS.hidePicker()},s.btnS.style.lineHeight=s.btn.style.height,modeID){case 0:var o="hs.png";break;case 1:var o="hv.png";break}s.padM.style.backgroundImage="url('"+mxJSColor.getDir()+"cross.gif')",s.padM.style.backgroundRepeat="no-repeat",s.sldM.style.backgroundImage="url('"+mxJSColor.getDir()+"arrow.gif')",s.sldM.style.backgroundRepeat="no-repeat",s.pad.style.backgroundImage="url('"+mxJSColor.getDir()+o+"')",s.pad.style.backgroundRepeat="no-repeat",s.pad.style.backgroundPosition="0 0",redrawPad(),redrawSld(),mxJSColor.picker.owner=THIS,document.getElementsByTagName("body")[0].appendChild(s.boxB)}function getPickerDims(r){var e=[2*r.pickerInset+2*r.pickerFace+mxJSColor.images.pad[0]+(r.slider?2*r.pickerInset+2*mxJSColor.images.arrow[0]+mxJSColor.images.sld[0]:0),r.pickerClosable?4*r.pickerInset+3*r.pickerFace+mxJSColor.images.pad[1]+r.pickerButtonHeight:2*r.pickerInset+2*r.pickerFace+mxJSColor.images.pad[1]];return e}function redrawPad(){switch(modeID){case 0:var r=1;break;case 1:var r=2;break}var e=Math.round(THIS.hsv[0]/6*(mxJSColor.images.pad[0]-1)),t=Math.round((1-THIS.hsv[r])*(mxJSColor.images.pad[1]-1));mxJSColor.picker.padM.style.backgroundPosition=THIS.pickerFace+THIS.pickerInset+e-Math.floor(mxJSColor.images.cross[0]/2)+"px "+(THIS.pickerFace+THIS.pickerInset+t-Math.floor(mxJSColor.images.cross[1]/2))+"px";var i=mxJSColor.picker.sld.childNodes;switch(modeID){case 0:for(var n=HSV_RGB(THIS.hsv[0],THIS.hsv[1],1),a=0;a<i.length;a+=1)i[a].style.backgroundColor="rgb("+n[0]*(1-a/i.length)*100+"%,"+n[1]*(1-a/i.length)*100+"%,"+n[2]*(1-a/i.length)*100+"%)";break;case 1:var n,s,l=[THIS.hsv[2],0,0],a=Math.floor(THIS.hsv[0]),o=a%2?THIS.hsv[0]-a:1-(THIS.hsv[0]-a);switch(a){case 6:case 0:n=[0,1,2];break;case 1:n=[1,0,2];break;case 2:n=[2,0,1];break;case 3:n=[2,1,0];break;case 4:n=[1,2,0];break;case 5:n=[0,2,1];break}for(var a=0;a<i.length;a+=1)s=1-1/(i.length-1)*a,l[1]=l[0]*(1-s*o),l[2]=l[0]*(1-s),i[a].style.backgroundColor="rgb("+l[n[0]]*100+"%,"+l[n[1]]*100+"%,"+l[n[2]]*100+"%)";break}}function redrawSld(){switch(modeID){case 0:var r=2;break;case 1:var r=1;break}var e=Math.round((1-THIS.hsv[r])*(mxJSColor.images.sld[1]-1));mxJSColor.picker.sldM.style.backgroundPosition="0 "+(THIS.pickerFace+THIS.pickerInset+e-Math.floor(mxJSColor.images.arrow[1]/2))+"px"}function isPickerOwner(){return mxJSColor.picker&&mxJSColor.picker.owner===THIS}function blurValue(){valueElement!==target&&THIS.importColor()}function setPad(r){var e=mxJSColor.getRelMousePos(r),t=e.x-THIS.pickerFace-THIS.pickerInset,i=e.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(t*(6/(mxJSColor.images.pad[0]-1)),1-i/(mxJSColor.images.pad[1]-1),null,leaveSld);break;case 1:THIS.fromHSV(t*(6/(mxJSColor.images.pad[0]-1)),null,1-i/(mxJSColor.images.pad[1]-1),leaveSld);break}}function setSld(r){var e=mxJSColor.getRelMousePos(r),t=e.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(null,null,1-t/(mxJSColor.images.sld[1]-1),leavePad);break;case 1:THIS.fromHSV(null,1-t/(mxJSColor.images.sld[1]-1),null,leavePad);break}}function dispatchImmediateChange(){THIS.onImmediateChange&&(typeof THIS.onImmediateChange=="string"?eval(THIS.onImmediateChange):THIS.onImmediateChange(THIS))}var THIS=this,modeID=this.pickerMode.toLowerCase()==="hvs"?1:0,valueElement=mxJSColor.fetchElement(this.valueElement),styleElement=mxJSColor.fetchElement(this.styleElement),holdPad=!1,holdSld=!1,leaveValue=1,leaveStyle=2,leavePad=4,leaveSld=8;if(valueElement){var updateField=function(){THIS.fromString(valueElement.value,leaveValue),dispatchImmediateChange()};mxJSColor.addEvent(valueElement,"keyup",updateField),mxJSColor.addEvent(valueElement,"input",updateField),mxJSColor.addEvent(valueElement,"blur",blurValue),valueElement.setAttribute("autocomplete","off")}switch(styleElement&&(styleElement.jscStyle={backgroundImage:styleElement.style.backgroundImage,backgroundColor:styleElement.style.backgroundColor,color:styleElement.style.color}),modeID){case 0:mxJSColor.requireImage("hs.png");break;case 1:mxJSColor.requireImage("hv.png");break}mxJSColor.requireImage("cross.gif"),mxJSColor.requireImage("arrow.gif"),this.importColor()}};function OpenDialog$1(){var r=document.createElement("iframe");r.style.backgroundColor="transparent",r.allowTransparency="true",r.style.borderStyle="none",r.style.borderWidth="0px",r.style.overflow="hidden",r.frameBorder="0";var e=mxClient.IS_VML&&(document.documentMode==null||document.documentMode<8)?20:0;r.setAttribute("width",(Editor$1.useLocalStorage?640:320)+e+"px"),r.setAttribute("height",(Editor$1.useLocalStorage?480:220)+e+"px"),r.setAttribute("src",OPEN_FORM),this.container=r}function ColorDialog(r,e,t,i){this.editorUi=r;var n=document.createElement("input");n.style.marginBottom="10px",n.style.width="216px",mxClient.IS_IE&&(n.style.marginTop="10px",document.body.appendChild(n));var s=t??this.createApplyFunction();function l(){var v=n.value;/(^#?[a-zA-Z0-9]*$)/.test(v)?(v!="none"&&v.charAt(0)!="#"&&(v="#"+v),ColorDialog.addRecentColor(v!="none"?v.substring(1):v,12),s(v),r.hideDialog()):r.handleError({message:mxResources$1.get("invalidInput")})}this.init=function(){mxClient.IS_TOUCH||n.focus()};var a=new mxJSColor.color(n);a.pickerOnfocus=!1,a.showPicker();var o=document.createElement("div");mxJSColor.picker.box.style.position="relative",mxJSColor.picker.box.style.width="230px",mxJSColor.picker.box.style.height="100px",mxJSColor.picker.box.style.paddingBottom="10px",o.appendChild(mxJSColor.picker.box);var h=document.createElement("center");function d(){var v=m(ColorDialog.recentColors.length==0?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return v.style.marginBottom="8px",v}function m(v,w,S,T){w=w??12;var P=document.createElement("table");P.style.borderCollapse="collapse",P.setAttribute("cellspacing","0"),P.style.marginBottom="20px",P.style.cellSpacing="0px";var L=document.createElement("tbody");P.appendChild(L);for(var k=v.length/w,G=0;G<k;G++){for(var Y=document.createElement("tr"),te=0;te<w;te++)(function(ne){var q=document.createElement("td");q.style.border="1px solid black",q.style.padding="0px",q.style.width="16px",q.style.height="16px",ne==null&&(ne=S),ne=="none"?q.style.background="url('"+Dialog$1.prototype.noColorImage+"')":q.style.backgroundColor="#"+ne,Y.appendChild(q),ne!=null&&(q.style.cursor="pointer",mxEvent$1.addListener(q,"click",function(){ne=="none"?(a.fromString("ffffff"),n.value="none"):a.fromString(ne)}),mxEvent$1.addListener(q,"dblclick",l))})(v[G*w+te]);L.appendChild(Y)}if(T){var ie=document.createElement("td");ie.setAttribute("title",mxResources$1.get("reset")),ie.style.border="1px solid black",ie.style.padding="0px",ie.style.width="16px",ie.style.height="16px",ie.style.backgroundImage="url('"+Dialog$1.prototype.closeImage+"')",ie.style.backgroundPosition="center center",ie.style.backgroundRepeat="no-repeat",ie.style.cursor="pointer",Y.appendChild(ie),mxEvent$1.addListener(ie,"click",function(){ColorDialog.resetRecentColors(),P.parentNode.replaceChild(d(),P)})}return h.appendChild(P),P}o.appendChild(n),mxUtils$1.br(o),d();var g=m(this.presetColors);g.style.marginBottom="8px",g=m(this.defaultColors),g.style.marginBottom="16px",o.appendChild(h);var c=document.createElement("div");c.style.textAlign="right",c.style.whiteSpace="nowrap";var f=mxUtils$1.button(mxResources$1.get("cancel"),function(){r.hideDialog(),i?.()});f.className="geBtn",r.editor.cancelFirst&&c.appendChild(f);var C=mxUtils$1.button(mxResources$1.get("apply"),l);C.className="geBtn gePrimaryBtn",c.appendChild(C),r.editor.cancelFirst||c.appendChild(f),e!=null&&(e=="none"?(a.fromString("ffffff"),n.value="none"):a.fromString(e)),o.appendChild(c),this.picker=a,this.colorInput=n,mxEvent$1.addListener(o,"keydown",function(v){v.keyCode==27&&(r.hideDialog(),i?.(),mxEvent$1.consume(v))}),this.container=o}ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"];ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"];ColorDialog.prototype.createApplyFunction=function(){return mxUtils$1.bind(this,function(r){var e=this.editorUi.editor.graph;e.getModel().beginUpdate();try{e.setCellStyles(this.currentColorKey,r),this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",[this.currentColorKey],"values",[r],"cells",e.getSelectionCells()))}finally{e.getModel().endUpdate()}})};ColorDialog.recentColors=[];ColorDialog.addRecentColor=function(r,e){r!=null&&(mxUtils$1.remove(r,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,r),ColorDialog.recentColors.length>=e&&ColorDialog.recentColors.pop())};ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};function OutlineWindow(r,e,t,i,n){var s=r.editor.graph,l=document.createElement("div");l.style.position="absolute",l.style.width="100%",l.style.height="100%",l.style.border="1px solid whiteSmoke",l.style.overflow="hidden",this.window=new mxWindow(mxResources$1.get("outline"),l,e,t,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(c,f){var C=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,v=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;c=Math.max(0,Math.min(c,C-this.table.clientWidth)),f=Math.max(0,Math.min(f,v-this.table.clientHeight-48)),(this.getX()!=c||this.getY()!=f)&&mxWindow.prototype.setLocation.apply(this,arguments)};var a=mxUtils$1.bind(this,function(){var c=this.window.getX(),f=this.window.getY();this.window.setLocation(c,f)});mxEvent$1.addListener(window,"resize",a);var o=r.createOutline(this.window);this.destroy=function(){mxEvent$1.removeListener(window,"resize",a),this.window.destroy(),o.destroy()},this.window.addListener(mxEvent$1.RESIZE,mxUtils$1.bind(this,function(){o.update(!1),o.outline.sizeDidChange()})),this.window.addListener(mxEvent$1.SHOW,mxUtils$1.bind(this,function(){this.window.fit(),o.suspended=!1,o.outline.refresh(),o.update()})),this.window.addListener(mxEvent$1.HIDE,mxUtils$1.bind(this,function(){o.suspended=!0})),this.window.addListener(mxEvent$1.NORMALIZE,mxUtils$1.bind(this,function(){o.suspended=!1,o.update()})),this.window.addListener(mxEvent$1.MINIMIZE,mxUtils$1.bind(this,function(){o.suspended=!0}));var h=o.createGraph;o.createGraph=function(c){var f=h.apply(this,arguments);f.gridEnabled=!1,f.pageScale=s.pageScale,f.pageFormat=s.pageFormat,f.background=s.background==null||s.background==mxConstants$1.NONE?s.defaultPageBackgroundColor:s.background,f.pageVisible=s.pageVisible;var C=mxUtils$1.getCurrentStyle(s.container);return l.style.backgroundColor=C.backgroundColor,f};function d(){o.outline.pageScale=s.pageScale,o.outline.pageFormat=s.pageFormat,o.outline.pageVisible=s.pageVisible,o.outline.background=s.background==null||s.background==mxConstants$1.NONE?s.defaultPageBackgroundColor:s.background;var c=mxUtils$1.getCurrentStyle(s.container);l.style.backgroundColor=c.backgroundColor,s.view.backgroundPageShape!=null&&o.outline.view.backgroundPageShape!=null&&(o.outline.view.backgroundPageShape.fill=s.view.backgroundPageShape.fill),o.outline.refresh()}if(o.init(l),r.editor.addListener("resetGraphView",d),r.addListener("pageFormatChanged",d),r.addListener("backgroundColorChanged",d),r.addListener("backgroundImageChanged",d),r.addListener("pageViewChanged",function(){d(),o.update(!0)}),o.outline.dialect==mxConstants$1.DIALECT_SVG){var m=r.actions.get("zoomIn"),g=r.actions.get("zoomOut");mxEvent$1.addMouseWheelListener(function(c,f){for(var C=!1,v=mxEvent$1.getSource(c);v!=null;){if(v==o.outline.view.canvas.ownerSVGElement){C=!0;break}v=v.parentNode}C&&(f?m.funct():g.funct())})}}function LayersWindow(r,e,t,i,n){var s=r.editor.graph,l=document.createElement("div");l.style.userSelect="none",l.style.background=Dialog$1.backdropColor=="white"?"whiteSmoke":Dialog$1.backdropColor,l.style.border="1px solid whiteSmoke",l.style.height="100%",l.style.marginBottom="10px",l.style.overflow="auto";var a=EditorUi.compactUi?"26px":"30px",o=document.createElement("div");o.style.backgroundColor=Dialog$1.backdropColor=="white"?"#dcdcdc":Dialog$1.backdropColor,o.style.position="absolute",o.style.overflow="auto",o.style.left="0px",o.style.right="0px",o.style.top="0px",o.style.bottom=parseInt(a)+7+"px",l.appendChild(o);var h=null,d=null;mxEvent$1.addListener(l,"dragover",function(G){G.dataTransfer.dropEffect="move",d=0,G.stopPropagation(),G.preventDefault()}),mxEvent$1.addListener(l,"drop",function(G){G.stopPropagation(),G.preventDefault()});var m=null,g=null,c=document.createElement("div");c.className="geToolbarContainer",c.style.position="absolute",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.style.height=a,c.style.overflow="hidden",c.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",c.style.backgroundColor=Dialog$1.backdropColor=="white"?"whiteSmoke":Dialog$1.backdropColor,c.style.borderWidth="1px 0px 0px 0px",c.style.borderColor="#c3c3c3",c.style.borderStyle="solid",c.style.display="block",c.style.whiteSpace="nowrap",mxClient.IS_QUIRKS&&(c.style.filter="none");var f=document.createElement("a");f.className="geButton",mxClient.IS_QUIRKS&&(f.style.filter="none");var C=f.cloneNode();C.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent$1.addListener(C,"click",function(G){if(s.isEnabled()){s.model.beginUpdate();try{var Y=s.model.root.getIndex(g);s.removeCells([g],!1),s.model.getChildCount(s.model.root)==0?(s.model.add(s.model.root,new mxCell),s.setDefaultParent(null)):Y>0&&Y<=s.model.getChildCount(s.model.root)?s.setDefaultParent(s.model.getChildAt(s.model.root,Y-1)):s.setDefaultParent(null)}finally{s.model.endUpdate()}}mxEvent$1.consume(G)}),s.isEnabled()||(C.className="geButton mxDisabled"),c.appendChild(C);var v=f.cloneNode();v.setAttribute("title",mxUtils$1.trim(mxResources$1.get("moveSelectionTo",["..."]))),v.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent$1.addListener(v,"click",function(G){if(s.isEnabled()&&!s.isSelectionEmpty()){var Y=mxUtils$1.getOffset(v);r.showPopupMenu(mxUtils$1.bind(this,function(te,ie){for(var ne=m-1;ne>=0;ne--)mxUtils$1.bind(this,function(q){var oe=te.addItem(s.convertValueToString(q)||mxResources$1.get("background"),null,mxUtils$1.bind(this,function(){s.moveCells(s.getSelectionCells(),0,0,!1,q)}),ie);s.getSelectionCount()==1&&s.model.isAncestor(q,s.getSelectionCell())&&te.addCheckmark(oe,Editor$1.checkmarkImage)})(s.model.getChildAt(s.model.root,ne))}),Y.x,Y.y+v.offsetHeight,G)}}),c.appendChild(v);var w=f.cloneNode();w.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',w.setAttribute("title",mxResources$1.get("rename")),mxEvent$1.addListener(w,"click",function(G){s.isEnabled()&&r.showDataDialog(g),mxEvent$1.consume(G)}),s.isEnabled()||(w.className="geButton mxDisabled"),c.appendChild(w);function S(G){if(s.isEnabled()&&G!=null){var Y=s.convertValueToString(G),te=new FilenameDialog(r,Y||mxResources$1.get("background"),mxResources$1.get("rename"),mxUtils$1.bind(this,function(ie){ie!=null&&s.cellLabelChanged(G,ie)}),mxResources$1.get("enterName"));r.showDialog(te.container,300,100,!0,!0),te.init()}}var T=f.cloneNode();T.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent$1.addListener(T,"click",function(G){if(s.isEnabled()){var Y=null;s.model.beginUpdate();try{Y=s.cloneCell(g),s.cellLabelChanged(Y,mxResources$1.get("untitledLayer")),Y.setVisible(!0),Y=s.addCell(Y,s.model.root),s.setDefaultParent(Y)}finally{s.model.endUpdate()}Y!=null&&!s.isCellLocked(Y)&&s.selectAll(Y)}}),s.isEnabled()||(T.className="geButton mxDisabled"),c.appendChild(T);var P=f.cloneNode();P.innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',P.setAttribute("title",mxResources$1.get("addLayer")),mxEvent$1.addListener(P,"click",function(G){if(s.isEnabled()){s.model.beginUpdate();try{var Y=s.addCell(new mxCell(mxResources$1.get("untitledLayer")),s.model.root);s.setDefaultParent(Y)}finally{s.model.endUpdate()}}mxEvent$1.consume(G)}),s.isEnabled()||(P.className="geButton mxDisabled"),c.appendChild(P),l.appendChild(c);function L(){m=s.model.getChildCount(s.model.root),o.innerHTML="";function G(ie,ne,q,oe){var le=document.createElement("div");le.className="geToolbarContainer",le.style.overflow="hidden",le.style.position="relative",le.style.padding="4px",le.style.height="22px",le.style.display="block",le.style.backgroundColor=Dialog$1.backdropColor=="white"?"whiteSmoke":Dialog$1.backdropColor,le.style.borderWidth="0px 0px 1px 0px",le.style.borderColor="#c3c3c3",le.style.borderStyle="solid",le.style.whiteSpace="nowrap",le.setAttribute("title",ne);var Z=document.createElement("div");Z.style.display="inline-block",Z.style.width="100%",Z.style.textOverflow="ellipsis",Z.style.overflow="hidden",mxEvent$1.addListener(le,"dragover",function(me){me.dataTransfer.dropEffect="move",d=ie,me.stopPropagation(),me.preventDefault()}),mxEvent$1.addListener(le,"dragstart",function(me){h=le,mxClient.IS_FF&&me.dataTransfer.setData("Text","<layer/>")}),mxEvent$1.addListener(le,"dragend",function(me){h!=null&&d!=null&&s.addCell(q,s.model.root,d),h=null,d=null,me.stopPropagation(),me.preventDefault()});var B=document.createElement("img");B.setAttribute("draggable","false"),B.setAttribute("align","top"),B.setAttribute("border","0"),B.style.padding="4px",B.setAttribute("title",mxResources$1.get("lockUnlock"));var re=s.getCurrentCellStyle(q);mxUtils$1.getValue(re,"locked","0")=="1"?B.setAttribute("src",Dialog$1.prototype.lockedImage):B.setAttribute("src",Dialog$1.prototype.unlockedImage),s.isEnabled()&&(B.style.cursor="pointer"),mxEvent$1.addListener(B,"click",function(me){if(s.isEnabled()){var ce=null;s.getModel().beginUpdate();try{ce=mxUtils$1.getValue(re,"locked","0")=="1"?null:"1",s.setCellStyles("locked",ce,[q])}finally{s.getModel().endUpdate()}ce=="1"&&s.removeSelectionCells(s.getModel().getDescendants(q)),mxEvent$1.consume(me)}}),Z.appendChild(B);var se=document.createElement("input");if(se.setAttribute("type","checkbox"),se.setAttribute("title",mxResources$1.get("hideIt",[q.value||mxResources$1.get("background")])),se.style.marginLeft="4px",se.style.marginRight="6px",se.style.marginTop="4px",Z.appendChild(se),s.model.isVisible(q)&&(se.setAttribute("checked","checked"),se.defaultChecked=!0),mxEvent$1.addListener(se,"click",function(me){s.model.setVisible(q,!s.model.isVisible(q)),mxEvent$1.consume(me)}),mxUtils$1.write(Z,ne),le.appendChild(Z),s.isEnabled()){if(mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_VML||mxClient.IS_IE&&document.documentMode<10){var ve=document.createElement("div");if(ve.style.display="block",ve.style.textAlign="right",ve.style.whiteSpace="nowrap",ve.style.position="absolute",ve.style.right="6px",ve.style.top="6px",ie>0){var pe=document.createElement("a");pe.setAttribute("title",mxResources$1.get("toBack")),pe.className="geButton",pe.style.cssFloat="none",pe.innerHTML="&#9660;",pe.style.width="14px",pe.style.height="14px",pe.style.fontSize="14px",pe.style.margin="0px",pe.style.marginTop="-1px",ve.appendChild(pe),mxEvent$1.addListener(pe,"click",function(me){s.isEnabled()&&s.addCell(q,s.model.root,ie-1),mxEvent$1.consume(me)})}if(ie>=0&&ie<m-1){var Q=document.createElement("a");Q.setAttribute("title",mxResources$1.get("toFront")),Q.className="geButton",Q.style.cssFloat="none",Q.innerHTML="&#9650;",Q.style.width="14px",Q.style.height="14px",Q.style.fontSize="14px",Q.style.margin="0px",Q.style.marginTop="-1px",ve.appendChild(Q),mxEvent$1.addListener(Q,"click",function(me){s.isEnabled()&&s.addCell(q,s.model.root,ie+1),mxEvent$1.consume(me)})}le.appendChild(ve)}mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&(le.setAttribute("draggable","true"),le.style.cursor="move")}mxEvent$1.addListener(le,"dblclick",function(me){var ce=mxEvent$1.getSource(me).nodeName;ce!="INPUT"&&ce!="IMG"&&(S(q),mxEvent$1.consume(me))}),s.getDefaultParent()==q?(le.style.background=Dialog$1.backdropColor=="white"?"#e6eff8":"#505759",le.style.fontWeight=s.isEnabled()?"bold":"",g=q):mxEvent$1.addListener(le,"click",function(me){s.isEnabled()&&(s.setDefaultParent(oe),s.view.setCurrentRoot(null))}),o.appendChild(le)}for(var Y=m-1;Y>=0;Y--)mxUtils$1.bind(this,function(ie){G(Y,s.convertValueToString(ie)||mxResources$1.get("background"),ie,ie)})(s.model.getChildAt(s.model.root,Y));var te=s.convertValueToString(g)||mxResources$1.get("background");C.setAttribute("title",mxResources$1.get("removeIt",[te])),T.setAttribute("title",mxResources$1.get("duplicateIt",[te])),w.setAttribute("title",mxResources$1.get("editData")),s.isSelectionEmpty()&&(v.className="geButton mxDisabled")}L(),s.model.addListener(mxEvent$1.CHANGE,L),s.addListener("defaultParentChanged",L),s.selectionModel.addListener(mxEvent$1.CHANGE,function(){s.isSelectionEmpty()?v.className="geButton mxDisabled":v.className="geButton"}),this.window=new mxWindow(mxResources$1.get("layers"),l,e,t,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){o.scrollTop=o.scrollHeight-o.clientHeight},this.window.addListener(mxEvent$1.SHOW,mxUtils$1.bind(this,function(){this.window.fit()})),this.refreshLayers=L,this.window.setLocation=function(G,Y){var te=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,ie=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;G=Math.max(0,Math.min(G,te-this.table.clientWidth)),Y=Math.max(0,Math.min(Y,ie-this.table.clientHeight-48)),(this.getX()!=G||this.getY()!=Y)&&mxWindow.prototype.setLocation.apply(this,arguments)};var k=mxUtils$1.bind(this,function(){var G=this.window.getX(),Y=this.window.getY();this.window.setLocation(G,Y)});mxEvent$1.addListener(window,"resize",k),this.destroy=function(){mxEvent$1.removeListener(window,"resize",k),this.window.destroy()}}class Actions extends mxEventSource{constructor(e){super(),this.editorUi=e,this.actions=new Object,this.init()}}Actions.prototype.init=function(){var r=this.editorUi,e=r.editor,t=e.graph,i=function(){return Action.prototype.isEnabled.apply(this,arguments)&&t.isEnabled()};this.addAction("new...",function(){t.openLink(r.getUrl())}),this.addAction("open...",function(){window.openNew=!0,window.openKey="open",r.openFile()}),this.addAction("import...",function(){window.openNew=!1,window.openKey="import",window.openFile=new OpenFile(mxUtils$1.bind(this,function(){r.hideDialog()})),window.openFile.setConsumer(mxUtils$1.bind(this,function(o,h){try{var d=mxUtils$1.parseXml(o);e.graph.setSelectionCells(e.graph.importGraphModel(d.documentElement))}catch(m){mxUtils$1.alert(mxResources$1.get("invalidOrMissingFile")+": "+m.message)}})),r.showDialog(new OpenDialog(this).container,320,220,!0,!0,function(){window.openFile=null})}).isEnabled=i,this.addAction("save",function(){r.saveFile(!1)},null,null,Editor$1.ctrlKey+"+S").isEnabled=i,this.addAction("saveAs...",function(){r.saveFile(!0)},null,null,Editor$1.ctrlKey+"+Shift+S").isEnabled=i,this.addAction("export...",function(){r.showDialog(new ExportDialog(r).container,300,296,!0,!0)}),this.addAction("editDiagram...",function(){var o=new EditDiagramDialog(r);r.showDialog(o.container,620,420,!0,!1),o.init()}),this.addAction("pageSetup...",function(){r.showDialog(new PageSetupDialog(r).container,320,220,!0,!0)}).isEnabled=i,this.addAction("print...",function(){r.showDialog(new PrintDialog(r).container,300,180,!0,!0)},null,"sprite-print",Editor$1.ctrlKey+"+P"),this.addAction("preview",function(){mxUtils$1.show(t,null,10,10)}),this.addAction("undo",function(){r.undo()},null,"sprite-undo",Editor$1.ctrlKey+"+Z"),this.addAction("redo",function(){r.redo()},null,"sprite-redo",mxClient.IS_WIN?Editor$1.ctrlKey+"+Y":Editor$1.ctrlKey+"+Shift+Z"),this.addAction("select",function(){r.select()},null,"sprite-select",null),this.addAction("pan",function(){r.pan()},null,"sprite-pan",null),this.addAction("cut",function(){mxClipboard.cut(t)},null,"sprite-cut",Editor$1.ctrlKey+"+X"),this.addAction("copy",function(){try{mxClipboard.copy(t)}catch(o){r.handleError(o)}},null,"sprite-copy",Editor$1.ctrlKey+"+C"),this.addAction("paste",function(){t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())&&mxClipboard.paste(t)},!1,"sprite-paste",Editor$1.ctrlKey+"+V"),this.addAction("pasteHere",function(o){if(t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())){t.getModel().beginUpdate();try{var h=mxClipboard.paste(t);if(h!=null){for(var d=!0,m=0;m<h.length&&d;m++)d=d&&t.model.isEdge(h[m]);var g=t.view.translate,c=t.view.scale,f=g.x,C=g.y,v=null;if(h.length==1&&d){var w=t.getCellGeometry(h[0]);w!=null&&(v=w.getTerminalPoint(!0))}if(v=v??t.getBoundingBoxFromGeometry(h,d),v!=null){var S=Math.round(t.snap(t.popupMenuHandler.triggerX/c-f)),T=Math.round(t.snap(t.popupMenuHandler.triggerY/c-C));t.cellsMoved(h,S-v.x,T-v.y)}}}finally{t.getModel().endUpdate()}}}),this.addAction("copySize",function(o){var h=t.getSelectionCell();if(t.isEnabled()&&h!=null&&t.getModel().isVertex(h)){var d=t.getCellGeometry(h);d!=null&&(r.copiedSize=new mxRectangle(d.x,d.y,d.width,d.height))}},null,null,"Alt+Shift+X"),this.addAction("pasteSize",function(o){if(t.isEnabled()&&!t.isSelectionEmpty()&&r.copiedSize!=null){t.getModel().beginUpdate();try{for(var h=t.getSelectionCells(),d=0;d<h.length;d++)if(t.getModel().isVertex(h[d])){var m=t.getCellGeometry(h[d]);m!=null&&(m=m.clone(),m.width=r.copiedSize.width,m.height=r.copiedSize.height,t.getModel().setGeometry(h[d],m))}}finally{t.getModel().endUpdate()}}},null,null,"Alt+Shift+V");function n(o){t.escape();var h=t.deleteCells(t.getDeletableCells(t.getSelectionCells()),o);h!=null&&t.setSelectionCells(h)}this.addAction("delete",function(o){n(o!=null&&mxEvent$1.isControlDown(o))},null,null,"Delete"),this.addAction("deleteAll",function(){if(!t.isSelectionEmpty()){t.getModel().beginUpdate();try{for(var o=t.getSelectionCells(),h=0;h<o.length;h++)t.cellLabelChanged(o[h],"")}finally{t.getModel().endUpdate()}}}),this.addAction("deleteLabels",function(){if(!t.isSelectionEmpty()){t.getModel().beginUpdate();try{for(var o=t.getSelectionCells(),h=0;h<o.length;h++)t.cellLabelChanged(o[h],"")}finally{t.getModel().endUpdate()}}},null,null,Editor$1.ctrlKey+"+Delete"),this.addAction("duplicate",function(){try{t.setSelectionCells(t.duplicateCells()),t.scrollCellToVisible(t.getSelectionCell())}catch(o){r.handleError(o)}},null,null,Editor$1.ctrlKey+"+D"),this.put("turn",new Action(mxResources$1.get("turn")+" / "+mxResources$1.get("reverse"),function(o){t.turnShapes(t.getSelectionCells(),o!=null?mxEvent$1.isShiftDown(o):!1)},null,null,Editor$1.ctrlKey+"+R")),this.addAction("selectVertices",function(){t.selectVertices(null,!0)},null,null,Editor$1.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){t.selectEdges()},null,null,Editor$1.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){t.selectAll(null,!0)},null,null,Editor$1.ctrlKey+"+A"),this.addAction("selectNone",function(){t.clearSelection()},null,null,Editor$1.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!t.isSelectionEmpty()){t.getModel().beginUpdate();try{var o=t.isCellMovable(t.getSelectionCell())?1:0;t.toggleCellStyles(mxConstants$1.STYLE_MOVABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_RESIZABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_ROTATABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_DELETABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_EDITABLE,o),t.toggleCellStyles("connectable",o)}finally{t.getModel().endUpdate()}}},null,null,Editor$1.ctrlKey+"+L"),this.addAction("home",function(){t.home()},null,null,"Shift+Home"),this.addAction("exitGroup",function(){t.exitGroup()},null,null,Editor$1.ctrlKey+"+Shift+Home"),this.addAction("enterGroup",function(){t.enterGroup()},null,null,Editor$1.ctrlKey+"+Shift+End"),this.addAction("collapse",function(){t.foldCells(!0)},null,null,Editor$1.ctrlKey+"+Home"),this.addAction("expand",function(){t.foldCells(!1)},null,null,Editor$1.ctrlKey+"+End"),this.addAction("toFront",function(){t.orderCells(!1)},null,null,Editor$1.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){t.orderCells(!0)},null,null,Editor$1.ctrlKey+"+Shift+B"),this.addAction("group",function(){if(t.isEnabled()){var o=mxUtils$1.sortCells(t.getSelectionCells(),!0);o.length==1&&!t.isTable(o[0])&&!t.isTableRow(o[0])?t.setCellStyles("container","1"):(o=t.getCellsForGroup(o),o.length>1&&t.setSelectionCell(t.groupCells(null,0,o)))}},null,null,Editor$1.ctrlKey+"+G"),this.addAction("ungroup",function(){if(t.isEnabled()){var o=t.getSelectionCells();t.model.beginUpdate();try{var h=t.ungroupCells();if(o!=null)for(var d=0;d<o.length;d++)t.model.contains(o[d])&&(t.model.getChildCount(o[d])==0&&t.model.isVertex(o[d])&&t.setCellStyles("container","0",[o[d]]),h.push(o[d]))}finally{t.model.endUpdate()}t.setSelectionCells(h)}},null,null,Editor$1.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){if(t.isEnabled()){var o=t.getSelectionCells();if(o!=null){for(var h=[],d=0;d<o.length;d++)!t.isTableRow(o[d])&&!t.isTableCell(o[d])&&h.push(o[d]);t.removeCellsFromParent(h)}}}),this.addAction("edit",function(){t.isEnabled()&&t.startEditingAtCell()},null,null,"F2/Enter"),this.addAction("editData...",function(){var o=t.getSelectionCell()||t.getModel().getRoot();r.showDataDialog(o)},null,null,Editor$1.ctrlKey+"+M"),this.addAction("editTooltip...",function(){if(t.isEnabled()&&!t.isSelectionEmpty()){var o=t.getSelectionCell(),h="";if(mxUtils$1.isNode(o.value)){var d=null;Graph.translateDiagram&&Graph.diagramLanguage!=null&&o.value.hasAttribute("tooltip_"+Graph.diagramLanguage)&&(d=o.value.getAttribute("tooltip_"+Graph.diagramLanguage)),d==null&&(d=o.value.getAttribute("tooltip")),d!=null&&(h=d)}var m=new TextareaDialog(r,mxResources$1.get("editTooltip")+":",h,function(g){t.setTooltipForCell(o,g)});r.showDialog(m.container,320,200,!0,!0),m.init()}},null,null,"Alt+Shift+T"),this.addAction("openLink",function(){var o=t.getLinkForCell(t.getSelectionCell());o!=null&&t.openLink(o)}),this.addAction("editLink...",function(){if(t.isEnabled()&&!t.isSelectionEmpty()){var o=t.getSelectionCell(),h=t.getLinkForCell(o)||"";r.showLinkDialog(h,mxResources$1.get("apply"),function(d){d=mxUtils$1.trim(d),t.setLinkForCell(o,d.length>0?d:null)})}},null,null,"Alt+Shift+L"),this.put("insertImage",new Action(mxResources$1.get("image")+"...",function(){t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())&&(t.clearSelection(),r.actions.get("image").funct())})).isEnabled=i,this.put("insertLink",new Action(mxResources$1.get("link")+"...",function(){t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())&&r.showLinkDialog("",mxResources$1.get("insert"),function(o,h){if(o=mxUtils$1.trim(o),o.length>0){var d=null,m=t.getLinkTitle(o);h!=null&&h.length>0&&(d=h[0].iconUrl,m=h[0].name||h[0].type,m=m.charAt(0).toUpperCase()+m.substring(1),m.length>30&&(m=m.substring(0,30)+"..."));var g=new mxCell(m,new mxGeometry(0,0,100,40),"fontColor=#0000EE;fontStyle=4;rounded=1;overflow=hidden;"+(d!=null?"shape=label;imageWidth=16;imageHeight=16;spacingLeft=26;align=left;image="+d:"spacing=10;"));g.vertex=!0;var c=t.getCenterInsertPoint(t.getBoundingBoxFromGeometry([g],!0));g.geometry.x=c.x,g.geometry.y=c.y,t.setLinkForCell(g,o),t.cellSizeUpdated(g,!0),t.getModel().beginUpdate();try{g=t.addCell(g),t.fireEvent(new mxEventObject$1("cellsInserted","cells",[g]))}finally{t.getModel().endUpdate()}t.setSelectionCell(g),t.scrollCellToVisible(t.getSelectionCell())}})})).isEnabled=i,this.addAction("link...",mxUtils$1.bind(this,function(){if(t.isEnabled())if(t.cellEditor.isContentEditing()){var o=t.getSelectedElement(),h=t.getParentByName(o,"A",t.cellEditor.textarea),d="";if(h==null&&o!=null&&o.getElementsByTagName!=null)for(var m=o.getElementsByTagName("a"),g=0;g<m.length&&h==null;g++)m[g].textContent==o.textContent&&(h=m[g]);h!=null&&h.nodeName=="A"&&(d=h.getAttribute("href")||"",t.selectNode(h));var c=t.cellEditor.saveSelection();r.showLinkDialog(d,mxResources$1.get("apply"),mxUtils$1.bind(this,function(f){t.cellEditor.restoreSelection(c),f!=null&&t.insertLink(f)}))}else t.isSelectionEmpty()?this.get("insertLink").funct():this.get("editLink").funct()})).isEnabled=i,this.addAction("autosize",function(){var o=t.getSelectionCells();if(o!=null){t.getModel().beginUpdate();try{for(var h=0;h<o.length;h++){var d=o[h];if(t.getModel().getChildCount(d))t.updateGroupBounds([d],20);else{var m=t.view.getState(d),g=t.getCellGeometry(d);t.getModel().isVertex(d)&&m!=null&&m.text!=null&&g!=null&&t.isWrapping(d)?(g=g.clone(),g.height=m.text.boundingBox.height/t.view.scale,t.getModel().setGeometry(d,g)):t.updateCellSize(d)}}}finally{t.getModel().endUpdate()}}},null,null,Editor$1.ctrlKey+"+Shift+Y"),this.addAction("formattedText",function(){var o=t.getView().getState(t.getSelectionCell());if(o!=null){t.stopEditing();var h=o.style.html=="1"?null:"1";t.getModel().beginUpdate();try{for(var d=t.getSelectionCells(),m=0;m<d.length;m++)if(state=t.getView().getState(d[m]),state!=null){var g=mxUtils$1.getValue(state.style,"html","0");if(g=="1"&&h==null){var c=t.convertValueToString(state.cell);mxUtils$1.getValue(state.style,"nl2Br","1")!="0"&&(c=c.replace(/\n/g,"").replace(/<br\s*.?>/g,`
`));var f=document.createElement("div");f.innerHTML=t.sanitizeHtml(c),c=mxUtils$1.extractTextWithWhitespace(f.childNodes),t.cellLabelChanged(state.cell,c),t.setCellStyles("html",h,[d[m]])}else if(g=="0"&&h=="1"){var c=mxUtils$1.htmlEntities(t.convertValueToString(state.cell),!1);mxUtils$1.getValue(state.style,"nl2Br","1")!="0"&&(c=c.replace(/\n/g,"<br/>")),t.cellLabelChanged(state.cell,t.sanitizeHtml(c)),t.setCellStyles("html",h,[d[m]])}}r.fireEvent(new mxEventObject$1("styleChanged","keys",["html"],"values",[h??"0"],"cells",d))}finally{t.getModel().endUpdate()}}}),this.addAction("wordWrap",function(){var o=t.getView().getState(t.getSelectionCell()),h="wrap";t.stopEditing(),o!=null&&o.style[mxConstants$1.STYLE_WHITE_SPACE]=="wrap"&&(h=null),t.setCellStyles(mxConstants$1.STYLE_WHITE_SPACE,h)}),this.addAction("rotation",function(){var o="0",h=t.getView().getState(t.getSelectionCell());h!=null&&(o=h.style[mxConstants$1.STYLE_ROTATION]||o);var d=new FilenameDialog$1(r,o,mxResources$1.get("apply"),function(m){m!=null&&m.length>0&&t.setCellStyles(mxConstants$1.STYLE_ROTATION,m)},mxResources$1.get("enterValue")+" ("+mxResources$1.get("rotation")+" 0-360)");r.showDialog(d.container,375,80,!0,!0),d.init()}),this.addAction("resetView",function(){t.zoomTo(1),r.resetScrollbars()},null,null,"Home"),this.addAction("zoomIn",function(o){t.isFastZoomEnabled()?t.lazyZoom(!0,!0,r.buttonZoomDelay):t.zoomIn()},null,null,Editor$1.ctrlKey+" + (Numpad) / Alt+Mousewheel"),this.addAction("zoomOut",function(o){t.isFastZoomEnabled()?t.lazyZoom(!1,!0,r.buttonZoomDelay):t.zoomOut()},null,null,Editor$1.ctrlKey+" - (Numpad) / Alt+Mousewheel"),this.addAction("fitWindow",function(){var o=t.isSelectionEmpty()?t.getGraphBounds():t.getBoundingBox(t.getSelectionCells()),h=t.view.translate,d=t.view.scale;o.x=o.x/d-h.x,o.y=o.y/d-h.y,o.width/=d,o.height/=d,t.backgroundImage!=null&&o.add(new mxRectangle(0,0,t.backgroundImage.width,t.backgroundImage.height)),o.width==0||o.height==0?(t.zoomTo(1),r.resetScrollbars()):t.fitWindow(o)},null,null,Editor$1.ctrlKey+"+Shift+H"),this.addAction("fitPage",mxUtils$1.bind(this,function(){t.pageVisible||this.get("pageView").funct();var o=t.pageFormat,h=t.pageScale,d=t.container.clientWidth-10,m=t.container.clientHeight-10,g=Math.floor(20*Math.min(d/o.width/h,m/o.height/h))/20;if(t.zoomTo(g),mxUtils$1.hasScrollbars(t.container)){var c=t.getPagePadding();t.container.scrollTop=c.y*t.view.scale-1,t.container.scrollLeft=Math.min(c.x*t.view.scale,(t.container.scrollWidth-t.container.clientWidth)/2)-1}}),null,null,Editor$1.ctrlKey+"+J"),this.addAction("fitTwoPages",mxUtils$1.bind(this,function(){t.pageVisible||this.get("pageView").funct();var o=t.pageFormat,h=t.pageScale,d=t.container.clientWidth-10,m=t.container.clientHeight-10,g=Math.floor(20*Math.min(d/(2*o.width)/h,m/o.height/h))/20;if(t.zoomTo(g),mxUtils$1.hasScrollbars(t.container)){var c=t.getPagePadding();t.container.scrollTop=Math.min(c.y,(t.container.scrollHeight-t.container.clientHeight)/2),t.container.scrollLeft=Math.min(c.x,(t.container.scrollWidth-t.container.clientWidth)/2)}}),null,null,Editor$1.ctrlKey+"+Shift+J"),this.addAction("fitPageWidth",mxUtils$1.bind(this,function(){t.pageVisible||this.get("pageView").funct();var o=t.pageFormat,h=t.pageScale,d=t.container.clientWidth-10,m=Math.floor(20*d/o.width/h)/20;if(t.zoomTo(m),mxUtils$1.hasScrollbars(t.container)){var g=t.getPagePadding();t.container.scrollLeft=Math.min(g.x*t.view.scale,(t.container.scrollWidth-t.container.clientWidth)/2)}})),this.put("customZoom",new Action(mxResources$1.get("custom")+"...",mxUtils$1.bind(this,function(){var o=new FilenameDialog$1(this.editorUi,parseInt(t.getView().getScale()*100),mxResources$1.get("apply"),mxUtils$1.bind(this,function(h){var d=parseInt(h);!isNaN(d)&&d>0&&t.zoomTo(d/100)}),mxResources$1.get("zoom")+" (%)");this.editorUi.showDialog(o.container,300,80,!0,!0),o.init()}),null,null,Editor$1.ctrlKey+"+0")),this.addAction("pageScale...",mxUtils$1.bind(this,function(){var o=new FilenameDialog$1(this.editorUi,parseInt(t.pageScale*100),mxResources$1.get("apply"),mxUtils$1.bind(this,function(h){var d=parseInt(h);if(!isNaN(d)&&d>0){var m=new ChangePageSetup(r,null,null,null,d/100);m.ignoreColor=!0,m.ignoreImage=!0,t.model.execute(m)}}),mxResources$1.get("pageScale")+" (%)");this.editorUi.showDialog(o.container,300,80,!0,!0),o.init()}));var s=null;s=this.addAction("grid",function(){t.setGridEnabled(!t.isGridEnabled()),r.fireEvent(new mxEventObject$1("gridEnabledChanged"))},null,null,Editor$1.ctrlKey+"+Shift+G"),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.isGridEnabled()}),s.setEnabled(!1),s=this.addAction("guides",function(){t.graphHandler.guidesEnabled=!t.graphHandler.guidesEnabled,r.fireEvent(new mxEventObject$1("guidesEnabledChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.graphHandler.guidesEnabled}),s.setEnabled(!1),s=this.addAction("tooltips",function(){t.tooltipHandler.setEnabled(!t.tooltipHandler.isEnabled()),r.fireEvent(new mxEventObject$1("tooltipsEnabledChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.tooltipHandler.isEnabled()}),s=this.addAction("collapseExpand",function(){var o=new ChangePageSetup(r);o.ignoreColor=!0,o.ignoreImage=!0,o.foldingEnabled=!t.foldingEnabled,t.model.execute(o)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.foldingEnabled}),s.isEnabled=i,s=this.addAction("scrollbars",function(){r.setScrollbars(!r.hasScrollbars())}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.scrollbars}),s=this.addAction("pageView",mxUtils$1.bind(this,function(){r.setPageVisible(!t.pageVisible)})),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.pageVisible}),s=this.addAction("connectionArrows",function(){t.connectionArrowsEnabled=!t.connectionArrowsEnabled,r.fireEvent(new mxEventObject$1("connectionArrowsChanged"))},null,null,"Alt+Shift+A"),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.connectionArrowsEnabled}),s=this.addAction("connectionPoints",function(){t.setConnectable(!t.connectionHandler.isEnabled()),r.fireEvent(new mxEventObject$1("connectionPointsChanged"))},null,null,"Alt+Shift+P"),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.connectionHandler.isEnabled()}),s=this.addAction("copyConnect",function(){t.connectionHandler.setCreateTarget(!t.connectionHandler.isCreateTarget()),r.fireEvent(new mxEventObject$1("copyConnectChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.connectionHandler.isCreateTarget()}),s.isEnabled=i,s=this.addAction("autosave",function(){r.editor.setAutosave(!r.editor.autosave)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.editor.autosave}),s.isEnabled=i,s.visible=!1,this.addAction("help",function(){var o="";mxResources$1.isLanguageSupported(mxClient.language)&&(o="_"+mxClient.language),t.openLink(RESOURCES_PATH+"/help"+o+".html")});var l=!1;this.put("about",new Action(mxResources$1.get("about")+" Graph Editor...",function(){l||(r.showDialog(new AboutDialog(r).container,320,280,!0,!0,function(){l=!1}),l=!0)}));var a=mxUtils$1.bind(this,function(o,h,d,m){return this.addAction(o,function(){if(d!=null&&t.cellEditor.isContentEditing())d();else{t.stopEditing(!1),t.getModel().beginUpdate();try{var g=t.getSelectionCells();t.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,h,g),(h&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD?t.updateLabelElements(t.getSelectionCells(),function(f){f.style.fontWeight=null,f.nodeName=="B"&&t.replaceElement(f)}):(h&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC?t.updateLabelElements(t.getSelectionCells(),function(f){f.style.fontStyle=null,f.nodeName=="I"&&t.replaceElement(f)}):(h&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&t.updateLabelElements(t.getSelectionCells(),function(f){f.style.textDecoration=null,f.nodeName=="U"&&t.replaceElement(f)});for(var c=0;c<g.length;c++)t.model.getChildCount(g[c])==0&&t.autoSizeCell(g[c],!1)}finally{t.getModel().endUpdate()}}},null,null,m)});a("bold",mxConstants$1.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor$1.ctrlKey+"+B"),a("italic",mxConstants$1.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor$1.ctrlKey+"+I"),a("underline",mxConstants$1.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor$1.ctrlKey+"+U"),this.addAction("fontColor...",function(){r.menus.pickColor(mxConstants$1.STYLE_FONTCOLOR,"forecolor","000000")}),this.addAction("strokeColor...",function(){r.menus.pickColor(mxConstants$1.STYLE_STROKECOLOR)}),this.addAction("fillColor...",function(){r.menus.pickColor(mxConstants$1.STYLE_FILLCOLOR)}),this.addAction("gradientColor...",function(){r.menus.pickColor(mxConstants$1.STYLE_GRADIENTCOLOR)}),this.addAction("backgroundColor...",function(){r.menus.pickColor(mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")}),this.addAction("borderColor...",function(){r.menus.pickColor(mxConstants$1.STYLE_LABEL_BORDERCOLOR)}),this.addAction("vertical",function(){r.menus.toggleStyle(mxConstants$1.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){r.menus.toggleStyle(mxConstants$1.STYLE_SHADOW)}),this.addAction("solid",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_DASHED,null),t.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,null),r.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",[null,null],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("dashed",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_DASHED,"1"),t.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,null),r.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",["1",null],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("dotted",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_DASHED,"1"),t.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,"1 4"),r.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("sharp",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_ROUNDED,"0"),t.setCellStyles(mxConstants$1.STYLE_CURVED,"0"),r.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["0","0"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("rounded",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_ROUNDED,"1"),t.setCellStyles(mxConstants$1.STYLE_CURVED,"0"),r.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["1","0"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!t.isSelectionEmpty()&&t.isEnabled()){t.getModel().beginUpdate();try{var o=t.getSelectionCells(),h=t.getCurrentCellStyle(o[0]),d=mxUtils$1.getValue(h,mxConstants$1.STYLE_ROUNDED,"0")=="1"?"0":"1";t.setCellStyles(mxConstants$1.STYLE_ROUNDED,d),t.setCellStyles(mxConstants$1.STYLE_CURVED,null),r.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",[d,"0"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}}),this.addAction("curved",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_ROUNDED,"0"),t.setCellStyles(mxConstants$1.STYLE_CURVED,"1"),r.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["0","1"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("collapsible",function(){var o=t.view.getState(t.getSelectionCell()),h="1";o!=null&&t.getFoldingImage(o)!=null&&(h="0"),t.setCellStyles("collapsible",h),r.fireEvent(new mxEventObject$1("styleChanged","keys",["collapsible"],"values",[h],"cells",t.getSelectionCells()))}),this.addAction("editStyle...",mxUtils$1.bind(this,function(){var o=t.getSelectionCells();if(o!=null&&o.length>0){var h=t.getModel(),d=new TextareaDialog(this.editorUi,mxResources$1.get("editStyle")+":",h.getStyle(o[0])||"",function(m){m!=null&&t.setCellStyle(mxUtils$1.trim(m),o)},null,null,400,220);this.editorUi.showDialog(d.container,420,300,!0,!0),d.init()}}),null,null,Editor$1.ctrlKey+"+E"),this.addAction("setAsDefaultStyle",function(){t.isEnabled()&&!t.isSelectionEmpty()&&r.setDefaultStyle(t.getSelectionCell())},null,null,Editor$1.ctrlKey+"+Shift+D"),this.addAction("clearDefaultStyle",function(){t.isEnabled()&&r.clearDefaultStyle()},null,null,Editor$1.ctrlKey+"+Shift+R"),this.addAction("addWaypoint",function(){var o=t.getSelectionCell();if(o!=null&&t.getModel().isEdge(o)){var h=e.graph.selectionCellsHandler.getHandler(o);if(h instanceof mxEdgeHandler){for(var d=t.view.translate,m=t.view.scale,g=d.x,c=d.y,f=t.getModel().getParent(o),C=t.getCellGeometry(f);t.getModel().isVertex(f)&&C!=null;)g+=C.x,c+=C.y,f=t.getModel().getParent(f),C=t.getCellGeometry(f);var v=Math.round(t.snap(t.popupMenuHandler.triggerX/m-g)),w=Math.round(t.snap(t.popupMenuHandler.triggerY/m-c));h.addPointAt(h.state,v,w)}}}),this.addAction("removeWaypoint",function(){var o=r.actions.get("removeWaypoint");o.handler!=null&&o.handler.removePoint(o.handler.state,o.index)}),this.addAction("clearWaypoints",function(){var o=t.getSelectionCells();if(o!=null){o=t.addAllEdges(o),t.getModel().beginUpdate();try{for(var h=0;h<o.length;h++){var d=o[h];if(t.getModel().isEdge(d)){var m=t.getCellGeometry(d);m!=null&&(m=m.clone(),m.points=null,t.getModel().setGeometry(d,m))}}}finally{t.getModel().endUpdate()}}},null,null,"Alt+Shift+C"),s=this.addAction("subscript",mxUtils$1.bind(this,function(){t.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)}),null,null,Editor$1.ctrlKey+"+,"),s=this.addAction("superscript",mxUtils$1.bind(this,function(){t.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)}),null,null,Editor$1.ctrlKey+"+."),s=this.addAction("indent",mxUtils$1.bind(this,function(){t.cellEditor.isContentEditing()&&document.execCommand("indent",!1,null)}),null,null,"Shift+Tab"),this.addAction("image...",function(){if(t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())){var o=mxResources$1.get("image")+" ("+mxResources$1.get("url")+"):",h=t.getView().getState(t.getSelectionCell()),d="";h!=null&&(d=h.style[mxConstants$1.STYLE_IMAGE]||d);var m=t.cellEditor.saveSelection();r.showImageDialog(o,d,function(g,c,f){if(t.cellEditor.isContentEditing())t.cellEditor.restoreSelection(m),t.insertImage(g,c,f);else{var C=t.getSelectionCells();if(g!=null&&(g.length>0||C.length>0)){var v=null;t.getModel().beginUpdate();try{if(C.length==0){C=[t.insertVertex(t.getDefaultParent(),null,"",0,0,c,f,"shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;")];var w=t.getCenterInsertPoint(t.getBoundingBoxFromGeometry(C,!0));C[0].geometry.x=w.x,C[0].geometry.y=w.y,v=C,t.fireEvent(new mxEventObject$1("cellsInserted","cells",v))}t.setCellStyles(mxConstants$1.STYLE_IMAGE,g.length>0?g:null,C);var S=t.getCurrentCellStyle(C[0]);if(S[mxConstants$1.STYLE_SHAPE]!="image"&&S[mxConstants$1.STYLE_SHAPE]!="label"?t.setCellStyles(mxConstants$1.STYLE_SHAPE,"image",C):g.length==0&&t.setCellStyles(mxConstants$1.STYLE_SHAPE,null,C),t.getSelectionCount()==1&&c!=null&&f!=null){var T=C[0],P=t.getModel().getGeometry(T);P!=null&&(P=P.clone(),P.width=c,P.height=f,t.getModel().setGeometry(T,P))}}finally{t.getModel().endUpdate()}v!=null&&(t.setSelectionCells(v),t.scrollCellToVisible(v[0]))}}},t.cellEditor.isContentEditing(),!t.cellEditor.isContentEditing())}}).isEnabled=i,s=this.addAction("layers",mxUtils$1.bind(this,function(){this.layersWindow==null?(this.layersWindow=new LayersWindow(r,document.body.offsetWidth-280,120,220,196),this.layersWindow.window.addListener("show",function(){r.fireEvent(new mxEventObject$1("layers"))}),this.layersWindow.window.addListener("hide",function(){r.fireEvent(new mxEventObject$1("layers"))}),this.layersWindow.window.setVisible(!0),r.fireEvent(new mxEventObject$1("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())}),null,null,Editor$1.ctrlKey+"+Shift+L"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return this.layersWindow!=null&&this.layersWindow.window.isVisible()})),s=this.addAction("formatPanel",mxUtils$1.bind(this,function(){r.toggleFormatPanel()}),null,null,Editor$1.ctrlKey+"+Shift+P"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return r.formatWidth>0})),s=this.addAction("outline",mxUtils$1.bind(this,function(){this.outlineWindow==null?(this.outlineWindow=new OutlineWindow(r,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",function(){r.fireEvent(new mxEventObject$1("outline"))}),this.outlineWindow.window.addListener("hide",function(){r.fireEvent(new mxEventObject$1("outline"))}),this.outlineWindow.window.setVisible(!0),r.fireEvent(new mxEventObject$1("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor$1.ctrlKey+"+Shift+O"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return this.outlineWindow!=null&&this.outlineWindow.window.isVisible()}))};Actions.prototype.addAction=function(r,e,t,i,n){var s;return r.substring(r.length-3)=="..."?(r=r.substring(0,r.length-3),s=mxResources$1.get(r)+"..."):s=mxResources$1.get(r),this.put(r,new Action(s,e,t,i,n))};Actions.prototype.put=function(r,e){return this.actions[r]=e,e};Actions.prototype.get=function(r){return this.actions[r]};class Action extends mxEventSource{constructor(e,t,i,n,s){super(),this.label=e,this.funct=this.createFunction(t),this.enabled=i??!0,this.iconCls=n,this.shortcut=s,this.visible=!0}}Action.prototype.createFunction=function(r){return r};Action.prototype.setEnabled=function(r){this.enabled!=r&&(this.enabled=r,this.fireEvent(new mxEventObject$1("stateChanged")))};Action.prototype.isEnabled=function(){return this.enabled};Action.prototype.setToggleAction=function(r){this.toggleAction=r};Action.prototype.setSelectedCallback=function(r){this.selectedCallback=r};Action.prototype.isSelected=function(){return this.selectedCallback()};class Menus extends mxEventSource{constructor(e){super(),this.editorUi=e,this.menus=new Object,this.init(),mxClient.IS_SVG||(new Image().src=this.checkmarkImage)}}Menus.prototype.defaultFont="Helvetica";Menus.prototype.defaultFontSize="12";Menus.prototype.defaultMenuItems=["file","edit","view","arrange","extras","help"];Menus.prototype.defaultFonts=["Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"];Menus.prototype.init=function(){var r=this.editorUi.editor.graph,e=mxUtils$1.bind(r,r.isEnabled);this.customFonts=[],this.customFontSizes=[],this.put("fontFamily",new Menu(mxUtils$1.bind(this,function(t,i){for(var n=mxUtils$1.bind(this,function(l){var a=this.styleChange(t,l,[mxConstants$1.STYLE_FONTFAMILY],[l],null,i,function(){document.execCommand("fontname",!1,l)},function(){r.updateLabelElements(r.getSelectionCells(),function(o){o.removeAttribute("face"),o.style.fontFamily=null,o.nodeName=="PRE"&&r.replaceElement(o,"div")})});a.firstChild.nextSibling.style.fontFamily=l}),s=0;s<this.defaultFonts.length;s++)n(this.defaultFonts[s]);if(t.addSeparator(i),this.customFonts.length>0){for(var s=0;s<this.customFonts.length;s++)n(this.customFonts[s]);t.addSeparator(i),t.addItem(mxResources$1.get("reset"),null,mxUtils.bind(this,function(){this.customFonts=[],this.editorUi.fireEvent(new mxEventObject("customFontsChanged"))}),i),t.addSeparator(i)}this.promptChange(t,mxResources$1.get("custom")+"...","",mxConstants$1.DEFAULT_FONTFAMILY,mxConstants$1.STYLE_FONTFAMILY,i,!0,mxUtils$1.bind(this,function(l){mxUtils$1.indexOf(this.customFonts,l)<0&&(this.customFonts.push(l),this.editorUi.fireEvent(new mxEventObject$1("customFontsChanged")))}))}))),this.put("formatBlock",new Menu(mxUtils$1.bind(this,function(t,i){function n(s,l){return t.addItem(s,null,mxUtils$1.bind(this,function(){r.cellEditor.textarea!=null&&(r.cellEditor.textarea.focus(),document.execCommand("formatBlock",!1,"<"+l+">"))}),i)}n(mxResources$1.get("normal"),"p"),n("","h1").firstChild.nextSibling.innerHTML='<h1 style="margin:0px;">'+mxResources$1.get("heading")+" 1</h1>",n("","h2").firstChild.nextSibling.innerHTML='<h2 style="margin:0px;">'+mxResources$1.get("heading")+" 2</h2>",n("","h3").firstChild.nextSibling.innerHTML='<h3 style="margin:0px;">'+mxResources$1.get("heading")+" 3</h3>",n("","h4").firstChild.nextSibling.innerHTML='<h4 style="margin:0px;">'+mxResources$1.get("heading")+" 4</h4>",n("","h5").firstChild.nextSibling.innerHTML='<h5 style="margin:0px;">'+mxResources$1.get("heading")+" 5</h5>",n("","h6").firstChild.nextSibling.innerHTML='<h6 style="margin:0px;">'+mxResources$1.get("heading")+" 6</h6>",n("","pre").firstChild.nextSibling.innerHTML='<pre style="margin:0px;">'+mxResources$1.get("formatted")+"</pre>",n("","blockquote").firstChild.nextSibling.innerHTML='<blockquote style="margin-top:0px;margin-bottom:0px;">'+mxResources$1.get("blockquote")+"</blockquote>"}))),this.put("fontSize",new Menu(mxUtils$1.bind(this,function(t,i){for(var n=[6,8,9,10,11,12,14,18,24,36,48,72],s=mxUtils$1.bind(this,function(a){this.styleChange(t,a,[mxConstants$1.STYLE_FONTSIZE],[a],null,i,function(){if(r.cellEditor.textarea!=null){document.execCommand("fontSize",!1,"3");for(var o=r.cellEditor.textarea.getElementsByTagName("font"),h=0;h<o.length;h++)if(o[h].getAttribute("size")=="3"){o[h].removeAttribute("size"),o[h].style.fontSize=a+"px";break}}})}),l=0;l<n.length;l++)s(n[l]);if(t.addSeparator(i),this.customFontSizes.length>0){for(var l=0;l<this.customFontSizes.length;l++)s(this.customFontSizes[l]);t.addSeparator(i),t.addItem(mxResources$1.get("reset"),null,mxUtils$1.bind(this,function(){this.customFontSizes=[]}),i),t.addSeparator(i)}this.promptChange(t,mxResources$1.get("custom")+"...","(pt)","12",mxConstants$1.STYLE_FONTSIZE,i,!0,mxUtils$1.bind(this,function(a){this.customFontSizes.push(a)}))}))),this.put("direction",new Menu(mxUtils$1.bind(this,function(t,i){t.addItem(mxResources$1.get("flipH"),null,function(){r.toggleCellStyles(mxConstants$1.STYLE_FLIPH,!1)},i),t.addItem(mxResources$1.get("flipV"),null,function(){r.toggleCellStyles(mxConstants$1.STYLE_FLIPV,!1)},i),this.addMenuItems(t,["-","rotation"],i)}))),this.put("align",new Menu(mxUtils$1.bind(this,function(t,i){t.addItem(mxResources$1.get("leftAlign"),null,function(){r.alignCells(mxConstants$1.ALIGN_LEFT)},i),t.addItem(mxResources$1.get("center"),null,function(){r.alignCells(mxConstants$1.ALIGN_CENTER)},i),t.addItem(mxResources$1.get("rightAlign"),null,function(){r.alignCells(mxConstants$1.ALIGN_RIGHT)},i),t.addSeparator(i),t.addItem(mxResources$1.get("topAlign"),null,function(){r.alignCells(mxConstants$1.ALIGN_TOP)},i),t.addItem(mxResources$1.get("middle"),null,function(){r.alignCells(mxConstants$1.ALIGN_MIDDLE)},i),t.addItem(mxResources$1.get("bottomAlign"),null,function(){r.alignCells(mxConstants$1.ALIGN_BOTTOM)},i)}))),this.put("distribute",new Menu(mxUtils$1.bind(this,function(t,i){t.addItem(mxResources$1.get("horizontal"),null,function(){r.distributeCells(!0)},i),t.addItem(mxResources$1.get("vertical"),null,function(){r.distributeCells(!1)},i)}))),this.put("layout",new Menu(mxUtils$1.bind(this,function(t,i){var n=mxUtils$1.bind(this,function(s,l){var a=new FilenameDialog(this.editorUi,s,mxResources$1.get("apply"),function(o){l(parseFloat(o))},mxResources$1.get("spacing"));this.editorUi.showDialog(a.container,300,80,!0,!0),a.init()});t.addItem(mxResources$1.get("horizontalFlow"),null,mxUtils$1.bind(this,function(){var s=new mxHierarchicalLayout(r,mxConstants$1.DIRECTION_WEST);this.editorUi.executeLayout(function(){var l=r.getSelectionCells();s.execute(r.getDefaultParent(),l.length==0?null:l)},!0)}),i),t.addItem(mxResources$1.get("verticalFlow"),null,mxUtils$1.bind(this,function(){var s=new mxHierarchicalLayout(r,mxConstants$1.DIRECTION_NORTH);this.editorUi.executeLayout(function(){var l=r.getSelectionCells();s.execute(r.getDefaultParent(),l.length==0?null:l)},!0)}),i),t.addSeparator(i),t.addItem(mxResources$1.get("horizontalTree"),null,mxUtils$1.bind(this,function(){var s=r.getSelectionCell(),l=null;if(s==null||r.getModel().getChildCount(s)==0?r.getModel().getEdgeCount(s)==0&&(l=r.findTreeRoots(r.getDefaultParent())):l=r.findTreeRoots(s),l!=null&&l.length>0&&(s=l[0]),s!=null){var a=new mxCompactTreeLayout(r,!0);a.edgeRouting=!1,a.levelDistance=30,n(a.levelDistance,mxUtils$1.bind(this,function(o){a.levelDistance=o,this.editorUi.executeLayout(function(){a.execute(r.getDefaultParent(),s)},!0)}))}}),i),t.addItem(mxResources$1.get("verticalTree"),null,mxUtils$1.bind(this,function(){var s=r.getSelectionCell(),l=null;if(s==null||r.getModel().getChildCount(s)==0?r.getModel().getEdgeCount(s)==0&&(l=r.findTreeRoots(r.getDefaultParent())):l=r.findTreeRoots(s),l!=null&&l.length>0&&(s=l[0]),s!=null){var a=new mxCompactTreeLayout(r,!1);a.edgeRouting=!1,a.levelDistance=30,n(a.levelDistance,mxUtils$1.bind(this,function(o){a.levelDistance=o,this.editorUi.executeLayout(function(){a.execute(r.getDefaultParent(),s)},!0)}))}}),i),t.addItem(mxResources$1.get("radialTree"),null,mxUtils$1.bind(this,function(){var s=r.getSelectionCell(),l=null;if(s==null||r.getModel().getChildCount(s)==0?r.getModel().getEdgeCount(s)==0&&(l=r.findTreeRoots(r.getDefaultParent())):l=r.findTreeRoots(s),l!=null&&l.length>0&&(s=l[0]),s!=null){var a=new mxRadialTreeLayout(r,!1);a.levelDistance=80,a.autoRadius=!0,n(a.levelDistance,mxUtils$1.bind(this,function(o){a.levelDistance=o,this.editorUi.executeLayout(function(){a.execute(r.getDefaultParent(),s),r.isSelectionEmpty()||(s=r.getModel().getParent(s),r.getModel().isVertex(s)&&r.updateGroupBounds([s],r.gridSize*2,!0))},!0)}))}}),i),t.addSeparator(i),t.addItem(mxResources$1.get("organic"),null,mxUtils$1.bind(this,function(){var s=new mxFastOrganicLayout(r);n(s.forceConstant,mxUtils$1.bind(this,function(l){s.forceConstant=l,this.editorUi.executeLayout(function(){var a=r.getSelectionCell();(a==null||r.getModel().getChildCount(a)==0)&&(a=r.getDefaultParent()),s.execute(a),r.getModel().isVertex(a)&&r.updateGroupBounds([a],r.gridSize*2,!0)},!0)}))}),i),t.addItem(mxResources$1.get("circle"),null,mxUtils$1.bind(this,function(){var s=new mxCircleLayout(r);this.editorUi.executeLayout(function(){var l=r.getSelectionCell();(l==null||r.getModel().getChildCount(l)==0)&&(l=r.getDefaultParent()),s.execute(l),r.getModel().isVertex(l)&&r.updateGroupBounds([l],r.gridSize*2,!0)},!0)}),i)}))),this.put("navigation",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["home","-","exitGroup","enterGroup","-","expand","collapse","-","collapsible"],i)}))),this.put("arrange",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["toFront","toBack","-"],i),this.addSubmenu("direction",t,i),this.addMenuItems(t,["turn","-"],i),this.addSubmenu("align",t,i),this.addSubmenu("distribute",t,i),t.addSeparator(i),this.addSubmenu("navigation",t,i),this.addSubmenu("insert",t,i),this.addSubmenu("layout",t,i),this.addMenuItems(t,["-","group","ungroup","removeFromGroup","-","clearWaypoints","autosize"],i)}))).isEnabled=e,this.put("insert",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["insertLink","insertImage"],i)}))),this.put("view",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,(this.editorUi.format!=null?["formatPanel"]:[]).concat(["outline","layers","-","pageView","pageScale","-","scrollbars","tooltips","-","grid","guides","-","connectionArrows","connectionPoints","-","resetView","zoomIn","zoomOut"],i))}))),this.put("viewPanels",new Menu(mxUtils$1.bind(this,function(t,i){this.editorUi.format!=null&&this.addMenuItems(t,["formatPanel"],i),this.addMenuItems(t,["outline","layers"],i)}))),this.put("viewZoom",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["resetView","-"],i);for(var n=[.25,.5,.75,1,1.25,1.5,2,3,4],s=0;s<n.length;s++)(function(l){t.addItem(l*100+"%",null,function(){r.zoomTo(l)},i)})(n[s]);this.addMenuItems(t,["-","fitWindow","fitPageWidth","fitPage","fitTwoPages","-","customZoom"],i)}))),this.put("file",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["new","open","-","save","saveAs","-","import","export","-","pageSetup","print"],i)}))),this.put("edit",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["undo","redo","-","cut","copy","paste","delete","-","duplicate","-","editData","editTooltip","-","editStyle","-","edit","-","editLink","openLink","-","selectVertices","selectEdges","selectAll","selectNone","-","lockUnlock"])}))),this.put("extras",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["copyConnect","collapseExpand","-","editDiagram"])}))),this.put("help",new Menu(mxUtils$1.bind(this,function(t,i){this.addMenuItems(t,["help","-","about"])})))};Menus.prototype.put=function(r,e){return this.menus[r]=e,e};Menus.prototype.get=function(r){return this.menus[r]};Menus.prototype.addSubmenu=function(r,e,t,i){var n=this.get(r);if(n!=null){var s=n.isEnabled();if(e.showDisabled||s){var l=e.addItem(i||mxResources$1.get(r),null,null,t,null,s);this.addMenu(r,e,l)}}};Menus.prototype.addMenu=function(r,e,t){var i=this.get(r);i!=null&&(e.showDisabled||i.isEnabled())&&this.get(r).execute(e,t)};Menus.prototype.addInsertTableCellItem=function(r,e){var t=this.editorUi.editor.graph;this.addInsertTableItem(r,mxUtils$1.bind(this,function(i,n,s){var l=mxEvent$1.isControlDown(i)||mxEvent$1.isMetaDown(i)?t.createCrossFunctionalSwimlane(n,s):t.createTable(n,s,null,null,mxEvent$1.isShiftDown(i)?"Table":null),a=mxEvent$1.isAltDown(i)?t.getFreeInsertPoint():t.getCenterInsertPoint(t.getBoundingBoxFromGeometry([l],!0)),o=t.importCells([l],a.x,a.y);o!=null&&o.length>0&&(t.scrollCellToVisible(o[0]),t.setSelectionCells(o))}),e)};Menus.prototype.addInsertTableItem=function(r,e,t){e=e??mxUtils$1.bind(this,function(f,C,v){var w=this.editorUi.editor.graph,S=w.getParentByName(mxEvent$1.getSource(f),"TD");if(S!=null&&w.cellEditor.textarea!=null){w.getParentByName(S,"TR");for(var T=w.cellEditor.textarea.getElementsByTagName("table"),P=[],L=0;L<T.length;L++)P.push(T[L]);w.container.focus(),w.pasteHtmlAtCaret(l(C,v));var k=w.cellEditor.textarea.getElementsByTagName("table");if(k.length==P.length+1){for(var L=k.length-1;L>=0;L--)if(L==0||k[L]!=P[L-1]){w.selectNode(k[L].rows[0].cells[0]);break}}}});var i=this.editorUi.editor.graph,n=null,s=null;function l(f,C){for(var v=["<table>"],w=0;w<f;w++){v.push("<tr>");for(var S=0;S<C;S++)v.push("<td><br></td>");v.push("</tr>")}return v.push("</table>"),v.join("")}var a=r.addItem("",null,null,t,null,null,null,!0),o='<img src="'+mxClient.imageBasePath+'/transparent.gif" width="16" height="16"/>';function h(f,C){var v=document.createElement("table");v.setAttribute("border","1"),v.style.borderCollapse="collapse",v.style.borderStyle="solid",mxClient.IS_QUIRKS||v.setAttribute("cellPadding","8");for(var w=0;w<f;w++)for(var S=v.insertRow(w),T=0;T<C;T++){var P=S.insertCell(-1);mxClient.IS_QUIRKS&&(P.innerHTML=o)}return v}function d(f,C,v){for(var w=f.rows.length;w<C;w++)for(var S=f.insertRow(w),T=0;T<f.rows[0].cells.length;T++){var P=S.insertCell(-1);mxClient.IS_QUIRKS&&(P.innerHTML=o)}for(var w=0;w<f.rows.length;w++)for(var S=f.rows[w],T=S.cells.length;T<v;T++){var P=S.insertCell(-1);mxClient.IS_QUIRKS&&(P.innerHTML=o)}}a.firstChild.innerHTML="";var m=h(5,5);a.firstChild.appendChild(m);var g=document.createElement("div");g.style.padding="4px",g.style.fontSize=Menus.prototype.defaultFontSize+"px",g.innerHTML="1x1",a.firstChild.appendChild(g);function c(f){s=i.getParentByName(mxEvent$1.getSource(f),"TD");var C=!1;if(s!=null){n=i.getParentByName(s,"TR");var v=mxEvent$1.isMouseEvent(f)?2:4;d(m,Math.min(20,n.sectionRowIndex+v),Math.min(20,s.cellIndex+v)),g.innerHTML=s.cellIndex+1+"x"+(n.sectionRowIndex+1);for(var w=0;w<m.rows.length;w++)for(var S=m.rows[w],T=0;T<S.cells.length;T++){var P=S.cells[T];w==n.sectionRowIndex&&T==s.cellIndex&&(C=P.style.backgroundColor=="blue"),w<=n.sectionRowIndex&&T<=s.cellIndex?P.style.backgroundColor="blue":P.style.backgroundColor="transparent"}}return mxEvent$1.consume(f),C}mxEvent$1.addGestureListeners(m,null,null,mxUtils$1.bind(this,function(f){var C=c(f);s!=null&&n!=null&&C&&(e(f,n.sectionRowIndex+1,s.cellIndex+1),window.setTimeout(mxUtils$1.bind(this,function(){this.editorUi.hideCurrentMenu()}),0))})),mxEvent$1.addListener(m,"mouseover",c)};Menus.prototype.edgeStyleChange=function(r,e,t,i,n,s,l){return r.addItem(e,null,mxUtils$1.bind(this,function(){var a=this.editorUi.editor.graph;a.stopEditing(!1),a.getModel().beginUpdate();try{for(var o=a.getSelectionCells(),h=[],d=0;d<o.length;d++){var m=o[d];if(a.getModel().isEdge(m)){if(l){var g=a.getCellGeometry(m);g!=null&&(g=g.clone(),g.points=null,a.getModel().setGeometry(m,g))}for(var c=0;c<t.length;c++)a.setCellStyles(t[c],i[c],[m]);h.push(m)}}this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",t,"values",i,"cells",h))}finally{a.getModel().endUpdate()}}),s,n)};Menus.prototype.styleChange=function(r,e,t,i,n,s,l,a){var o=this.createStyleChangeFunction(t,i);return r.addItem(e,null,mxUtils$1.bind(this,function(){var h=this.editorUi.editor.graph;l!=null&&h.cellEditor.isContentEditing()?l():o(a)}),s,n)};Menus.prototype.createStyleChangeFunction=function(r,e){return mxUtils$1.bind(this,function(t){var i=this.editorUi.editor.graph;i.stopEditing(!1),i.getModel().beginUpdate();try{for(var n=i.getSelectionCells(),s=0;s<r.length;s++)if(i.setCellStyles(r[s],e[s],n),r[s]==mxConstants$1.STYLE_ALIGN&&i.updateLabelElements(n,function(a){a.removeAttribute("align"),a.style.textAlign=null}),r[s]==mxConstants$1.STYLE_FONTFAMILY)for(var l=0;l<n.length;l++)i.model.getChildCount(n[l])==0&&i.autoSizeCell(n[l],!1);t?.(),this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",r,"values",e,"cells",n))}finally{i.getModel().endUpdate()}})};Menus.prototype.promptChange=function(r,e,t,i,n,s,l,a,o){return r.addItem(e,null,mxUtils$1.bind(this,function(){var h=this.editorUi.editor.graph,d=i,m=h.getView().getState(h.getSelectionCell());m!=null&&(d=m.style[n]||d);var g=new FilenameDialog(this.editorUi,d,mxResources$1.get("apply"),mxUtils$1.bind(this,function(c){if(c!=null&&c.length>0){h.getModel().beginUpdate();try{h.stopEditing(!1),h.setCellStyles(n,c)}finally{h.getModel().endUpdate()}a?.(c)}}),mxResources$1.get("enterValue")+(t.length>0?" "+t:""));this.editorUi.showDialog(g.container,300,80,!0,!0),g.init()}),s,o,l)};Menus.prototype.pickColor=function(r,e,t){var i=this.editorUi.editor.graph,n=226+(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12))*17;if(e!=null&&i.cellEditor.isContentEditing()){var s=i.cellEditor.saveSelection(),l=new ColorDialog(this.editorUi,t||"000000",mxUtils$1.bind(this,function(h){i.cellEditor.restoreSelection(s),document.execCommand(e,!1,h!=mxConstants$1.NONE?h:"transparent")}),function(){i.cellEditor.restoreSelection(s)});this.editorUi.showDialog(l.container,230,n,!0,!0),l.init()}else{this.colorDialog==null&&(this.colorDialog=new ColorDialog(this.editorUi)),this.colorDialog.currentColorKey=r;var a=i.getView().getState(i.getSelectionCell()),o="none";a!=null&&(o=a.style[r]||o),o=="none"?(o="ffffff",this.colorDialog.picker.fromString("ffffff"),this.colorDialog.colorInput.value="none"):this.colorDialog.picker.fromString(o),this.editorUi.showDialog(this.colorDialog.container,230,n,!0,!0),this.colorDialog.init()}};Menus.prototype.toggleStyle=function(r,e){var t=this.editorUi.editor.graph,i=t.toggleCellStyles(r,e);this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",[r],"values",[i],"cells",t.getSelectionCells()))};Menus.prototype.addMenuItem=function(r,e,t,i,n,s){var l=this.editorUi.actions.get(e);if(l!=null&&(r.showDisabled||l.isEnabled())&&l.visible){var a=r.addItem(s||l.label,null,function(){l.funct(i)},t,n,l.isEnabled());return l.toggleAction&&l.isSelected()&&r.addCheckmark(a,Editor.checkmarkImage),this.addShortcut(a,l),a}return null};Menus.prototype.addShortcut=function(r,e){if(e.shortcut!=null){var t=r.firstChild.nextSibling.nextSibling,i=document.createElement("span");i.style.color="gray",mxUtils$1.write(i,e.shortcut),t.appendChild(i)}};Menus.prototype.addMenuItems=function(r,e,t,i,n){for(var s=0;s<e.length;s++)e[s]=="-"?r.addSeparator(t):this.addMenuItem(r,e[s],t,i,n!=null?n[s]:null)};Menus.prototype.createPopupMenu=function(r,e,t){r.smartSeparators=!0,this.addPopupMenuHistoryItems(r,e,t),this.addPopupMenuEditItems(r,e,t),this.addPopupMenuStyleItems(r,e,t),this.addPopupMenuArrangeItems(r,e,t),this.addPopupMenuCellItems(r,e,t),this.addPopupMenuSelectionItems(r,e,t)};Menus.prototype.addPopupMenuHistoryItems=function(r,e,t){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(r,["undo","redo"],null,t)};Menus.prototype.addPopupMenuEditItems=function(r,e,t){this.editorUi.editor.graph.isSelectionEmpty()?this.addMenuItems(r,["pasteHere"],null,t):this.addMenuItems(r,["delete","-","cut","copy","-","duplicate"],null,t)};Menus.prototype.addPopupMenuStyleItems=function(r,e,t){this.editorUi.editor.graph.getSelectionCount()==1?this.addMenuItems(r,["-","setAsDefaultStyle"],null,t):this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(r,["-","clearDefaultStyle"],null,t)};Menus.prototype.addPopupMenuArrangeItems=function(r,e,t){var i=this.editorUi.editor.graph;i.isSelectionEmpty()||this.addMenuItems(r,["-","toFront","toBack"],null,t),i.getSelectionCount()>1?this.addMenuItems(r,["-","group"],null,t):i.getSelectionCount()==1&&!i.getModel().isEdge(e)&&!i.isSwimlane(e)&&i.getModel().getChildCount(e)>0&&this.addMenuItems(r,["-","ungroup"],null,t)};Menus.prototype.addPopupMenuCellItems=function(r,e,t){var i=this.editorUi.editor.graph;e=i.getSelectionCell();var n=i.view.getState(e);if(r.addSeparator(),n!=null){var s=!1;if(i.getModel().isEdge(e)&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_EDGE,null)!="entityRelationEdgeStyle"&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SHAPE,null)!="arrow"){var l=i.selectionCellsHandler.getHandler(e),a=!1;if(l instanceof mxEdgeHandler&&l.bends!=null&&l.bends.length>2){var o=l.getHandleForEvent(i.updateMouseEvent(new mxMouseEvent(t))),h=this.editorUi.actions.get("removeWaypoint");h.handler=l,h.index=o,a=o>0&&o<l.bends.length-1}r.addSeparator(),this.addMenuItem(r,"turn",null,t,null,mxResources$1.get("reverse")),this.addMenuItems(r,[a?"removeWaypoint":"addWaypoint"],null,t);var d=i.getModel().getGeometry(e);s=d!=null&&d.points!=null&&d.points.length>0}i.getSelectionCount()==1&&(s||i.getModel().isVertex(e)&&i.getModel().getEdgeCount(e)>0)&&this.addMenuItems(r,["-","clearWaypoints"],null,t),i.getSelectionCount()==1&&(this.addMenuItems(r,["-","editStyle","editData","editLink"],null,t),i.getModel().isVertex(e)&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_IMAGE,null)!=null&&(r.addSeparator(),this.addMenuItem(r,"image",null,t).firstChild.nextSibling.innerHTML=mxResources$1.get("editImage")+"..."))}};Menus.prototype.addPopupMenuSelectionItems=function(r,e,t){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(r,["-","selectVertices","selectEdges","selectAll"],null,t)};Menus.prototype.createMenubar=function(r){for(var e=new Menubar(this.editorUi,r),t=this.defaultMenuItems,i=0;i<t.length;i++)mxUtils$1.bind(this,function(n){var s=e.addMenu(mxResources$1.get(t[i]),mxUtils$1.bind(this,function(){n.funct.apply(this,arguments)}));this.menuCreated(n,s)})(this.get(t[i]));return e};Menus.prototype.menuCreated=function(r,e,t){e!=null&&(t=t??"geItem",r.addListener("stateChanged",function(){e.enabled=r.enabled,r.enabled?(e.className=t,document.documentMode==8&&(e.style.color="")):(e.className=t+" mxDisabled",document.documentMode==8&&(e.style.color="#c3c3c3"))}))};function Menubar(r,e){this.editorUi=r,this.container=e}Menubar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()};Menubar.prototype.addMenu=function(r,e,t){var i=document.createElement("a");return i.className="geItem",mxUtils$1.write(i,r),this.addMenuHandler(i,e),t!=null?this.container.insertBefore(i,t):this.container.appendChild(i),i};Menubar.prototype.addMenuHandler=function(r,e){if(e!=null){var t=!0,i=mxUtils$1.bind(this,function(n){if(t&&r.enabled==null||r.enabled){this.editorUi.editor.graph.popupMenuHandler.hideMenu();var s=new mxPopupMenu(e);s.div.className+=" geMenubarMenu",s.smartSeparators=!0,s.showDisabled=!0,s.autoExpand=!0,s.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(s,arguments),this.editorUi.resetCurrentMenu(),s.destroy()});var l=mxUtils$1.getOffset(r);s.popup(l.x,l.y+r.offsetHeight,null,n),this.editorUi.setCurrentMenu(s,r)}mxEvent$1.consume(n)});mxEvent$1.addListener(r,"mousemove",mxUtils$1.bind(this,function(n){this.editorUi.currentMenu!=null&&this.editorUi.currentMenuElt!=r&&(this.editorUi.hideCurrentMenu(),i(n))})),mxEvent$1.addListener(r,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(n){t=this.currentElt!=r,n.preventDefault()})),mxEvent$1.addListener(r,"click",mxUtils$1.bind(this,function(n){i(n),t=!0}))}};Menubar.prototype.destroy=function(){};class Menu extends mxEventSource{constructor(e,t){super(),this.funct=e,this.enabled=t??!0}}Menu.prototype.isEnabled=function(){return this.enabled};Menu.prototype.setEnabled=function(r){this.enabled!=r&&(this.enabled=r,this.fireEvent(new mxEventObject$1("stateChanged")))};Menu.prototype.execute=function(r,e){this.funct(r,e)};EditorUi.prototype.createMenus=function(){return new Menus(this)};(function(){class r extends mxSwimlane{constructor(){super()}}r.prototype.getLabelBounds=function(x){var M=this.getTitleSize();return M==0?mxShape.prototype.getLabelBounds.apply(this,arguments):mxSwimlane.prototype.getLabelBounds.apply(this,arguments)},r.prototype.paintVertexShape=function(x,M,D,y,b){var I=this.getTitleSize();I==0?mxRectangleShape.prototype.paintBackground.apply(this,arguments):(mxSwimlane.prototype.paintVertexShape.apply(this,arguments),x.translate(-M,-D)),this.paintForeground(x,M,D,y,b)},r.prototype.paintForeground=function(x,M,D,y,b){if(this.state!=null){var I=this.flipH,O=this.flipV;if(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH){var ee=I;I=O,O=ee}x.rotate(-this.getShapeRotation(),I,O,M+y/2,D+b/2);var ae=this.scale;M=this.bounds.x/ae,D=this.bounds.y/ae,y=this.bounds.width/ae,b=this.bounds.height/ae,this.paintTableForeground(x,M,D,y,b)}},r.prototype.paintTableForeground=function(x,M,D,y,b){var I=this.state.view.graph,O=I.getActualStartSize(this.state.cell),ee=I.model.getChildCells(this.state.cell,!0);if(ee.length>0){var ae=mxUtils$1.getValue(this.state.style,"rowLines","1")!="0",Ce=mxUtils$1.getValue(this.state.style,"columnLines","1")!="0";if(ae)for(var H=1;H<ee.length;H++){var j=I.getCellGeometry(ee[H]);j!=null&&(x.begin(),x.moveTo(M+O.x,D+j.y),x.lineTo(M+y-O.width,D+j.y),x.end(),x.stroke())}if(Ce)for(var X=I.model.getChildCells(ee[0],!0),H=1;H<X.length;H++){var j=I.getCellGeometry(X[H]);j!=null&&(x.begin(),x.moveTo(M+j.x+O.x,D+O.y),x.lineTo(M+j.x+O.x,D+b-O.height),x.end(),x.stroke())}}},mxCellRenderer.registerShape("table",r);class e extends mxCylinder{constructor(){super()}}e.prototype.size=20,e.prototype.darkOpacity=0,e.prototype.darkOpacity2=0,e.prototype.paintVertexShape=function(x,M,D,y,b){var I=Math.max(0,Math.min(y,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),O=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity",this.darkOpacity)))),ee=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity2",this.darkOpacity2))));x.translate(M,D),x.begin(),x.moveTo(0,0),x.lineTo(y-I,0),x.lineTo(y,I),x.lineTo(y,b),x.lineTo(I,b),x.lineTo(0,b-I),x.lineTo(0,0),x.close(),x.end(),x.fillAndStroke(),this.outline||(x.setShadow(!1),O!=0&&(x.setFillAlpha(Math.abs(O)),x.setFillColor(O<0?"#FFFFFF":"#000000"),x.begin(),x.moveTo(0,0),x.lineTo(y-I,0),x.lineTo(y,I),x.lineTo(I,I),x.close(),x.fill()),ee!=0&&(x.setFillAlpha(Math.abs(ee)),x.setFillColor(ee<0?"#FFFFFF":"#000000"),x.begin(),x.moveTo(0,0),x.lineTo(I,I),x.lineTo(I,b),x.lineTo(0,b-I),x.close(),x.fill()),x.begin(),x.moveTo(I,b),x.lineTo(I,I),x.lineTo(0,0),x.moveTo(I,I),x.lineTo(y,I),x.end(),x.stroke())},e.prototype.getLabelMargins=function(x){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var M=parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale;return new mxRectangle(M,M,0,0)}return null},mxCellRenderer.registerShape("cube",e);var t=Math.tan(mxUtils$1.toRadians(30)),i=(.5-t)/2;class n extends mxActor{constructor(){super()}}n.prototype.size=20,n.prototype.redrawPath=function(x,M,D,y,b){var I=Math.min(y,b/t);x.translate((y-I)/2,(b-I)/2+I/4),x.moveTo(0,.25*I),x.lineTo(.5*I,I*i),x.lineTo(I,.25*I),x.lineTo(.5*I,(.5-i)*I),x.lineTo(0,.25*I),x.close(),x.end()},mxCellRenderer.registerShape("isoRectangle",n);class s extends mxCylinder{constructor(){super()}}s.prototype.size=20,s.prototype.redrawPath=function(x,M,D,y,b,I){var O=Math.min(y,b/(.5+t));I?(x.moveTo(0,.25*O),x.lineTo(.5*O,(.5-i)*O),x.lineTo(O,.25*O),x.moveTo(.5*O,(.5-i)*O),x.lineTo(.5*O,(1-i)*O),x.end()):(x.translate((y-O)/2,(b-O)/2),x.moveTo(0,.25*O),x.lineTo(.5*O,O*i),x.lineTo(O,.25*O),x.lineTo(O,.75*O),x.lineTo(.5*O,(1-i)*O),x.lineTo(0,.75*O),x.close(),x.end())},mxCellRenderer.registerShape("isoCube",s);class l extends mxCylinder{constructor(){super()}}l.prototype.redrawPath=function(x,M,D,y,b,I){var O=Math.min(b/2,Math.round(b/8)+this.strokewidth-1);(I&&this.fill!=null||!I&&this.fill==null)&&(x.moveTo(0,O),x.curveTo(0,2*O,y,2*O,y,O),I||(x.stroke(),x.begin()),x.translate(0,O/2),x.moveTo(0,O),x.curveTo(0,2*O,y,2*O,y,O),I||(x.stroke(),x.begin()),x.translate(0,O/2),x.moveTo(0,O),x.curveTo(0,2*O,y,2*O,y,O),I||(x.stroke(),x.begin()),x.translate(0,-O)),I||(x.moveTo(0,O),x.curveTo(0,-O/3,y,-O/3,y,O),x.lineTo(y,b-O),x.curveTo(y,b+O/3,0,b+O/3,0,b-O),x.close())},l.prototype.getLabelMargins=function(x){return new mxRectangle(0,2.5*Math.min(x.height/2,Math.round(x.height/8)+this.strokewidth-1),0,0)},mxCellRenderer.registerShape("datastore",l);class a extends mxCylinder{constructor(){super()}}a.prototype.size=30,a.prototype.darkOpacity=0,a.prototype.paintVertexShape=function(x,M,D,y,b){var I=Math.max(0,Math.min(y,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),O=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity",this.darkOpacity))));x.translate(M,D),x.begin(),x.moveTo(0,0),x.lineTo(y-I,0),x.lineTo(y,I),x.lineTo(y,b),x.lineTo(0,b),x.lineTo(0,0),x.close(),x.end(),x.fillAndStroke(),this.outline||(x.setShadow(!1),O!=0&&(x.setFillAlpha(Math.abs(O)),x.setFillColor(O<0?"#FFFFFF":"#000000"),x.begin(),x.moveTo(y-I,0),x.lineTo(y-I,I),x.lineTo(y,I),x.close(),x.fill()),x.begin(),x.moveTo(y-I,0),x.lineTo(y-I,I),x.lineTo(y,I),x.end(),x.stroke())},mxCellRenderer.registerShape("note",a);class o extends a{constructor(){super()}}mxCellRenderer.registerShape("note2",o);class h extends mxShape{constructor(){super()}}h.prototype.isoAngle=15,h.prototype.paintVertexShape=function(x,M,D,y,b){var I=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,O=Math.min(y*Math.tan(I),b*.5);x.translate(M,D),x.begin(),x.moveTo(y*.5,0),x.lineTo(y,O),x.lineTo(y,b-O),x.lineTo(y*.5,b),x.lineTo(0,b-O),x.lineTo(0,O),x.close(),x.fillAndStroke(),x.setShadow(!1),x.begin(),x.moveTo(0,O),x.lineTo(y*.5,2*O),x.lineTo(y,O),x.moveTo(y*.5,2*O),x.lineTo(y*.5,b),x.stroke()},mxCellRenderer.registerShape("isoCube2",h);class d extends mxShape{constructor(){super()}}d.prototype.size=15,d.prototype.paintVertexShape=function(x,M,D,y,b){var I=Math.max(0,Math.min(b*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));x.translate(M,D),I==0?(x.rect(0,0,y,b),x.fillAndStroke()):(x.begin(),x.moveTo(0,I),x.arcTo(y*.5,I,0,0,1,y*.5,0),x.arcTo(y*.5,I,0,0,1,y,I),x.lineTo(y,b-I),x.arcTo(y*.5,I,0,0,1,y*.5,b),x.arcTo(y*.5,I,0,0,1,0,b-I),x.close(),x.fillAndStroke(),x.setShadow(!1),x.begin(),x.moveTo(y,I),x.arcTo(y*.5,I,0,0,1,y*.5,2*I),x.arcTo(y*.5,I,0,0,1,0,I),x.stroke())},mxCellRenderer.registerShape("cylinder2",d);class m extends mxCylinder{constructor(M,D,y,b){super(),this.bounds=M,this.fill=D,this.stroke=y,this.strokewidth=b??1}}m.prototype.size=15,m.prototype.paintVertexShape=function(x,M,D,y,b){var I=Math.max(0,Math.min(b*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,"lid",!0);x.translate(M,D),I==0?(x.rect(0,0,y,b),x.fillAndStroke()):(x.begin(),O?(x.moveTo(0,I),x.arcTo(y*.5,I,0,0,1,y*.5,0),x.arcTo(y*.5,I,0,0,1,y,I)):(x.moveTo(0,0),x.arcTo(y*.5,I,0,0,0,y*.5,I),x.arcTo(y*.5,I,0,0,0,y,0)),x.lineTo(y,b-I),x.arcTo(y*.5,I,0,0,1,y*.5,b),x.arcTo(y*.5,I,0,0,1,0,b-I),x.close(),x.fillAndStroke(),x.setShadow(!1),O&&(x.begin(),x.moveTo(y,I),x.arcTo(y*.5,I,0,0,1,y*.5,2*I),x.arcTo(y*.5,I,0,0,1,0,I),x.stroke()))},mxCellRenderer.registerShape("cylinder3",m);class g extends mxActor{constructor(){super()}}g.prototype.redrawPath=function(x,M,D,y,b){var I=.5;x.moveTo(0,0),x.quadTo(y/2,b*I,y,0),x.quadTo(y*(1-I),b/2,y,b),x.quadTo(y/2,b*(1-I),0,b),x.quadTo(y*I,b/2,0,0),x.end()},mxCellRenderer.registerShape("switch",g);class c extends mxCylinder{constructor(){super()}}c.prototype.tabWidth=60,c.prototype.tabHeight=20,c.prototype.tabPosition="right",c.prototype.arcSize=.1,c.prototype.paintVertexShape=function(x,M,D,y,b){x.translate(M,D);var I=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"tabWidth",this.tabWidth)))),O=Math.max(0,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"tabHeight",this.tabHeight)))),ee=mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition),ae=mxUtils$1.getValue(this.style,"rounded",!1),Ce=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),H=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize));Ce||(H=Math.min(y,b)*H),H=Math.min(H,y*.5,(b-O)*.5),I=Math.max(I,H),I=Math.min(y-H,I),ae||(H=0),x.begin(),ee=="left"?(x.moveTo(Math.max(H,0),O),x.lineTo(Math.max(H,0),0),x.lineTo(I,0),x.lineTo(I,O)):(x.moveTo(y-I,O),x.lineTo(y-I,0),x.lineTo(y-Math.max(H,0),0),x.lineTo(y-Math.max(H,0),O)),ae?(x.moveTo(0,H+O),x.arcTo(H,H,0,0,1,H,O),x.lineTo(y-H,O),x.arcTo(H,H,0,0,1,y,H+O),x.lineTo(y,b-H),x.arcTo(H,H,0,0,1,y-H,b),x.lineTo(H,b),x.arcTo(H,H,0,0,1,0,b-H)):(x.moveTo(0,O),x.lineTo(y,O),x.lineTo(y,b),x.lineTo(0,b)),x.close(),x.fillAndStroke(),x.setShadow(!1);var j=mxUtils$1.getValue(this.style,"folderSymbol",null);j=="triangle"&&(x.begin(),x.moveTo(y-30,O+20),x.lineTo(y-20,O+10),x.lineTo(y-10,O+20),x.close(),x.stroke())},mxCellRenderer.registerShape("folder",c);class f extends mxCylinder{constructor(){super()}}f.prototype.arcSize=.1,f.prototype.paintVertexShape=function(x,M,D,y,b){x.translate(M,D);var I=mxUtils$1.getValue(this.style,"rounded",!1),O=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),ee=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize)),ae=mxUtils$1.getValue(this.style,"umlStateConnection",null);O||(ee=Math.min(y,b)*ee),ee=Math.min(ee,y*.5,b*.5),I||(ee=0);var Ce=0;ae!=null&&(Ce=10),x.begin(),x.moveTo(Ce,ee),x.arcTo(ee,ee,0,0,1,Ce+ee,0),x.lineTo(y-ee,0),x.arcTo(ee,ee,0,0,1,y,ee),x.lineTo(y,b-ee),x.arcTo(ee,ee,0,0,1,y-ee,b),x.lineTo(Ce+ee,b),x.arcTo(ee,ee,0,0,1,Ce,b-ee),x.close(),x.fillAndStroke(),x.setShadow(!1);var H=mxUtils$1.getValue(this.style,"umlStateSymbol",null);H=="collapseState"&&(x.roundrect(y-40,b-20,10,10,3,3),x.stroke(),x.roundrect(y-20,b-20,10,10,3,3),x.stroke(),x.begin(),x.moveTo(y-30,b-15),x.lineTo(y-20,b-15),x.stroke()),ae=="connPointRefEntry"?(x.ellipse(0,b*.5-10,20,20),x.fillAndStroke()):ae=="connPointRefExit"&&(x.ellipse(0,b*.5-10,20,20),x.fillAndStroke(),x.begin(),x.moveTo(5,b*.5-5),x.lineTo(15,b*.5+5),x.moveTo(15,b*.5-5),x.lineTo(5,b*.5+5),x.stroke())},mxCellRenderer.registerShape("umlState",f);class C extends mxActor{constructor(){super()}}C.prototype.size=30,C.prototype.isRoundable=function(){return!0},C.prototype.redrawPath=function(x,M,D,y,b){var I=Math.max(0,Math.min(y,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(I,0),new mxPoint(y,0),new mxPoint(y,b),new mxPoint(0,b),new mxPoint(0,I)],this.isRounded,O,!0),x.end()},mxCellRenderer.registerShape("card",C);class v extends mxActor{constructor(){super()}}v.prototype.size=.4,v.prototype.redrawPath=function(x,M,D,y,b){var I=b*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=1.4;x.moveTo(0,I/2),x.quadTo(y/4,I*O,y/2,I/2),x.quadTo(y*3/4,I*(1-O),y,I/2),x.lineTo(y,b-I/2),x.quadTo(y*3/4,b-I*O,y/2,b-I/2),x.quadTo(y/4,b-I*(1-O),0,b-I/2),x.lineTo(0,I/2),x.close(),x.end()},v.prototype.getLabelBounds=function(x){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var M=mxUtils$1.getValue(this.style,"size",this.size),D=x.width,y=x.height;if(this.direction==null||this.direction==mxConstants$1.DIRECTION_EAST||this.direction==mxConstants$1.DIRECTION_WEST){var b=y*M;return new mxRectangle(x.x,x.y+b,D,y-2*b)}else{var I=D*M;return new mxRectangle(x.x+I,x.y,D-2*I,y)}}return x},mxCellRenderer.registerShape("tape",v);class w extends mxActor{constructor(){super()}}w.prototype.size=.3,w.prototype.getLabelMargins=function(x){return mxUtils$1.getValue(this.style,"boundedLbl",!1)?new mxRectangle(0,0,0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*x.height):null},w.prototype.redrawPath=function(x,M,D,y,b){var I=b*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=1.4;x.moveTo(0,0),x.lineTo(y,0),x.lineTo(y,b-I/2),x.quadTo(y*3/4,b-I*O,y/2,b-I/2),x.quadTo(y/4,b-I*(1-O),0,b-I/2),x.lineTo(0,I/2),x.close(),x.end()},mxCellRenderer.registerShape("document",w);var S=mxCylinder.prototype.getCylinderSize;mxCylinder.prototype.getCylinderSize=function(x,M,D,y){var b=mxUtils$1.getValue(this.style,"size");return b!=null?y*Math.max(0,Math.min(1,b)):S.apply(this,arguments)},mxCylinder.prototype.getLabelMargins=function(x){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var M=mxUtils$1.getValue(this.style,"size",.15)*2;return new mxRectangle(0,Math.min(this.maxHeight*this.scale,x.height*M),0,0)}return null},m.prototype.getLabelMargins=function(x){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var M=mxUtils$1.getValue(this.style,"size",15);return mxUtils$1.getValue(this.style,"lid",!0)||(M/=2),new mxRectangle(0,Math.min(x.height*this.scale,M*2*this.scale),0,Math.max(0,M*.3*this.scale))}return null},c.prototype.getLabelMargins=function(x){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var M=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale;if(mxUtils$1.getValue(this.style,"labelInHeader",!1)){var D=mxUtils$1.getValue(this.style,"tabWidth",15)*this.scale,M=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale,y=mxUtils$1.getValue(this.style,"rounded",!1),b=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),I=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize));return b||(I=Math.min(x.width,x.height)*I),I=Math.min(I,x.width*.5,(x.height-M)*.5),y||(I=0),mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition)=="left"?new mxRectangle(I,0,Math.min(x.width,x.width-D),Math.min(x.height,x.height-M)):new mxRectangle(Math.min(x.width,x.width-D),0,I,Math.min(x.height,x.height-M))}else return new mxRectangle(0,Math.min(x.height,M),0,0)}return null},f.prototype.getLabelMargins=function(x){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var M=mxUtils$1.getValue(this.style,"umlStateConnection",null);if(M!=null)return new mxRectangle(10*this.scale,0,0,0)}return null},o.prototype.getLabelMargins=function(x){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var M=mxUtils$1.getValue(this.style,"size",15);return new mxRectangle(0,Math.min(x.height*this.scale,M*this.scale),0,Math.max(0,M*this.scale))}return null};class T extends mxActor{constructor(){super()}}T.prototype.size=.2,T.prototype.fixedSize=20,T.prototype.isRoundable=function(){return!0},T.prototype.redrawPath=function(x,M,D,y,b){var I=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=I?Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,b),new mxPoint(O,0),new mxPoint(y,0),new mxPoint(y-O,b)],this.isRounded,ee,!0),x.end()},mxCellRenderer.registerShape("parallelogram",T);class P extends mxActor{constructor(){super()}}P.prototype.size=.2,P.prototype.fixedSize=20,P.prototype.isRoundable=function(){return!0},P.prototype.redrawPath=function(x,M,D,y,b){var I=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=I?Math.max(0,Math.min(y*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,b),new mxPoint(O,0),new mxPoint(y-O,0),new mxPoint(y,b)],this.isRounded,ee,!0)},mxCellRenderer.registerShape("trapezoid",P);class L extends mxActor{constructor(){super()}}L.prototype.size=.5,L.prototype.redrawPath=function(x,M,D,y,b){x.setFillColor(null);var I=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(y,0),new mxPoint(I,0),new mxPoint(I,b/2),new mxPoint(0,b/2),new mxPoint(I,b/2),new mxPoint(I,b),new mxPoint(y,b)],this.isRounded,O,!1),x.end()},mxCellRenderer.registerShape("curlyBracket",L);class k extends mxActor{constructor(){super()}}k.prototype.redrawPath=function(x,M,D,y,b){x.setStrokeWidth(1),x.setFillColor(this.stroke);var I=y/5;x.rect(0,0,I,b),x.fillAndStroke(),x.rect(2*I,0,I,b),x.fillAndStroke(),x.rect(4*I,0,I,b),x.fillAndStroke()},mxCellRenderer.registerShape("parallelMarker",k);function G(x,M){this.canvas=x,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.defaultVariation=M,this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils$1.bind(this,G.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils$1.bind(this,G.prototype.moveTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils$1.bind(this,G.prototype.close),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils$1.bind(this,G.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils$1.bind(this,G.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils$1.bind(this,G.prototype.arcTo)}G.prototype.moveTo=function(x,M){this.originalMoveTo.apply(this.canvas,arguments),this.lastX=x,this.lastY=M,this.firstX=x,this.firstY=M},G.prototype.close=function(){this.firstX!=null&&this.firstY!=null&&(this.lineTo(this.firstX,this.firstY),this.originalClose.apply(this.canvas,arguments)),this.originalClose.apply(this.canvas,arguments)},G.prototype.quadTo=function(x,M,D,y){this.originalQuadTo.apply(this.canvas,arguments),this.lastX=D,this.lastY=y},G.prototype.curveTo=function(x,M,D,y,b,I){this.originalCurveTo.apply(this.canvas,arguments),this.lastX=b,this.lastY=I},G.prototype.arcTo=function(x,M,D,y,b,I,O){this.originalArcTo.apply(this.canvas,arguments),this.lastX=I,this.lastY=O},G.prototype.lineTo=function(x,M){if(this.lastX!=null&&this.lastY!=null){let Ee=function(Me){return typeof Me=="number"?Me?Me<0?-1:1:Me===Me?0:NaN:NaN};var Se=Ee,D=Math.abs(x-this.lastX),y=Math.abs(M-this.lastY),b=Math.sqrt(D*D+y*y);if(b<2){this.originalLineTo.apply(this.canvas,arguments),this.lastX=x,this.lastY=M;return}var I=Math.round(b/10),O=this.defaultVariation;I<5&&(I=5,O/=3);for(var ee=Ee(x-this.lastX)*D/I,ae=Ee(M-this.lastY)*y/I,Ce=D/b,H=y/b,j=0;j<I;j++){var X=ee*j+this.lastX,he=ae*j+this.lastY,ye=(Math.random()-.5)*O;this.originalLineTo.call(this.canvas,X-ye*H,he-ye*Ce)}this.originalLineTo.call(this.canvas,x,M),this.lastX=x,this.lastY=M}else this.originalLineTo.apply(this.canvas,arguments),this.lastX=x,this.lastY=M},G.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo},mxShape.prototype.defaultJiggle=1.5;var Y=mxShape.prototype.beforePaint;mxShape.prototype.beforePaint=function(x){Y.apply(this,arguments),x.handJiggle==null&&(x.handJiggle=this.createHandJiggle(x))};var te=mxShape.prototype.afterPaint;mxShape.prototype.afterPaint=function(x){te.apply(this,arguments),x.handJiggle!=null&&(x.handJiggle.destroy(),delete x.handJiggle)},mxShape.prototype.createComicCanvas=function(x){return new G(x,mxUtils$1.getValue(this.style,"jiggle",this.defaultJiggle))},mxShape.prototype.createHandJiggle=function(x){return!this.outline&&this.style!=null&&mxUtils$1.getValue(this.style,"comic","0")!="0"?this.createComicCanvas(x):null},mxRhombus.prototype.defaultJiggle=2;var ie=mxRectangleShape.prototype.isHtmlAllowed;mxRectangleShape.prototype.isHtmlAllowed=function(){return!this.outline&&(this.style==null||mxUtils$1.getValue(this.style,"comic","0")=="0"&&mxUtils$1.getValue(this.style,"sketch",urlParams.rough=="1"?"1":"0")=="0")&&ie.apply(this,arguments)};var ne=mxRectangleShape.prototype.paintBackground;mxRectangleShape.prototype.paintBackground=function(x,M,D,y,b){if(x.handJiggle==null||x.handJiggle.constructor!=G)ne.apply(this,arguments);else{var I=!0;if(this.style!=null&&(I=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),I||this.fill!=null&&this.fill!=mxConstants$1.NONE||this.stroke!=null&&this.stroke!=mxConstants$1.NONE){if(!I&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(x.pointerEvents=!1),x.begin(),this.isRounded){var O=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")O=Math.min(y/2,Math.min(b/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;O=Math.min(y*ee,b*ee)}x.moveTo(M+O,D),x.lineTo(M+y-O,D),x.quadTo(M+y,D,M+y,D+O),x.lineTo(M+y,D+b-O),x.quadTo(M+y,D+b,M+y-O,D+b),x.lineTo(M+O,D+b),x.quadTo(M,D+b,M,D+b-O),x.lineTo(M,D+O),x.quadTo(M,D,M+O,D)}else x.moveTo(M,D),x.lineTo(M+y,D),x.lineTo(M+y,D+b),x.lineTo(M,D+b),x.lineTo(M,D);x.close(),x.end(),x.fillAndStroke()}}};var q=mxRectangleShape.prototype.paintForeground;mxRectangleShape.prototype.paintForeground=function(x,M,D,y,b){x.handJiggle==null&&q.apply(this,arguments)};class oe extends mxRectangleShape{constructor(){super()}}oe.prototype.size=.1,oe.prototype.fixedSize=!1,oe.prototype.isHtmlAllowed=function(){return!1},oe.prototype.getLabelBounds=function(x){if(mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,!0)==(this.direction==null||this.direction==mxConstants$1.DIRECTION_EAST||this.direction==mxConstants$1.DIRECTION_WEST)){var M=x.width,D=x.height,y=new mxRectangle(x.x,x.y,M,D),b=M*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));if(this.isRounded){var I=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;b=Math.max(b,Math.min(M*I,D*I))}return y.x+=Math.round(b),y.width-=Math.round(2*b),y}return x},oe.prototype.paintForeground=function(x,M,D,y,b){var I=mxUtils$1.getValue(this.style,"fixedSize",this.fixedSize),O=parseFloat(mxUtils$1.getValue(this.style,"size",this.size));if(I?O=Math.max(0,Math.min(y,O)):O=y*Math.max(0,Math.min(1,O)),this.isRounded){var ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;O=Math.max(O,Math.min(y*ee,b*ee))}O=Math.round(O),x.begin(),x.moveTo(M+O,D),x.lineTo(M+O,D+b),x.moveTo(M+y-O,D),x.lineTo(M+y-O,D+b),x.end(),x.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("process",oe);class le extends mxRectangleShape{constructor(){super()}}le.prototype.paintBackground=function(x,M,D,y,b){x.setFillColor(mxConstants$1.NONE),x.rect(M,D,y,b),x.fill()},le.prototype.paintForeground=function(x,M,D,y,b){},mxCellRenderer.registerShape("transparent",le);class Z extends mxHexagon{constructor(){super()}}Z.prototype.size=30,Z.prototype.position=.5,Z.prototype.position2=.5,Z.prototype.base=20,Z.prototype.getLabelMargins=function(){return new mxRectangle(0,0,0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale)},Z.prototype.isRoundable=function(){return!0},Z.prototype.redrawPath=function(x,M,D,y,b){var I=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2,O=Math.max(0,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),ee=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position",this.position)))),ae=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position2",this.position2)))),Ce=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"base",this.base))));this.addPoints(x,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,b-O),new mxPoint(Math.min(y,ee+Ce),b-O),new mxPoint(ae,b),new mxPoint(Math.max(0,ee),b-O),new mxPoint(0,b-O)],this.isRounded,I,!0,[4])},mxCellRenderer.registerShape("callout",Z);class B extends mxActor{constructor(){super()}}B.prototype.size=.2,B.prototype.fixedSize=20,B.prototype.isRoundable=function(){return!0},B.prototype.redrawPath=function(x,M,D,y,b){var I=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=I?Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,0),new mxPoint(y-O,0),new mxPoint(y,b/2),new mxPoint(y-O,b),new mxPoint(0,b),new mxPoint(O,b/2)],this.isRounded,ee,!0),x.end()},mxCellRenderer.registerShape("step",B);class re extends mxHexagon{constructor(){super()}}re.prototype.size=.25,re.prototype.fixedSize=20,re.prototype.isRoundable=function(){return!0},re.prototype.redrawPath=function(x,M,D,y,b){var I=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=I?Math.max(0,Math.min(y*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(O,0),new mxPoint(y-O,0),new mxPoint(y,.5*b),new mxPoint(y-O,b),new mxPoint(O,b),new mxPoint(0,.5*b)],this.isRounded,ee,!0)},mxCellRenderer.registerShape("hexagon",re);class se extends mxRectangleShape{constructor(){super()}}se.prototype.isHtmlAllowed=function(){return!1},se.prototype.paintForeground=function(x,M,D,y,b){var I=Math.min(y/5,b/5)+1;x.begin(),x.moveTo(M+y/2,D+I),x.lineTo(M+y/2,D+b-I),x.moveTo(M+I,D+b/2),x.lineTo(M+y-I,D+b/2),x.end(),x.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("plus",se);var ve=mxRhombus.prototype.paintVertexShape;mxRhombus.prototype.getLabelBounds=function(x){if(this.style.double==1){var M=(Math.max(2,this.strokewidth+1)*2+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(x.x+M,x.y+M,x.width-2*M,x.height-2*M)}return x},mxRhombus.prototype.paintVertexShape=function(x,M,D,y,b){if(ve.apply(this,arguments),!this.outline&&this.style.double==1){var I=Math.max(2,this.strokewidth+1)*2+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0);M+=I,D+=I,y-=2*I,b-=2*I,y>0&&b>0&&(x.setShadow(!1),ve.apply(this,[x,M,D,y,b]))}};class pe extends mxRectangleShape{constructor(){super()}}pe.prototype.isHtmlAllowed=function(){return!1},pe.prototype.getLabelBounds=function(x){if(this.style.double==1){var M=(Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(x.x+M,x.y+M,x.width-2*M,x.height-2*M)}return x},pe.prototype.paintForeground=function(x,M,D,y,b){if(this.style!=null){if(!this.outline&&this.style.double==1){var I=Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0);M+=I,D+=I,y-=2*I,b-=2*I,y>0&&b>0&&mxRectangleShape.prototype.paintBackground.apply(this,arguments)}x.setDashed(!1);var O=0,ee=null;do{if(ee=mxCellRenderer.defaultShapes[this.style["symbol"+O]],ee!=null){var ae=this.style["symbol"+O+"Align"],Ce=this.style["symbol"+O+"VerticalAlign"],H=this.style["symbol"+O+"Width"],j=this.style["symbol"+O+"Height"],X=this.style["symbol"+O+"Spacing"]||0,he=this.style["symbol"+O+"VSpacing"]||X,ye=this.style["symbol"+O+"ArcSpacing"];if(ye!=null){var Se=this.getArcSize(y+this.strokewidth,b+this.strokewidth)*ye;X+=Se,he+=Se}var Ee=M,Me=D;ae==mxConstants$1.ALIGN_CENTER?Ee+=(y-H)/2:ae==mxConstants$1.ALIGN_RIGHT?Ee+=y-H-X:Ee+=X,Ce==mxConstants$1.ALIGN_MIDDLE?Me+=(b-j)/2:Ce==mxConstants$1.ALIGN_BOTTOM?Me+=b-j-he:Me+=he,x.save();var Ue=new ee;Ue.style=this.style,ee.prototype.paintVertexShape.call(Ue,x,Ee,Me,H,j),x.restore()}O++}while(ee!=null)}mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("ext",pe);class Q extends mxCylinder{constructor(){super()}}Q.prototype.redrawPath=function(x,M,D,y,b,I){I?(x.moveTo(0,0),x.lineTo(y/2,b/2),x.lineTo(y,0),x.end()):(x.moveTo(0,0),x.lineTo(y,0),x.lineTo(y,b),x.lineTo(0,b),x.close())},mxCellRenderer.registerShape("message",Q);class me extends mxShape{constructor(){super()}}me.prototype.paintBackground=function(x,M,D,y,b){x.translate(M,D),x.ellipse(y/4,0,y/2,b/4),x.fillAndStroke(),x.begin(),x.moveTo(y/2,b/4),x.lineTo(y/2,2*b/3),x.moveTo(y/2,b/3),x.lineTo(0,b/3),x.moveTo(y/2,b/3),x.lineTo(y,b/3),x.moveTo(y/2,2*b/3),x.lineTo(0,b),x.moveTo(y/2,2*b/3),x.lineTo(y,b),x.end(),x.stroke()},mxCellRenderer.registerShape("umlActor",me);class ce extends mxShape{constructor(){super()}}ce.prototype.getLabelMargins=function(x){return new mxRectangle(x.width/6,0,0,0)},ce.prototype.paintBackground=function(x,M,D,y,b){x.translate(M,D),x.begin(),x.moveTo(0,b/4),x.lineTo(0,b*3/4),x.end(),x.stroke(),x.begin(),x.moveTo(0,b/2),x.lineTo(y/6,b/2),x.end(),x.stroke(),x.ellipse(y/6,0,y*5/6,b),x.fillAndStroke()},mxCellRenderer.registerShape("umlBoundary",ce);class Le extends mxEllipse{constructor(){super()}}Le.prototype.paintVertexShape=function(x,M,D,y,b){mxEllipse.prototype.paintVertexShape.apply(this,arguments),x.begin(),x.moveTo(M+y/8,D+b),x.lineTo(M+y*7/8,D+b),x.end(),x.stroke()},mxCellRenderer.registerShape("umlEntity",Le);class Ie extends mxShape{constructor(){super()}}Ie.prototype.paintVertexShape=function(x,M,D,y,b){x.translate(M,D),x.begin(),x.moveTo(y,0),x.lineTo(0,b),x.moveTo(0,0),x.lineTo(y,b),x.end(),x.stroke()},mxCellRenderer.registerShape("umlDestroy",Ie);class Ge extends mxShape{constructor(){super()}}Ge.prototype.getLabelBounds=function(x){return new mxRectangle(x.x,x.y+x.height/8,x.width,x.height*7/8)},Ge.prototype.paintBackground=function(x,M,D,y,b){x.translate(M,D),x.begin(),x.moveTo(y*3/8,b/8*1.1),x.lineTo(y*5/8,0),x.end(),x.stroke(),x.ellipse(0,b/8,y,b*7/8),x.fillAndStroke()},Ge.prototype.paintForeground=function(x,M,D,y,b){x.begin(),x.moveTo(y*3/8,b/8*1.1),x.lineTo(y*5/8,b/4),x.end(),x.stroke()},mxCellRenderer.registerShape("umlControl",Ge);class fe extends mxRectangleShape{constructor(){super()}}fe.prototype.size=40,fe.prototype.isHtmlAllowed=function(){return!1},fe.prototype.getLabelBounds=function(x){var M=Math.max(0,Math.min(x.height,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale));return new mxRectangle(x.x,x.y,x.width,M)},fe.prototype.paintBackground=function(x,M,D,y,b){var I=Math.max(0,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,"participant");if(O==null||this.state==null)mxRectangleShape.prototype.paintBackground.call(this,x,M,D,y,I);else{var ee=this.state.view.graph.cellRenderer.getShape(O);if(ee!=null&&ee!=fe){var ae=new ee;ae.apply(this.state),x.save(),ae.paintVertexShape(x,M,D,y,I),x.restore()}}I<b&&(x.setDashed(!0),x.begin(),x.moveTo(M+y/2,D+I),x.lineTo(M+y/2,D+b),x.end(),x.stroke())},fe.prototype.paintForeground=function(x,M,D,y,b){var I=Math.max(0,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));mxRectangleShape.prototype.paintForeground.call(this,x,M,D,y,Math.min(b,I))},mxCellRenderer.registerShape("umlLifeline",fe);class Te extends mxShape{constructor(){super()}}Te.prototype.width=60,Te.prototype.height=30,Te.prototype.corner=10,Te.prototype.getLabelMargins=function(x){return new mxRectangle(0,0,x.width-parseFloat(mxUtils$1.getValue(this.style,"width",this.width)*this.scale),x.height-parseFloat(mxUtils$1.getValue(this.style,"height",this.height)*this.scale))},Te.prototype.paintBackground=function(x,M,D,y,b){var I=this.corner,O=Math.min(y,Math.max(I,parseFloat(mxUtils$1.getValue(this.style,"width",this.width)))),ee=Math.min(b,Math.max(I*1.5,parseFloat(mxUtils$1.getValue(this.style,"height",this.height)))),ae=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.NONE);ae!=mxConstants$1.NONE&&(x.setFillColor(ae),x.rect(M,D,y,b),x.fill()),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE?(this.getGradientBounds(x,M,D,y,b),x.setGradient(this.fill,this.gradient,M,D,y,b,this.gradientDirection)):x.setFillColor(this.fill),x.begin(),x.moveTo(M,D),x.lineTo(M+O,D),x.lineTo(M+O,D+Math.max(0,ee-I*1.5)),x.lineTo(M+Math.max(0,O-I),D+ee),x.lineTo(M,D+ee),x.close(),x.fillAndStroke(),x.begin(),x.moveTo(M+O,D),x.lineTo(M+y,D),x.lineTo(M+y,D+b),x.lineTo(M,D+b),x.lineTo(M,D+ee),x.stroke()},mxCellRenderer.registerShape("umlFrame",Te),mxPerimeter.LifelinePerimeter=function(x,M,D,y){var b=fe.prototype.size;M!=null&&(b=mxUtils$1.getValue(M.style,"size",b)*M.view.scale);var I=parseFloat(M.style[mxConstants$1.STYLE_STROKEWIDTH]||1)*M.view.scale/2-1;return D.x<x.getCenterX()&&(I+=1,I*=-1),new mxPoint(x.getCenterX()+I,Math.min(x.y+x.height,Math.max(x.y+b,D.y)))},mxStyleRegistry.putValue("lifelinePerimeter",mxPerimeter.LifelinePerimeter),mxPerimeter.OrthogonalPerimeter=function(x,M,D,y){return y=!0,mxPerimeter.RectanglePerimeter.apply(this,arguments)},mxStyleRegistry.putValue("orthogonalPerimeter",mxPerimeter.OrthogonalPerimeter),mxPerimeter.BackbonePerimeter=function(x,M,D,y){var b=parseFloat(M.style[mxConstants$1.STYLE_STROKEWIDTH]||1)*M.view.scale/2-1;return M.style.backboneSize!=null&&(b+=parseFloat(M.style.backboneSize)*M.view.scale/2-1),M.style[mxConstants$1.STYLE_DIRECTION]=="south"||M.style[mxConstants$1.STYLE_DIRECTION]=="north"?(D.x<x.getCenterX()&&(b+=1,b*=-1),new mxPoint(x.getCenterX()+b,Math.min(x.y+x.height,Math.max(x.y,D.y)))):(D.y<x.getCenterY()&&(b+=1,b*=-1),new mxPoint(Math.min(x.x+x.width,Math.max(x.x,D.x)),x.getCenterY()+b))},mxStyleRegistry.putValue("backbonePerimeter",mxPerimeter.BackbonePerimeter),mxPerimeter.CalloutPerimeter=function(x,M,D,y){return mxPerimeter.RectanglePerimeter(mxUtils$1.getDirectedBounds(x,new mxRectangle(0,0,0,Math.max(0,Math.min(x.height,parseFloat(mxUtils$1.getValue(M.style,"size",Z.prototype.size))*M.view.scale))),M.style),M,D,y)},mxStyleRegistry.putValue("calloutPerimeter",mxPerimeter.CalloutPerimeter),mxPerimeter.ParallelogramPerimeter=function(x,M,D,y){var b=mxUtils$1.getValue(M.style,"fixedSize","0")!="0",I=b?T.prototype.fixedSize:T.prototype.size;M!=null&&(I=mxUtils$1.getValue(M.style,"size",I)),b&&(I*=M.view.scale);var O=x.x,ee=x.y,ae=x.width,Ce=x.height,H=M!=null?mxUtils$1.getValue(M.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,j=H==mxConstants$1.DIRECTION_NORTH||H==mxConstants$1.DIRECTION_SOUTH,X;if(j){var he=b?Math.max(0,Math.min(Ce,I)):Ce*Math.max(0,Math.min(1,I));X=[new mxPoint(O,ee),new mxPoint(O+ae,ee+he),new mxPoint(O+ae,ee+Ce),new mxPoint(O,ee+Ce-he),new mxPoint(O,ee)]}else{var ye=b?Math.max(0,Math.min(ae*.5,I)):ae*Math.max(0,Math.min(1,I));X=[new mxPoint(O+ye,ee),new mxPoint(O+ae,ee),new mxPoint(O+ae-ye,ee+Ce),new mxPoint(O,ee+Ce),new mxPoint(O+ye,ee)]}var Se=x.getCenterX(),Ee=x.getCenterY(),Me=new mxPoint(Se,Ee);return y&&(D.x<O||D.x>O+ae?Me.y=D.y:Me.x=D.x),mxUtils$1.getPerimeterPoint(X,Me,D)},mxStyleRegistry.putValue("parallelogramPerimeter",mxPerimeter.ParallelogramPerimeter),mxPerimeter.TrapezoidPerimeter=function(x,M,D,y){var b=mxUtils$1.getValue(M.style,"fixedSize","0")!="0",I=b?P.prototype.fixedSize:P.prototype.size;M!=null&&(I=mxUtils$1.getValue(M.style,"size",I)),b&&(I*=M.view.scale);var O=x.x,ee=x.y,ae=x.width,Ce=x.height,H=M!=null?mxUtils$1.getValue(M.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,j=[];if(H==mxConstants$1.DIRECTION_EAST){var X=b?Math.max(0,Math.min(ae*.5,I)):ae*Math.max(0,Math.min(1,I));j=[new mxPoint(O+X,ee),new mxPoint(O+ae-X,ee),new mxPoint(O+ae,ee+Ce),new mxPoint(O,ee+Ce),new mxPoint(O+X,ee)]}else if(H==mxConstants$1.DIRECTION_WEST){var X=b?Math.max(0,Math.min(ae,I)):ae*Math.max(0,Math.min(1,I));j=[new mxPoint(O,ee),new mxPoint(O+ae,ee),new mxPoint(O+ae-X,ee+Ce),new mxPoint(O+X,ee+Ce),new mxPoint(O,ee)]}else if(H==mxConstants$1.DIRECTION_NORTH){var he=b?Math.max(0,Math.min(Ce,I)):Ce*Math.max(0,Math.min(1,I));j=[new mxPoint(O,ee+he),new mxPoint(O+ae,ee),new mxPoint(O+ae,ee+Ce),new mxPoint(O,ee+Ce-he),new mxPoint(O,ee+he)]}else{var he=b?Math.max(0,Math.min(Ce,I)):Ce*Math.max(0,Math.min(1,I));j=[new mxPoint(O,ee),new mxPoint(O+ae,ee+he),new mxPoint(O+ae,ee+Ce-he),new mxPoint(O,ee+Ce),new mxPoint(O,ee)]}var ye=x.getCenterX(),Se=x.getCenterY(),Ee=new mxPoint(ye,Se);return y&&(D.x<O||D.x>O+ae?Ee.y=D.y:Ee.x=D.x),mxUtils$1.getPerimeterPoint(j,Ee,D)},mxStyleRegistry.putValue("trapezoidPerimeter",mxPerimeter.TrapezoidPerimeter),mxPerimeter.StepPerimeter=function(x,M,D,y){var b=mxUtils$1.getValue(M.style,"fixedSize","0")!="0",I=b?B.prototype.fixedSize:B.prototype.size;M!=null&&(I=mxUtils$1.getValue(M.style,"size",I)),b&&(I*=M.view.scale);var O=x.x,ee=x.y,ae=x.width,Ce=x.height,H=x.getCenterX(),j=x.getCenterY(),X=M!=null?mxUtils$1.getValue(M.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,he;if(X==mxConstants$1.DIRECTION_EAST){var ye=b?Math.max(0,Math.min(ae,I)):ae*Math.max(0,Math.min(1,I));he=[new mxPoint(O,ee),new mxPoint(O+ae-ye,ee),new mxPoint(O+ae,j),new mxPoint(O+ae-ye,ee+Ce),new mxPoint(O,ee+Ce),new mxPoint(O+ye,j),new mxPoint(O,ee)]}else if(X==mxConstants$1.DIRECTION_WEST){var ye=b?Math.max(0,Math.min(ae,I)):ae*Math.max(0,Math.min(1,I));he=[new mxPoint(O+ye,ee),new mxPoint(O+ae,ee),new mxPoint(O+ae-ye,j),new mxPoint(O+ae,ee+Ce),new mxPoint(O+ye,ee+Ce),new mxPoint(O,j),new mxPoint(O+ye,ee)]}else if(X==mxConstants$1.DIRECTION_NORTH){var Se=b?Math.max(0,Math.min(Ce,I)):Ce*Math.max(0,Math.min(1,I));he=[new mxPoint(O,ee+Se),new mxPoint(H,ee),new mxPoint(O+ae,ee+Se),new mxPoint(O+ae,ee+Ce),new mxPoint(H,ee+Ce-Se),new mxPoint(O,ee+Ce),new mxPoint(O,ee+Se)]}else{var Se=b?Math.max(0,Math.min(Ce,I)):Ce*Math.max(0,Math.min(1,I));he=[new mxPoint(O,ee),new mxPoint(H,ee+Se),new mxPoint(O+ae,ee),new mxPoint(O+ae,ee+Ce-Se),new mxPoint(H,ee+Ce),new mxPoint(O,ee+Ce-Se),new mxPoint(O,ee)]}var Ee=new mxPoint(H,j);return y&&(D.x<O||D.x>O+ae?Ee.y=D.y:Ee.x=D.x),mxUtils$1.getPerimeterPoint(he,Ee,D)},mxStyleRegistry.putValue("stepPerimeter",mxPerimeter.StepPerimeter),mxPerimeter.HexagonPerimeter2=function(x,M,D,y){var b=mxUtils$1.getValue(M.style,"fixedSize","0")!="0",I=b?re.prototype.fixedSize:re.prototype.size;M!=null&&(I=mxUtils$1.getValue(M.style,"size",I)),b&&(I*=M.view.scale);var O=x.x,ee=x.y,ae=x.width,Ce=x.height,H=x.getCenterX(),j=x.getCenterY(),X=M!=null?mxUtils$1.getValue(M.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,he=X==mxConstants$1.DIRECTION_NORTH||X==mxConstants$1.DIRECTION_SOUTH,ye;if(he){var Se=b?Math.max(0,Math.min(Ce,I)):Ce*Math.max(0,Math.min(1,I));ye=[new mxPoint(H,ee),new mxPoint(O+ae,ee+Se),new mxPoint(O+ae,ee+Ce-Se),new mxPoint(H,ee+Ce),new mxPoint(O,ee+Ce-Se),new mxPoint(O,ee+Se),new mxPoint(H,ee)]}else{var Ee=b?Math.max(0,Math.min(ae,I)):ae*Math.max(0,Math.min(1,I));ye=[new mxPoint(O+Ee,ee),new mxPoint(O+ae-Ee,ee),new mxPoint(O+ae,j),new mxPoint(O+ae-Ee,ee+Ce),new mxPoint(O+Ee,ee+Ce),new mxPoint(O,j),new mxPoint(O+Ee,ee)]}var Me=new mxPoint(H,j);return y&&(D.x<O||D.x>O+ae?Me.y=D.y:Me.x=D.x),mxUtils$1.getPerimeterPoint(ye,Me,D)},mxStyleRegistry.putValue("hexagonPerimeter2",mxPerimeter.HexagonPerimeter2);class Ve extends mxShape{constructor(){super()}}Ve.prototype.size=10,Ve.prototype.paintBackground=function(x,M,D,y,b){var I=parseFloat(mxUtils$1.getValue(this.style,"size",this.size));x.translate(M,D),x.ellipse((y-I)/2,0,I,I),x.fillAndStroke(),x.begin(),x.moveTo(y/2,I),x.lineTo(y/2,b),x.end(),x.stroke()},mxCellRenderer.registerShape("lollipop",Ve);class De extends mxShape{constructor(){super()}}De.prototype.size=10,De.prototype.inset=2,De.prototype.paintBackground=function(x,M,D,y,b){var I=parseFloat(mxUtils$1.getValue(this.style,"size",this.size)),O=parseFloat(mxUtils$1.getValue(this.style,"inset",this.inset))+this.strokewidth;x.translate(M,D),x.begin(),x.moveTo(y/2,I+O),x.lineTo(y/2,b),x.end(),x.stroke(),x.begin(),x.moveTo((y-I)/2-O,I/2),x.quadTo((y-I)/2-O,I+O,y/2,I+O),x.quadTo((y+I)/2+O,I+O,(y+I)/2+O,I/2),x.end(),x.stroke()},mxCellRenderer.registerShape("requires",De);class He extends mxShape{constructor(){super()}}He.prototype.paintBackground=function(x,M,D,y,b){x.translate(M,D),x.begin(),x.moveTo(0,0),x.quadTo(y,0,y,b/2),x.quadTo(y,b,0,b),x.end(),x.stroke()},mxCellRenderer.registerShape("requiredInterface",He);class ue extends mxShape{constructor(){super()}}ue.prototype.inset=2,ue.prototype.paintBackground=function(x,M,D,y,b){var I=parseFloat(mxUtils$1.getValue(this.style,"inset",this.inset))+this.strokewidth;x.translate(M,D),x.ellipse(0,I,y-2*I,b-2*I),x.fillAndStroke(),x.begin(),x.moveTo(y/2,0),x.quadTo(y,0,y,b/2),x.quadTo(y,b,y/2,b),x.end(),x.stroke()},mxCellRenderer.registerShape("providedRequiredInterface",ue);class be extends mxCylinder{constructor(){super()}}be.prototype.jettyWidth=20,be.prototype.jettyHeight=10,be.prototype.redrawPath=function(x,M,D,y,b,I){var O=parseFloat(mxUtils$1.getValue(this.style,"jettyWidth",this.jettyWidth)),ee=parseFloat(mxUtils$1.getValue(this.style,"jettyHeight",this.jettyHeight)),ae=O/2,Ce=ae+O/2,H=Math.min(ee,b-ee),j=Math.min(H+2*ee,b-ee);I?(x.moveTo(ae,H),x.lineTo(Ce,H),x.lineTo(Ce,H+ee),x.lineTo(ae,H+ee),x.moveTo(ae,j),x.lineTo(Ce,j),x.lineTo(Ce,j+ee),x.lineTo(ae,j+ee),x.end()):(x.moveTo(ae,0),x.lineTo(y,0),x.lineTo(y,b),x.lineTo(ae,b),x.lineTo(ae,j+ee),x.lineTo(0,j+ee),x.lineTo(0,j),x.lineTo(ae,j),x.lineTo(ae,H+ee),x.lineTo(0,H+ee),x.lineTo(0,H),x.lineTo(ae,H),x.close(),x.end())},mxCellRenderer.registerShape("module",be);class Fe extends mxCylinder{constructor(){super()}}Fe.prototype.jettyWidth=32,Fe.prototype.jettyHeight=12,Fe.prototype.redrawPath=function(x,M,D,y,b,I){var O=parseFloat(mxUtils$1.getValue(this.style,"jettyWidth",this.jettyWidth)),ee=parseFloat(mxUtils$1.getValue(this.style,"jettyHeight",this.jettyHeight)),ae=O/2,Ce=ae+O/2,H=.3*b-ee/2,j=.7*b-ee/2;I?(x.moveTo(ae,H),x.lineTo(Ce,H),x.lineTo(Ce,H+ee),x.lineTo(ae,H+ee),x.moveTo(ae,j),x.lineTo(Ce,j),x.lineTo(Ce,j+ee),x.lineTo(ae,j+ee),x.end()):(x.moveTo(ae,0),x.lineTo(y,0),x.lineTo(y,b),x.lineTo(ae,b),x.lineTo(ae,j+ee),x.lineTo(0,j+ee),x.lineTo(0,j),x.lineTo(ae,j),x.lineTo(ae,H+ee),x.lineTo(0,H+ee),x.lineTo(0,H),x.lineTo(ae,H),x.close(),x.end())},mxCellRenderer.registerShape("component",Fe);class Pe extends mxRectangleShape{constructor(){super()}}Pe.prototype.paintForeground=function(x,M,D,y,b){var I=y/2,O=b/2,ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;x.begin(),this.addPoints(x,[new mxPoint(M+I,D),new mxPoint(M+y,D+O),new mxPoint(M+I,D+b),new mxPoint(M,D+O)],this.isRounded,ee,!0),x.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("associativeEntity",Pe);class je extends mxDoubleEllipse{constructor(){super()}}je.prototype.outerStroke=!0,je.prototype.paintVertexShape=function(x,M,D,y,b){var I=Math.min(4,Math.min(y/5,b/5));y>0&&b>0&&(x.ellipse(M+I,D+I,y-2*I,b-2*I),x.fillAndStroke()),x.setShadow(!1),this.outerStroke&&(x.ellipse(M,D,y,b),x.stroke())},mxCellRenderer.registerShape("endState",je);class Qe extends je{constructor(){super()}}Qe.prototype.outerStroke=!1,mxCellRenderer.registerShape("startState",Qe);class et extends mxArrowConnector{constructor(){super()}}et.prototype.defaultWidth=4,et.prototype.isOpenEnded=function(){return!0},et.prototype.getEdgeWidth=function(){return mxUtils$1.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},et.prototype.isArrowRounded=function(){return this.isRounded},mxCellRenderer.registerShape("link",et);class Ze extends mxArrowConnector{constructor(){super(),this.spacing=0}}Ze.prototype.defaultWidth=10,Ze.prototype.defaultArrowWidth=20,Ze.prototype.getStartArrowWidth=function(){return this.getEdgeWidth()+mxUtils$1.getNumber(this.style,"startWidth",this.defaultArrowWidth)},Ze.prototype.getEndArrowWidth=function(){return this.getEdgeWidth()+mxUtils$1.getNumber(this.style,"endWidth",this.defaultArrowWidth)},Ze.prototype.getEdgeWidth=function(){return mxUtils$1.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},mxCellRenderer.registerShape("flexArrow",Ze);class Ke extends mxActor{constructor(){super()}}Ke.prototype.size=30,Ke.prototype.isRoundable=function(){return!0},Ke.prototype.redrawPath=function(x,M,D,y,b){var I=Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,b),new mxPoint(0,I),new mxPoint(y,0),new mxPoint(y,b)],this.isRounded,O,!0),x.end()},mxCellRenderer.registerShape("manualInput",Ke);class E extends mxRectangleShape{constructor(){super()}}E.prototype.dx=20,E.prototype.dy=20,E.prototype.isHtmlAllowed=function(){return!1},E.prototype.paintForeground=function(x,M,D,y,b){mxRectangleShape.prototype.paintForeground.apply(this,arguments);var I=0;if(this.isRounded){var O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;I=Math.max(I,Math.min(y*O,b*O))}var ee=Math.max(I,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),ae=Math.max(I,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));x.begin(),x.moveTo(M,D+ae),x.lineTo(M+y,D+ae),x.end(),x.stroke(),x.begin(),x.moveTo(M+ee,D),x.lineTo(M+ee,D+b),x.end(),x.stroke()},mxCellRenderer.registerShape("internalStorage",E);class $ extends mxActor{constructor(){super()}}$.prototype.dx=20,$.prototype.dy=20,$.prototype.redrawPath=function(x,M,D,y,b){var I=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),O=Math.max(0,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));Math.min(y/2,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));var ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,O),new mxPoint(I,O),new mxPoint(I,b),new mxPoint(0,b)],this.isRounded,ee,!0),x.end()},mxCellRenderer.registerShape("corner",$);class R extends mxActor{constructor(){super()}}R.prototype.redrawPath=function(x,M,D,y,b){x.moveTo(0,0),x.lineTo(0,b),x.end(),x.moveTo(y,0),x.lineTo(y,b),x.end(),x.moveTo(0,b/2),x.lineTo(y,b/2),x.end()},mxCellRenderer.registerShape("crossbar",R);class U extends mxActor{constructor(){super()}}U.prototype.dx=20,U.prototype.dy=20,U.prototype.redrawPath=function(x,M,D,y,b){var I=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),O=Math.max(0,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));Math.min(y/2,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));var ee=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,O),new mxPoint((y+I)/2,O),new mxPoint((y+I)/2,b),new mxPoint((y-I)/2,b),new mxPoint((y-I)/2,O),new mxPoint(0,O)],this.isRounded,ee,!0),x.end()},mxCellRenderer.registerShape("tee",U);class F extends mxActor{constructor(){super()}}F.prototype.arrowWidth=.3,F.prototype.arrowSize=.2,F.prototype.redrawPath=function(x,M,D,y,b){var I=b*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",this.arrowWidth)))),O=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",this.arrowSize)))),ee=(b-I)/2,ae=ee+I,Ce=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,ee),new mxPoint(y-O,ee),new mxPoint(y-O,0),new mxPoint(y,b/2),new mxPoint(y-O,b),new mxPoint(y-O,ae),new mxPoint(0,ae)],this.isRounded,Ce,!0),x.end()},mxCellRenderer.registerShape("singleArrow",F);class z extends mxActor{constructor(){super()}}z.prototype.redrawPath=function(x,M,D,y,b){var I=b*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",F.prototype.arrowWidth)))),O=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",F.prototype.arrowSize)))),ee=(b-I)/2,ae=ee+I,Ce=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,b/2),new mxPoint(O,0),new mxPoint(O,ee),new mxPoint(y-O,ee),new mxPoint(y-O,0),new mxPoint(y,b/2),new mxPoint(y-O,b),new mxPoint(y-O,ae),new mxPoint(O,ae),new mxPoint(O,b)],this.isRounded,Ce,!0),x.end()},mxCellRenderer.registerShape("doubleArrow",z);class K extends mxActor{constructor(){super()}}K.prototype.size=.1,K.prototype.fixedSize=20,K.prototype.redrawPath=function(x,M,D,y,b){var I=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=I?Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));x.moveTo(O,0),x.lineTo(y,0),x.quadTo(y-O*2,b/2,y,b),x.lineTo(O,b),x.quadTo(O-O*2,b/2,O,0),x.close(),x.end()},mxCellRenderer.registerShape("dataStorage",K);class ge extends mxActor{constructor(){super()}}ge.prototype.redrawPath=function(x,M,D,y,b){x.moveTo(0,0),x.quadTo(y,0,y,b/2),x.quadTo(y,b,0,b),x.close(),x.end()},mxCellRenderer.registerShape("or",ge);class de extends mxActor{constructor(){super()}}de.prototype.redrawPath=function(x,M,D,y,b){x.moveTo(0,0),x.quadTo(y,0,y,b/2),x.quadTo(y,b,0,b),x.quadTo(y/2,b/2,0,0),x.close(),x.end()},mxCellRenderer.registerShape("xor",de);class xe extends mxActor{constructor(){super()}}xe.prototype.size=20,xe.prototype.isRoundable=function(){return!0},xe.prototype.redrawPath=function(x,M,D,y,b){var I=Math.min(y/2,Math.min(b,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(I,0),new mxPoint(y-I,0),new mxPoint(y,I*.8),new mxPoint(y,b),new mxPoint(0,b),new mxPoint(0,I*.8)],this.isRounded,O,!0),x.end()},mxCellRenderer.registerShape("loopLimit",xe);class Re extends mxActor{constructor(){super()}}Re.prototype.size=3/8,Re.prototype.isRoundable=function(){return!0},Re.prototype.redrawPath=function(x,M,D,y,b){var I=b*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(x,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,b-I),new mxPoint(y/2,b),new mxPoint(0,b-I)],this.isRounded,O,!0),x.end()},mxCellRenderer.registerShape("offPageConnector",Re);class we extends mxEllipse{constructor(){super()}}we.prototype.paintVertexShape=function(x,M,D,y,b){mxEllipse.prototype.paintVertexShape.apply(this,arguments),x.begin(),x.moveTo(M+y/2,D+b),x.lineTo(M+y,D+b),x.end(),x.stroke()},mxCellRenderer.registerShape("tapeData",we);class _e extends mxEllipse{constructor(){super()}}_e.prototype.paintVertexShape=function(x,M,D,y,b){mxEllipse.prototype.paintVertexShape.apply(this,arguments),x.setShadow(!1),x.begin(),x.moveTo(M,D+b/2),x.lineTo(M+y,D+b/2),x.end(),x.stroke(),x.begin(),x.moveTo(M+y/2,D),x.lineTo(M+y/2,D+b),x.end(),x.stroke()},mxCellRenderer.registerShape("orEllipse",_e);class Oe extends mxEllipse{constructor(){super()}}Oe.prototype.paintVertexShape=function(x,M,D,y,b){mxEllipse.prototype.paintVertexShape.apply(this,arguments);var I=.145;x.setShadow(!1),x.begin(),x.moveTo(M+y*I,D+b*I),x.lineTo(M+y*(1-I),D+b*(1-I)),x.end(),x.stroke(),x.begin(),x.moveTo(M+y*(1-I),D+b*I),x.lineTo(M+y*I,D+b*(1-I)),x.end(),x.stroke()},mxCellRenderer.registerShape("sumEllipse",Oe);class Ye extends mxRhombus{constructor(){super()}}Ye.prototype.paintVertexShape=function(x,M,D,y,b){mxRhombus.prototype.paintVertexShape.apply(this,arguments),x.setShadow(!1),x.begin(),x.moveTo(M,D+b/2),x.lineTo(M+y,D+b/2),x.end(),x.stroke()},mxCellRenderer.registerShape("sortShape",Ye);class tt extends mxEllipse{constructor(){super()}}tt.prototype.paintVertexShape=function(x,M,D,y,b){x.begin(),x.moveTo(M,D),x.lineTo(M+y,D),x.lineTo(M+y/2,D+b/2),x.close(),x.fillAndStroke(),x.begin(),x.moveTo(M,D+b),x.lineTo(M+y,D+b),x.lineTo(M+y/2,D+b/2),x.close(),x.fillAndStroke()},mxCellRenderer.registerShape("collate",tt);class nt extends mxEllipse{constructor(){super()}}nt.prototype.paintVertexShape=function(x,M,D,y,b){var I=10,O=D+b-I/2;x.begin(),x.moveTo(M,D),x.lineTo(M,D+b),x.moveTo(M,O),x.lineTo(M+I,O-I/2),x.moveTo(M,O),x.lineTo(M+I,O+I/2),x.moveTo(M,O),x.lineTo(M+y,O),x.moveTo(M+y,D),x.lineTo(M+y,D+b),x.moveTo(M+y,O),x.lineTo(M+y-I,O-I/2),x.moveTo(M+y,O),x.lineTo(M+y-I,O+I/2),x.end(),x.stroke()},mxCellRenderer.registerShape("dimension",nt);class dt extends mxEllipse{constructor(){super()}}dt.prototype.paintVertexShape=function(x,M,D,y,b){if(this.outline||x.setStrokeColor(null),this.style!=null){var I=x.pointerEvents,O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1";!O&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(x.pointerEvents=!1),x.rect(M,D,y,b),x.fill(),x.pointerEvents=I,x.setStrokeColor(this.stroke),x.begin(),x.moveTo(M,D),this.outline||mxUtils$1.getValue(this.style,"top","1")=="1"?x.lineTo(M+y,D):x.moveTo(M+y,D),this.outline||mxUtils$1.getValue(this.style,"right","1")=="1"?x.lineTo(M+y,D+b):x.moveTo(M+y,D+b),this.outline||mxUtils$1.getValue(this.style,"bottom","1")=="1"?x.lineTo(M,D+b):x.moveTo(M,D+b),(this.outline||mxUtils$1.getValue(this.style,"left","1")=="1")&&x.lineTo(M,D),x.end(),x.stroke()}},mxCellRenderer.registerShape("partialRectangle",dt);class qe extends mxEllipse{constructor(){super()}}qe.prototype.paintVertexShape=function(x,M,D,y,b){mxEllipse.prototype.paintVertexShape.apply(this,arguments),x.setShadow(!1),x.begin(),mxUtils$1.getValue(this.style,"line")=="vertical"?(x.moveTo(M+y/2,D),x.lineTo(M+y/2,D+b)):(x.moveTo(M,D+b/2),x.lineTo(M+y,D+b/2)),x.end(),x.stroke()},mxCellRenderer.registerShape("lineEllipse",qe);class lt extends mxActor{constructor(){super()}}lt.prototype.redrawPath=function(x,M,D,y,b){var I=Math.min(y,b/2);x.moveTo(0,0),x.lineTo(y-I,0),x.quadTo(y,0,y,b/2),x.quadTo(y,b,y-I,b),x.lineTo(0,b),x.close(),x.end()},mxCellRenderer.registerShape("delay",lt);class xt extends mxActor{constructor(){super()}}xt.prototype.size=.2,xt.prototype.redrawPath=function(x,M,D,y,b){var I=Math.min(b,y),O=Math.max(0,Math.min(I,I*parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),ee=(b-O)/2,ae=ee+O,Ce=(y-O)/2,H=Ce+O;x.moveTo(0,ee),x.lineTo(Ce,ee),x.lineTo(Ce,0),x.lineTo(H,0),x.lineTo(H,ee),x.lineTo(y,ee),x.lineTo(y,ae),x.lineTo(H,ae),x.lineTo(H,b),x.lineTo(Ce,b),x.lineTo(Ce,ae),x.lineTo(0,ae),x.close(),x.end()},mxCellRenderer.registerShape("cross",xt);class mt extends mxActor{constructor(){super()}}mt.prototype.size=.25,mt.prototype.redrawPath=function(x,M,D,y,b){var I=Math.min(y,b/2),O=Math.min(y-I,Math.max(0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))*y);x.moveTo(0,b/2),x.lineTo(O,0),x.lineTo(y-I,0),x.quadTo(y,0,y,b/2),x.quadTo(y,b,y-I,b),x.lineTo(O,b),x.close(),x.end()},mxCellRenderer.registerShape("display",mt);class Je extends mxConnector{constructor(){super()}}Je.prototype.origPaintEdgeShape=Je.prototype.paintEdgeShape,Je.prototype.paintEdgeShape=function(x,M,D){for(var y=[],b=0;b<M.length;b++)y.push(mxUtils$1.clone(M[b]));var I=x.state.dashed,O=x.state.fixDash;if(Je.prototype.origPaintEdgeShape.apply(this,[x,y,D]),x.state.strokeWidth>=3){var ee=mxUtils$1.getValue(this.style,"fillColor",null);ee!=null&&(x.setStrokeColor(ee),x.setStrokeWidth(x.state.strokeWidth-2),x.setDashed(I,O),Je.prototype.origPaintEdgeShape.apply(this,[x,M,D]))}},mxCellRenderer.registerShape("filledEdge",Je),typeof StyleFormatPanel<"u"&&function(){var x=StyleFormatPanel.prototype.getCustomColors;StyleFormatPanel.prototype.getCustomColors=function(){var M=this.format.getSelectionState(),D=x.apply(this,arguments);return M.style.shape=="umlFrame"&&D.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),D}}(),mxMarker.addMarker("dash",function(x,M,D,y,b,I,O,ee,ae,Ce){var H=b*(O+ae+1),j=I*(O+ae+1);return function(){x.begin(),x.moveTo(y.x-H/2-j/2,y.y-j/2+H/2),x.lineTo(y.x+j/2-3*H/2,y.y-3*j/2-H/2),x.stroke()}}),mxMarker.addMarker("box",function(x,M,D,y,b,I,O,ee,ae,Ce){var H=b*(O+ae+1),j=I*(O+ae+1),X=y.x+H/2,he=y.y+j/2;return y.x-=H,y.y-=j,function(){x.begin(),x.moveTo(X-H/2-j/2,he-j/2+H/2),x.lineTo(X-H/2+j/2,he-j/2-H/2),x.lineTo(X+j/2-3*H/2,he-3*j/2-H/2),x.lineTo(X-j/2-3*H/2,he-3*j/2+H/2),x.close(),Ce?x.fillAndStroke():x.stroke()}}),mxMarker.addMarker("cross",function(x,M,D,y,b,I,O,ee,ae,Ce){var H=b*(O+ae+1),j=I*(O+ae+1);return function(){x.begin(),x.moveTo(y.x-H/2-j/2,y.y-j/2+H/2),x.lineTo(y.x+j/2-3*H/2,y.y-3*j/2-H/2),x.moveTo(y.x-H/2+j/2,y.y-j/2-H/2),x.lineTo(y.x-j/2-3*H/2,y.y-3*j/2+H/2),x.stroke()}});function St(x,M,D,y,b,I,H,ee,ae,Ce){var H=H+ae,j=y.clone();return y.x-=b*(2*H+ae),y.y-=I*(2*H+ae),b=b*(H+ae),I=I*(H+ae),function(){x.ellipse(j.x-b-H,j.y-I-H,2*H,2*H),Ce?x.fillAndStroke():x.stroke()}}mxMarker.addMarker("circle",St),mxMarker.addMarker("circlePlus",function(x,M,D,y,b,I,O,ee,ae,Ce){var H=y.clone(),j=St.apply(this,arguments),X=b*(O+2*ae),he=I*(O+2*ae);return function(){j.apply(this,arguments),x.begin(),x.moveTo(H.x-b*ae,H.y-I*ae),x.lineTo(H.x-2*X+b*ae,H.y-2*he+I*ae),x.moveTo(H.x-X-he+I*ae,H.y-he+X-b*ae),x.lineTo(H.x+he-X-I*ae,H.y-he-X+b*ae),x.stroke()}}),mxMarker.addMarker("halfCircle",function(x,M,D,y,b,I,O,ee,ae,Ce){var H=b*(O+ae+1),j=I*(O+ae+1),X=y.clone();return y.x-=H,y.y-=j,function(){x.begin(),x.moveTo(X.x-j,X.y+H),x.quadTo(y.x-j,y.y+H,y.x,y.y),x.quadTo(y.x+j,y.y-H,X.x+j,X.y-H),x.stroke()}}),mxMarker.addMarker("async",function(x,M,D,y,b,I,O,ee,ae,Ce){var H=b*ae*1.118,j=I*ae*1.118;b=b*(O+ae),I=I*(O+ae);var X=y.clone();X.x-=H,X.y-=j;var he=1;return y.x+=-b*he-H,y.y+=-I*he-j,function(){x.begin(),x.moveTo(X.x,X.y),ee?x.lineTo(X.x-b-I/2,X.y-I+b/2):x.lineTo(X.x+I/2-b,X.y-I-b/2),x.lineTo(X.x-b,X.y-I),x.close(),Ce?x.fillAndStroke():x.stroke()}});function Ut(x){return x=x??2,function(M,D,y,b,I,O,ee,ae,Ce,H){I=I*(ee+Ce),O=O*(ee+Ce);var j=b.clone();return function(){M.begin(),M.moveTo(j.x,j.y),ae?M.lineTo(j.x-I-O/x,j.y-O+I/x):M.lineTo(j.x+O/x-I,j.y-O-I/x),M.stroke()}}}if(mxMarker.addMarker("openAsync",Ut(2)),typeof mxVertexHandler<"u"){let x=function(H,j,X,he,ye,Se,Ee){var Me=new mxHandle(H,null,mxVertexHandler.prototype.secondaryHandleImage);if(Me.execute=function(Xe){for(var ut=0;ut<j.length;ut++)this.copyStyle(j[ut]);Ee&&Ee(Xe)},Me.getPosition=X,Me.setPosition=he,Me.ignoreGrid=ye??!0,Se){var Ue=Me.positionChanged;Me.positionChanged=function(){Ue.apply(this,arguments),H.view.invalidate(this.state.cell),H.view.validate()}}return Me},M=function(H,j){return x(H,[mxConstants$1.STYLE_ARCSIZE],function(X){var he=j??X.height/8;if(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1"){var ye=mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;return new mxPoint(X.x+X.width-Math.min(X.width/2,ye),X.y+he)}else{var ye=Math.max(0,parseFloat(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)))/100;return new mxPoint(X.x+X.width-Math.min(Math.max(X.width/2,X.height/2),Math.min(X.width,X.height)*ye),X.y+he)}},function(X,he,ye){if(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")this.state.style[mxConstants$1.STYLE_ARCSIZE]=Math.round(Math.max(0,Math.min(X.width,(X.x+X.width-he.x)*2)));else{var Se=Math.min(50,Math.max(0,(X.width-he.x+X.x)*100/Math.min(X.width,X.height)));this.state.style[mxConstants$1.STYLE_ARCSIZE]=Math.round(Se)}})},D=function(){return function(H){var j=[];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&j.push(M(H)),j}},y=function(H,j,X){return H=H??.5,function(he){var ye=[x(he,["size"],function(Se){var Ee=X!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,Me=Math.max(0,parseFloat(mxUtils$1.getValue(this.state.style,"size",Ee?X:j)));return new mxPoint(Se.x+Math.min(Se.width*.75*H,Me*(Ee?.75:Se.width*.75)),Se.y+Se.height/4)},function(Se,Ee){var Me=X!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,Ue=Me?Ee.x-Se.x:Math.max(0,Math.min(H,(Ee.x-Se.x)/Se.width*.75));this.state.style.size=Ue},!1,!0)];return mxUtils$1.getValue(he.style,mxConstants$1.STYLE_ROUNDED,!1)&&ye.push(M(he)),ye}},b=function(H,j,X,he,ye){return X=X??.5,function(Se){var Ee=[x(Se,["size"],function(Me){var Ue=ye!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,Xe=parseFloat(mxUtils$1.getValue(this.state.style,"size",Ue?ye:H));return new mxPoint(Me.x+Math.max(0,Math.min(Me.width*.5,Xe*(Ue?1:Me.width))),Me.getCenterY())},function(Me,Ue,Xe){var ut=ye!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,vt=ut?Ue.x-Me.x:Math.max(0,Math.min(X,(Ue.x-Me.x)/Me.width));this.state.style.size=vt},!1,he)];return j&&mxUtils$1.getValue(Se.style,mxConstants$1.STYLE_ROUNDED,!1)&&Ee.push(M(Se)),Ee}},I=function(H,j,X){return function(he){var ye=[x(he,["size"],function(Se){var Ee=Math.max(0,Math.min(Se.width,Math.min(Se.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",j)))))*H;return new mxPoint(Se.x+Ee,Se.y+Ee)},function(Se,Ee){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(Se.width,Ee.x-Se.x),Math.min(Se.height,Ee.y-Se.y)))/H)},!1)];return X&&mxUtils$1.getValue(he.style,mxConstants$1.STYLE_ROUNDED,!1)&&ye.push(M(he)),ye}},O=function(H){return function(j){return[x(j,["size"],function(X){var he=Math.max(0,Math.min(X.height*.5,parseFloat(mxUtils$1.getValue(this.state.style,"size",H))));return new mxPoint(X.x,X.y+he)},function(X,he){this.state.style.size=Math.max(0,he.y-X.y)},!0)]}},ee=function(H){return function(j){return[x(j,["arrowWidth","arrowSize"],function(X){var he=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"arrowWidth",F.prototype.arrowWidth))),ye=Math.max(0,Math.min(H,mxUtils$1.getValue(this.state.style,"arrowSize",F.prototype.arrowSize)));return new mxPoint(X.x+(1-ye)*X.width,X.y+(1-he)*X.height/2)},function(X,he){this.state.style.arrowWidth=Math.max(0,Math.min(1,Math.abs(X.y+X.height/2-he.y)/X.height*2)),this.state.style.arrowSize=Math.max(0,Math.min(H,(X.x+X.width-he.x)/X.width))})]}},ae=function(H,j,X,he,ye){return x(H,j,function(Se){var Ee=H.absolutePoints,Me=Ee.length-1,Ue=H.view.translate,Xe=H.view.scale,ut=X?Ee[0]:Ee[Me],vt=X?Ee[1]:Ee[Me-1],Pt=vt.x-ut.x,$t=vt.y-ut.y,Nt=Math.sqrt(Pt*Pt+$t*$t),Ft=he.call(this,Nt,Pt/Nt,$t/Nt,ut,vt);return new mxPoint(Ft.x/Xe-Ue.x,Ft.y/Xe-Ue.y)},function(Se,Ee,Me){var Ue=H.absolutePoints,Xe=Ue.length-1,ut=H.view.translate,vt=H.view.scale,Pt=X?Ue[0]:Ue[Xe],$t=X?Ue[1]:Ue[Xe-1],Nt=$t.x-Pt.x,Ft=$t.y-Pt.y,Kt=Math.sqrt(Nt*Nt+Ft*Ft);Ee.x=(Ee.x+ut.x)*vt,Ee.y=(Ee.y+ut.y)*vt,ye.call(this,Kt,Nt/Kt,Ft/Kt,Pt,$t,Ee,Me)})},Ce=function(H,j,X){return ae(H,["width"],j,function(he,ye,Se,Ee,Me){var Ue=H.shape.getEdgeWidth()*H.view.scale+X;return new mxPoint(Ee.x+ye*he/4+Se*Ue/2,Ee.y+Se*he/4-ye*Ue/2)},function(he,ye,Se,Ee,Me,Ue){var Xe=Math.sqrt(mxUtils$1.ptSegDistSq(Ee.x,Ee.y,Me.x,Me.y,Ue.x,Ue.y));H.style.width=Math.round(Xe*2)/H.view.scale-X})};var Dt=x,Gt=M,ii=D,ni=y,si=b,jt=I,Ht=O,_t=ee,At=ae,Mt=Ce,Rt={link:function(H){var j=10;return[Ce(H,!0,j),Ce(H,!1,j)]},flexArrow:function(H){var j=H.view.graph.gridSize/H.view.scale,X=[];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(X.push(ae(H,["width",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!0,function(he,ye,Se,Ee,Me){var Ue=(H.shape.getEdgeWidth()-H.shape.strokewidth)*H.view.scale,Xe=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(Ee.x+ye*(Xe+H.shape.strokewidth*H.view.scale)+Se*Ue/2,Ee.y+Se*(Xe+H.shape.strokewidth*H.view.scale)-ye*Ue/2)},function(he,ye,Se,Ee,Me,Ue,Xe){var ut=Math.sqrt(mxUtils$1.ptSegDistSq(Ee.x,Ee.y,Me.x,Me.y,Ue.x,Ue.y)),vt=mxUtils$1.ptLineDist(Ee.x,Ee.y,Ee.x+Se,Ee.y-ye,Ue.x,Ue.y);H.style[mxConstants$1.STYLE_STARTSIZE]=Math.round((vt-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.width=Math.round(ut*2)/H.view.scale,mxEvent.isControlDown(Xe.getEvent())&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE]),mxEvent.isAltDown(Xe.getEvent())||Math.abs(parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE])-parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE]))<j/6&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE])})),X.push(ae(H,["startWidth","endWidth",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!0,function(he,ye,Se,Ee,Me){var Ue=(H.shape.getStartArrowWidth()-H.shape.strokewidth)*H.view.scale,Xe=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(Ee.x+ye*(Xe+H.shape.strokewidth*H.view.scale)+Se*Ue/2,Ee.y+Se*(Xe+H.shape.strokewidth*H.view.scale)-ye*Ue/2)},function(he,ye,Se,Ee,Me,Ue,Xe){var ut=Math.sqrt(mxUtils$1.ptSegDistSq(Ee.x,Ee.y,Me.x,Me.y,Ue.x,Ue.y)),vt=mxUtils$1.ptLineDist(Ee.x,Ee.y,Ee.x+Se,Ee.y-ye,Ue.x,Ue.y);H.style[mxConstants$1.STYLE_STARTSIZE]=Math.round((vt-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.startWidth=Math.max(0,Math.round(ut*2)-H.shape.getEdgeWidth())/H.view.scale,mxEvent.isControlDown(Xe.getEvent())&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE],H.style.endWidth=H.style.startWidth),mxEvent.isAltDown(Xe.getEvent())||(Math.abs(parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE])-parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE]))<j/6&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE]),Math.abs(parseFloat(H.style.startWidth)-parseFloat(H.style.endWidth))<j&&(H.style.startWidth=H.style.endWidth))}))),mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(X.push(ae(H,["width",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!1,function(he,ye,Se,Ee,Me){var Ue=(H.shape.getEdgeWidth()-H.shape.strokewidth)*H.view.scale,Xe=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(Ee.x+ye*(Xe+H.shape.strokewidth*H.view.scale)-Se*Ue/2,Ee.y+Se*(Xe+H.shape.strokewidth*H.view.scale)+ye*Ue/2)},function(he,ye,Se,Ee,Me,Ue,Xe){var ut=Math.sqrt(mxUtils$1.ptSegDistSq(Ee.x,Ee.y,Me.x,Me.y,Ue.x,Ue.y)),vt=mxUtils$1.ptLineDist(Ee.x,Ee.y,Ee.x+Se,Ee.y-ye,Ue.x,Ue.y);H.style[mxConstants$1.STYLE_ENDSIZE]=Math.round((vt-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.width=Math.round(ut*2)/H.view.scale,mxEvent.isControlDown(Xe.getEvent())&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE]),mxEvent.isAltDown(Xe.getEvent())||Math.abs(parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE])-parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE]))<j/6&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE])})),X.push(ae(H,["startWidth","endWidth",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!1,function(he,ye,Se,Ee,Me){var Ue=(H.shape.getEndArrowWidth()-H.shape.strokewidth)*H.view.scale,Xe=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(Ee.x+ye*(Xe+H.shape.strokewidth*H.view.scale)-Se*Ue/2,Ee.y+Se*(Xe+H.shape.strokewidth*H.view.scale)+ye*Ue/2)},function(he,ye,Se,Ee,Me,Ue,Xe){var ut=Math.sqrt(mxUtils$1.ptSegDistSq(Ee.x,Ee.y,Me.x,Me.y,Ue.x,Ue.y)),vt=mxUtils$1.ptLineDist(Ee.x,Ee.y,Ee.x+Se,Ee.y-ye,Ue.x,Ue.y);H.style[mxConstants$1.STYLE_ENDSIZE]=Math.round((vt-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.endWidth=Math.max(0,Math.round(ut*2)-H.shape.getEdgeWidth())/H.view.scale,mxEvent.isControlDown(Xe.getEvent())&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE],H.style.startWidth=H.style.endWidth),mxEvent.isAltDown(Xe.getEvent())||(Math.abs(parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE])-parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE]))<j/6&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE]),Math.abs(parseFloat(H.style.endWidth)-parseFloat(H.style.startWidth))<j&&(H.style.endWidth=H.style.startWidth))}))),X},swimlane:function(H){var j=[];if(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED)){var X=parseFloat(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));j.push(M(H,X/2))}return j.push(x(H,[mxConstants$1.STYLE_STARTSIZE],function(he){var ye=parseFloat(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_HORIZONTAL,1)==1?new mxPoint(he.getCenterX(),he.y+Math.max(0,Math.min(he.height,ye))):new mxPoint(he.x+Math.max(0,Math.min(he.width,ye)),he.getCenterY())},function(he,ye){H.style[mxConstants$1.STYLE_STARTSIZE]=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,1)==1?Math.round(Math.max(0,Math.min(he.height,ye.y-he.y))):Math.round(Math.max(0,Math.min(he.width,ye.x-he.x)))},!1,null,function(he){if(mxEvent.isControlDown(he.getEvent())){var ye=H.view.graph;if(ye.isTableRow(H.cell)||ye.isTableCell(H.cell)){for(var Se=ye.getSwimlaneDirection(H.style),Ee=ye.model.getParent(H.cell),Me=ye.model.getChildCells(Ee,!0),Ue=[],Xe=0;Xe<Me.length;Xe++)Me[Xe]!=H.cell&&ye.isSwimlane(Me[Xe])&&ye.getSwimlaneDirection(ye.getCurrentCellStyle(Me[Xe]))==Se&&Ue.push(Me[Xe]);ye.setCellStyles(mxConstants$1.STYLE_STARTSIZE,H.style[mxConstants$1.STYLE_STARTSIZE],Ue)}}})),j},label:D(),ext:D(),rectangle:D(),triangle:D(),rhombus:D(),roundedRectangle:function(H){return[]},umlLifeline:function(H){return[x(H,["size"],function(j){var X=Math.max(0,Math.min(j.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",fe.prototype.size))));return new mxPoint(j.getCenterX(),j.y+X)},function(j,X){this.state.style.size=Math.round(Math.max(0,Math.min(j.height,X.y-j.y)))},!1)]},umlFrame:function(H){var j=[x(H,["width","height"],function(X){var he=Math.max(Te.prototype.corner,Math.min(X.width,mxUtils$1.getValue(this.state.style,"width",Te.prototype.width))),ye=Math.max(Te.prototype.corner*1.5,Math.min(X.height,mxUtils$1.getValue(this.state.style,"height",Te.prototype.height)));return new mxPoint(X.x+he,X.y+ye)},function(X,he){this.state.style.width=Math.round(Math.max(Te.prototype.corner,Math.min(X.width,he.x-X.x))),this.state.style.height=Math.round(Math.max(Te.prototype.corner*1.5,Math.min(X.height,he.y-X.y)))},!1)];return j},process:function(H){var j=[x(H,["size"],function(X){var he=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",ye=parseFloat(mxUtils$1.getValue(this.state.style,"size",oe.prototype.size));return he?new mxPoint(X.x+ye,X.y+X.height/4):new mxPoint(X.x+X.width*ye,X.y+X.height/4)},function(X,he){var ye=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",Se=ye?Math.max(0,Math.min(X.width*.5,he.x-X.x)):Math.max(0,Math.min(.5,(he.x-X.x)/X.width));this.state.style.size=Se},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&j.push(M(H)),j},cross:function(H){return[x(H,["size"],function(j){var X=Math.min(j.width,j.height),he=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"size",xt.prototype.size)))*X/2;return new mxPoint(j.getCenterX()-he,j.getCenterY()-he)},function(j,X){var he=Math.min(j.width,j.height);this.state.style.size=Math.max(0,Math.min(1,Math.min(Math.max(0,j.getCenterY()-X.y)/he*2,Math.max(0,j.getCenterX()-X.x)/he*2)))})]},note:function(H){return[x(H,["size"],function(j){var X=Math.max(0,Math.min(j.width,Math.min(j.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",a.prototype.size)))));return new mxPoint(j.x+j.width-X,j.y+X)},function(j,X){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(j.width,j.x+j.width-X.x),Math.min(j.height,X.y-j.y))))})]},note2:function(H){return[x(H,["size"],function(j){var X=Math.max(0,Math.min(j.width,Math.min(j.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",o.prototype.size)))));return new mxPoint(j.x+j.width-X,j.y+X)},function(j,X){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(j.width,j.x+j.width-X.x),Math.min(j.height,X.y-j.y))))})]},manualInput:function(H){var j=[x(H,["size"],function(X){var he=Math.max(0,Math.min(X.height,mxUtils$1.getValue(this.state.style,"size",Ke.prototype.size)));return new mxPoint(X.x+X.width/4,X.y+he*3/4)},function(X,he){this.state.style.size=Math.round(Math.max(0,Math.min(X.height,(he.y-X.y)*4/3)))},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&j.push(M(H)),j},dataStorage:function(H){return[x(H,["size"],function(j){var X=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",he=parseFloat(mxUtils$1.getValue(this.state.style,"size",X?K.prototype.fixedSize:K.prototype.size));return new mxPoint(j.x+j.width-he*(X?1:j.width),j.getCenterY())},function(j,X){var he=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",ye=he?Math.max(0,Math.min(j.width,j.x+j.width-X.x)):Math.max(0,Math.min(1,(j.x+j.width-X.x)/j.width));this.state.style.size=ye},!1)]},callout:function(H){var j=[x(H,["size","position"],function(X){var he=Math.max(0,Math.min(X.height,mxUtils$1.getValue(this.state.style,"size",Z.prototype.size))),ye=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",Z.prototype.position)));return Math.max(0,Math.min(X.width,mxUtils$1.getValue(this.state.style,"base",Z.prototype.base))),new mxPoint(X.x+ye*X.width,X.y+X.height-he)},function(X,he){Math.max(0,Math.min(X.width,mxUtils$1.getValue(this.state.style,"base",Z.prototype.base))),this.state.style.size=Math.round(Math.max(0,Math.min(X.height,X.y+X.height-he.y))),this.state.style.position=Math.round(Math.max(0,Math.min(1,(he.x-X.x)/X.width))*100)/100},!1),x(H,["position2"],function(X){var he=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position2",Z.prototype.position2)));return new mxPoint(X.x+he*X.width,X.y+X.height)},function(X,he){this.state.style.position2=Math.round(Math.max(0,Math.min(1,(he.x-X.x)/X.width))*100)/100},!1),x(H,["base"],function(X){var he=Math.max(0,Math.min(X.height,mxUtils$1.getValue(this.state.style,"size",Z.prototype.size))),ye=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",Z.prototype.position))),Se=Math.max(0,Math.min(X.width,mxUtils$1.getValue(this.state.style,"base",Z.prototype.base)));return new mxPoint(X.x+Math.min(X.width,ye*X.width+Se),X.y+X.height-he)},function(X,he){var ye=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",Z.prototype.position)));this.state.style.base=Math.round(Math.max(0,Math.min(X.width,he.x-X.x-ye*X.width)))},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&j.push(M(H)),j},internalStorage:function(H){var j=[x(H,["dx","dy"],function(X){var he=Math.max(0,Math.min(X.width,mxUtils$1.getValue(this.state.style,"dx",E.prototype.dx))),ye=Math.max(0,Math.min(X.height,mxUtils$1.getValue(this.state.style,"dy",E.prototype.dy)));return new mxPoint(X.x+he,X.y+ye)},function(X,he){this.state.style.dx=Math.round(Math.max(0,Math.min(X.width,he.x-X.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(X.height,he.y-X.y)))},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&j.push(M(H)),j},module:function(H){var j=[x(H,["jettyWidth","jettyHeight"],function(X){var he=Math.max(0,Math.min(X.width,mxUtils$1.getValue(this.state.style,"jettyWidth",be.prototype.jettyWidth))),ye=Math.max(0,Math.min(X.height,mxUtils$1.getValue(this.state.style,"jettyHeight",be.prototype.jettyHeight)));return new mxPoint(X.x+he/2,X.y+ye*2)},function(X,he){this.state.style.jettyWidth=Math.round(Math.max(0,Math.min(X.width,he.x-X.x))*2),this.state.style.jettyHeight=Math.round(Math.max(0,Math.min(X.height,he.y-X.y))/2)})];return j},corner:function(H){return[x(H,["dx","dy"],function(j){var X=Math.max(0,Math.min(j.width,mxUtils$1.getValue(this.state.style,"dx",$.prototype.dx))),he=Math.max(0,Math.min(j.height,mxUtils$1.getValue(this.state.style,"dy",$.prototype.dy)));return new mxPoint(j.x+X,j.y+he)},function(j,X){this.state.style.dx=Math.round(Math.max(0,Math.min(j.width,X.x-j.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(j.height,X.y-j.y)))},!1)]},tee:function(H){return[x(H,["dx","dy"],function(j){var X=Math.max(0,Math.min(j.width,mxUtils$1.getValue(this.state.style,"dx",U.prototype.dx))),he=Math.max(0,Math.min(j.height,mxUtils$1.getValue(this.state.style,"dy",U.prototype.dy)));return new mxPoint(j.x+(j.width+X)/2,j.y+he)},function(j,X){this.state.style.dx=Math.round(Math.max(0,Math.min(j.width/2,X.x-j.x-j.width/2)*2)),this.state.style.dy=Math.round(Math.max(0,Math.min(j.height,X.y-j.y)))},!1)]},singleArrow:ee(1),doubleArrow:ee(.5),folder:function(H){return[x(H,["tabWidth","tabHeight"],function(j){var X=Math.max(0,Math.min(j.width,mxUtils$1.getValue(this.state.style,"tabWidth",c.prototype.tabWidth))),he=Math.max(0,Math.min(j.height,mxUtils$1.getValue(this.state.style,"tabHeight",c.prototype.tabHeight)));return mxUtils$1.getValue(this.state.style,"tabPosition",c.prototype.tabPosition)==mxConstants$1.ALIGN_RIGHT&&(X=j.width-X),new mxPoint(j.x+X,j.y+he)},function(j,X){var he=Math.max(0,Math.min(j.width,X.x-j.x));mxUtils$1.getValue(this.state.style,"tabPosition",c.prototype.tabPosition)==mxConstants$1.ALIGN_RIGHT&&(he=j.width-he),this.state.style.tabWidth=Math.round(he),this.state.style.tabHeight=Math.round(Math.max(0,Math.min(j.height,X.y-j.y)))},!1)]},document:function(H){return[x(H,["size"],function(j){var X=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",w.prototype.size))));return new mxPoint(j.x+3*j.width/4,j.y+(1-X)*j.height)},function(j,X){this.state.style.size=Math.max(0,Math.min(1,(j.y+j.height-X.y)/j.height))},!1)]},tape:function(H){return[x(H,["size"],function(j){var X=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",v.prototype.size))));return new mxPoint(j.getCenterX(),j.y+X*j.height/2)},function(j,X){this.state.style.size=Math.max(0,Math.min(1,(X.y-j.y)/j.height*2))},!1)]},isoCube2:function(H){return[x(H,["isoAngle"],function(j){var X=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.state.style,"isoAngle",h.isoAngle))))*Math.PI/200,he=Math.min(j.width*Math.tan(X),j.height*.5);return new mxPoint(j.x,j.y+he)},function(j,X){this.state.style.isoAngle=Math.max(0,(X.y-j.y)*50/j.height)},!0)]},cylinder2:O(d.prototype.size),cylinder3:O(m.prototype.size),offPageConnector:function(H){return[x(H,["size"],function(j){var X=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",Re.prototype.size))));return new mxPoint(j.getCenterX(),j.y+(1-X)*j.height)},function(j,X){this.state.style.size=Math.max(0,Math.min(1,(j.y+j.height-X.y)/j.height))},!1)]},step:b(B.prototype.size,!0,null,!0,B.prototype.fixedSize),hexagon:b(re.prototype.size,!0,.5,!0,re.prototype.fixedSize),curlyBracket:b(L.prototype.size,!1),display:b(mt.prototype.size,!1),cube:I(1,e.prototype.size,!1),card:I(.5,C.prototype.size,!0),loopLimit:I(.5,xe.prototype.size,!0),trapezoid:y(.5,P.prototype.size,P.prototype.fixedSize),parallelogram:y(1,T.prototype.size,T.prototype.fixedSize)};Graph$1.createHandle=x,Graph$1.handleFactory=Rt;var Be=mxVertexHandler.prototype.createCustomHandles;mxVertexHandler.prototype.createCustomHandles=function(){var H=Be.apply(this,arguments);if(this.graph.isCellRotatable(this.state.cell)){var j=this.state.style.shape;mxCellRenderer.defaultShapes[j]==null&&mxStencilRegistry.getStencil(j)==null?j=mxConstants$1.SHAPE_RECTANGLE:this.state.view.graph.isSwimlane(this.state.cell)&&(j=mxConstants$1.SHAPE_SWIMLANE);var X=Rt[j];if(X==null&&this.state.shape!=null&&this.state.shape.isRoundable()&&(X=Rt[mxConstants$1.SHAPE_RECTANGLE]),X!=null){var he=X(this.state);he!=null&&(H==null?H=he:H=H.concat(he))}}return H},mxEdgeHandler.prototype.createCustomHandles=function(){var H=this.state.style.shape;mxCellRenderer.defaultShapes[H]==null&&mxStencilRegistry.getStencil(H)==null&&(H=mxConstants$1.SHAPE_CONNECTOR);var j=Rt[H];return j!=null?j(this.state):null}}else Graph$1.createHandle=function(){},Graph$1.handleFactory={};var Ae=new mxPoint(1,0),We=new mxPoint(1,0),ze=mxUtils$1.toRadians(-30),$e=Math.cos(ze),st=Math.sin(ze);Ae=mxUtils$1.getRotatedPoint(Ae,$e,st);var ht=mxUtils$1.toRadians(-150),ot=Math.cos(ht),ft=Math.sin(ht);We=mxUtils$1.getRotatedPoint(We,ot,ft),mxEdgeStyle.IsometricConnector=function(x,M,D,y,b){var I=x.view,O=y!=null&&y.length>0?y[0]:null,ee=x.absolutePoints,ae=ee[0],Ce=ee[ee.length-1];O!=null&&(O=I.transformControlPoint(x,O)),ae==null&&M!=null&&(ae=new mxPoint(M.getCenterX(),M.getCenterY())),Ce==null&&D!=null&&(Ce=new mxPoint(D.getCenterX(),D.getCenterY()));var H=Ae.x,j=Ae.y,X=We.x,he=We.y,ye=mxUtils$1.getValue(x.style,"elbow","horizontal")=="horizontal";if(Ce!=null&&ae!=null){let Me=function(Ue,Xe,ut){var vt=Ue-Se.x,Pt=Xe-Se.y,$t=(he*vt-X*Pt)/(H*he-j*X),Nt=(j*vt-H*Pt)/(j*X-H*he);ye?(ut&&(Se=new mxPoint(Se.x+H*$t,Se.y+j*$t),b.push(Se)),Se=new mxPoint(Se.x+X*Nt,Se.y+he*Nt),b.push(Se)):(ut&&(Se=new mxPoint(Se.x+X*Nt,Se.y+he*Nt),b.push(Se)),Se=new mxPoint(Se.x+H*$t,Se.y+j*$t),b.push(Se))};var Ee=Me,Se=ae;O==null&&(O=new mxPoint(ae.x+(Ce.x-ae.x)/2,ae.y+(Ce.y-ae.y)/2)),Me(O.x,O.y,!0),Me(Ce.x,Ce.y,!1)}},mxStyleRegistry.putValue("isometricEdgeStyle",mxEdgeStyle.IsometricConnector);var gt=Graph$1.prototype.createEdgeHandler;Graph$1.prototype.createEdgeHandler=function(x,M){if(M==mxEdgeStyle.IsometricConnector){var D=new mxElbowEdgeHandler(x);return D.snapToTerminals=!1,D}return gt.apply(this,arguments)},n.prototype.constraints=[],s.prototype.getConstraints=function(x,M,D){var y=[],b=Math.tan(mxUtils$1.toRadians(30)),I=(.5-b)/2,O=Math.min(M,D/(.5+b)),ee=(M-O)/2,ae=(D-O)/2;return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ee,ae+.25*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ee+.5*O,ae+O*I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ee+O,ae+.25*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ee+O,ae+.75*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ee+.5*O,ae+(1-I)*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ee,ae+.75*O)),y},h.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,I=Math.min(M*Math.tan(b),D*.5);return y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,I)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,D-I)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,D-I)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,I)),y},Z.prototype.getConstraints=function(x,M,D){var y=[];mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;var b=Math.max(0,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));M*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position",this.position))));var I=M*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position2",this.position2))));return Math.max(0,Math.min(M,parseFloat(mxUtils$1.getValue(this.style,"base",this.base)))),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.25,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.75,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,(D-b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,D-b)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,I,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,D-b)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(D-b)*.5)),M>=b*2&&y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y},mxRectangleShape.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0)],mxEllipse.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5))],dt.prototype.constraints=mxRectangleShape.prototype.constraints,mxImageShape.prototype.constraints=mxRectangleShape.prototype.constraints,mxSwimlane.prototype.constraints=mxRectangleShape.prototype.constraints,se.prototype.constraints=mxRectangleShape.prototype.constraints,mxLabel.prototype.constraints=mxRectangleShape.prototype.constraints,a.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(0,Math.min(M,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-b)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b*.5,b*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,b)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,(D+b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),M>=b*2&&y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y},C.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(0,Math.min(M,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+b)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b*.5,b*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,b)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(D+b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),M>=b*2&&y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y},e.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(0,Math.min(M,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-b)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b*.5,b*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,b)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,(D+b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+b)*.5,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b*.5,D-b*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,D-b)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(D-b)*.5)),y},m.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(0,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));return y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,b)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,b)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1,null,0,-b)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1,null,0,-b)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,b+(D*.5-b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,b+(D*.5-b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,D-b-(D*.5-b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,D-b-(D*.5-b)*.5)),y.push(new mxConnectionConstraint(new mxPoint(.145,0),!1,null,0,b*.29)),y.push(new mxConnectionConstraint(new mxPoint(.855,0),!1,null,0,b*.29)),y.push(new mxConnectionConstraint(new mxPoint(.855,1),!1,null,0,-b*.29)),y.push(new mxConnectionConstraint(new mxPoint(.145,1),!1,null,0,-b*.29)),y},c.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(0,Math.min(M,parseFloat(mxUtils$1.getValue(this.style,"tabWidth",this.tabWidth)))),I=Math.max(0,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"tabHeight",this.tabHeight)))),O=mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition);return O=="left"?(y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+b)*.5,I))):(y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-b)*.5,I))),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,(D-I)*.25+I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,(D-I)*.5+I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,(D-I)*.75+I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(D-I)*.25+I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(D-I)*.5+I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(D-I)*.75+I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,D)),y.push(new mxConnectionConstraint(new mxPoint(.25,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.75,1),!1)),y},E.prototype.constraints=mxRectangleShape.prototype.constraints,K.prototype.constraints=mxRectangleShape.prototype.constraints,we.prototype.constraints=mxEllipse.prototype.constraints,_e.prototype.constraints=mxEllipse.prototype.constraints,Oe.prototype.constraints=mxEllipse.prototype.constraints,qe.prototype.constraints=mxEllipse.prototype.constraints,Ke.prototype.constraints=mxRectangleShape.prototype.constraints,lt.prototype.constraints=mxRectangleShape.prototype.constraints,mt.prototype.getConstraints=function(x,M,D){var y=[],b=Math.min(M,D/2),I=Math.min(M-b,Math.max(0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))*M);return y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,I,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(I+M-b)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b,0)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1,null)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-b,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(I+M-b)*.5,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,I,D)),y},be.prototype.getConstraints=function(x,M,D){var y=parseFloat(mxUtils$1.getValue(x,"jettyWidth",be.prototype.jettyWidth))/2,b=parseFloat(mxUtils$1.getValue(x,"jettyHeight",be.prototype.jettyHeight)),I=[new mxConnectionConstraint(new mxPoint(0,0),!1,null,y),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!1,null,y),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(D-.5*b,1.5*b)),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(D-.5*b,3.5*b))];return D>5*b&&I.push(new mxConnectionConstraint(new mxPoint(0,.75),!1,null,y)),D>8*b&&I.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null,y)),D>15*b&&I.push(new mxConnectionConstraint(new mxPoint(0,.25),!1,null,y)),I},xe.prototype.constraints=mxRectangleShape.prototype.constraints,Re.prototype.constraints=mxRectangleShape.prototype.constraints,mxCylinder.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.15,.05),!1),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.85,.05),!1),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.3),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.7),!0),new mxConnectionConstraint(new mxPoint(.15,.95),!1),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.85,.95),!1)],me.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.1),!1),new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.75,.1),!1),new mxConnectionConstraint(new mxPoint(0,1/3),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(1,1/3),!1),new mxConnectionConstraint(new mxPoint(1,1),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1)],Fe.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],mxActor.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.25,.2),!1),new mxConnectionConstraint(new mxPoint(.1,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.75,.25),!1),new mxConnectionConstraint(new mxPoint(.9,.5),!1),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],g.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(.5,.25),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.5,.75),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],v.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.35),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.65),!1),new mxConnectionConstraint(new mxPoint(1,.35),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,.65),!1),new mxConnectionConstraint(new mxPoint(.25,1),!1),new mxConnectionConstraint(new mxPoint(.75,0),!1)],B.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxLine.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],Ve.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.5,1),!1)],mxDoubleEllipse.prototype.constraints=mxEllipse.prototype.constraints,mxRhombus.prototype.constraints=mxEllipse.prototype.constraints,mxTriangle.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxHexagon.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.375,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.625,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.375,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.625,1),!0)],mxCloud.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.25),!1),new mxConnectionConstraint(new mxPoint(.4,.1),!1),new mxConnectionConstraint(new mxPoint(.16,.55),!1),new mxConnectionConstraint(new mxPoint(.07,.4),!1),new mxConnectionConstraint(new mxPoint(.31,.8),!1),new mxConnectionConstraint(new mxPoint(.13,.77),!1),new mxConnectionConstraint(new mxPoint(.8,.8),!1),new mxConnectionConstraint(new mxPoint(.55,.95),!1),new mxConnectionConstraint(new mxPoint(.875,.5),!1),new mxConnectionConstraint(new mxPoint(.96,.7),!1),new mxConnectionConstraint(new mxPoint(.625,.2),!1),new mxConnectionConstraint(new mxPoint(.88,.25),!1)],T.prototype.constraints=mxRectangleShape.prototype.constraints,P.prototype.constraints=mxRectangleShape.prototype.constraints,w.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxArrow.prototype.constraints=null,U.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(0,Math.min(M,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),I=Math.max(0,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,I*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M*.75+b*.25,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+b)*.5,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+b)*.5,(D+I)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+b)*.5,D)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-b)*.5,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-b)*.5,(D+I)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-b)*.5,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M*.25-b*.25,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,I*.5)),y},$.prototype.getConstraints=function(x,M,D){var y=[],b=Math.max(0,Math.min(M,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),I=Math.max(0,Math.min(D,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,I*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+b)*.5,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b,I)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b,(D+I)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,b*.5,D)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),y},R.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],F.prototype.getConstraints=function(x,M,D){var y=[],b=D*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",this.arrowWidth)))),I=M*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",this.arrowSize)))),O=(D-b)/2;return y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-I)*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-I,0)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-I,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M-I)*.5,D-O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,D-O)),y},z.prototype.getConstraints=function(x,M,D){var y=[],b=D*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",F.prototype.arrowWidth)))),I=M*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",F.prototype.arrowSize)))),O=(D-b)/2;return y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,I,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-I,0)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M-I,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M*.5,D-O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,I,D)),y},xt.prototype.getConstraints=function(x,M,D){var y=[],b=Math.min(D,M),I=Math.max(0,Math.min(b,b*parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=(D-I)/2,ee=O+I,ae=(M-I)/2,Ce=ae+I;return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae,O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae,0)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Ce,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Ce,O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Ce,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae,D-O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae,D)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Ce,D)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Ce,D-O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Ce,ee)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+Ce)*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,O)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,M,ee)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(M+Ce)*.5,ee)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae,ee)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,O)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,ee)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae*.5,ee)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,ae,O)),y},fe.prototype.constraints=null,ge.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],de.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.175,.25),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.175,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],He.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],ue.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)]})();var urlParams$1=function(r){var e=new Object,t=r.lastIndexOf("?");if(t>0)for(var i=r.substring(t+1).split("&"),n=0;n<i.length;n++)t=i[n].indexOf("="),t>0&&(e[i[n].substring(0,t)]=i[n].substring(t+1));return e}(window.location.href);(function(){var r=EditorUi.prototype.init;EditorUi.prototype.init=function(){r.apply(this,arguments),this.actions.get("export").setEnabled(!1),this.actions.get("saveAs").setEnabled(!0)},mxResources$1.loadDefaultBundle=!1;var e=mxResources$1.getDefaultBundle(RESOURCE_BASE,void 0)||mxResources$1.getSpecialBundle(RESOURCE_BASE,void 0);mxUtils$1.getAll([e,STYLE_PATH+"/default.xml"],function(t){mxResources$1.parse(t[0].getText());var i=new Object;i[Graph$1.prototype.defaultThemeName]=t[1].getDocumentElement(),new EditorUi(new Editor$1(urlParams$1.chrome=="0",i))},function(){document.body.innerHTML='<center style="margin-top:10%;">Error loading resource files. Please check browser console.</center>'})})();(function(){window.global_a="WINDOW GGGGG"})();var global_a="GGGGG";console.log(global_a);console.log(window.global_a);
